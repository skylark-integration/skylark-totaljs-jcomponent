{"version":3,"sources":["jc.js"],"names":["define","langx","$","totaljs","VBinder","html","t","this","e","element","binders","fn","dom","el","b","attrd","attr","$jcbind","parsebinder","EMPTYARRAY","push","filter","ATTRBIND","each","find","parseHeaders","val","h","split","forEach","line","index","indexOf","substring","toLowerCase","trim","findFormat","a","s","path","FN","com_valid","value","onlyComponent","isExcept","Array","key","join","except","undefined","cache","flags","is","remove","item","length","valid","arr","lastIndexOf","wildcard","pathmaker","all","M","components","i","com","$removed","$loaded","$compare","$except","visible","hidden","enabled","SELINPUT","disabled","$valid_disabled","state","_id","$valid","$interaction","clear","com_dirty","skipEmitState","dirty","$dirty_disabled","$dirty","clean","tmp","charCodeAt","p","rem","W","PLUGINS","com_validate2","$validate","validate","get","mediaquery","mediaqueries","orientation","Math","abs","$w","w","width","height","d","MD","devices","mq","cw","ch","minW","maxW","minH","maxH","oldW","oldH","type","md","min","max","sm","lg","xs","id","attrcom","name","getAttribute","crawler","container","onComponent","level","scopes","document","body","comp","scope","closest","ATTRSCOPE","released","$com","childNodes","sub","tagName","setAttribute","ATTRREL","REGCOM","test","innerHTML","findcomponent","selector","callback","version","stop","$name","$version","$pp","pathscope","findcontrol2","input","$inputcontrol","target","findcontrol","onElement","ACTRLS","load","clearTimeout","$ready","localstorage","localStorage","getItem","$localstorage","TYPE_S","storage","PARSE","blocked","obj","OK","set","loaded","dependencies","declaration","importing","WAIT","wait","next","TYPE_FN","IMPORT","setTimeout","compile","C","recompile","READY","apply","jComponent","shift","download","pending","has","meta","REGMETA","statics","instances","y","keys","$components","lazy","versions","lo","namea","lazycom","fallback","COM","parent","parentNode","pc","owner","$children","nodeName","global","shared","$noscope","setPath","config","reconfigure","NOOP","$init","siblings","$lazy","configs","con","current_com","call","init","code","output","initscopes","replace","$$path","template","$released","warn","format","make","prerender","makeurl","data","c","k","HASH","response","x","imports","rebindbinder","toggles","async","toggle","tclass","nextpending","$scopedata","independent","absolute","reverse","sc","$scope","$initialized","$processed","$isolated","GUID","Scope","ID","elements","slice","isolated","Function","defaults","emitwatch","cls","GET","current_owner","count","ATTRURL","$downloaded","url","once","expire","importcache","canCompile","can","AJAXCACHE","current_element","removescripts","importscripts","importstyles","ATTRDEL","cacherest","method","params","language","$language","STRINGIFY","toString","cachestorage","now","Date","parseExpire","save","builder","en","encodeURIComponent","collection","$input","ready","initialize","pop","prepare","extensions","configure","setter","$prepared","$default","$binded","setterX","done","stateX","n","trigger","off","$jclass","EMIT","$domready","num","fallbackpending","downloadfallback","setTimeout2","splice","IMPORTCACHE","fallbackcache","watches","self","context","j","jl","$path","refresh","cleaner","autofill","parser","str","REGSCRIPT","text","scr","beg","external","end","eid","append","REGCSS","appendTo","remap","paths","binderbind","parsepath","binder","REGISARR","v","set2","arguments","cleaner2","inDOM","events","component","destroy","$main","$data","setter2","getter","getter2","$parser","$formatter","Object","o","$br","R","$remove","DATETIME","NOW","getTime","is2","is3","isPRIVATEMODE","setItem","JSON","stringify","sort","al","bl","LCOMPARER","what","counter","usage","USAGE","$skip","$bindreleased","removed","realtime","nobind","$bindchanges","$state","EXEC","$bindexact","$bindcache","skips","$format","hash","$valuehash","$setter","bt","$bindtimeout","formatter","checked","removewaiter","$W","clearInterval","manually","custom","exechelper","ctx","arg","next_wait","onItem","thread","keypressdelay","$jctimeout","absolutePath","ticks","exec","$rebinder","bindersnew","rebinddecode","parsebinderskip","r","m","jBinder","rki","rk","isValue","notvisible","notnull","backup","$nn","$nv","Tangular","prop","virtual","isCtrl","$ctrl","$dataw","watch","child","classes","bj","items","track","Plugin","jc","REGENV","REGPARAMS","REGEMPTY","REGCOMMA","REGSEARCH","REGFNPLUGIN","REGWILDCARD","ATTRCOM","ATTRDATA","DIACRITICS","225","228","269","271","233","283","357","382","250","367","252","369","237","239","244","243","246","353","318","314","253","255","263","345","341","328","337","INPUT","TEXTAREA","SELECT","DEFMODEL","MULTIPLE","TYPE_N","TYPE_O","KEY_ENV","window","Intl","Collator","compare","localeCompare","WARN","console","jctmp","FUNC","pmk","removeItem","temp","singletons","schedulers","waits","proxy","ajaxconfig","schedulercounter","mediaqueriescounter","knockknockcounter","MAIN","jC","EMPTYOBJECT","DEF","ENV","environment","delay","delaywatcher","delaybinder","delayrepeat","keypress","jsoncompress","jsondate","ajaxerrors","headers","X-Requested-With","pingdata","baseurl","root","jsonconverter","text json","thousandsseparator","decimalseparator","dateformat","MONTHS","months","DAYS","days","skipproxy","MV","validators","phone","email","MR","regexp","date","pluralize","transforms","compiler","freeze","VBP","prototype","on","model","VBIND","VBINDARRAY","$vbindarray","checksum","serialize","sum","$bchecksum","$vbind","NEWTRANSFORM","TRANSFORM","cb","SET","env","FREE","timeout","EVALUATE","expression","nopath","exp","COOKIES","cookie","charAt","setTime","toGMTString","FORMATTER","unshift","PARSER","UPLOAD","progress","location","pathname","toUpperCase","isCredentials","match","$env","process","error","upload","cancel","xhr","XMLHttpRequest","withCredentials","addEventListener","responseText","status","statusText","getAllResponseHeaders","onprogress","evt","percentage","lengthComputable","round","total","transferSpeed","timeRemaining","open","setRequestHeader","send","UNWATCH","OFF","WATCH","ON","cleararr","args","CHANGED","CHANGE","used","insert","preparator","first","wf","wo","protocol","ext","index2","createElement","onload","jQuery","src","getElementsByTagName","appendChild","stl","rel","href","AJAX","CACHEPATH","rebind","CACHE","SCROLLBARWIDTH","getElementById","offsetWidth","clientWidth","removeChild","REMOVECACHE","isSearching","MODIFY","LASTMODIFICATION","dt","add","FIND","MAKEPARAMS","values","l","search","query","parseQuery","param","READPARAMS","decodeURIComponent","AJAXCONFIG","td","repeat","qs","options","converters","contentType","extend","crossDomain","xhrFields","ROOT","opt","success","req","ct","ajax","AJAXCACHEREVIEW","review","tdata","uri","diff","err","SCHEDULE","CLEARSCHEDULE","CLEARCACHE","ERRORS","highlight","CAN","DISABLED","INVALID","BLOCKED","local","update","reset","wasset","result","NOTIFY","$ticks","random","REWRITE","inc","current","parseFloat","isNaN","isUpdate","RESET","GETR","VALIDATE","SCP","unwatch","DEFAULT","PUSH","UPDATE","errors","many","SETTER","f","g","RECONFIGURE","PPC","$ppc","fix","notmodified","fields","NOTMODIFIED","$waiter","setInterval","offsetParent","offsetHeight","release","validate2","caller","prev","rattrd","nested","notify","aclass","hclass","rclass","rclass2","manual","noscope","noScope","nocompile","singleton","blind","bindchanges","bindChanges","enable","bindexact","bindExact","bindvisible","bindVisible","readonly","noDirty","noValid","novalidate","noValidate","nodirty","datasource","ds","$datasource","css","main","rcwatch","$rcwatch","$config","cfg","$type","$id","$compile","$class","$reconfigure","sel","TNB","number","boolean","empty","event","isInvalid","invalid","noEmit","style","STYLE","change","setDefault","kill","noClear","removeData","prepend","emit","evaluate","skip","SKIP","rewrite","convert","prototypes","Component","Usage","isMOBILE","navigator","userAgent","isROBOT","isSTANDALONE","standalone","matchMedia","matches","isTOUCH","maxTouchPoints","limit","key2","clearTimeout2","COMPONENT_CONFIG","COMPONENT_EXTEND","RECOMPILE","ADD","COMPILE","COMPONENT","SINGLETON","def","WIDTH","MEDIAQUERY","ids","q","parseInt","regfnplugin","notrim","EXEC2","ok","ctrl","MAKE","OPT","COPY","CLONE","compress","tf","parse","isJSONDate","TOGGLE","SETR","INC","EXTEND","TOGGLE2","EXTEND2","SET2","INC2","PUSH2","UPTODATE","period","condition","reload","PING","execute","onLine","x-ping","x-cookies","cookieEnabled","x-referrer","referrer","MODIFIED","concat","VERSION","noCache","isWaiting","BIND","UPDATE2","SCHEMA","schema","CSS","char","size","KEYPRESS","tkey","interval","run","sleep","Error","$recompile","AP","SP","String","NP","Number","DP","waitFor","take","takeskip","noBase","parseConfig","colon","kv","render","removeDiacritics","buf","isUpper","toSearch","slug","isEmail","isPhone","isURL","findIndex","isFN","isV","findAll","findItem","findValue","toNumber","parseDate","setSeconds","getSeconds","setMinutes","getMinutes","setHours","getHours","setDate","getDate","setMonth","getMonth","setFullYear","getFullYear","toUTC","getTimezoneOffset","utc","padLeft","getMilliseconds","half","before","ismm","isdd","isww","$jcdatempam","zero","one","few","other","decimals","separator","separatorDecimal","dec","minus","padRight","floor","pow","offset","lc","noTime","firstDay","time","parsed","last","quicksort","asc","field","va","vb","at","scalar","isDate","isAvg","isDistinct","BLACKLIST","CREATE","handler","property","receiver","Proxy","Reflect","defineProperty","descriptor","deleteProperty","thisArg","argumentsList","findinstance","parentElement","resize","WW","WH","addClass","removeClass","rattr","removeAttr","isReg","hasClass","toggleClass","asvg","tag","createElementNS","createDocumentFragment","firstChild","psvg","vbind","vbindarray","isarr","rescroll","bottom","scrollIntoView","scrollTop","getBoundingClientRect","scrollHeight","knockknock","$jckeypress","$jcevent","$realtime","$binding","$jcdelay","$delay","$jconly","$keypress","$jcskip","selectedIndex","JBP","wakeup","strict","show","hide","invisible","$ic","htmlbk","valbk","disabledbk","enabledbk","checkedbk","title","titlebk","hrefbk","srcbk","PLUGIN"],"mappings":"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","file":"../jc.js","sourcesContent":["define([\r\n\t\"skylark-langx/langx\",\r\n\t\"skylark-utils-dom/query\",\r\n\t\"./totaljs\"\r\n],function(langx,$,totaljs){\r\n\tvar jc = totaljs.jc = {};\r\n\r\n\t// Constants\r\n\tvar REGCOM = /(data-jc|data-jc-url|data-jc-import|data-bind|bind)=|COMPONENT\\(/;\r\n\tvar REGSCRIPT = /<script\\b[^<]*(?:(?!<\\/script>)<[^<]*)*<\\/script>|<style\\b[^<]*(?:(?!<\\/style>)<[^<]*)*<\\/style>/gi;\r\n\tvar REGCSS = /<style\\b[^<]*(?:(?!<\\/style>)<[^<]*)*<\\/style>/gi;\r\n\tvar REGENV = /(\\[.*?\\])/gi;\r\n\tvar REGPARAMS = /\\{{1,2}[a-z0-9_.-\\s]+\\}{1,2}/gi;\r\n\tvar REGEMPTY = /\\s/g;\r\n\tvar REGCOMMA = /,/g;\r\n\tvar REGSEARCH = /[^a-zA-Zá-žÁ-Žа-яА-Я\\d\\s:]/g;\r\n\tvar REGFNPLUGIN = /[a-z0-9_-]+\\/[a-z0-9_]+\\(|(^|(?=[^a-z0-9]))@[a-z0-9-_]+\\./i;\r\n\tvar REGMETA = /_{2,}/;\r\n\tvar REGWILDCARD = /\\.\\*/;\r\n\tvar REGISARR = /\\[\\d+\\]$/;\r\n\tvar ATTRCOM = '[data-jc]';\r\n\tvar ATTRURL = '[data-jc-url]';\r\n\tvar ATTRBIND = '[data-bind],[bind],[data-vbind]';\r\n\tvar ATTRDATA = 'jc';\r\n\tvar ATTRDEL = 'data-jc-removed';\r\n\tvar ATTRREL = 'data-jc-released';\r\n\tvar ATTRSCOPE = 'data-jc-scope';\r\n\tvar SELINPUT = 'input,textarea,select';\r\n\tvar DIACRITICS = {225:'a',228:'a',269:'c',271:'d',233:'e',283:'e',357:'t',382:'z',250:'u',367:'u',252:'u',369:'u',237:'i',239:'i',244:'o',243:'o',246:'o',353:'s',318:'l',314:'l',253:'y',255:'y',263:'c',345:'r',341:'r',328:'n',337:'o'};\r\n\tvar ACTRLS = { INPUT: true, TEXTAREA: true, SELECT: true };\r\n\tvar DEFMODEL = { value: null };\r\n\tvar OK = Object.keys;\r\n\tvar MULTIPLE = ' + ';\r\n\tvar TYPE_FN = 'function';\r\n\tvar TYPE_S = 'string';\r\n\tvar TYPE_N = 'number';\r\n\tvar TYPE_O = 'object';\r\n\tvar KEY_ENV = 'environment';\r\n\r\n\tvar LCOMPARER = window.Intl ? window.Intl.Collator().compare : function(a, b) {\r\n\t\treturn a.localeCompare(b);\r\n\t};\r\n\r\n\tvar C = {}; // COMPILER\r\n\tvar M = {}; // MAIN\r\n\tvar W = window;\r\n\r\n\tvar warn = W.WARN = function() {\r\n\t\tW.console && W.console.warn.apply(W.console, arguments);\r\n\t};\r\n\r\n\t// temporary\r\n\tW.jctmp = {};\r\n\tW.W = window;\r\n\tW.FUNC = {};\r\n\r\n\ttry {\r\n\t\tvar pmk = 'jc.test';\r\n\t\tW.localStorage.setItem(pmk, '1');\r\n\t\tW.isPRIVATEMODE = W.localStorage.getItem(pmk) !== '1';\r\n\t\tW.localStorage.removeItem(pmk);\r\n\t} catch (e) {\r\n\t\tW.isPRIVATEMODE = true;\r\n\t}\r\n\r\n\t// Internal cache\r\n\tvar blocked = {};\r\n\tvar storage = {};\r\n\tvar extensions = {}; // COMPONENT_EXTEND()\r\n\tvar configs = [];\r\n\tvar cache = {};\r\n\tvar fallback = { $: 0 }; // $ === count of new items in fallback\r\n\tvar fallbackpending = [];\r\n\tvar paths = {}; // saved paths from get() and set()\r\n\tvar events = {};\r\n\tvar watches = [];\r\n\tvar temp = {};\r\n\tvar mediaqueries = [];\r\n\tvar singletons = {};\r\n\tvar schedulers = [];\r\n\tvar toggles = [];\r\n\tvar versions = {};\r\n\tvar autofill = [];\r\n\tvar defaults = {};\r\n\tvar waits = {};\r\n\tvar statics = {};\r\n\tvar proxy = {};\r\n\tvar ajaxconfig = {};\r\n\tvar skips = {};\r\n\tvar $ready = setTimeout(load, 2);\r\n\tvar $loaded = false;\r\n\tvar $domready = false;\r\n\tvar schedulercounter = 0;\r\n\tvar mediaqueriescounter = 0;\r\n\tvar knockknockcounter = 0;\r\n\tvar binders = {};\r\n\tvar bindersnew = [];\r\n\tvar lazycom = {};\r\n\r\n\tvar current_owner = null;\r\n\tvar current_element = null;\r\n\tvar current_com = null;\r\n\r\n\tW.MAIN = W.M = W.jC = W.COM = M;\r\n\tW.PLUGINS = {};\r\n\tW.EMPTYARRAY = [];\r\n\tW.EMPTYOBJECT = {};\r\n\tW.DATETIME = W.NOW = new Date();\r\n\r\n\tvar MD = W.DEF = M.defaults = {};\r\n\tvar ENV = MD.environment = {};\r\n\tMD.scope = W;\r\n\tMD.delay = 555;\r\n\tMD.delaywatcher = 555;\r\n\tMD.delaybinder = 200;\r\n\tMD.delayrepeat = 2000;\r\n\tMD.keypress = true;\r\n\tMD.localstorage = true;\r\n\tMD.jsoncompress = false;\r\n\tMD.jsondate = true;\r\n\tMD.ajaxerrors = false;\r\n\tMD.fallback = 'https://cdn.componentator.com/j-{0}.html';\r\n\tMD.fallbackcache = '';\r\n\tMD.version = '';\r\n\tMD.headers = { 'X-Requested-With': 'XMLHttpRequest' };\r\n\tMD.devices = { xs: { max: 768 }, sm: { min: 768, max: 992 }, md: { min: 992, max: 1200 }, lg: { min: 1200 }};\r\n\tMD.importcache = 'session';\r\n\tMD.pingdata = {};\r\n\tMD.baseurl = ''; // String or Function\r\n\tMD.root = ''; // String or Function\r\n\tMD.makeurl = null; // Function\r\n\tMD.jsonconverter = {\r\n\t\t'text json': function(text) {\r\n\t\t\treturn PARSE(text);\r\n\t\t}\r\n\t};\r\n\r\n\tMD.thousandsseparator = ' ';\r\n\tMD.decimalseparator = '.';\r\n\tMD.dateformat = null;\r\n\r\n\tW.MONTHS = M.months = 'January,February,March,April,May,June,July,August,September,October,November,December'.split(',');\r\n\tW.DAYS = M.days = 'Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday'.split(',');\r\n\r\n\tM.skipproxy = '';\r\n\r\n\tvar MV = M.validators = {};\r\n\tMV.url = /^(https?:\\/\\/(?:www\\.|(?!www))[^\\s.#!:?+=&@!$'~*,;/()[\\]]+\\.[^\\s#!?+=&@!$'~*,;()[\\]\\\\]{2,}\\/?|www\\.[^\\s#!:.?+=&@!$'~*,;/()[\\]]+\\.[^\\s#!?+=&@!$'~*,;()[\\]\\\\]{2,}\\/?)/i;\r\n\tMV.phone = /^[+]?[(]?[0-9]{3}[)]?[-\\s.]?[0-9]{3}[-\\s.]?[0-9]{4,6}$/im;\r\n\tMV.email = /^[a-zA-Z0-9-_.+]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$/i;\r\n\r\n\tvar MR = M.regexp = {};\r\n\tMR.int = /(-|\\+)?[0-9]+/;\r\n\tMR.float = /(-|\\+)?[0-9.,]+/;\r\n\tMR.date = /yyyy|yy|MMMM|MMM|MM|M|dddd|ddd|dd|d|HH|H|hh|h|mm|m|ss|s|a|ww|w/g;\r\n\tMR.pluralize = /#{1,}/g;\r\n\tMR.format = /\\{\\d+\\}/g;\r\n\r\n\tM.loaded = false;\r\n\tM.version = 16.044;\r\n\tM.$localstorage = 'jc';\r\n\tM.$version = '';\r\n\tM.$language = '';\r\n\r\n\tM.$components = {};\r\n\tM.components = [];\r\n\tM.$formatter = [];\r\n\tM.$parser = [];\r\n\tM.transforms = {};\r\n\tM.compiler = C;\r\n\tC.is = false;\r\n\tC.recompile = false;\r\n\tC.importing = 0;\r\n\tC.pending = [];\r\n\tC.init = [];\r\n\tC.imports = {};\r\n\tC.ready = [];\r\n\tC.counter = 0;\r\n\r\n\tif (Object.freeze) {\r\n\t\tObject.freeze(EMPTYOBJECT);\r\n\t\tObject.freeze(EMPTYARRAY);\r\n\t}\r\n\r\n\tM.compile = compile;\r\n\r\n\tfunction VBinder(html) {\r\n\t\tvar t = this;\r\n\t\tvar e = t.element = $(html);\r\n\t\tt.binders = [];\r\n\t\tvar fn = function() {\r\n\t\t\tvar dom = this;\r\n\t\t\tvar el = $(dom);\r\n\t\t\tvar b = el.attrd('bind') || el.attr('bind') || el.attrd('vbind');\r\n\t\t\tdom.$jcbind = parsebinder(dom, b, EMPTYARRAY);\r\n\t\t\tdom.$jcbind && t.binders.push(dom.$jcbind);\r\n\t\t};\r\n\t\te.filter(ATTRBIND).each(fn);\r\n\t\te.find(ATTRBIND).each(fn);\r\n\t}\r\n\r\n\tvar VBP = VBinder.prototype;\r\n\r\n\tVBP.on = function() {\r\n\t\tvar t = this;\r\n\t\tt.element.on.apply(t.element, arguments);\r\n\t\treturn t;\r\n\t};\r\n\r\n\tVBP.remove = function() {\r\n\t\tvar t = this;\r\n\t\tvar e = t.element;\r\n\t\te.find('*').off();\r\n\t\te.off().remove();\r\n\t\tt.element = null;\r\n\t\tt.binders = null;\r\n\t\tt = null;\r\n\t\treturn t;\r\n\t};\r\n\r\n\tVBP.set = function(path, model) {\r\n\r\n\t\tvar t = this;\r\n\r\n\t\tif (model == null) {\r\n\t\t\tmodel = path;\r\n\t\t\tpath = '';\r\n\t\t}\r\n\r\n\t\tfor (var i = 0; i < t.binders.length; i++) {\r\n\t\t\tvar b = t.binders[i];\r\n\t\t\tif (!path || path === b.path) {\r\n\t\t\t\tvar val = path || !b.path ? model : get(b.path, model);\r\n\t\t\t\tt.binders[i].exec(val, b.path);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn t;\r\n\t};\r\n\r\n\tW.VBIND = function(html) {\r\n\t\treturn new VBinder(html);\r\n\t};\r\n\r\n\tW.VBINDARRAY = function(html, el) {\r\n\t\tvar obj = {};\r\n\t\tobj.html = html;\r\n\t\tobj.items = [];\r\n\t\tobj.element = el instanceof COM ? el.element : $(el);\r\n\t\tobj.element[0].$vbindarray = obj;\r\n\t\tobj.remove = function() {\r\n\t\t\tfor (var i = 0; i < obj.items.length; i++)\r\n\t\t\t\tobj.items[i].remove();\r\n\t\t\tobj.checksum = null;\r\n\t\t\tobj.items = null;\r\n\t\t\tobj.html = null;\r\n\t\t\tobj.element = null;\r\n\t\t};\r\n\r\n\t\tvar serialize = function(val) {\r\n\t\t\tswitch (typeof(val)) {\r\n\t\t\t\tcase TYPE_N:\r\n\t\t\t\t\treturn val + '';\r\n\t\t\t\tcase 'boolean':\r\n\t\t\t\t\treturn val ? '1' : '0';\r\n\t\t\t\tcase TYPE_S:\r\n\t\t\t\t\treturn val;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn val == null ? '' : val instanceof Date ? val.getTime() : JSON.stringify(val);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tvar checksum = function(item) {\r\n\t\t\tvar sum = 0;\r\n\t\t\tvar binder = obj.items[0];\r\n\t\t\tif (binder) {\r\n\t\t\t\tfor (var j = 0; j < binder.binders.length; j++) {\r\n\t\t\t\t\tvar b = binder.binders[j];\r\n\t\t\t\t\tvar p = b.path;\r\n\t\t\t\t\tif (b.track) {\r\n\t\t\t\t\t\tfor (var i = 0; i < b.track.length; i++)\r\n\t\t\t\t\t\t\tsum += serialize(get((p ? (p + '.') : '') + b.track[i].substring(1), item));\r\n\t\t\t\t\t} else\r\n\t\t\t\t\t\tsum += serialize(p ? get(p, item) : item);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn HASH(sum);\r\n\t\t};\r\n\r\n\t\tobj.set = function(index, value) {\r\n\r\n\t\t\tvar sum = null;\r\n\r\n\t\t\tif (!(index instanceof Array)) {\r\n\t\t\t\tvar item = obj.items[index];\r\n\t\t\t\tif (item) {\r\n\t\t\t\t\tsum = checksum(value);\r\n\t\t\t\t\tvar el = item.element[0];\r\n\t\t\t\t\tif (el.$bchecksum !== sum) {\r\n\t\t\t\t\t\tel.$bchecksum = sum;\r\n\t\t\t\t\t\titem.set(value);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn obj;\r\n\t\t\t}\r\n\r\n\t\t\tvalue = index;\r\n\r\n\t\t\tif (obj.items.length > value.length) {\r\n\t\t\t\tvar rem = obj.items.splice(value.length);\r\n\t\t\t\tfor (var i = 0; i < rem.length; i++)\r\n\t\t\t\t\trem[i].remove();\r\n\t\t\t}\r\n\r\n\t\t\tfor (var i = 0; i < value.length; i++) {\r\n\t\t\t\tvar val = value[i];\r\n\t\t\t\tvar item = obj.items[i];\r\n\r\n\t\t\t\tif (!item) {\r\n\t\t\t\t\titem = VBIND(obj.html);\r\n\t\t\t\t\tobj.items.push(item);\r\n\t\t\t\t\titem.element.attrd('index', i);\r\n\t\t\t\t\titem.element[0].$vbind = item;\r\n\t\t\t\t\titem.index = i;\r\n\t\t\t\t\tobj.element.append(item.element);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar el = item.element[0];\r\n\t\t\t\tsum = checksum(val);\r\n\r\n\t\t\t\tif (el.$bchecksum !== sum) {\r\n\t\t\t\t\tel.$bchecksum = sum;\r\n\t\t\t\t\titem.set(val);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\treturn obj;\r\n\t};\r\n\r\n\tW.NEWTRANSFORM = function(name, callback) {\r\n\t\tM.transforms[name] = callback;\r\n\t\treturn W;\r\n\t};\r\n\r\n\tW.TRANSFORM = function(name, value, callback) {\r\n\r\n\t\tvar m = M.transforms;\r\n\r\n\t\tif (arguments.length === 2) {\r\n\t\t\t// name + value (is callback)\r\n\t\t\treturn function(val) {\r\n\t\t\t\tTRANSFORM(name, val, value);\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tvar cb = function() {\r\n\t\t\tif (typeof(callback) === TYPE_S)\r\n\t\t\t\tSET(callback, value);\r\n\t\t\telse\r\n\t\t\t\tcallback(value);\r\n\t\t};\r\n\r\n\t\tvar keys = name.split(',');\r\n\t\tvar async = [];\r\n\t\tvar context = {};\r\n\r\n\t\tcontext.value = value;\r\n\r\n\t\tfor (var i = 0, length = keys.length; i < length; i++) {\r\n\t\t\tvar key = keys[i].trim();\r\n\t\t\tkey && m[key] && async.push(m[key]);\r\n\t\t}\r\n\r\n\t\tif (async.length === 1)\r\n\t\t\tasync[0].call(context, value, function(val) {\r\n\t\t\t\tif (val !== undefined)\r\n\t\t\t\t\tvalue = val;\r\n\t\t\t\tcb();\r\n\t\t\t});\r\n\t\telse if (async.length) {\r\n\t\t\tasync.wait(function(fn, next) {\r\n\t\t\t\tfn.call(context, value, function(val) {\r\n\t\t\t\t\tif (val !== undefined)\r\n\t\t\t\t\t\tvalue = val;\r\n\t\t\t\t\tnext();\r\n\t\t\t\t});\r\n\t\t\t}, cb);\r\n\t\t} else\r\n\t\t\tcb();\r\n\r\n\t\treturn W;\r\n\t};\r\n\r\n\t// ===============================================================\r\n\t// MAIN FUNCTIONS\r\n\t// ===============================================================\r\n\r\n\tW.ENV = function(name, value) {\r\n\r\n\t\tif (typeof(name) === TYPE_O) {\r\n\t\t\tname && OK(name).forEach(function(key) {\r\n\t\t\t\tENV[key] = name[key];\r\n\t\t\t\tEMIT(KEY_ENV, key, name[key]);\r\n\t\t\t});\r\n\t\t\treturn name;\r\n\t\t}\r\n\r\n\t\tif (value !== undefined) {\r\n\t\t\tEMIT(KEY_ENV, name, value);\r\n\t\t\tENV[name] = value;\r\n\t\t\treturn value;\r\n\t\t}\r\n\r\n\t\treturn ENV[name];\r\n\t};\r\n\r\n\tM.environment = function(name, version, language, env) {\r\n\t\tM.$localstorage = name;\r\n\t\tM.$version = version || '';\r\n\t\tM.$language = language || '';\r\n\t\tenv && ENV(env);\r\n\t\treturn M;\r\n\t};\r\n\r\n\tW.FREE = function(timeout) {\r\n\t\tsetTimeout2('$clean', cleaner, timeout || 10);\r\n\t\treturn M;\r\n\t};\r\n\r\n\tW.EVALUATE = function(path, expression, nopath) {\r\n\r\n\t\tvar key = 'eval' + expression;\r\n\t\tvar exp = temp[key];\r\n\t\tvar val = null;\r\n\r\n\t\tif (nopath)\r\n\t\t\tval = path;\r\n\t\telse\r\n\t\t\tval = get(path);\r\n\r\n\t\tif (exp)\r\n\t\t\treturn exp.call(val, val, path);\r\n\r\n\t\tif (expression.indexOf('return') === -1)\r\n\t\t\texpression = 'return ' + expression;\r\n\r\n\t\texp = new Function('value', 'path', expression);\r\n\t\ttemp[key] = exp;\r\n\t\treturn exp.call(val, val, path);\r\n\t};\r\n\r\n\tW.COOKIES = {\r\n\t\tget: function(name) {\r\n\t\t\tname = name.env();\r\n\t\t\tvar arr = document.cookie.split(';');\r\n\t\t\tfor (var i = 0; i < arr.length; i++) {\r\n\t\t\t\tvar c = arr[i];\r\n\t\t\t\tif (c.charAt(0) === ' ')\r\n\t\t\t\t\tc = c.substring(1);\r\n\t\t\t\tvar v = c.split('=');\r\n\t\t\t\tif (v.length > 1 && v[0] === name)\r\n\t\t\t\t\treturn v[1];\r\n\t\t\t}\r\n\t\t\treturn '';\r\n\t\t},\r\n\t\tset: function(name, value, expire) {\r\n\t\t\tvar type = typeof(expire);\r\n\t\t\tif (type === TYPE_N) {\r\n\t\t\t\tvar date = W.NOW;\r\n\t\t\t\tdate.setTime(date.getTime() + (expire * 24 * 60 * 60 * 1000));\r\n\t\t\t\texpire = date;\r\n\t\t\t} else if (type === TYPE_S)\r\n\t\t\t\texpire = new Date(Date.now() + expire.parseExpire());\r\n\t\t\tdocument.cookie = name.env() + '=' + value + '; expires=' + expire.toGMTString() + '; path=/';\r\n\t\t},\r\n\t\trem: function(name) {\r\n\t\t\tCOOKIES.set(name.env(), '', -1);\r\n\t\t}\r\n\t};\r\n\r\n\tW.FORMATTER = M.formatter = function(value, path, type) {\r\n\r\n\t\tif (typeof(value) === TYPE_FN) {\r\n\t\t\t!M.$formatter && (M.$formatter = []);\r\n\r\n\t\t\t// Prepend\r\n\t\t\tif (path === true)\r\n\t\t\t\tM.$formatter.unshift(value);\r\n\t\t\telse\r\n\t\t\t\tM.$formatter.push(value);\r\n\r\n\t\t\treturn M;\r\n\t\t}\r\n\r\n\t\tvar a = M.$formatter;\r\n\t\tif (a && a.length) {\r\n\t\t\tfor (var i = 0, length = a.length; i < length; i++) {\r\n\t\t\t\tvar val = a[i].call(M, path, value, type);\r\n\t\t\t\tif (val !== undefined)\r\n\t\t\t\t\tvalue = val;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn value;\r\n\t};\r\n\r\n\tW.PARSER = M.parser = function(value, path, type) {\r\n\r\n\t\tif (typeof(value) === TYPE_FN) {\r\n\t\t\t!M.$parser && (M.$parser = []);\r\n\r\n\t\t\t// Prepend\r\n\t\t\tif (path === true)\r\n\t\t\t\tM.$parser.unshift(value);\r\n\t\t\telse\r\n\t\t\t\tM.$parser.push(value);\r\n\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\tvar a = M.$parser;\r\n\t\tif (a && a.length) {\r\n\t\t\tfor (var i = 0, length = a.length; i < length; i++)\r\n\t\t\t\tvalue = a[i].call(M, path, value, type);\r\n\t\t}\r\n\r\n\t\treturn value;\r\n\t};\r\n\r\n\tfunction parseHeaders(val) {\r\n\t\tvar h = {};\r\n\t\tval.split('\\n').forEach(function(line) {\r\n\t\t\tvar index = line.indexOf(':');\r\n\t\t\tif (index !== -1)\r\n\t\t\t\th[line.substring(0, index).toLowerCase()] = line.substring(index + 1).trim();\r\n\t\t});\r\n\t\treturn h;\r\n\t}\r\n\r\n\tfunction findFormat(val) {\r\n\t\tvar a = val.indexOf('-->');\r\n\t\tvar s = 3;\r\n\r\n\t\tif (a === -1) {\r\n\t\t\ta = val.indexOf('->');\r\n\t\t\ts = 2;\r\n\t\t}\r\n\r\n\t\tif (a !== -1) {\r\n\t\t\tif (val.indexOf('/') !== -1 && val.indexOf('(') === -1)\r\n\t\t\t\tval += '(value)';\r\n\t\t}\r\n\r\n\t\treturn a === -1 ? null : { path: val.substring(0, a).trim(), fn: FN(val.substring(a + s).trim()) };\r\n\t}\r\n\r\n\tW.UPLOAD = function(url, data, callback, timeout, progress) {\r\n\r\n\t\tif (typeof(timeout) !== TYPE_N && progress == null) {\r\n\t\t\tprogress = timeout;\r\n\t\t\ttimeout = null;\r\n\t\t}\r\n\r\n\t\tif (!url)\r\n\t\t\turl = location.pathname;\r\n\r\n\t\tvar method = 'POST';\r\n\t\tvar index = url.indexOf(' ');\r\n\t\tvar tmp = null;\r\n\r\n\t\tif (index !== -1)\r\n\t\t\tmethod = url.substring(0, index).toUpperCase();\r\n\r\n\t\tvar isCredentials = method.substring(0, 1) === '!';\r\n\t\tif (isCredentials)\r\n\t\t\tmethod = method.substring(1);\r\n\r\n\t\tvar headers = {};\r\n\t\ttmp = url.match(/\\{.*?\\}/g);\r\n\r\n\t\tif (tmp) {\r\n\t\t\turl = url.replace(tmp, '').replace(/\\s{2,}/g, ' ');\r\n\t\t\ttmp = (new Function('return ' + tmp))();\r\n\t\t\tif (typeof(tmp) === TYPE_O)\r\n\t\t\t\theaders = tmp;\r\n\t\t}\r\n\r\n\t\turl = url.substring(index).trim().$env();\r\n\r\n\t\tif (typeof(callback) === TYPE_N) {\r\n\t\t\ttimeout = callback;\r\n\t\t\tcallback = undefined;\r\n\t\t}\r\n\r\n\t\tvar output = {};\r\n\t\toutput.url = url;\r\n\t\toutput.process = true;\r\n\t\toutput.error = false;\r\n\t\toutput.upload = true;\r\n\t\toutput.method = method;\r\n\t\toutput.data = data;\r\n\r\n\t\tEMIT('request', output);\r\n\r\n\t\tif (output.cancel)\r\n\t\t\treturn;\r\n\r\n\t\tsetTimeout(function() {\r\n\r\n\t\t\tvar xhr = new XMLHttpRequest();\r\n\r\n\t\t\tif (isCredentials)\r\n\t\t\t\txhr.withCredentials = true;\r\n\r\n\t\t\txhr.addEventListener('load', function() {\r\n\r\n\t\t\t\tvar self = this;\r\n\t\t\t\tvar r = self.responseText;\r\n\t\t\t\ttry {\r\n\t\t\t\t\tr = PARSE(r, MD.jsondate);\r\n\t\t\t\t} catch (e) {}\r\n\r\n\t\t\t\tif (progress) {\r\n\t\t\t\t\tif (typeof(progress) === TYPE_S)\r\n\t\t\t\t\t\tremap(progress, 100);\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tprogress(100);\r\n\t\t\t\t}\r\n\r\n\t\t\t\toutput.response = r;\r\n\t\t\t\toutput.status = self.status;\r\n\t\t\t\toutput.text = self.statusText;\r\n\t\t\t\toutput.error = self.status > 399;\r\n\t\t\t\toutput.headers = parseHeaders(self.getAllResponseHeaders());\r\n\r\n\t\t\t\tEMIT('response', output);\r\n\r\n\t\t\t\tif (!output.process || output.cancel)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tif (!r && output.error)\r\n\t\t\t\t\tr = output.response = self.status + ': ' + self.statusText;\r\n\r\n\t\t\t\tif (!output.error || MD.ajaxerrors) {\r\n\t\t\t\t\ttypeof(callback) === TYPE_S ? remap(callback.env(), r) : (callback && callback(r, null, output));\r\n\t\t\t\t} else {\r\n\t\t\t\t\tEMIT('error', output);\r\n\t\t\t\t\toutput.process && typeof(callback) === TYPE_FN && callback({}, r, output);\r\n\t\t\t\t}\r\n\r\n\t\t\t}, false);\r\n\r\n\t\t\txhr.upload.onprogress = function(evt) {\r\n\t\t\t\tif (!progress)\r\n\t\t\t\t\treturn;\r\n\t\t\t\tvar percentage = 0;\r\n\t\t\t\tif (evt.lengthComputable)\r\n\t\t\t\t\tpercentage = Math.round(evt.loaded * 100 / evt.total);\r\n\t\t\t\tif (typeof(progress) === TYPE_S)\r\n\t\t\t\t\tremap(progress.env(), percentage);\r\n\t\t\t\telse\r\n\t\t\t\t\tprogress(percentage, evt.transferSpeed, evt.timeRemaining);\r\n\t\t\t};\r\n\r\n\t\t\txhr.open(method, makeurl(output.url));\r\n\r\n\t\t\tvar keys = OK(MD.headers);\r\n\t\t\tfor (var i = 0; i < keys.length; i++)\r\n\t\t\t\txhr.setRequestHeader(keys[i].env(), MD.headers[keys[i]].env());\r\n\r\n\t\t\tif (headers) {\r\n\t\t\t\tvar keys = OK(headers);\r\n\t\t\t\tfor (var i = 0; i < keys.length; i++)\r\n\t\t\t\t\txhr.setRequestHeader(keys[i], headers[keys[i]]);\r\n\t\t\t}\r\n\r\n\t\t\txhr.send(data);\r\n\r\n\t\t}, timeout || 0);\r\n\r\n\t\treturn W;\r\n\t};\r\n\r\n\tW.UNWATCH = function(path, fn) {\r\n\r\n\t\tif (path.indexOf(MULTIPLE) !== -1) {\r\n\t\t\tvar arr = path.split(MULTIPLE).trim();\r\n\t\t\tfor (var i = 0; i < arr.length; i++)\r\n\t\t\t\tW.UNWATCH(arr[i], fn);\r\n\t\t\treturn W;\r\n\t\t}\r\n\r\n\t\treturn OFF('watch', path, fn);\r\n\t};\r\n\r\n\tW.WATCH = function(path, fn, init) {\r\n\r\n\t\tif (path.indexOf(MULTIPLE) !== -1) {\r\n\t\t\tvar arr = path.split(MULTIPLE).trim();\r\n\t\t\tfor (var i = 0; i < arr.length; i++)\r\n\t\t\t\tW.WATCH(arr[i], fn, init);\r\n\t\t\treturn W;\r\n\t\t}\r\n\r\n\t\tif (typeof(path) === TYPE_FN) {\r\n\t\t\tinit = fn;\r\n\t\t\tfn = path;\r\n\t\t\tpath = '*';\r\n\t\t}\r\n\r\n\t\tvar push = '';\r\n\r\n\t\tif (path.substring(0, 1) === '^') {\r\n\t\t\tpath = path.substring(1);\r\n\t\t\tpush = '^';\r\n\t\t}\r\n\r\n\t\tpath = pathmaker(path, true);\r\n\t\tON(push + 'watch', path, fn, init);\r\n\t\treturn W;\r\n\t};\r\n\r\n\tW.ON = function(name, path, fn, init, context) {\r\n\r\n\t\tif (name.indexOf(MULTIPLE) !== -1) {\r\n\t\t\tvar arr = name.split(MULTIPLE).trim();\r\n\t\t\tfor (var i = 0; i < arr.length; i++)\r\n\t\t\t\tW.ON(arr[i], path, fn, init, context);\r\n\t\t\treturn W;\r\n\t\t}\r\n\r\n\t\tvar push = true;\r\n\r\n\t\tif (name.substring(0, 1) === '^') {\r\n\t\t\tpush = false;\r\n\t\t\tname = name.substring(1);\r\n\t\t}\r\n\r\n\t\tvar owner = null;\r\n\t\tvar index = name.indexOf('#');\r\n\r\n\t\tif (index) {\r\n\t\t\towner = name.substring(0, index).trim();\r\n\t\t\tname = name.substring(index + 1).trim();\r\n\t\t}\r\n\r\n\t\tif (typeof(path) === TYPE_FN) {\r\n\t\t\tfn = path;\r\n\t\t\tpath = name === 'watch' ? '*' : '';\r\n\t\t} else\r\n\t\t\tpath = path.replace('.*', '');\r\n\r\n\t\tvar obj = { name: name, fn: fn, owner: owner || current_owner, context: context || (current_com == null ? undefined : current_com) };\r\n\r\n\t\tif (name === 'watch') {\r\n\t\t\tvar arr = [];\r\n\r\n\t\t\tvar tmp = findFormat(path);\r\n\t\t\tif (tmp) {\r\n\t\t\t\tpath = tmp.path;\r\n\t\t\t\tobj.format = tmp.fn;\r\n\t\t\t}\r\n\r\n\t\t\tif (path.substring(path.length - 1) === '.')\r\n\t\t\t\tpath = path.substring(0, path.length - 1);\r\n\r\n\t\t\t// Temporary\r\n\t\t\tif (path.charCodeAt(0) === 37)\r\n\t\t\t\tpath = 'jctmp.' + path.substring(1);\r\n\r\n\t\t\tpath = path.env();\r\n\r\n\t\t\t// !path = fixed path\r\n\t\t\tif (path.charCodeAt(0) === 33) {\r\n\t\t\t\tpath = path.substring(1);\r\n\t\t\t\tarr.push(path);\r\n\t\t\t} else {\r\n\t\t\t\tvar p = path.split('.');\r\n\t\t\t\tvar s = [];\r\n\t\t\t\tfor (var j = 0; j < p.length; j++) {\r\n\t\t\t\t\tvar b = p[j].lastIndexOf('[');\r\n\t\t\t\t\tif (b !== -1) {\r\n\t\t\t\t\t\tvar c = s.join('.');\r\n\t\t\t\t\t\tarr.push(c + (c ? '.' : '') + p[j].substring(0, b));\r\n\t\t\t\t\t}\r\n\t\t\t\t\ts.push(p[j]);\r\n\t\t\t\t\tarr.push(s.join('.'));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tobj.path = path;\r\n\t\t\tobj.$path = arr;\r\n\r\n\t\t\tif (push)\r\n\t\t\t\twatches.push(obj);\r\n\t\t\telse\r\n\t\t\t\twatches.unshift(obj);\r\n\r\n\t\t\tinit && fn.call(context || M, path, obj.format ? obj.format(get(path), path, 0) : get(path), 0);\r\n\t\t} else {\r\n\t\t\tif (events[name]) {\r\n\t\t\t\tif (push)\r\n\t\t\t\t\tevents[name].push(obj);\r\n\t\t\t\telse\r\n\t\t\t\t\tevents[name].unshift(obj);\r\n\t\t\t} else\r\n\t\t\t\tevents[name] = [obj];\r\n\t\t\t(!C.ready && (name === 'ready' || name === 'init')) && fn();\r\n\t\t}\r\n\t\treturn W;\r\n\t};\r\n\r\n\tW.OFF = function(name, path, fn) {\r\n\r\n\t\tif (name.indexOf('+') !== -1) {\r\n\t\t\tvar arr = name.split('+').trim();\r\n\t\t\tfor (var i = 0; i < arr.length; i++)\r\n\t\t\t\tW.OFF(arr[i], path, fn);\r\n\t\t\treturn W;\r\n\t\t}\r\n\r\n\t\tif (typeof(path) === TYPE_FN) {\r\n\t\t\tfn = path;\r\n\t\t\tpath = '';\r\n\t\t}\r\n\r\n\t\tif (path === undefined)\r\n\t\t\tpath = '';\r\n\r\n\t\tvar owner = null;\r\n\t\tvar index = name.indexOf('#');\r\n\t\tif (index) {\r\n\t\t\towner = name.substring(0, index).trim();\r\n\t\t\tname = name.substring(index + 1).trim();\r\n\t\t}\r\n\r\n\t\tif (path) {\r\n\t\t\tpath = path.replace('.*', '').trim();\r\n\t\t\tvar tmp = findFormat(path);\r\n\t\t\tif (tmp)\r\n\t\t\t\tpath = tmp.path;\r\n\t\t\tif (path.substring(path.length - 1) === '.')\r\n\t\t\t\tpath = path.substring(0, path.length - 1);\r\n\t\t}\r\n\r\n\t\tvar type = 0;\r\n\r\n\t\tif (owner && !path && !fn && !name)\r\n\t\t\ttype = 1;\r\n\t\telse if (owner && name && !fn && !path)\r\n\t\t\ttype = 2;\r\n\t\telse if (owner && name && path)\r\n\t\t\ttype = 3;\r\n\t\telse if (owner && name && path && fn)\r\n\t\t\ttype = 4;\r\n\t\telse if (name && path && fn)\r\n\t\t\ttype = 5;\r\n\t\telse if (name && path)\r\n\t\t\ttype = 7;\r\n\t\telse if (fn)\r\n\t\t\ttype = 6;\r\n\r\n\t\tvar cleararr = function(arr, key) {\r\n\t\t\treturn arr.remove(function(item) {\r\n\t\t\t\tif (type > 2 && type < 5) {\r\n\t\t\t\t\tif (item.path !== path)\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tvar v = false;\r\n\t\t\t\tif (type === 1)\r\n\t\t\t\t\tv = item.owner === owner;\r\n\t\t\t\telse if (type === 2)\r\n\t\t\t\t\tv = key === name && item.owner === owner;\r\n\t\t\t\telse if (type === 3)\r\n\t\t\t\t\tv = key === name && item.owner === owner;\r\n\t\t\t\telse if (type === 4)\r\n\t\t\t\t\tv = key === name && item.owner === owner && item.fn === fn;\r\n\t\t\t\telse if (type === 5 || type === 6)\r\n\t\t\t\t\tv = key === name && item.fn === fn;\r\n\t\t\t\telse if (type === 6)\r\n\t\t\t\t\tv = item.fn === fn;\r\n\t\t\t\telse if (type === 7)\r\n\t\t\t\t\tv = key === name && item.path === path;\r\n\t\t\t\telse\r\n\t\t\t\t\tv = key === name;\r\n\t\t\t\treturn v;\r\n\t\t\t});\r\n\t\t};\r\n\r\n\t\tOK(events).forEach(function(p) {\r\n\t\t\tevents[p] = cleararr(events[p], p);\r\n\t\t\tif (!events[p].length)\r\n\t\t\t\tdelete events[p];\r\n\t\t});\r\n\r\n\t\twatches = cleararr(watches, 'watch');\r\n\t\treturn W;\r\n\t};\r\n\r\n\tW.EMIT = function(name) {\r\n\r\n\t\tvar e = events[name];\r\n\t\tif (!e)\r\n\t\t\treturn false;\r\n\r\n\t\tvar args = [];\r\n\r\n\t\tfor (var i = 1, length = arguments.length; i < length; i++)\r\n\t\t\targs.push(arguments[i]);\r\n\r\n\t\tfor (var i = 0, length = e.length; i < length; i++) {\r\n\t\t\tvar context = e[i].context;\r\n\t\t\tif (context !== undefined && (context === null || context.$removed))\r\n\t\t\t\tcontinue;\r\n\t\t\te[i].fn.apply(context || window, args);\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t};\r\n\r\n\tW.CHANGED = function(path) {\r\n\t\treturn !com_dirty(path);\r\n\t};\r\n\r\n\tW.CHANGE = function(path, value) {\r\n\t\tif (value == null)\r\n\t\t\tvalue = true;\r\n\t\treturn !com_dirty(path, !value);\r\n\t};\r\n\r\n\tM.used = function(path) {\r\n\t\tM.each(function(obj) {\r\n\t\t\t!obj.disabled && obj.used();\r\n\t\t}, path);\r\n\t\treturn M;\r\n\t};\r\n\r\n\tfunction com_valid(path, value, onlyComponent) {\r\n\r\n\t\tvar isExcept = value instanceof Array;\r\n\t\tvar key = 'valid' + path + (isExcept ? '>' + value.join('|') : '');\r\n\t\tvar except = null;\r\n\r\n\t\tif (isExcept) {\r\n\t\t\texcept = value;\r\n\t\t\tvalue = undefined;\r\n\t\t}\r\n\r\n\t\tif (typeof(value) !== 'boolean' && cache[key] !== undefined)\r\n\t\t\treturn cache[key];\r\n\r\n\t\tvar flags = null;\r\n\r\n\t\tif (isExcept) {\r\n\t\t\tvar is = false;\r\n\t\t\tflags = {};\r\n\t\t\texcept = except.remove(function(item) {\r\n\t\t\t\tif (item.substring(0, 1) === '@') {\r\n\t\t\t\t\tflags[item.substring(1)] = true;\r\n\t\t\t\t\tis = true;\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t});\r\n\t\t\t!is && (flags = null);\r\n\t\t\tisExcept = except.length > 0;\r\n\t\t}\r\n\r\n\t\tvar valid = true;\r\n\t\tvar arr = value !== undefined ? [] : null;\r\n\r\n\t\tvar index = path.lastIndexOf('.*');\r\n\t\tvar wildcard = index !== -1;\r\n\t\tif (index !== -1)\r\n\t\t\tpath = path.substring(0, index);\r\n\r\n\t\tpath = pathmaker(path);\r\n\r\n\t\tvar all = M.components;\r\n\t\tfor (var i = 0, length = all.length; i < length; i++) {\r\n\t\t\tvar com = all[i];\r\n\r\n\t\t\tif (!com || com.$removed || !com.$loaded || !com.path || !com.$compare(path) || (isExcept && com.$except(except)))\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tif (flags && ((flags.visible && !com.visible()) || (flags.hidden && !com.hidden()) || (flags.enabled && com.find(SELINPUT).is(':disabled')) || (flags.disabled && com.find(SELINPUT).is(':enabled'))))\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tif (com.disabled || com.$valid_disabled) {\r\n\t\t\t\tarr && com.state && arr.push(com);\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tif (value === undefined) {\r\n\t\t\t\tif (com.$valid === false)\r\n\t\t\t\t\tvalid = false;\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tcom.state && arr.push(com);\r\n\r\n\t\t\tif (!onlyComponent) {\r\n\t\t\t\tif (wildcard || com.path === path) {\r\n\t\t\t\t\tcom.$valid = value;\r\n\t\t\t\t\tcom.$interaction(102);\r\n\t\t\t\t}\r\n\t\t\t} else if (onlyComponent._id === com._id) {\r\n\t\t\t\tcom.$valid = value;\r\n\t\t\t\tcom.$interaction(102);\r\n\t\t\t}\r\n\t\t\tif (com.$valid === false)\r\n\t\t\t\tvalid = false;\r\n\t\t}\r\n\r\n\t\tclear('valid');\r\n\t\tcache[key] = valid;\r\n\t\tstate(arr, 1, 1);\r\n\t\treturn valid;\r\n\t}\r\n\r\n\tfunction com_dirty(path, value, onlyComponent, skipEmitState) {\r\n\r\n\t\tvar isExcept = value instanceof Array;\r\n\t\tvar key = 'dirty' + path + (isExcept ? '>' + value.join('|') : '');\r\n\t\tvar except = null;\r\n\r\n\t\tif (isExcept) {\r\n\t\t\texcept = value;\r\n\t\t\tvalue = undefined;\r\n\t\t}\r\n\r\n\t\tif (typeof(value) !== 'boolean' && cache[key] !== undefined)\r\n\t\t\treturn cache[key];\r\n\r\n\t\tvar dirty = true;\r\n\t\tvar arr = value !== undefined ? [] : null;\r\n\t\tvar flags = null;\r\n\r\n\t\tif (isExcept) {\r\n\t\t\tvar is = false;\r\n\t\t\tflags = {};\r\n\t\t\texcept = except.remove(function(item) {\r\n\t\t\t\tif (item.substring(0, 1) === '@') {\r\n\t\t\t\t\tflags[item.substring(1)] = true;\r\n\t\t\t\t\tis = true;\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t});\r\n\t\t\t!is && (flags = null);\r\n\t\t\tisExcept = except.length > 0;\r\n\t\t}\r\n\r\n\t\tvar index = path.lastIndexOf('.*');\r\n\t\tvar wildcard = index !== -1;\r\n\t\tif (index !== -1)\r\n\t\t\tpath = path.substring(0, index);\r\n\r\n\t\tpath = pathmaker(path);\r\n\r\n\t\tvar all = M.components;\r\n\t\tfor (var i = 0, length = all.length; i < length; i++) {\r\n\t\t\tvar com = all[i];\r\n\r\n\t\t\tif (!com || com.$removed || !com.$loaded || !com.path || !com.$compare(path) || (isExcept && com.$except(except)))\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tif (flags && ((flags.visible && !com.visible()) || (flags.hidden && !com.hidden()) || (flags.enabled && com.find(SELINPUT).is(':disabled')) || (flags.disabled && com.find(SELINPUT).is(':enabled'))))\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tif (com.disabled || com.$dirty_disabled) {\r\n\t\t\t\tarr && com.state && arr.push(com);\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tif (value === undefined) {\r\n\t\t\t\tif (com.$dirty === false)\r\n\t\t\t\t\tdirty = false;\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tcom.state && arr.push(com);\r\n\r\n\t\t\tif (!onlyComponent) {\r\n\t\t\t\tif (wildcard || com.path === path) {\r\n\t\t\t\t\tcom.$dirty = value;\r\n\t\t\t\t\tcom.$interaction(101);\r\n\t\t\t\t}\r\n\t\t\t} else if (onlyComponent._id === com._id) {\r\n\t\t\t\tcom.$dirty = value;\r\n\t\t\t\tcom.$interaction(101);\r\n\t\t\t}\r\n\t\t\tif (com.$dirty === false)\r\n\t\t\t\tdirty = false;\r\n\t\t}\r\n\r\n\t\tclear('dirty');\r\n\t\tcache[key] = dirty;\r\n\r\n\t\t// For double hitting component.state() --> look into COM.invalid()\r\n\t\t!skipEmitState && state(arr, 1, 2);\r\n\t\treturn dirty;\r\n\t}\r\n\r\n\tW.IMPORTCACHE = function(url, expire, target, callback, insert, preparator) {\r\n\r\n\t\tvar w;\r\n\r\n\t\turl = url.$env().replace(/<.*?>/, function(text) {\r\n\t\t\tw = text.substring(1, text.length - 1).trim();\r\n\t\t\treturn '';\r\n\t\t}).trim();\r\n\r\n\t\t// unique\r\n\t\tvar first = url.substring(0, 1);\r\n\t\tvar once = url.substring(0, 5).toLowerCase() === 'once ';\r\n\r\n\t\tif (typeof(target) === TYPE_FN) {\r\n\r\n\t\t\tif (typeof(callback) === TYPE_FN) {\r\n\t\t\t\tpreparator = callback;\r\n\t\t\t\tinsert = true;\r\n\t\t\t} else if (typeof(insert) === TYPE_FN) {\r\n\t\t\t\tpreparator = insert;\r\n\t\t\t\tinsert = true;\r\n\t\t\t}\r\n\r\n\t\t\tcallback = target;\r\n\t\t\ttarget = 'body';\r\n\t\t} else if (typeof(insert) === TYPE_FN) {\r\n\t\t\tpreparator = insert;\r\n\t\t\tinsert = true;\r\n\t\t}\r\n\r\n\t\tif (w) {\r\n\r\n\t\t\tvar wf = w.substring(w.length - 2) === '()';\r\n\t\t\tif (wf)\r\n\t\t\t\tw = w.substring(0, w.length - 2);\r\n\r\n\t\t\tvar wo = GET(w);\r\n\t\t\tif (wf && typeof(wo) === TYPE_FN) {\r\n\t\t\t\tif (wo()) {\r\n\t\t\t\t\tcallback && callback(0);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t} else if (wo) {\r\n\t\t\t\tcallback && callback(0);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (url.substring(0, 2) === '//')\r\n\t\t\turl = location.protocol + url;\r\n\r\n\t\tvar index = url.lastIndexOf(' .');\r\n\t\tvar ext = '';\r\n\r\n\t\tif (index !== -1) {\r\n\t\t\text = url.substring(index).trim().toLowerCase();\r\n\t\t\turl = url.substring(0, index).trim();\r\n\t\t}\r\n\r\n\t\tif (first === '!' || once) {\r\n\r\n\t\t\tif (once)\r\n\t\t\t\turl = url.substring(5);\r\n\t\t\telse\r\n\t\t\t\turl = url.substring(1);\r\n\r\n\t\t\tif (statics[url]) {\r\n\t\t\t\tif (callback) {\r\n\t\t\t\t\tif (statics[url] === 2)\r\n\t\t\t\t\t\tcallback(0);\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tWAIT(function() {\r\n\t\t\t\t\t\t\treturn statics[url] === 2;\r\n\t\t\t\t\t\t}, function() {\r\n\t\t\t\t\t\t\tcallback(0);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn W;\r\n\t\t\t}\r\n\r\n\t\t\tstatics[url] = 1;\r\n\t\t}\r\n\r\n\t\tif (target && target.setPath)\r\n\t\t\ttarget = target.element;\r\n\r\n\t\tif (!target)\r\n\t\t\ttarget = 'body';\r\n\r\n\t\tif (!ext) {\r\n\t\t\tindex = url.lastIndexOf('?');\r\n\t\t\tif (index !== -1) {\r\n\t\t\t\tvar index2 = url.lastIndexOf('.', index);\r\n\t\t\t\tif (index2 !== -1)\r\n\t\t\t\t\text = url.substring(index2, index).toLowerCase();\r\n\t\t\t} else {\r\n\t\t\t\tindex = url.lastIndexOf('.');\r\n\t\t\t\tif (index !== -1)\r\n\t\t\t\t\text = url.substring(index).toLowerCase();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar d = document;\r\n\t\tif (ext === '.js') {\r\n\t\t\tvar scr = d.createElement('script');\r\n\t\t\tscr.type = 'text/javascript';\r\n\t\t\tscr.async = false;\r\n\t\t\tscr.onload = function() {\r\n\t\t\t\tstatics[url] = 2;\r\n\t\t\t\tcallback && callback(1);\r\n\t\t\t\tW.jQuery && setTimeout(compile, 300);\r\n\t\t\t};\r\n\t\t\tscr.src = makeurl(url, true);\r\n\t\t\td.getElementsByTagName('head')[0].appendChild(scr);\r\n\t\t\tEMIT('import', url, $(scr));\r\n\t\t\treturn W;\r\n\t\t}\r\n\r\n\t\tif (ext === '.css') {\r\n\t\t\tvar stl = d.createElement('link');\r\n\t\t\tstl.type = 'text/css';\r\n\t\t\tstl.rel = 'stylesheet';\r\n\t\t\tstl.href = makeurl(url, true);\r\n\t\t\td.getElementsByTagName('head')[0].appendChild(stl);\r\n\t\t\tstatics[url] = 2;\r\n\t\t\tcallback && setTimeout(callback, 200, 1);\r\n\t\t\tEMIT('import', url, $(stl));\r\n\t\t\treturn W;\r\n\t\t}\r\n\r\n\t\tWAIT(function() {\r\n\t\t\treturn !!W.jQuery;\r\n\t\t}, function() {\r\n\r\n\t\t\tstatics[url] = 2;\r\n\t\t\tvar id = 'import' + HASH(url);\r\n\r\n\t\t\tvar cb = function(response, code, output) {\r\n\r\n\t\t\t\tif (!response) {\r\n\t\t\t\t\tcallback && callback(0);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\turl = '$import' + url;\r\n\r\n\t\t\t\tif (preparator)\r\n\t\t\t\t\tresponse = preparator(response, output);\r\n\r\n\t\t\t\tvar is = REGCOM.test(response);\r\n\t\t\t\tresponse = importscripts(importstyles(response, id)).trim();\r\n\t\t\t\ttarget = $(target);\r\n\r\n\t\t\t\tif (response) {\r\n\t\t\t\t\tcurrent_element = target[0];\r\n\t\t\t\t\tif (insert === false)\r\n\t\t\t\t\t\ttarget.html(response);\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\ttarget.append(response);\r\n\t\t\t\t\tcurrent_element = null;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t// is && compile(response ? target : null);\r\n\t\t\t\t\t// because of scopes\r\n\t\t\t\t\tis && compile();\r\n\t\t\t\t\tcallback && WAIT(function() {\r\n\t\t\t\t\t\treturn C.is == false;\r\n\t\t\t\t\t}, function() {\r\n\t\t\t\t\t\tcallback(1);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tEMIT('import', url, target);\r\n\t\t\t\t}, 10);\r\n\t\t\t};\r\n\r\n\t\t\tif (expire)\r\n\t\t\t\tAJAXCACHE('GET ' + url, null, cb, expire);\r\n\t\t\telse\r\n\t\t\t\tAJAX('GET ' + url, cb);\r\n\t\t});\r\n\r\n\t\treturn W;\r\n\t};\r\n\r\n\tW.IMPORT = M.import = function(url, target, callback, insert, preparator) {\r\n\t\tif (url instanceof Array) {\r\n\r\n\t\t\tif (typeof(target) === TYPE_FN) {\r\n\t\t\t\tpreparator = insert;\r\n\t\t\t\tinsert = callback;\r\n\t\t\t\tcallback = target;\r\n\t\t\t\ttarget = null;\r\n\t\t\t}\r\n\r\n\t\t\turl.wait(function(url, next) {\r\n\t\t\t\tIMPORTCACHE(url, null, target, next, insert, preparator);\r\n\t\t\t}, function() {\r\n\t\t\t\tcallback && callback();\r\n\t\t\t});\r\n\t\t} else\r\n\t\t\tIMPORTCACHE(url, null, target, callback, insert, preparator);\r\n\t\treturn W;\r\n\t};\r\n\r\n\tW.CACHEPATH = function(path, expire, rebind) {\r\n\t\tvar key = '$jcpath';\r\n\t\tWATCH(path, function(p, value) {\r\n\t\t\tvar obj = cachestorage(key);\r\n\t\t\tif (obj)\r\n\t\t\t\tobj[path] = value;\r\n\t\t\telse {\r\n\t\t\t\tobj = {};\r\n\t\t\t\tobj[path] = value;\r\n\t\t\t}\r\n\t\t\tcachestorage(key, obj, expire);\r\n\t\t});\r\n\r\n\t\tif (rebind === undefined || rebind) {\r\n\t\t\tvar cache = cachestorage(key);\r\n\t\t\tcache && cache[path] !== undefined && cache[path] !== get(path) && M.set(path, cache[path], true);\r\n\t\t}\r\n\t\treturn W;\r\n\t};\r\n\r\n\r\n\tW.CACHE = function(key, value, expire) {\r\n\t\treturn cachestorage(key, value, expire);\r\n\t};\r\n\r\n\tW.SCROLLBARWIDTH = function() {\r\n\t\tvar id = 'jcscrollbarwidth';\r\n\t\tif (cache[id])\r\n\t\t\treturn cache[id];\r\n\t\tvar b = document.body;\r\n\t\t$(b).append('<div id=\"{0}\" style=\"width{1}height{1}overflow:scroll;position:absolute;top{2}left{2}\"></div>'.format(id, ':100px;', ':9999px;'));\r\n\t\tvar el = document.getElementById(id);\r\n\t\tvar w = cache[id] = el.offsetWidth - el.clientWidth;\r\n\t\tb.removeChild(el);\r\n\t\treturn w;\r\n\t};\r\n\r\n\tW.REMOVECACHE = function(key, isSearching) {\r\n\t\tif (isSearching) {\r\n\t\t\tfor (var m in storage) {\r\n\t\t\t\tif (m.indexOf(key) !== -1)\r\n\t\t\t\t\tdelete storage[key];\r\n\t\t\t}\r\n\t\t} else\r\n\t\t\tdelete storage[key];\r\n\t\tsave();\r\n\t\treturn W;\r\n\t};\r\n\r\n\tW.MODIFY = function(path, value, timeout) {\r\n\t\tif (path && typeof(path) === TYPE_O) {\r\n\t\t\tObject.keys(path).forEach(function(k) {\r\n\t\t\t\tMODIFY(k, path[k], value);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tif (typeof(value) === TYPE_FN)\r\n\t\t\t\tvalue = value(GET(path));\r\n\t\t\tSET(path, value, timeout);\r\n\t\t\tif (timeout)\r\n\t\t\t\tsetTimeout(CHANGE, timeout + 5, path);\r\n\t\t\telse\r\n\t\t\t\tCHANGE(path);\r\n\t\t}\r\n\t\treturn W;\r\n\t};\r\n\r\n\tW.LASTMODIFICATION = W.USAGE = M.usage = function(name, expire, path, callback) {\r\n\r\n\t\tvar type = typeof(expire);\r\n\t\tif (type === TYPE_S) {\r\n\t\t\tvar dt = W.NOW = W.DATETIME = new Date();\r\n\t\t\texpire = dt.add('-' + expire.env()).getTime();\r\n\t\t} else if (type === TYPE_N)\r\n\t\t\texpire = Date.now() - expire;\r\n\r\n\t\tif (typeof(path) === TYPE_FN) {\r\n\t\t\tcallback = path;\r\n\t\t\tpath = undefined;\r\n\t\t}\r\n\r\n\t\tvar arr = [];\r\n\t\tvar a = null;\r\n\r\n\t\tif (path)\r\n\t\t\ta = FIND('.' + path, true);\r\n\t\telse\r\n\t\t\ta = M.components;\r\n\r\n\t\tfor (var i = 0; i < a.length; i++) {\r\n\t\t\tvar c = a[i];\r\n\t\t\tif (c.usage[name] >= expire) {\r\n\t\t\t\tif (callback)\r\n\t\t\t\t\tcallback(c);\r\n\t\t\t\telse\r\n\t\t\t\t\tarr.push(c);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn callback ? M : arr;\r\n\t};\r\n\r\n\tW.MAKEPARAMS = function(url, values, type) {\r\n\r\n\t\tvar l = location;\r\n\r\n\t\tif (typeof(url) === TYPE_O) {\r\n\t\t\ttype = values;\r\n\t\t\tvalues = url;\r\n\t\t\turl = l.pathname + l.search;\r\n\t\t}\r\n\r\n\t\tvar query;\r\n\t\tvar index = url.indexOf('?');\r\n\t\tif (index !== -1) {\r\n\t\t\tquery = M.parseQuery(url.substring(index + 1));\r\n\t\t\turl = url.substring(0, index);\r\n\t\t} else\r\n\t\t\tquery = {};\r\n\r\n\t\tvar keys = OK(values);\r\n\r\n\t\tfor (var i = 0, length = keys.length; i < length; i++) {\r\n\t\t\tvar key = keys[i];\r\n\t\t\tquery[key] = values[key];\r\n\t\t}\r\n\r\n\t\tvar val = $.param(query, type == null || type === true);\r\n\t\treturn url + (val ? '?' + val : '');\r\n\t};\r\n\r\n\tM.parseQuery = W.READPARAMS = function(value) {\r\n\r\n\t\tif (!value)\r\n\t\t\tvalue = location.search;\r\n\r\n\t\tif (!value)\r\n\t\t\treturn {};\r\n\r\n\t\tvar index = value.indexOf('?');\r\n\t\tif (index !== -1)\r\n\t\t\tvalue = value.substring(index + 1);\r\n\r\n\t\tvar arr = value.split('&');\r\n\t\tvar obj = {};\r\n\t\tfor (var i = 0, length = arr.length; i < length; i++) {\r\n\t\t\tvar sub = arr[i].split('=');\r\n\t\t\tvar key = sub[0];\r\n\t\t\tvar val = decodeURIComponent((sub[1] || '').replace(/\\+/g, '%20'));\r\n\r\n\t\t\tif (!obj[key]) {\r\n\t\t\t\tobj[key] = val;\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tif (!(obj[key] instanceof Array))\r\n\t\t\t\tobj[key] = [obj[key]];\r\n\t\t\tobj[key].push(val);\r\n\t\t}\r\n\t\treturn obj;\r\n\t};\r\n\r\n\tW.AJAXCONFIG = function(name, fn) {\r\n\t\tajaxconfig[name] = fn;\r\n\t\treturn W;\r\n\t};\r\n\r\n\tW.AJAX = function(url, data, callback, timeout) {\r\n\r\n\t\tif (typeof(url) === TYPE_FN) {\r\n\t\t\ttimeout = callback;\r\n\t\t\tcallback = data;\r\n\t\t\tdata = url;\r\n\t\t\turl = location.pathname;\r\n\t\t}\r\n\r\n\t\tvar td = typeof(data);\r\n\t\tvar arg = EMPTYARRAY;\r\n\t\tvar tmp;\r\n\r\n\t\tif (!callback && (td === TYPE_FN || td === TYPE_S)) {\r\n\t\t\ttimeout = callback;\r\n\t\t\tcallback = data;\r\n\t\t\tdata = undefined;\r\n\t\t}\r\n\r\n\t\tvar index = url.indexOf(' ');\r\n\t\tif (index === -1)\r\n\t\t\treturn W;\r\n\r\n\t\tvar repeat = false;\r\n\r\n\t\turl = url.replace(/\\srepeat/i, function() {\r\n\t\t\trepeat = true;\r\n\t\t\treturn '';\r\n\t\t});\r\n\r\n\t\tif (repeat)\r\n\t\t\targ = [url, data, callback, timeout];\r\n\r\n\t\tvar method = url.substring(0, index).toUpperCase();\r\n\t\tvar isCredentials = method.substring(0, 1) === '!';\r\n\t\tif (isCredentials)\r\n\t\t\tmethod = method.substring(1);\r\n\r\n\t\tvar headers = {};\r\n\t\ttmp = url.match(/\\{.*?\\}/g);\r\n\r\n\t\tif (tmp) {\r\n\t\t\turl = url.replace(tmp, '').replace(/\\s{2,}/g, ' ');\r\n\t\t\ttmp = (new Function('return ' + tmp))();\r\n\t\t\tif (typeof(tmp) === TYPE_O)\r\n\t\t\t\theaders = tmp;\r\n\t\t}\r\n\r\n\t\turl = url.substring(index).trim().$env();\r\n\r\n\t\tsetTimeout(function() {\r\n\r\n\t\t\tif (method === 'GET' && data) {\r\n\t\t\t\tvar qs = (typeof(data) === TYPE_S ? data : jQuery.param(data, true));\r\n\t\t\t\tif (qs)\r\n\t\t\t\t\turl += '?' + qs;\r\n\t\t\t}\r\n\r\n\t\t\tvar options = {};\r\n\t\t\toptions.method = method;\r\n\t\t\toptions.converters = MD.jsonconverter;\r\n\r\n\t\t\tif (method !== 'GET') {\r\n\t\t\t\tif (typeof(data) === TYPE_S) {\r\n\t\t\t\t\toptions.data = data;\r\n\t\t\t\t} else {\r\n\t\t\t\t\toptions.contentType = 'application/json; charset=utf-8';\r\n\t\t\t\t\toptions.data = STRINGIFY(data);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\toptions.headers = $.extend(headers, MD.headers);\r\n\r\n\t\t\tif (url.match(/http:\\/\\/|https:\\/\\//i)) {\r\n\t\t\t\toptions.crossDomain = true;\r\n\t\t\t\tdelete options.headers['X-Requested-With'];\r\n\t\t\t\tif (isCredentials)\r\n\t\t\t\t\toptions.xhrFields = { withCredentials: true };\r\n\t\t\t} else\r\n\t\t\t\turl = url.ROOT();\r\n\r\n\t\t\tvar custom = url.match(/\\([a-z0-9\\-.,]+\\)/i);\r\n\t\t\tif (custom) {\r\n\t\t\t\turl = url.replace(custom, '').replace(/\\s+/g, '');\r\n\t\t\t\toptions.url = url;\r\n\t\t\t\tcustom = custom.toString().replace(/\\(|\\)/g, '').split(',');\r\n\t\t\t\tfor (var i = 0; i < custom.length; i++) {\r\n\t\t\t\t\tvar opt = ajaxconfig[custom[i].trim()];\r\n\t\t\t\t\topt && opt(options);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (!options.url)\r\n\t\t\t\toptions.url = url;\r\n\r\n\t\t\tEMIT('request', options);\r\n\r\n\t\t\tif (options.cancel)\r\n\t\t\t\treturn;\r\n\r\n\t\t\toptions.type = options.method;\r\n\t\t\tdelete options.method;\r\n\r\n\t\t\tvar output = {};\r\n\t\t\toutput.url = options.url;\r\n\t\t\toutput.process = true;\r\n\t\t\toutput.error = false;\r\n\t\t\toutput.upload = false;\r\n\t\t\toutput.method = method;\r\n\t\t\toutput.data = data;\r\n\r\n\t\t\tdelete options.url;\r\n\r\n\t\t\toptions.success = function(r, s, req) {\r\n\t\t\t\toutput.response = r;\r\n\t\t\t\toutput.status = req.status || 999;\r\n\t\t\t\toutput.text = s;\r\n\t\t\t\toutput.headers = parseHeaders(req.getAllResponseHeaders());\r\n\t\t\t\tEMIT('response', output);\r\n\t\t\t\tif (output.process && !output.cancel) {\r\n\t\t\t\t\tif (typeof(callback) === TYPE_S)\r\n\t\t\t\t\t\tremap(callback, output.response);\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tcallback && callback.call(output, output.response, undefined, output);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\toptions.error = function(req, s) {\r\n\r\n\t\t\t\tvar code = req.status;\r\n\r\n\t\t\t\tif (repeat && (!code || code === 408 || code === 502 || code === 503 || code === 504 || code === 509)) {\r\n\t\t\t\t\t// internal error\r\n\t\t\t\t\t// internet doesn't work\r\n\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\targ[0] += ' REPEAT';\r\n\t\t\t\t\t\tW.AJAX.apply(M, arg);\r\n\t\t\t\t\t}, MD.delayrepeat);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\toutput.response = req.responseText;\r\n\t\t\t\toutput.status = code || 999;\r\n\t\t\t\toutput.text = s;\r\n\t\t\t\toutput.error = true;\r\n\t\t\t\toutput.headers = parseHeaders(req.getAllResponseHeaders());\r\n\t\t\t\tvar ct = output.headers['content-type'];\r\n\r\n\t\t\t\tif (ct && ct.indexOf('/json') !== -1) {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\toutput.response = PARSE(output.response, MD.jsondate);\r\n\t\t\t\t\t} catch (e) {}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tEMIT('response', output);\r\n\r\n\t\t\t\tif (output.cancel || !output.process)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tif (MD.ajaxerrors) {\r\n\t\t\t\t\tif (typeof(callback) === TYPE_S)\r\n\t\t\t\t\t\tremap(callback, output.response);\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tcallback && callback.call(output, output.response, output.status, output);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tEMIT('error', output);\r\n\t\t\t\t\ttypeof(callback) === TYPE_FN && callback.call(output, output.response, output.status, output);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\t$.ajax(makeurl(output.url), options);\r\n\r\n\t\t}, timeout || 0);\r\n\r\n\t\treturn W;\r\n\t};\r\n\r\n\tW.AJAXCACHEREVIEW = function(url, data, callback, expire, timeout, clear) {\r\n\t\treturn AJAXCACHE(url, data, callback, expire, timeout, clear, true);\r\n\t};\r\n\r\n\tW.AJAXCACHE = function(url, data, callback, expire, timeout, clear, review) {\r\n\r\n\t\tvar tdata = typeof(data);\r\n\r\n\t\tif (tdata === TYPE_FN || (tdata === TYPE_S && typeof(callback) === TYPE_S && typeof(expire) !== TYPE_S)) {\r\n\t\t\tclear = timeout;\r\n\t\t\ttimeout = expire;\r\n\t\t\texpire = callback;\r\n\t\t\tcallback = data;\r\n\t\t\tdata = null;\r\n\t\t}\r\n\r\n\t\tif (typeof(timeout) === 'boolean') {\r\n\t\t\tclear = timeout === true;\r\n\t\t\ttimeout = 0;\r\n\t\t}\r\n\r\n\t\tvar index = url.indexOf(' ');\r\n\t\tif (index === -1)\r\n\t\t\treturn W;\r\n\r\n\t\tvar method = url.substring(0, index).toUpperCase();\r\n\t\tvar uri = url.substring(index).trim().$env();\r\n\r\n\t\tsetTimeout(function() {\r\n\t\t\tvar value = clear ? undefined : cacherest(method, uri, data, undefined, expire);\r\n\t\t\tif (value !== undefined) {\r\n\r\n\t\t\t\tvar diff = review ? STRINGIFY(value) : null;\r\n\r\n\t\t\t\tif (typeof(callback) === TYPE_S)\r\n\t\t\t\t\tremap(callback, value);\r\n\t\t\t\telse\r\n\t\t\t\t\tcallback(value, true);\r\n\r\n\t\t\t\tif (!review)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tAJAX(url, data, function(r, err) {\r\n\t\t\t\t\tif (err)\r\n\t\t\t\t\t\tr = err;\r\n\t\t\t\t\t// Is same?\r\n\t\t\t\t\tif (diff !== STRINGIFY(r)) {\r\n\t\t\t\t\t\tcacherest(method, uri, data, r, expire);\r\n\t\t\t\t\t\tif (typeof(callback) === TYPE_S)\r\n\t\t\t\t\t\t\tremap(callback, r);\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\tcallback(r, false, true);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tAJAX(url, data, function(r, err) {\r\n\t\t\t\tif (err)\r\n\t\t\t\t\tr = err;\r\n\t\t\t\tcacherest(method, uri, data, r, expire);\r\n\t\t\t\tif (typeof(callback) === TYPE_S)\r\n\t\t\t\t\tremap(callback, r);\r\n\t\t\t\telse\r\n\t\t\t\t\tcallback(r, false);\r\n\t\t\t});\r\n\t\t}, timeout || 1);\r\n\r\n\t\treturn W;\r\n\t};\r\n\r\n\tW.SCHEDULE = function(selector, name, expire, callback) {\r\n\t\tif (expire.substring(0, 1) !== '-')\r\n\t\t\texpire = '-' + expire;\r\n\t\tvar arr = expire.split(' ');\r\n\t\tvar type = arr[1].toLowerCase().substring(0, 1);\r\n\t\tvar id = GUID(10);\r\n\t\tschedulers.push({ id: id, name: name, expire: expire, selector: selector, callback: callback, type: type === 'y' || type === 'd' ? 'h' : type, owner: current_owner });\r\n\t\treturn id;\r\n\t};\r\n\r\n\tW.CLEARSCHEDULE = function(id) {\r\n\t\tschedulers = schedulers.remove('id', id);\r\n\t\treturn W;\r\n\t};\r\n\r\n\tW.CLEARCACHE = function() {\r\n\t\tif (!W.isPRIVATEMODE) {\r\n\t\t\tvar rem = localStorage.removeItem;\r\n\t\t\tvar k = M.$localstorage;\r\n\t\t\trem(k);\r\n\t\t\trem(k + '.cache');\r\n\t\t\trem(k + '.blocked');\r\n\t\t}\r\n\t\treturn W;\r\n\t};\r\n\r\n\tW.ERRORS = function(path, except, highlight) {\r\n\r\n\t\tif (path instanceof Array) {\r\n\t\t\texcept = path;\r\n\t\t\tpath = undefined;\r\n\t\t}\r\n\r\n\t\tif (except === true) {\r\n\t\t\texcept = highlight instanceof Array ? highlight : null;\r\n\t\t\thighlight = true;\r\n\t\t}\r\n\r\n\t\tvar arr = [];\r\n\r\n\t\tM.each(function(obj) {\r\n\t\t\tif (!obj.disabled && (!except || !obj.$except(except)) && obj.$valid === false && !obj.$valid_disabled)\r\n\t\t\t\tarr.push(obj);\r\n\t\t}, pathmaker(path));\r\n\r\n\t\thighlight && state(arr, 1, 1);\r\n\t\treturn arr;\r\n\t};\r\n\r\n\tW.CAN = function(path, except) {\r\n\t\tpath = pathmaker(path);\r\n\t\treturn !com_dirty(path, except) && com_valid(path, except);\r\n\t};\r\n\r\n\tW.DISABLED = function(path, except) {\r\n\t\tpath = pathmaker(path);\r\n\t\treturn com_dirty(path, except) || !com_valid(path, except);\r\n\t};\r\n\r\n\tW.INVALID = function(path, onlyComponent) {\r\n\t\tpath = pathmaker(path);\r\n\t\tif (path) {\r\n\t\t\tcom_dirty(path, false, onlyComponent, true);\r\n\t\t\tcom_valid(path, false, onlyComponent);\r\n\t\t}\r\n\t\treturn W;\r\n\t};\r\n\r\n\tW.BLOCKED = function(name, timeout, callback) {\r\n\t\tvar key = name;\r\n\t\tvar item = blocked[key];\r\n\t\tvar now = Date.now();\r\n\r\n\t\tif (item > now)\r\n\t\t\treturn true;\r\n\r\n\t\tif (typeof(timeout) === TYPE_S)\r\n\t\t\ttimeout = timeout.env().parseExpire();\r\n\r\n\t\tvar local = MD.localstorage && timeout > 10000;\r\n\t\tblocked[key] = now + timeout;\r\n\t\t!W.isPRIVATEMODE && local && localStorage.setItem(M.$localstorage + '.blocked', JSON.stringify(blocked));\r\n\t\tcallback && callback();\r\n\t\treturn false;\r\n\t};\r\n\r\n\t// 1 === manually\r\n\t// 2 === by input\r\n\tM.update = function(path, reset, type, wasset) {\r\n\r\n\t\tif (path instanceof Array) {\r\n\t\t\tfor (var i = 0; i < path.length; i++)\r\n\t\t\t\tM.update(path[i], reset, type);\r\n\t\t\treturn M;\r\n\t\t}\r\n\r\n\t\tpath = pathmaker(path);\r\n\t\tif (!path)\r\n\t\t\treturn M;\r\n\r\n\t\tvar is = path.charCodeAt(0) === 33;\r\n\t\tif (is)\r\n\t\t\tpath = path.substring(1);\r\n\r\n\t\tpath = path.replace(REGWILDCARD, '');\r\n\t\tif (!path)\r\n\t\t\treturn M;\r\n\r\n\t\t!wasset && set(path, get(path), true);\r\n\r\n\t\tvar state = [];\r\n\r\n\t\tif (type === undefined)\r\n\t\t\ttype = 1; // manually\r\n\r\n\t\tM.skipproxy = path;\r\n\r\n\t\tvar all = M.components;\r\n\t\tfor (var i = 0, length = all.length; i < length; i++) {\r\n\t\t\tvar com = all[i];\r\n\r\n\t\t\tif (!com || com.disabled || com.$removed || !com.$loaded || !com.path || !com.$compare(path))\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tvar result = com.get();\r\n\t\t\tif (com.setter) {\r\n\t\t\t\tcom.$skip = false;\r\n\t\t\t\tcom.setterX(result, path, type);\r\n\t\t\t\tcom.$interaction(type);\r\n\t\t\t}\r\n\r\n\t\t\tif (!com.$ready)\r\n\t\t\t\tcom.$ready = true;\r\n\r\n\t\t\tif (reset === true) {\r\n\r\n\t\t\t\tif (!com.$dirty_disabled) {\r\n\t\t\t\t\tcom.$dirty = true;\r\n\t\t\t\t\tcom.$interaction(101);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!com.$valid_disabled) {\r\n\t\t\t\t\tcom.$valid = true;\r\n\t\t\t\t\tcom.$validate = false;\r\n\t\t\t\t\tif (com.validate) {\r\n\t\t\t\t\t\tcom.$valid = com.validate(result);\r\n\t\t\t\t\t\tcom.$interaction(102);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfindcontrol2(com);\r\n\r\n\t\t\t} else if (com.validate && !com.$valid_disabled)\r\n\t\t\t\tcom.valid(com.validate(result), true);\r\n\r\n\t\t\tcom.state && state.push(com);\r\n\t\t}\r\n\r\n\t\treset && clear('dirty', 'valid');\r\n\r\n\t\tfor (var i = 0, length = state.length; i < length; i++)\r\n\t\t\tstate[i].stateX(1, 4);\r\n\r\n\t\temitwatch(path, get(path), type);\r\n\t\treturn M;\r\n\t};\r\n\r\n\tW.NOTIFY = function() {\r\n\r\n\t\tvar arg = arguments;\r\n\t\tvar all = M.components;\r\n\r\n\t\tvar $ticks = Math.random().toString().substring(2, 8);\r\n\t\tfor (var j = 0; j < arg.length; j++) {\r\n\t\t\tvar p = arg[j];\r\n\t\t\tbinders[p] && binderbind(p, p, $ticks);\r\n\t\t}\r\n\r\n\t\tfor (var i = 0, length = all.length; i < length; i++) {\r\n\t\t\tvar com = all[i];\r\n\t\t\tif (!com || com.$removed || com.disabled || !com.$loaded || !com.path)\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tvar is = 0;\r\n\t\t\tfor (var j = 0; j < arg.length; j++) {\r\n\t\t\t\tif (com.path === arg[j]) {\r\n\t\t\t\t\tis = 1;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (is) {\r\n\t\t\t\tvar val = com.get();\r\n\t\t\t\tcom.setter && com.setterX(val, com.path, 1);\r\n\t\t\t\tcom.state && com.stateX(1, 6);\r\n\t\t\t\tcom.$interaction(1);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor (var j = 0; j < arg.length; j++)\r\n\t\t\temitwatch(arg[j], GET(arg[j]), 1);\r\n\r\n\t\treturn W;\r\n\t};\r\n\r\n\tM.extend = function(path, value, type) {\r\n\t\tpath = pathmaker(path);\r\n\t\tif (path) {\r\n\t\t\tvar val = get(path);\r\n\t\t\tif (val == null)\r\n\t\t\t\tval = {};\r\n\t\t\tM.set(path, $.extend(val, value), type);\r\n\t\t}\r\n\t\treturn M;\r\n\t};\r\n\r\n\tW.REWRITE = function(path, value, type) {\r\n\t\tpath = pathmaker(path);\r\n\t\tif (path) {\r\n\t\t\tM.skipproxy = path;\r\n\t\t\tset(path, value);\r\n\t\t\temitwatch(path, value, type);\r\n\t\t}\r\n\t\treturn W;\r\n\t};\r\n\r\n\tM.inc = function(path, value, type) {\r\n\r\n\t\tif (path instanceof Array) {\r\n\t\t\tfor (var i = 0; i < path.length; i++)\r\n\t\t\t\tM.inc(path[i], value, type);\r\n\t\t\treturn M;\r\n\t\t}\r\n\r\n\t\tpath = pathmaker(path);\r\n\r\n\t\tif (!path)\r\n\t\t\treturn M;\r\n\r\n\t\tvar current = get(path);\r\n\t\tif (!current) {\r\n\t\t\tcurrent = 0;\r\n\t\t} else if (typeof(current) !== TYPE_N) {\r\n\t\t\tcurrent = parseFloat(current);\r\n\t\t\tif (isNaN(current))\r\n\t\t\t\tcurrent = 0;\r\n\t\t}\r\n\r\n\t\tcurrent += value;\r\n\t\tM.set(path, current, type);\r\n\t\treturn M;\r\n\t};\r\n\r\n\t// 1 === manually\r\n\t// 2 === by input\r\n\t// 3 === default\r\n\tM.set = function(path, value, type) {\r\n\r\n\t\tif (path instanceof Array) {\r\n\t\t\tfor (var i = 0; i < path.length; i++)\r\n\t\t\t\tM.set(path[i], value, type);\r\n\t\t\treturn M;\r\n\t\t}\r\n\r\n\t\tpath = pathmaker(path);\r\n\r\n\t\tif (!path)\r\n\t\t\treturn M;\r\n\r\n\t\tvar is = path.charCodeAt(0) === 33;\r\n\t\tif (is)\r\n\t\t\tpath = path.substring(1);\r\n\r\n\t\tif (path.charCodeAt(0) === 43) {\r\n\t\t\tpath = path.substring(1);\r\n\t\t\treturn M.push(path, value, type);\r\n\t\t}\r\n\r\n\t\tif (!path)\r\n\t\t\treturn M;\r\n\r\n\t\tvar isUpdate = (typeof(value) === TYPE_O && !(value instanceof Array) && value != null);\r\n\t\tvar reset = type === true;\r\n\t\tif (reset)\r\n\t\t\ttype = 1;\r\n\r\n\t\tM.skipproxy = path;\r\n\t\tset(path, value);\r\n\r\n\t\tif (isUpdate)\r\n\t\t\treturn M.update(path, reset, type, true);\r\n\r\n\t\tvar result = get(path);\r\n\t\tvar state = [];\r\n\r\n\t\tif (type === undefined)\r\n\t\t\ttype = 1;\r\n\r\n\t\tvar all = M.components;\r\n\r\n\t\tfor (var i = 0, length = all.length; i < length; i++) {\r\n\t\t\tvar com = all[i];\r\n\r\n\t\t\tif (!com || com.disabled || com.$removed || !com.$loaded || !com.path || !com.$compare(path))\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tif (com.setter) {\r\n\t\t\t\tif (com.path === path) {\r\n\t\t\t\t\tif (com.setter) {\r\n\t\t\t\t\t\tcom.setterX(result, path, type);\r\n\t\t\t\t\t\tcom.$interaction(type);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (com.setter) {\r\n\t\t\t\t\t\tcom.setterX(get(com.path), path, type);\r\n\t\t\t\t\t\tcom.$interaction(type);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (!com.$ready)\r\n\t\t\t\tcom.$ready = true;\r\n\r\n\t\t\ttype !== 3 && com.state && state.push(com);\r\n\r\n\t\t\tif (reset) {\r\n\t\t\t\tif (!com.$dirty_disabled)\r\n\t\t\t\t\tcom.$dirty = true;\r\n\t\t\t\tif (!com.$valid_disabled) {\r\n\t\t\t\t\tcom.$valid = true;\r\n\t\t\t\t\tcom.$validate = false;\r\n\t\t\t\t\tif (com.validate) {\r\n\t\t\t\t\t\tcom.$valid = com.validate(result);\r\n\t\t\t\t\t\tcom.$interaction(102);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfindcontrol2(com);\r\n\r\n\t\t\t} else if (com.validate && !com.$valid_disabled)\r\n\t\t\t\tcom.valid(com.validate(result), true);\r\n\t\t}\r\n\r\n\t\treset && clear('dirty', 'valid');\r\n\r\n\t\tfor (var i = 0, length = state.length; i < length; i++)\r\n\t\t\tstate[i].stateX(type, 5);\r\n\r\n\t\temitwatch(path, result, type);\r\n\t\treturn M;\r\n\t};\r\n\r\n\tM.push = function(path, value, type) {\r\n\r\n\t\tif (path instanceof Array) {\r\n\t\t\tfor (var i = 0; i < path.length; i++)\r\n\t\t\t\tM.push(path[i], value, type);\r\n\t\t\treturn M;\r\n\t\t}\r\n\r\n\t\tvar arr = get(path);\r\n\t\tvar n = false;\r\n\r\n\t\tif (!(arr instanceof Array)) {\r\n\t\t\tarr = [];\r\n\t\t\tn = true;\r\n\t\t}\r\n\r\n\t\tvar is = true;\r\n\t\tM.skipproxy = path;\r\n\r\n\t\tif (value instanceof Array) {\r\n\t\t\tif (value.length)\r\n\t\t\t\tarr.push.apply(arr, value);\r\n\t\t\telse\r\n\t\t\t\tis = false;\r\n\t\t} else\r\n\t\t\tarr.push(value);\r\n\r\n\t\tif (n)\r\n\t\t\tM.set(path, arr, type);\r\n\t\telse if (is)\r\n\t\t\tM.update(path, undefined, type);\r\n\r\n\t\treturn M;\r\n\t};\r\n\r\n\tfunction pathmaker(path, clean) {\r\n\r\n\t\tif (!path)\r\n\t\t\treturn path;\r\n\r\n\t\tvar tmp = '';\r\n\r\n\t\tif (clean) {\r\n\t\t\tvar index = path.indexOf(' ');\r\n\t\t\tif (index !== -1) {\r\n\t\t\t\ttmp = path.substring(index);\r\n\t\t\t\tpath = path.substring(0, index);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// temporary\r\n\t\tif (path.charCodeAt(0) === 37)\r\n\t\t\treturn 'jctmp.' + path.substring(1) + tmp;\r\n\r\n\t\tif (path.charCodeAt(0) === 64) {\r\n\t\t\t// parent component.data()\r\n\t\t\treturn path;\r\n\t\t}\r\n\r\n\t\tvar index = path.indexOf('/');\r\n\r\n\t\tif (index === -1)\r\n\t\t\treturn path + tmp;\r\n\r\n\t\tvar p = path.substring(0, index);\r\n\t\tvar rem = W.PLUGINS[p];\r\n\t\treturn ((rem ? ('PLUGINS.' + p) : (p + '_plugin_not_found')) + '.' + path.substring(index + 1)) + tmp;\r\n\t}\r\n\r\n\tW.GET = M.get = function(path, scope) {\r\n\t\tpath = pathmaker(path);\r\n\t\tif (scope === true) {\r\n\t\t\tscope = null;\r\n\t\t\tRESET(path, true);\r\n\t\t}\r\n\t\treturn get(path, scope);\r\n\t};\r\n\r\n\tW.GETR = function(path) {\r\n\t\treturn GET(path, true);\r\n\t};\r\n\r\n\tW.VALIDATE = function(path, except) {\r\n\r\n\t\tvar arr = [];\r\n\t\tvar valid = true;\r\n\r\n\t\tpath = pathmaker(path.replace(REGWILDCARD, ''));\r\n\r\n\t\tvar flags = null;\r\n\t\tif (except) {\r\n\t\t\tvar is = false;\r\n\t\t\tflags = {};\r\n\t\t\texcept = except.remove(function(item) {\r\n\t\t\t\tif (item.substring(0, 1) === '@') {\r\n\t\t\t\t\tflags[item.substring(1)] = true;\r\n\t\t\t\t\tis = true;\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t});\r\n\t\t\t!is && (flags = null);\r\n\t\t\t!except.length && (except = null);\r\n\t\t}\r\n\r\n\t\tvar all = M.components;\r\n\t\tfor (var i = 0, length = all.length; i < length; i++) {\r\n\t\t\tvar com = all[i];\r\n\t\t\tif (!com || com.$removed || com.disabled || !com.$loaded || !com.path || !com.$compare(path))\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tif (flags && ((flags.visible && !com.visible()) || (flags.hidden && !com.hidden()) || (flags.enabled && com.find(SELINPUT).is(':disabled')) || (flags.disabled && com.find(SELINPUT).is(':enabled'))))\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tcom.state && arr.push(com);\r\n\r\n\t\t\tif (com.$valid_disabled)\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tcom.$validate = true;\r\n\t\t\tif (com.validate) {\r\n\t\t\t\tcom.$valid = com.validate(get(com.path));\r\n\t\t\t\tcom.$interaction(102);\r\n\t\t\t\tif (!com.$valid)\r\n\t\t\t\t\tvalid = false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tclear('valid');\r\n\t\tstate(arr, 1, 1);\r\n\t\treturn valid;\r\n\t};\r\n\r\n\tfunction com_validate2(com) {\r\n\r\n\t\tvar valid = true;\r\n\r\n\t\tif (com.disabled)\r\n\t\t\treturn valid;\r\n\r\n\t\tif (com.$valid_disabled)\r\n\t\t\treturn valid;\r\n\r\n\t\tvar arr = [];\r\n\t\tcom.state && arr.push(com);\r\n\t\tcom.$validate = true;\r\n\r\n\t\tif (com.validate) {\r\n\t\t\tcom.$valid = com.validate(get(com.path));\r\n\t\t\tcom.$interaction(102);\r\n\t\t\tif (!com.$valid)\r\n\t\t\t\tvalid = false;\r\n\t\t}\r\n\r\n\t\tclear('valid');\r\n\t\tstate(arr, 1, 1);\r\n\t\treturn valid;\r\n\t}\r\n\r\n\tM.default = function(path, timeout, onlyComponent, reset) {\r\n\r\n\t\tif (timeout > 0) {\r\n\t\t\tsetTimeout(function() {\r\n\t\t\t\tM.default(path, 0, onlyComponent, reset);\r\n\t\t\t}, timeout);\r\n\t\t\treturn M;\r\n\t\t}\r\n\r\n\t\tif (typeof(onlyComponent) === 'boolean') {\r\n\t\t\treset = onlyComponent;\r\n\t\t\tonlyComponent = null;\r\n\t\t}\r\n\r\n\t\tif (reset === undefined)\r\n\t\t\treset = true;\r\n\r\n\t\tpath = pathmaker(path).replace(REGWILDCARD, '');\r\n\r\n\t\t// Reset scope\r\n\t\tvar key = path.replace(/\\.\\*$/, '');\r\n\t\tvar fn = defaults['#' + HASH(key)];\r\n\t\tvar tmp;\r\n\r\n\t\tif (fn) {\r\n\t\t\ttmp = fn();\r\n\t\t\tset(key, tmp);\r\n\t\t}\r\n\r\n\t\tvar arr = [];\r\n\t\tvar all = M.components;\r\n\r\n\t\tfor (var i = 0, length = all.length; i < length; i++) {\r\n\t\t\tvar com = all[i];\r\n\r\n\t\t\tif (!com || com.$removed || com.disabled || !com.$loaded || !com.path || !com.$compare(path))\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tif (com.state)\r\n\t\t\t\tarr.push(com);\r\n\r\n\t\t\tif (onlyComponent && onlyComponent._id !== com._id)\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tcom.$default && com.set(com.$default(), 3);\r\n\r\n\t\t\tif (!reset)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tfindcontrol2(com);\r\n\r\n\t\t\tif (!com.$dirty_disabled)\r\n\t\t\t\tcom.$dirty = true;\r\n\t\t\tif (!com.$valid_disabled) {\r\n\t\t\t\tcom.$valid = true;\r\n\t\t\t\tcom.$validate = false;\r\n\t\t\t\tif (com.validate) {\r\n\t\t\t\t\tcom.$valid = com.validate(com.get());\r\n\t\t\t\t\tcom.$interaction(102);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (reset) {\r\n\t\t\tclear('valid', 'dirty');\r\n\t\t\tstate(arr, 3, 3);\r\n\t\t}\r\n\r\n\t\treturn M;\r\n\t};\r\n\r\n\tW.RESET = M.reset = function(path, timeout, onlyComponent) {\r\n\r\n\t\tif (timeout > 0) {\r\n\t\t\tsetTimeout(function() {\r\n\t\t\t\tM.reset(path);\r\n\t\t\t}, timeout);\r\n\t\t\treturn W;\r\n\t\t}\r\n\r\n\t\tpath = pathmaker(path).replace(REGWILDCARD, '');\r\n\r\n\t\tvar arr = [];\r\n\t\tvar all = M.components;\r\n\r\n\t\tfor (var i = 0, length = all.length; i < length; i++) {\r\n\t\t\tvar com = all[i];\r\n\t\t\tif (!com || com.$removed || com.disabled || !com.$loaded || !com.path || !com.$compare(path))\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tcom.state && arr.push(com);\r\n\r\n\t\t\tif (onlyComponent && onlyComponent._id !== com._id)\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tfindcontrol2(com);\r\n\r\n\t\t\tif (!com.$dirty_disabled) {\r\n\t\t\t\tcom.$dirty = true;\r\n\t\t\t\tcom.$interaction(101);\r\n\t\t\t}\r\n\r\n\t\t\tif (!com.$valid_disabled) {\r\n\t\t\t\tcom.$valid = true;\r\n\t\t\t\tcom.$validate = false;\r\n\t\t\t\tif (com.validate) {\r\n\t\t\t\t\tcom.$valid = com.validate(com.get());\r\n\t\t\t\t\tcom.$interaction(102);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tclear('valid', 'dirty');\r\n\t\tstate(arr, 1, 3);\r\n\t\treturn W;\r\n\t};\r\n\r\n\tM.each = function(fn, path) {\r\n\t\tvar wildcard = path ? path.lastIndexOf('*') !== -1 : false;\r\n\t\tif (wildcard)\r\n\t\t\tpath = path.replace('.*', '');\r\n\t\tvar all = M.components;\r\n\t\tvar index = 0;\r\n\t\tfor (var i = 0, length = all.length; i < length; i++) {\r\n\t\t\tvar com = all[i];\r\n\t\t\tif (!com || !com.$loaded || com.$removed || (path && (!com.path || !com.$compare(path))))\r\n\t\t\t\tcontinue;\r\n\t\t\tvar stop = fn(com, index++, wildcard);\r\n\t\t\tif (stop === true)\r\n\t\t\t\treturn M;\r\n\t\t}\r\n\t\treturn M;\r\n\t};\r\n\r\n\t// ===============================================================\r\n\t// PRIVATE FUNCTIONS\r\n\t// ===============================================================\r\n\r\n\tfunction mediaquery() {\r\n\r\n\t\tif (!mediaqueries || !mediaqueries.length)\r\n\t\t\treturn;\r\n\r\n\t\tvar orientation = W.orientation ? Math.abs(W.orientation) === 90 ? 'landscape' : 'portrait' : '';\r\n\r\n\t\tvar $w = $(W);\r\n\t\tvar w = $w.width();\r\n\t\tvar h = $w.height();\r\n\t\tvar d = MD.devices;\r\n\r\n\t\tfor (var i = 0, length = mediaqueries.length; i < length; i++) {\r\n\t\t\tvar mq = mediaqueries[i];\r\n\t\t\tvar cw = w;\r\n\t\t\tvar ch = h;\r\n\r\n\t\t\tif (mq.element) {\r\n\t\t\t\tcw = mq.element.width();\r\n\t\t\t\tch = mq.element.height();\r\n\t\t\t}\r\n\r\n\t\t\tif (mq.orientation) {\r\n\t\t\t\tif (!orientation && mq.orientation !== 'portrait')\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\telse if (orientation !== mq.orientation)\r\n\t\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tif (mq.minW && mq.minW >= cw)\r\n\t\t\t\tcontinue;\r\n\t\t\tif (mq.maxW && mq.maxW <= cw)\r\n\t\t\t\tcontinue;\r\n\t\t\tif (mq.minH && mq.minH >= ch)\r\n\t\t\t\tcontinue;\r\n\t\t\tif (mq.maxH && mq.maxH <= ch)\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tif (mq.oldW === cw && mq.oldH !== ch) {\r\n\t\t\t\t// changed height\r\n\t\t\t\tif (!mq.maxH && !mq.minH)\r\n\t\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tif (mq.oldH === ch && mq.oldW !== cw) {\r\n\t\t\t\t// changed width\r\n\t\t\t\tif (!mq.maxW && !mq.minW)\r\n\t\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tif (mq.oldW === cw && mq.oldH === ch)\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tvar type = null;\r\n\r\n\t\t\tif (cw >= d.md.min && cw <= d.md.max)\r\n\t\t\t\ttype = 'md';\r\n\t\t\telse if (cw >= d.sm.min && cw <= d.sm.max)\r\n\t\t\t\ttype = 'sm';\r\n\t\t\telse if (cw > d.lg.min)\r\n\t\t\t\ttype = 'lg';\r\n\t\t\telse if (cw <= d.xs.max)\r\n\t\t\t\ttype = 'xs';\r\n\r\n\t\t\tmq.oldW = cw;\r\n\t\t\tmq.oldH = ch;\r\n\t\t\tmq.fn(cw, ch, type, mq.id);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction attrcom(el, name) {\r\n\t\tname = name ? '-' + name : '';\r\n\t\treturn el.getAttribute ? el.getAttribute('data-jc' + name) : el.attrd('jc' + name);\r\n\t}\r\n\r\n\tfunction crawler(container, onComponent, level, scopes) {\r\n\r\n\t\tif (container)\r\n\t\t\tcontainer = $(container)[0];\r\n\t\telse\r\n\t\t\tcontainer = document.body;\r\n\r\n\t\tif (!container)\r\n\t\t\treturn;\r\n\r\n\t\tvar comp = container ? attrcom(container, 'compile') : '1';\r\n\t\tif (comp === '0' || comp === 'false')\r\n\t\t\treturn;\r\n\r\n\t\tif (level == null || level === 0) {\r\n\t\t\tscopes = [];\r\n\t\t\tif (container !== document.body) {\r\n\t\t\t\tvar scope = $(container).closest('[' + ATTRSCOPE + ']');\r\n\t\t\t\tscope && scope.length && scopes.push(scope[0]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar b = null;\r\n\t\tvar released = container ? attrcom(container, 'released') === 'true' : false;\r\n\t\tvar tmp = attrcom(container, 'scope');\r\n\t\tvar binders = null;\r\n\r\n\t\ttmp && scopes.push(container);\r\n\r\n\t\tif (!container.$jcbind) {\r\n\t\t\tb = container.getAttribute('data-bind') || container.getAttribute('bind');\r\n\t\t\tif (b) {\r\n\t\t\t\t!binders && (binders = []);\r\n\t\t\t\tbinders.push({ el: container, b: b });\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar name = attrcom(container);\r\n\t\t!container.$com && name != null && onComponent(name, container, 0, scopes);\r\n\r\n\t\tvar arr = container.childNodes;\r\n\t\tvar sub = [];\r\n\r\n\t\tif (level === undefined)\r\n\t\t\tlevel = 0;\r\n\t\telse\r\n\t\t\tlevel++;\r\n\r\n\t\tfor (var i = 0, length = arr.length; i < length; i++) {\r\n\t\t\tvar el = arr[i];\r\n\t\t\tif (el) {\r\n\r\n\t\t\t\tif (!el.tagName)\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\tcomp = el.getAttribute('data-jc-compile');\r\n\t\t\t\tif (comp === '0' || comp === 'false')\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\tif (el.$com === undefined) {\r\n\t\t\t\t\tname = attrcom(el);\r\n\t\t\t\t\tif (name != null) {\r\n\t\t\t\t\t\treleased && el.setAttribute(ATTRREL, 'true');\r\n\t\t\t\t\t\tonComponent(name || '', el, level, scopes);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!el.$jcbind) {\r\n\t\t\t\t\tb = el.getAttribute('data-bind') || el.getAttribute('bind');\r\n\t\t\t\t\tif (b) {\r\n\t\t\t\t\t\tel.$jcbind = 1;\r\n\t\t\t\t\t\t!binders && (binders = []);\r\n\t\t\t\t\t\tbinders.push({ el: el, b: b });\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcomp = el.getAttribute('data-jc-compile');\r\n\t\t\t\tif (comp !== '0' && comp !== 'false')\r\n\t\t\t\t\tel.childNodes.length && el.tagName !== 'SCRIPT' && REGCOM.test(el.innerHTML) && sub.indexOf(el) === -1 && sub.push(el);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor (var i = 0, length = sub.length; i < length; i++) {\r\n\t\t\tel = sub[i];\r\n\t\t\tel && crawler(el, onComponent, level, scopes && scopes.length ? scopes : []);\r\n\t\t}\r\n\r\n\t\tif (binders) {\r\n\t\t\tfor (var i = 0; i < binders.length; i++) {\r\n\t\t\t\tvar a = binders[i];\r\n\t\t\t\ta.el.$jcbind = parsebinder(a.el, a.b, scopes);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction findcomponent(container, selector, callback) {\r\n\r\n\t\tvar s = (selector ? selector.split(' ') : EMPTYARRAY);\r\n\t\tvar path = '';\r\n\t\tvar name = '';\r\n\t\tvar id = '';\r\n\t\tvar version = '';\r\n\t\tvar index;\r\n\r\n\t\tfor (var i = 0, length = s.length; i < length; i++) {\r\n\t\t\tswitch (s[i].substring(0, 1)) {\r\n\t\t\t\tcase '*':\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase '.':\r\n\t\t\t\t\t// path\r\n\t\t\t\t\tpath = s[i].substring(1);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase '#':\r\n\t\t\t\t\t// id;\r\n\t\t\t\t\tid = s[i].substring(1);\r\n\t\t\t\t\tindex = id.indexOf('[');\r\n\t\t\t\t\tif (index !== -1) {\r\n\t\t\t\t\t\tpath = id.substring(index + 1, id.length - 1).trim();\r\n\t\t\t\t\t\tid = id.substring(0, index);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\t// name\r\n\t\t\t\t\tname = s[i];\r\n\t\t\t\t\tindex = name.indexOf('[');\r\n\r\n\t\t\t\t\tif (index !== -1) {\r\n\t\t\t\t\t\tpath = name.substring(index + 1, name.length - 1).trim();\r\n\t\t\t\t\t\tname = name.substring(0, index);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tindex = name.lastIndexOf('@');\r\n\r\n\t\t\t\t\tif (index !== -1) {\r\n\t\t\t\t\t\tversion = name.substring(index + 1);\r\n\t\t\t\t\t\tname = name.substring(0, index);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar arr = callback ? undefined : [];\r\n\t\tif (container) {\r\n\t\t\tvar stop = false;\r\n\t\t\tcontainer.find('[data-jc]').each(function() {\r\n\t\t\t\tvar com = this.$com;\r\n\r\n\t\t\t\tif (stop || !com || !com.$loaded || com.$removed || (id && com.id !== id) || (name && com.$name !== name) || (version && com.$version !== version) || (path && (com.$pp || (com.path !== path && (!com.pathscope || ((com.pathscope + '.' + path) !== com.path))))))\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tif (callback) {\r\n\t\t\t\t\tif (callback(com) === false)\r\n\t\t\t\t\t\tstop = true;\r\n\t\t\t\t} else\r\n\t\t\t\t\tarr.push(com);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tfor (var i = 0, length = M.components.length; i < length; i++) {\r\n\t\t\t\tvar com = M.components[i];\r\n\t\t\t\tif (!com || !com.$loaded || com.$removed || (id && com.id !== id) || (name && com.$name !== name) || (version && com.$version !== version) || ((path && (com.$pp || (com.path !== path && (!com.pathscope || ((com.pathscope + '.' + path) !== com.path)))))))\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\tif (callback) {\r\n\t\t\t\t\tif (callback(com) === false)\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t} else\r\n\t\t\t\t\tarr.push(com);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn arr;\r\n\t}\r\n\r\n\tfunction findcontrol2(com, input) {\r\n\r\n\t\tif (com.$inputcontrol) {\r\n\t\t\tif (com.$inputcontrol % 2 !== 0) {\r\n\t\t\t\tcom.$inputcontrol++;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar target = input ? input : com.element;\r\n\t\tfindcontrol(target[0], function(el) {\r\n\t\t\tif (!el.$com || el.$com !== com) {\r\n\t\t\t\tel.$com = com;\r\n\t\t\t\tcom.$inputcontrol = 1;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tfunction findcontrol(container, onElement, level) {\r\n\r\n\t\tvar arr = container.childNodes;\r\n\t\tvar sub = [];\r\n\r\n\t\tACTRLS[container.tagName] && onElement(container);\r\n\r\n\t\tif (level == null)\r\n\t\t\tlevel = 0;\r\n\t\telse\r\n\t\t\tlevel++;\r\n\r\n\t\tfor (var i = 0, length = arr.length; i < length; i++) {\r\n\t\t\tvar el = arr[i];\r\n\t\t\tif (el && el.tagName) {\r\n\t\t\t\tel.childNodes.length && el.tagName !== 'SCRIPT' && el.getAttribute('data-jc') == null && sub.push(el);\r\n\t\t\t\tif (ACTRLS[el.tagName] && el.getAttribute('data-jc-bind') != null && onElement(el) === false)\r\n\t\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor (var i = 0, length = sub.length; i < length; i++) {\r\n\t\t\tel = sub[i];\r\n\t\t\tif (el && findcontrol(el, onElement, level) === false)\r\n\t\t\t\treturn;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction load() {\r\n\t\tclearTimeout($ready);\r\n\t\tif (MD.localstorage) {\r\n\t\t\tvar cache;\r\n\t\t\ttry {\r\n\t\t\t\tcache = localStorage.getItem(M.$localstorage + '.cache');\r\n\t\t\t\tif (cache && typeof(cache) === TYPE_S)\r\n\t\t\t\t\tstorage = PARSE(cache);\r\n\t\t\t} catch (e) {}\r\n\t\t\ttry {\r\n\t\t\t\tcache = localStorage.getItem(M.$localstorage + '.blocked');\r\n\t\t\t\tif (cache && typeof(cache) === TYPE_S)\r\n\t\t\t\t\tblocked = PARSE(cache);\r\n\t\t\t} catch (e) {}\r\n\t\t}\r\n\r\n\t\tif (storage) {\r\n\t\t\tvar obj = storage['$jcpath'];\r\n\t\t\tobj && OK(obj.value).forEach(function(key) {\r\n\t\t\t\tM.set(key, obj.value[key], true);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tM.loaded = true;\r\n\t}\r\n\r\n\tfunction dependencies(declaration, callback, obj, el) {\r\n\r\n\t\tif (declaration.importing) {\r\n\t\t\tWAIT(function() {\r\n\t\t\t\treturn declaration.importing !== true;\r\n\t\t\t}, function() {\r\n\t\t\t\tcallback(obj, el);\r\n\t\t\t});\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (!declaration.dependencies || !declaration.dependencies.length) {\r\n\t\t\tsetTimeout(function(callback, obj, el) {\r\n\t\t\t\tcallback(obj, el);\r\n\t\t\t}, 5, callback, obj, el);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tdeclaration.importing = true;\r\n\t\tdeclaration.dependencies.wait(function(item, next) {\r\n\t\t\tif (typeof(item) === TYPE_FN)\r\n\t\t\t\titem(next);\r\n\t\t\telse\r\n\t\t\t\tIMPORT((item.indexOf('<') === -1 ? 'once ' : '') + item, next);\r\n\t\t}, function() {\r\n\t\t\tdeclaration.importing = false;\r\n\t\t\tcallback(obj, el);\r\n\t\t}, 3);\r\n\t}\r\n\r\n\tfunction compile(container) {\r\n\r\n\t\tif (C.is) {\r\n\t\t\tC.recompile = true;\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar arr = [];\r\n\r\n\t\tW.READY instanceof Array && arr.push.apply(arr, W.READY);\r\n\t\tW.jComponent instanceof Array && arr.push.apply(arr, W.jComponent);\r\n\t\tW.components instanceof Array && arr.push.apply(arr, W.components);\r\n\r\n\t\tif (arr.length) {\r\n\t\t\twhile (true) {\r\n\t\t\t\tvar fn = arr.shift();\r\n\t\t\t\tif (!fn)\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tfn();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tC.is = true;\r\n\t\tdownload();\r\n\r\n\t\tif (C.pending.length) {\r\n\t\t\t(function(container) {\r\n\t\t\t\tC.pending.push(function() {\r\n\t\t\t\t\tcompile(container);\r\n\t\t\t\t});\r\n\t\t\t})(container);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar has = false;\r\n\r\n\t\tcrawler(container, function(name, dom, level, scope) {\r\n\r\n\t\t\tvar el = $(dom);\r\n\t\t\tvar meta = name.split(REGMETA);\r\n\t\t\tif (meta.length) {\r\n\t\t\t\tmeta = meta.trim(true);\r\n\t\t\t\tname = meta[0];\r\n\t\t\t} else\r\n\t\t\t\tmeta = null;\r\n\r\n\t\t\thas = true;\r\n\r\n\t\t\t// Check singleton instance\r\n\t\t\tif (statics['$ST_' + name]) {\r\n\t\t\t\tremove(el);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar instances = [];\r\n\t\t\tvar all = name.split(',');\r\n\r\n\t\t\tfor (var y = 0; y < all.length; y++) {\r\n\r\n\t\t\t\tvar name = all[y].trim();\r\n\t\t\t\tvar is = false;\r\n\r\n\t\t\t\tif (name.indexOf('|') !== -1) {\r\n\r\n\t\t\t\t\t// Multiple versions\r\n\t\t\t\t\tvar keys = name.split('|');\r\n\t\t\t\t\tfor (var i = 0; i < keys.length; i++) {\r\n\t\t\t\t\t\tvar key = keys[i].trim();\r\n\t\t\t\t\t\tif (key && M.$components[key]) {\r\n\t\t\t\t\t\t\tname = key;\r\n\t\t\t\t\t\t\tis = true;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (!is)\r\n\t\t\t\t\t\tname = keys[0].trim();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar lazy = false;\r\n\r\n\t\t\t\tif (name.substring(0, 5).toLowerCase() === 'lazy ') {\r\n\t\t\t\t\tname = name.substring(5);\r\n\t\t\t\t\tlazy = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!is && name.lastIndexOf('@') === -1) {\r\n\t\t\t\t\tif (versions[name])\r\n\t\t\t\t\t\tname += '@' + versions[name];\r\n\t\t\t\t\telse if (MD.version)\r\n\t\t\t\t\t\tname += '@' + MD.version;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar com = M.$components[name];\r\n\t\t\t\tvar lo = null;\r\n\r\n\t\t\t\tif (lazy && name) {\r\n\t\t\t\t\tvar namea = name.substring(0, name.indexOf('@'));\r\n\t\t\t\t\tlo = lazycom[name];\r\n\t\t\t\t\tif (!lo) {\r\n\t\t\t\t\t\tif (namea && name !== namea)\r\n\t\t\t\t\t\t\tlazycom[name] = lazycom[namea] = { state: 1 };\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\tlazycom[name] = { state: 1 };\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (lo.state === 1)\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!com) {\r\n\r\n\t\t\t\t\tif (!fallback[name]) {\r\n\t\t\t\t\t\tfallback[name] = 1;\r\n\t\t\t\t\t\tfallback.$++;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar x = attrcom(el, 'import');\r\n\t\t\t\t\tif (!x) {\r\n\t\t\t\t\t\t!statics['$NE_' + name] && (statics['$NE_' + name] = true);\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (C.imports[x] === 1)\r\n\t\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\t\tif (C.imports[x] === 2) {\r\n\t\t\t\t\t\t!statics['$NE_' + name] && (statics['$NE_' + name] = true);\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tC.imports[x] = 1;\r\n\t\t\t\t\tC.importing++;\r\n\r\n\t\t\t\t\tM.import(x, function() {\r\n\t\t\t\t\t\tC.importing--;\r\n\t\t\t\t\t\tC.imports[x] = 2;\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (fallback[name] === 1) {\r\n\t\t\t\t\tfallback.$--;\r\n\t\t\t\t\tdelete fallback[name];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar obj = new COM(com.name);\r\n\t\t\t\tvar parent = dom.parentNode;\r\n\r\n\t\t\t\twhile (true) {\r\n\t\t\t\t\tif (parent.$com) {\r\n\t\t\t\t\t\tvar pc = parent.$com;\r\n\t\t\t\t\t\tobj.owner = pc;\r\n\t\t\t\t\t\tif (pc.$children)\r\n\t\t\t\t\t\t\tpc.$children++;\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\tpc.$children = 1;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t} else if (parent.nodeName === 'BODY')\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tparent = parent.parentNode;\r\n\t\t\t\t\tif (parent == null)\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tobj.global = com.shared;\r\n\t\t\t\tobj.element = el;\r\n\t\t\t\tobj.dom = dom;\r\n\r\n\t\t\t\tvar p = attrcom(el, 'path') || (meta ? meta[1] === 'null' ? '' : meta[1] : '') || obj._id;\r\n\r\n\t\t\t\tif (p.substring(0, 1) === '%')\r\n\t\t\t\t\tobj.$noscope = true;\r\n\r\n\t\t\t\tobj.setPath(pathmaker(p, true), 1);\r\n\t\t\t\tobj.config = {};\r\n\r\n\t\t\t\t// Default config\r\n\t\t\t\tcom.config && obj.reconfigure(com.config, NOOP);\r\n\r\n\t\t\t\tvar tmp = attrcom(el, 'config') || (meta ? meta[2] === 'null' ? '' : meta[2] : '');\r\n\t\t\t\ttmp && obj.reconfigure(tmp, NOOP);\r\n\r\n\t\t\t\tif (!obj.$init)\r\n\t\t\t\t\tobj.$init = attrcom(el, 'init') || null;\r\n\r\n\t\t\t\tif (!obj.type)\r\n\t\t\t\t\tobj.type = attrcom(el, 'type') || '';\r\n\r\n\t\t\t\tif (!obj.id)\r\n\t\t\t\t\tobj.id = attrcom(el, 'id') || obj._id;\r\n\r\n\t\t\t\tobj.siblings = all.length > 1;\r\n\t\t\t\tobj.$lazy = lo;\r\n\r\n\t\t\t\tfor (var i = 0; i < configs.length; i++) {\r\n\t\t\t\t\tvar con = configs[i];\r\n\t\t\t\t\tcon.fn(obj) && obj.reconfigure(con.config, NOOP);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcurrent_com = obj;\r\n\t\t\t\tcom.declaration.call(obj, obj, obj.config);\r\n\t\t\t\tcurrent_com = null;\r\n\r\n\t\t\t\tmeta[3] && el.attrd('jc-value', meta[3]);\r\n\r\n\t\t\t\tif (obj.init && !statics[name]) {\r\n\t\t\t\t\tstatics[name] = true;\r\n\t\t\t\t\tobj.init();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdom.$com = obj;\r\n\r\n\t\t\t\tif (!obj.$noscope)\r\n\t\t\t\t\tobj.$noscope = attrcom(el, 'noscope') === 'true';\r\n\r\n\t\t\t\tvar code = obj.path ? obj.path.charCodeAt(0) : 0;\r\n\t\t\t\tif (!obj.$noscope && scope.length && !obj.$pp) {\r\n\r\n\t\t\t\t\tvar output = initscopes(scope);\r\n\r\n\t\t\t\t\tif (obj.path && code !== 33 && code !== 35) {\r\n\t\t\t\t\t\tobj.setPath(obj.path === '?' ? output.path : (obj.path.indexOf('?') === -1 ? output.path + '.' + obj.path : obj.path.replace(/\\?/g, output.path)), 2);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tobj.$$path = EMPTYARRAY;\r\n\t\t\t\t\t\tobj.path = '';\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tobj.scope = output;\r\n\t\t\t\t\tobj.pathscope = output.path;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tinstances.push(obj);\r\n\r\n\t\t\t\tvar template = attrcom(el, 'template') || obj.template;\r\n\t\t\t\tif (template)\r\n\t\t\t\t\tobj.template = template;\r\n\r\n\t\t\t\tif (attrcom(el, 'released') === 'true')\r\n\t\t\t\t\tobj.$released = true;\r\n\r\n\t\t\t\tif (attrcom(el, 'url')) {\r\n\t\t\t\t\twarn('Components: You have to use \"data-jc-template\" attribute instead of \"data-jc-url\" for the component: {0}[{1}].'.format(obj.name, obj.path));\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (typeof(template) === TYPE_S) {\r\n\t\t\t\t\tvar fn = function(data) {\r\n\t\t\t\t\t\tif (obj.prerender)\r\n\t\t\t\t\t\t\tdata = obj.prerender(data);\r\n\t\t\t\t\t\tdependencies(com, function(obj, el) {\r\n\t\t\t\t\t\t\tif (typeof(obj.make) === TYPE_FN) {\r\n\t\t\t\t\t\t\t\tvar parent = current_com;\r\n\t\t\t\t\t\t\t\tcurrent_com = obj;\r\n\t\t\t\t\t\t\t\tobj.make(data);\r\n\t\t\t\t\t\t\t\tcurrent_com = parent;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tinit(el, obj);\r\n\t\t\t\t\t\t}, obj, el);\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tvar c = template.substring(0, 1);\r\n\t\t\t\t\tif (c === '.' || c === '#' || c === '[') {\r\n\t\t\t\t\t\tfn($(template).html());\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar k = 'TE' + HASH(template);\r\n\t\t\t\t\tvar a = statics[k];\r\n\t\t\t\t\tif (a) {\r\n\t\t\t\t\t\tfn(a);\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t$.get(makeurl(template), function(response) {\r\n\t\t\t\t\t\tstatics[k] = response;\r\n\t\t\t\t\t\tfn(response);\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (typeof(obj.make) === TYPE_S) {\r\n\r\n\t\t\t\t\tif (obj.make.indexOf('<') !== -1) {\r\n\t\t\t\t\t\tdependencies(com, function(obj, el) {\r\n\t\t\t\t\t\t\tif (obj.prerender)\r\n\t\t\t\t\t\t\t\tobj.make = obj.prerender(obj.make);\r\n\t\t\t\t\t\t\tel.html(obj.make);\r\n\t\t\t\t\t\t\tinit(el, obj);\r\n\t\t\t\t\t\t}, obj, el);\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t$.get(makeurl(obj.make), function(data) {\r\n\t\t\t\t\t\tdependencies(com, function(obj, el) {\r\n\t\t\t\t\t\t\tif (obj.prerender)\r\n\t\t\t\t\t\t\t\tdata = obj.prerender(data);\r\n\t\t\t\t\t\t\tel.html(data);\r\n\t\t\t\t\t\t\tinit(el, obj);\r\n\t\t\t\t\t\t}, obj, el);\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (com.dependencies) {\r\n\t\t\t\t\tdependencies(com, function(obj, el) {\r\n\r\n\t\t\t\t\t\tif (obj.make) {\r\n\t\t\t\t\t\t\tvar parent = current_com;\r\n\t\t\t\t\t\t\tcurrent_com = obj;\r\n\t\t\t\t\t\t\tobj.make();\r\n\t\t\t\t\t\t\tcurrent_com = parent;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tinit(el, obj);\r\n\t\t\t\t\t}, obj, el);\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t// Because sometimes make doesn't contain the content of the element\r\n\t\t\t\t\tsetTimeout(function(init, el, obj) {\r\n\r\n\t\t\t\t\t\tif (obj.make) {\r\n\t\t\t\t\t\t\tvar parent = current_com;\r\n\t\t\t\t\t\t\tcurrent_com = obj;\r\n\t\t\t\t\t\t\tobj.make();\r\n\t\t\t\t\t\t\tcurrent_com = parent;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tinit(el, obj);\r\n\t\t\t\t\t}, 5, init, el, obj);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// A reference to instances\r\n\t\t\tif (instances.length > 0)\r\n\t\t\t\tel.$com = instances.length > 1 ? instances : instances[0];\r\n\r\n\t\t}, undefined);\r\n\r\n\t\t// perform binder\r\n\t\trebindbinder();\r\n\r\n\t\tif (!has || !C.pending.length)\r\n\t\t\tC.is = false;\r\n\r\n\t\tif (container !== undefined || !toggles.length)\r\n\t\t\treturn nextpending();\r\n\r\n\t\tasync(toggles, function(item, next) {\r\n\t\t\tfor (var i = 0, length = item.toggle.length; i < length; i++)\r\n\t\t\t\titem.element.tclass(item.toggle[i]);\r\n\t\t\tnext();\r\n\t\t}, nextpending);\r\n\t}\r\n\r\n\tfunction initscopes(scopes) {\r\n\r\n\t\tvar scope = scopes[scopes.length - 1];\r\n\t\tif (scope.$scopedata)\r\n\t\t\treturn scope.$scopedata;\r\n\r\n\t\tvar path = attrcom(scope, 'scope');\r\n\t\tvar independent = path.substring(0, 1) === '!';\r\n\r\n\t\tif (independent)\r\n\t\t\tpath = path.substring(1);\r\n\r\n\t\tvar arr = [scope];\r\n\t\tif (!independent) {\r\n\t\t\tfor (var i = scopes.length - 1; i > -1; i--) {\r\n\t\t\t\tarr.push(scopes[i]);\r\n\t\t\t\tif (scopes[i].getAttribute(ATTRSCOPE).substring(0, 1) === '!')\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar absolute = '';\r\n\r\n\t\tarr.length && arr.reverse();\r\n\r\n\t\tfor (var i = 0, length = arr.length; i < length; i++) {\r\n\r\n\t\t\tvar sc = arr[i];\r\n\t\t\tvar p = sc.$scope || attrcom(sc, 'scope');\r\n\r\n\t\t\tsc.$initialized = true;\r\n\r\n\t\t\tif (sc.$processed) {\r\n\t\t\t\tabsolute = p;\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tsc.$processed = true;\r\n\t\t\tsc.$isolated = p.substring(0, 1) === '!';\r\n\r\n\t\t\tif (sc.$isolated)\r\n\t\t\t\tp = p.substring(1);\r\n\r\n\t\t\tif (!p || p === '?')\r\n\t\t\t\tp = GUID(25).replace(/\\d/g, '');\r\n\r\n\t\t\tif (sc.$isolated)\r\n\t\t\t\tabsolute = p;\r\n\t\t\telse\r\n\t\t\t\tabsolute += (absolute ? '.' : '') + p;\r\n\r\n\t\t\tsc.$scope = absolute;\r\n\t\t\tvar d = new Scope();\r\n\t\t\td._id = d.ID = d.id = GUID(10);\r\n\t\t\td.path = absolute;\r\n\t\t\td.elements = arr.slice(0, i + 1);\r\n\t\t\td.isolated = sc.$isolated;\r\n\t\t\td.element = $(arr[0]);\r\n\t\t\tsc.$scopedata = d;\r\n\r\n\t\t\tvar tmp = attrcom(sc, 'value');\r\n\t\t\tif (tmp) {\r\n\t\t\t\tvar fn = new Function('return ' + tmp);\r\n\t\t\t\tdefaults['#' + HASH(p)] = fn; // store by path (DEFAULT() --> can reset scope object)\r\n\t\t\t\ttmp = fn();\r\n\t\t\t\tset(p, tmp);\r\n\t\t\t\temitwatch(p, tmp, 1);\r\n\t\t\t}\r\n\r\n\t\t\t// Applies classes\r\n\t\t\tvar cls = attrcom(sc, 'class');\r\n\t\t\tif (cls) {\r\n\t\t\t\t(function(cls) {\r\n\t\t\t\t\tcls = cls.split(' ');\r\n\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\tvar el = $(sc);\r\n\t\t\t\t\t\tfor (var i = 0, length = cls.length; i < length; i++)\r\n\t\t\t\t\t\t\tel.tclass(cls[i]);\r\n\t\t\t\t\t}, 5);\r\n\t\t\t\t})(cls);\r\n\t\t\t}\r\n\r\n\t\t\ttmp = attrcom(sc, 'init');\r\n\t\t\tif (tmp) {\r\n\t\t\t\ttmp = GET(tmp);\r\n\t\t\t\tif (tmp) {\r\n\t\t\t\t\tvar a = current_owner;\r\n\t\t\t\t\tcurrent_owner = 'scope' + d._id;\r\n\t\t\t\t\ttmp.call(d, p, $(sc));\r\n\t\t\t\t\tcurrent_owner = a;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn scope.$scopedata;\r\n\t}\r\n\r\n\tfunction download() {\r\n\r\n\t\tvar arr = [];\r\n\t\tvar count = 0;\r\n\r\n\t\t$(ATTRURL).each(function() {\r\n\r\n\t\t\tvar t = this;\r\n\t\t\tvar el = $(t);\r\n\r\n\t\t\tif (t.$downloaded)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tt.$downloaded = 1;\r\n\t\t\tvar url = attrcom(el, 'url');\r\n\r\n\t\t\t// Unique\r\n\t\t\tvar once = url.substring(0, 5).toLowerCase() === 'once ';\r\n\t\t\tif (url.substring(0, 1) === '!' || once) {\r\n\t\t\t\tif (once)\r\n\t\t\t\t\turl = url.substring(5);\r\n\t\t\t\telse\r\n\t\t\t\t\turl = url.substring(1);\r\n\t\t\t\tif (statics[url])\r\n\t\t\t\t\treturn;\r\n\t\t\t\tstatics[url] = 2;\r\n\t\t\t}\r\n\r\n\t\t\tvar item = {};\r\n\t\t\titem.url = url;\r\n\t\t\titem.element = el;\r\n\t\t\titem.callback = attrcom(el, 'init');\r\n\t\t\titem.path = attrcom(el, 'path');\r\n\t\t\titem.toggle = (attrcom(el, 'class') || '').split(' ');\r\n\t\t\titem.expire = attrcom(el, 'cache') || MD.importcache;\r\n\t\t\tarr.push(item);\r\n\t\t});\r\n\r\n\t\tif (!arr.length)\r\n\t\t\treturn;\r\n\r\n\t\tvar canCompile = false;\r\n\t\tC.importing++;\r\n\r\n\t\tasync(arr, function(item, next) {\r\n\r\n\t\t\tvar key = makeurl(item.url);\r\n\t\t\tvar can = false;\r\n\r\n\t\t\tAJAXCACHE('GET ' + item.url, null, function(response) {\r\n\r\n\t\t\t\tkey = '$import' + key;\r\n\r\n\t\t\t\tcurrent_element = item.element[0];\r\n\r\n\t\t\t\tif (statics[key])\r\n\t\t\t\t\tresponse = removescripts(response);\r\n\t\t\t\telse\r\n\t\t\t\t\tresponse = importscripts(importstyles(response));\r\n\r\n\t\t\t\tcan = response && REGCOM.test(response);\r\n\r\n\t\t\t\tif (can)\r\n\t\t\t\t\tcanCompile = true;\r\n\r\n\t\t\t\titem.element.html(response);\r\n\t\t\t\tstatics[key] = true;\r\n\t\t\t\titem.toggle.length && item.toggle[0] && toggles.push(item);\r\n\r\n\t\t\t\tif (item.callback && !attrcom(item.element)) {\r\n\t\t\t\t\tvar callback = get(item.callback);\r\n\t\t\t\t\ttypeof(callback) === TYPE_FN && callback(item.element);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcurrent_element = null;\r\n\t\t\t\tcount++;\r\n\t\t\t\tnext();\r\n\r\n\t\t\t}, item.expire);\r\n\r\n\t\t}, function() {\r\n\t\t\tC.importing--;\r\n\t\t\tclear('valid', 'dirty', 'find');\r\n\t\t\tcount && canCompile && compile();\r\n\t\t});\r\n\t}\r\n\r\n\tfunction remove(el) {\r\n\t\tvar dom = el[0];\r\n\t\tdom.$com = null;\r\n\t\tel.attr(ATTRDEL, true);\r\n\t\tel.remove();\r\n\t}\r\n\r\n\tfunction cacherest(method, url, params, value, expire) {\r\n\r\n\t\tif (params && !params.version && M.$version)\r\n\t\t\tparams.version = M.$version;\r\n\r\n\t\tif (params && !params.language && M.$language)\r\n\t\t\tparams.language = M.$language;\r\n\r\n\t\tparams = STRINGIFY(params);\r\n\t\tvar key = HASH(method + '#' + url.replace(/\\//g, '') + params).toString();\r\n\t\treturn cachestorage(key, value, expire);\r\n\t}\r\n\r\n\tfunction cachestorage(key, value, expire) {\r\n\r\n\t\tvar now = Date.now();\r\n\r\n\t\tif (value !== undefined) {\r\n\r\n\t\t\tif (expire === 'session') {\r\n\t\t\t\tcache['$session' + key] = value;\r\n\t\t\t\treturn value;\r\n\t\t\t}\r\n\r\n\t\t\tif (typeof(expire) === TYPE_S)\r\n\t\t\t\texpire = expire.parseExpire();\r\n\r\n\t\t\tstorage[key] = { expire: now + expire, value: value };\r\n\t\t\tsave();\r\n\t\t\treturn value;\r\n\t\t}\r\n\r\n\t\tvar item = cache['$session' + key];\r\n\t\tif (item)\r\n\t\t\treturn item;\r\n\r\n\t\titem = storage[key];\r\n\t\tif (item && item.expire > now)\r\n\t\t\treturn item.value;\r\n\t}\r\n\r\n\tfunction makeurl(url, make) {\r\n\r\n\t\tMD.makeurl && (url = MD.makeurl(url));\r\n\r\n\t\tif (make)\r\n\t\t\treturn url;\r\n\r\n\t\tvar builder = [];\r\n\t\tvar en = encodeURIComponent;\r\n\r\n\t\tM.$version && builder.push('version=' + en(M.$version));\r\n\t\tM.$language && builder.push('language=' + en(M.$language));\r\n\r\n\t\tif (!builder.length)\r\n\t\t\treturn url;\r\n\r\n\t\tvar index = url.indexOf('?');\r\n\t\tif (index == -1)\r\n\t\t\turl += '?';\r\n\t\telse\r\n\t\t\turl += '&';\r\n\r\n\t\treturn url + builder.join('&');\r\n\t}\r\n\r\n\tfunction init(el, obj) {\r\n\r\n\t\tvar dom = el[0];\r\n\t\tvar type = dom.tagName;\r\n\t\tvar collection;\r\n\r\n\t\t// autobind\r\n\t\tif (ACTRLS[type]) {\r\n\t\t\tobj.$input = true;\r\n\t\t\tcollection = obj.element;\r\n\t\t} else\r\n\t\t\tcollection = el;\r\n\r\n\t\tfindcontrol2(obj, collection);\r\n\r\n\t\tobj.released && obj.released(obj.$released);\r\n\t\tM.components.push(obj);\r\n\t\tC.init.push(obj);\r\n\t\ttype !== 'BODY' && REGCOM.test(el[0].innerHTML) && compile(el);\r\n\t\tready();\r\n\t}\r\n\r\n\tfunction initialize() {\r\n\t\tvar item = C.init.pop();\r\n\t\tif (item === undefined)\r\n\t\t\t!C.ready && compile();\r\n\t\telse {\r\n\t\t\t!item.$removed && prepare(item);\r\n\t\t\tinitialize();\r\n\t\t}\r\n\t}\r\n\r\n\tfunction prepare(obj) {\r\n\r\n\t\tif (!obj)\r\n\t\t\treturn;\r\n\r\n\t\tvar el = obj.element;\r\n\r\n\t\textensions[obj.name] && extensions[obj.name].forEach(function(item) {\r\n\t\t\titem.config && obj.reconfigure(item.config, NOOP);\r\n\t\t\titem.fn.call(obj, obj, obj.config);\r\n\t\t});\r\n\r\n\t\tvar value = obj.get();\r\n\t\tvar tmp;\r\n\r\n\t\tobj.configure && obj.reconfigure(obj.config, undefined, true);\r\n\t\tobj.$loaded = true;\r\n\r\n\t\tif (obj.setter) {\r\n\t\t\tif (!obj.$prepared) {\r\n\r\n\t\t\t\tobj.$prepared = true;\r\n\t\t\t\tobj.$ready = true;\r\n\r\n\t\t\t\ttmp = attrcom(obj, 'value');\r\n\r\n\t\t\t\tif (tmp) {\r\n\t\t\t\t\tif (!defaults[tmp])\r\n\t\t\t\t\t\tdefaults[tmp] = new Function('return ' + tmp);\r\n\t\t\t\t\tobj.$default = defaults[tmp];\r\n\t\t\t\t\tif (value === undefined) {\r\n\t\t\t\t\t\tvalue = obj.$default();\r\n\t\t\t\t\t\tset(obj.path, value);\r\n\t\t\t\t\t\temitwatch(obj.path, value, 0);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (obj.$binded)\r\n\t\t\t\t\tobj.$interaction(0);\r\n\t\t\t\telse {\r\n\t\t\t\t\tobj.$binded = true;\r\n\t\t\t\t\tobj.setterX(value, obj.path, 0);\r\n\t\t\t\t\tobj.$interaction(0);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else\r\n\t\t\tobj.$binded = true;\r\n\r\n\t\tif (obj.validate && !obj.$valid_disabled)\r\n\t\t\tobj.$valid = obj.validate(obj.get(), true);\r\n\r\n\t\tobj.done && setTimeout(obj.done, 20);\r\n\t\tobj.state && obj.stateX(0, 3);\r\n\r\n\t\tobj.$init && setTimeout(function() {\r\n\t\t\tvar fn = get(obj.$init);\r\n\t\t\ttypeof(fn) === TYPE_FN && fn.call(obj, obj);\r\n\t\t\tobj.$init = undefined;\r\n\t\t}, 5);\r\n\r\n\t\tvar n = 'component';\r\n\t\tel.trigger(n);\r\n\t\tel.off(n);\r\n\r\n\t\tvar cls = attrcom(el, 'class');\r\n\t\tcls && (function(cls) {\r\n\t\t\tsetTimeout(function() {\r\n\t\t\t\tcls = cls.split(' ');\r\n\t\t\t\tvar tmp = el[0].$jclass || {};\r\n\t\t\t\tfor (var i = 0, length = cls.length; i < length; i++) {\r\n\t\t\t\t\tif (!tmp[cls[i]]) {\r\n\t\t\t\t\t\tel.tclass(cls[i]);\r\n\t\t\t\t\t\ttmp[cls[i]] = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tel[0].$jclass = tmp;\r\n\t\t\t}, 5);\r\n\t\t})(cls);\r\n\r\n\t\tobj.id && EMIT('#' + obj.id, obj);\r\n\t\tEMIT('@' + obj.name, obj);\r\n\t\tEMIT(n, obj);\r\n\t\tclear('find.');\r\n\t\tif (obj.$lazy) {\r\n\t\t\tobj.$lazy.state = 3;\r\n\t\t\tdelete obj.$lazy;\r\n\t\t\tEMIT('lazy', obj.$name, false);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction async(arr, fn, done) {\r\n\t\tvar item = arr.shift();\r\n\t\tif (item == null)\r\n\t\t\treturn done && done();\r\n\t\tfn(item, function() {\r\n\t\t\tasync(arr, fn, done);\r\n\t\t});\r\n\t}\r\n\r\n\tfunction nextpending() {\r\n\r\n\t\tvar next = C.pending.shift();\r\n\t\tif (next)\r\n\t\t\tnext();\r\n\t\telse if ($domready) {\r\n\r\n\t\t\tif (C.ready)\r\n\t\t\t\tC.is = false;\r\n\r\n\t\t\tif (MD.fallback && fallback.$ && !C.importing) {\r\n\t\t\t\tvar arr = OK(fallback);\r\n\t\t\t\tfor (var i = 0; i < arr.length; i++) {\r\n\t\t\t\t\tif (arr[i] !== '$') {\r\n\t\t\t\t\t\tvar num = fallback[arr[i]];\r\n\t\t\t\t\t\tif (num === 1) {\r\n\t\t\t\t\t\t\tfallbackpending.push(arr[i].toLowerCase());\r\n\t\t\t\t\t\t\tfallback[arr[i]] = 2;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tfallback.$ = 0;\r\n\t\t\t\tfallbackpending.length && downloadfallback();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction downloadfallback() {\r\n\t\tif (C.importing) {\r\n\t\t\tsetTimeout(downloadfallback, 1000);\r\n\t\t} else {\r\n\t\t\tsetTimeout2('$fallback', function() {\r\n\t\t\t\tfallbackpending.splice(0).wait(function(item, next) {\r\n\t\t\t\t\tif (M.$components[item])\r\n\t\t\t\t\t\tnext();\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\twarn('Downloading: ' + item);\r\n\t\t\t\t\t\tIMPORTCACHE(MD.fallback.format(item), MD.fallbackcache, next);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, 3);\r\n\t\t\t}, 100);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction emitwatch(path, value, type) {\r\n\t\tfor (var i = 0, length = watches.length; i < length; i++) {\r\n\t\t\tvar self = watches[i];\r\n\t\t\tif (self.path === '*') {\r\n\t\t\t\tself.fn.call(self.context, path, self.format ? self.format(value, path, type) : value, type);\r\n\t\t\t} else if (path.length > self.path.length) {\r\n\t\t\t\tvar index = path.lastIndexOf('.', self.path.length);\r\n\t\t\t\tif (index === -1 ? false : self.path === path.substring(0, index)) {\r\n\t\t\t\t\tvar val = GET(self.path);\r\n\t\t\t\t\tself.fn.call(self.context, path, self.format ? self.format(val, path, type) : val, type);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tfor (var j = 0, jl = self.$path.length; j < jl; j++) {\r\n\t\t\t\t\tif (self.$path[j] === path) {\r\n\t\t\t\t\t\tvar val = GET(self.path);\r\n\t\t\t\t\t\tself.fn.call(self.context, path, self.format ? self.format(val, path, type) : val, type);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction ready() {\r\n\r\n\t\tsetTimeout2('$ready', function() {\r\n\r\n\t\t\tmediaquery();\r\n\t\t\trefresh();\r\n\t\t\tinitialize();\r\n\r\n\t\t\tvar count = M.components.length;\r\n\t\t\t$(document).trigger('components', [count]);\r\n\r\n\t\t\tif (!$loaded) {\r\n\t\t\t\t$loaded = true;\r\n\t\t\t\tclear('valid', 'dirty', 'find');\r\n\t\t\t\tEMIT('init');\r\n\t\t\t\tEMIT('ready');\r\n\t\t\t}\r\n\r\n\t\t\tsetTimeout2('$initcleaner', function() {\r\n\t\t\t\tcleaner();\r\n\t\t\t\tvar arr = autofill.splice(0);\r\n\t\t\t\tfor (var i = 0; i < arr.length; i++) {\r\n\t\t\t\t\tvar com = arr[i];\r\n\t\t\t\t\t!com.$default && findcontrol(com.element[0], function(el) {\r\n\t\t\t\t\t\tvar val = $(el).val();\r\n\t\t\t\t\t\tif (val) {\r\n\t\t\t\t\t\t\tvar tmp = com.parser(val);\r\n\t\t\t\t\t\t\tif (tmp && com.get() !== tmp) {\r\n\t\t\t\t\t\t\t\tcom.dirty(false, true);\r\n\t\t\t\t\t\t\t\tcom.set(tmp, 0);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}, 1000);\r\n\r\n\t\t\tC.is = false;\r\n\r\n\t\t\tif (C.recompile) {\r\n\t\t\t\tC.recompile = false;\r\n\t\t\t\tcompile();\r\n\t\t\t}\r\n\r\n\t\t\tif (C.ready) {\r\n\t\t\t\tvar arr = C.ready;\r\n\t\t\t\tfor (var i = 0, length = arr.length; i < length; i++)\r\n\t\t\t\t\tarr[i](count);\r\n\t\t\t\tC.ready = undefined;\r\n\t\t\t\tcompile();\r\n\t\t\t\tsetTimeout(compile, 3000);\r\n\t\t\t\tsetTimeout(compile, 6000);\r\n\t\t\t\tsetTimeout(compile, 9000);\r\n\t\t\t}\r\n\t\t}, 100);\r\n\t}\r\n\r\n\tfunction removescripts(str) {\r\n\t\treturn str.replace(REGSCRIPT, function(text) {\r\n\t\t\tvar index = text.indexOf('>');\r\n\t\t\tvar scr = text.substring(0, index + 1);\r\n\t\t\treturn scr.substring(0, 6) === '<style' || (scr.substring(0, 7) === '<script' && scr.indexOf('type=\"') === -1) || scr.indexOf('/javascript\"') !== -1 ? '' : text;\r\n\t\t});\r\n\t}\r\n\r\n\tfunction importscripts(str) {\r\n\r\n\t\tvar beg = -1;\r\n\t\tvar output = str;\r\n\t\tvar external = [];\r\n\t\tvar scr;\r\n\r\n\t\twhile (true) {\r\n\r\n\t\t\tbeg = str.indexOf('<script', beg);\r\n\t\t\tif (beg === -1)\r\n\t\t\t\tbreak;\r\n\t\t\tvar end = str.indexOf('</script>', beg + 8);\r\n\t\t\tvar code = str.substring(beg, end + 9);\r\n\t\t\tbeg = end + 9;\r\n\t\t\tend = code.indexOf('>');\r\n\t\t\tscr = code.substring(0, end);\r\n\r\n\t\t\tif (scr.indexOf('type=') !== -1 && scr.lastIndexOf('javascript') === -1)\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tvar tmp = code.substring(end + 1, code.length - 9).trim();\r\n\t\t\tif (!tmp) {\r\n\t\t\t\toutput = output.replace(code, '').trim();\r\n\t\t\t\tvar eid = 'external' + HASH(code);\r\n\t\t\t\tif (!statics[eid]) {\r\n\t\t\t\t\texternal.push(code);\r\n\t\t\t\t\tstatics[eid] = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\texternal.length && $('head').append(external.join('\\n'));\r\n\t\treturn output;\r\n\t}\r\n\r\n\tfunction importstyles(str, id) {\r\n\t\tvar builder = [];\r\n\r\n\t\tstr = str.replace(REGCSS, function(text) {\r\n\t\t\ttext = text.replace('<style>', '<style type=\"text/css\">');\r\n\t\t\tbuilder.push(text.substring(23, text.length - 8).trim());\r\n\t\t\treturn '';\r\n\t\t});\r\n\r\n\t\tvar key = 'css' + (id || '');\r\n\r\n\t\tif (id) {\r\n\t\t\tif (statics[key])\r\n\t\t\t\t$('#' + key).remove();\r\n\t\t\telse\r\n\t\t\t\tstatics[key] = true;\r\n\t\t}\r\n\r\n\t\tbuilder.length && $('<style' + (id ? ' id=\"' + key + '\"' : '') + '>{0}</style>'.format(builder.join('\\n'))).appendTo('head');\r\n\t\treturn str;\r\n\t}\r\n\r\n\tfunction remap(path, value) {\r\n\r\n\t\tvar index = path.replace('-->', '->').indexOf('->');\r\n\r\n\t\tif (index !== -1) {\r\n\t\t\tvalue = value[path.substring(0, index).trim()];\r\n\t\t\tpath = path.substring(index + 3).trim();\r\n\t\t}\r\n\r\n\t\tM.set(path, value);\r\n\t}\r\n\r\n\tfunction set(path, value, is) {\r\n\r\n\t\tif (path == null)\r\n\t\t\treturn;\r\n\r\n\t\tvar key = '+' + path;\r\n\r\n\t\tif (paths[key])\r\n\t\t\treturn paths[key](MD.scope, value, path, binders, binderbind, is);\r\n\r\n\t\tif (path.indexOf('?') !== -1) {\r\n\t\t\tpath = '';\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar arr = parsepath(path);\r\n\t\tvar builder = [];\r\n\t\tvar binder = [];\r\n\r\n\t\tfor (var i = 0; i < arr.length - 1; i++) {\r\n\t\t\tvar item = arr[i];\r\n\t\t\tvar type = arr[i + 1] ? (REGISARR.test(arr[i + 1]) ? '[]' : '{}') : '{}';\r\n\t\t\tvar p = 'w' + (item.substring(0, 1) === '[' ? '' : '.') + item;\r\n\t\t\tbuilder.push('if(typeof(' + p + ')!==\\'object\\'||' + p + '==null)' + p + '=' + type);\r\n\t\t}\r\n\r\n\t\tfor (var i = 0; i < arr.length - 1; i++) {\r\n\t\t\tvar item = arr[i];\r\n\t\t\tbinder.push('binders[\\'' + item + '\\']&&binderbind(\\'' + item + '\\',\\'' + path + '\\',$ticks)');\r\n\t\t}\r\n\r\n\t\tvar v = arr[arr.length - 1];\r\n\t\tbinder.push('binders[\\'' + v + '\\']&&binderbind(\\'' + v + '\\',\\'' + path + '\\',$ticks)');\r\n\t\tbinder.push('binders[\\'!' + v + '\\']&&binderbind(\\'!' + v + '\\',\\'' + path + '\\',$ticks)');\r\n\r\n\t\tif (v.substring(0, 1) !== '[')\r\n\t\t\tv = '.' + v;\r\n\r\n\t\tvar fn = (new Function('w', 'a', 'b', 'binders', 'binderbind', 'nobind', 'var $ticks=Math.random().toString().substring(2,8);if(!nobind){' + builder.join(';') + ';var v=typeof(a)==\\'function\\'?a(MAIN.compiler.get(b)):a;w' + v + '=v}' + binder.join(';') + ';return a'));\r\n\t\tpaths[key] = fn;\r\n\t\tfn(MD.scope, value, path, binders, binderbind, is);\r\n\t\treturn C;\r\n\t}\r\n\r\n\tfunction set2(scope, path, value) {\r\n\r\n\t\tif (path == null)\r\n\t\t\treturn;\r\n\r\n\t\tvar key = '++' + path;\r\n\r\n\t\tif (paths[key])\r\n\t\t\treturn paths[key](scope, value, path);\r\n\r\n\t\tvar arr = parsepath(path);\r\n\t\tvar builder = [];\r\n\r\n\t\tfor (var i = 0; i < arr.length - 1; i++) {\r\n\t\t\tvar item = arr[i];\r\n\t\t\tvar type = arr[i + 1] ? (REGISARR.test(arr[i + 1]) ? '[]' : '{}') : '{}';\r\n\t\t\tvar p = 'w' + (item.substring(0, 1) === '[' ? '' : '.') + item;\r\n\t\t\tbuilder.push('if(typeof(' + p + ')!==\\'object\\'||' + p + '==null)' + p + '=' + type);\r\n\t\t}\r\n\r\n\t\tvar v = arr[arr.length - 1];\r\n\r\n\t\tif (v.substring(0, 1) !== '[')\r\n\t\t\tv = '.' + v;\r\n\r\n\t\tvar fn = (new Function('w', 'a', 'b', builder.join(';') + ';w' + v + '=a;return a'));\r\n\t\tpaths[key] = fn;\r\n\t\tfn(scope, value, path);\r\n\t\treturn scope;\r\n\t}\r\n\r\n\tfunction get(path, scope) {\r\n\r\n\t\tif (path == null)\r\n\t\t\treturn;\r\n\r\n\t\tvar code = path.charCodeAt(0);\r\n\t\tif (code === 37)\r\n\t\t\tpath = 'jctmp.' + path.substring(1);\r\n\r\n\t\tvar key = '=' + path;\r\n\t\tif (paths[key])\r\n\t\t\treturn paths[key](scope || MD.scope);\r\n\r\n\t\tif (path.indexOf('?') !== -1)\r\n\t\t\treturn;\r\n\r\n\t\tvar arr = parsepath(path);\r\n\t\tvar builder = [];\r\n\r\n\t\tfor (var i = 0, length = arr.length - 1; i < length; i++) {\r\n\t\t\tvar item = arr[i];\r\n\t\t\tif (item.substring(0, 1) !== '[')\r\n\t\t\t\titem = '.' + item;\r\n\t\t\tbuilder.push('if(!w' + item + ')return');\r\n\t\t}\r\n\r\n\t\tvar v = arr[arr.length - 1];\r\n\t\tif (v.substring(0, 1) !== '[')\r\n\t\t\tv = '.' + v;\r\n\r\n\t\tvar fn = (new Function('w', builder.join(';') + ';return w' + v));\r\n\t\tpaths[key] = fn;\r\n\t\treturn fn(scope || MD.scope);\r\n\t}\r\n\r\n\tfunction parsepath(path) {\r\n\r\n\t\tvar arr = path.split('.');\r\n\t\tvar builder = [];\r\n\t\tvar all = [];\r\n\r\n\t\tfor (var i = 0; i < arr.length; i++) {\r\n\t\t\tvar p = arr[i];\r\n\t\t\tvar index = p.indexOf('[');\r\n\t\t\tif (index === -1) {\r\n\t\t\t\tif (p.indexOf('-') === -1) {\r\n\t\t\t\t\tall.push(p);\r\n\t\t\t\t\tbuilder.push(all.join('.'));\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar a = all.splice(all.length - 1);\r\n\t\t\t\t\tall.push(a + '[\\'' + p + '\\']');\r\n\t\t\t\t\tbuilder.push(all.join('.'));\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (p.indexOf('-') === -1) {\r\n\t\t\t\t\tall.push(p.substring(0, index));\r\n\t\t\t\t\tbuilder.push(all.join('.'));\r\n\t\t\t\t\tall.splice(all.length - 1);\r\n\t\t\t\t\tall.push(p);\r\n\t\t\t\t\tbuilder.push(all.join('.'));\r\n\t\t\t\t} else {\r\n\t\t\t\t\tall.push('[\\'' + p.substring(0, index) + '\\']');\r\n\t\t\t\t\tbuilder.push(all.join(''));\r\n\t\t\t\t\tall.push(p.substring(index));\r\n\t\t\t\t\tbuilder.push(all.join(''));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn builder;\r\n\t}\r\n\r\n\tC.get = get;\r\n\r\n\tfunction clear() {\r\n\r\n\t\tif (!arguments.length) {\r\n\t\t\tcache = {};\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar arr = OK(cache);\r\n\r\n\t\tfor (var i = 0, length = arr.length; i < length; i++) {\r\n\t\t\tvar key = arr[i];\r\n\t\t\tvar remove = false;\r\n\t\t\tvar a = arguments;\r\n\r\n\t\t\tfor (var j = 0; j < a.length; j++) {\r\n\t\t\t\tif (key.substring(0, a[j].length) !== a[j])\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\tremove = true;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\tif (remove)\r\n\t\t\t\tdelete cache[key];\r\n\t\t}\r\n\t}\r\n\r\n\tfunction cleaner2() {\r\n\t\tclear();\r\n\t\tcleaner();\r\n\t}\r\n\r\n\tfunction inDOM(el) {\r\n\t\tif (!el)\r\n\t\t\treturn;\r\n\t\tif (el.nodeName === 'BODY')\r\n\t\t\treturn true;\r\n\t\tvar parent = el.parentNode;\r\n\t\twhile (parent) {\r\n\t\t\tif (parent.nodeName === 'BODY')\r\n\t\t\t\treturn true;\r\n\t\t\tparent = parent.parentNode;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction cleaner() {\r\n\r\n\t\tvar keys = OK(events);\r\n\t\tvar is = false;\r\n\t\tvar length = keys.length;\r\n\t\tvar index;\r\n\t\tvar arr;\r\n\r\n\t\tfor (var i = 0; i < length; i++) {\r\n\t\t\tvar key = keys[i];\r\n\t\t\tindex = 0;\r\n\t\t\tarr = events[key];\r\n\t\t\twhile (true) {\r\n\r\n\t\t\t\tvar item = arr[index++];\r\n\t\t\t\tif (item === undefined)\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tif (item.context == null || (item.context.element && inDOM(item.context.element[0])))\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\titem.context && item.context.element && item.context.element.remove();\r\n\t\t\t\titem.context.$removed = true;\r\n\t\t\t\titem.context = null;\r\n\t\t\t\tarr.splice(index - 1, 1);\r\n\r\n\t\t\t\tif (!arr.length)\r\n\t\t\t\t\tdelete events[key];\r\n\r\n\t\t\t\tindex -= 2;\r\n\t\t\t\tis = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tindex = 0;\r\n\t\twhile (true) {\r\n\t\t\tvar item = watches[index++];\r\n\t\t\tif (item === undefined)\r\n\t\t\t\tbreak;\r\n\t\t\tif (item.context == null || (item.context.element && inDOM(item.context.element[0])))\r\n\t\t\t\tcontinue;\r\n\t\t\titem.context && item.context.element && item.context.element.remove();\r\n\t\t\titem.context.$removed = true;\r\n\t\t\titem.context = null;\r\n\t\t\twatches.splice(index - 1, 1);\r\n\t\t\tindex -= 2;\r\n\t\t\tis = true;\r\n\t\t}\r\n\r\n\t\tvar all = M.components;\r\n\t\tindex = 0;\r\n\t\tlength = all.length;\r\n\r\n\t\twhile (index < length) {\r\n\r\n\t\t\tvar component = all[index++];\r\n\r\n\t\t\tif (!component) {\r\n\t\t\t\tindex--;\r\n\t\t\t\tall.splice(index, 1);\r\n\t\t\t\tlength = all.length;\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tvar c = component.element;\r\n\t\t\tif (!component.$removed && c && inDOM(c[0])) {\r\n\t\t\t\tif (!component.attr(ATTRDEL)) {\r\n\t\t\t\t\tif (component.$parser && !component.$parser.length)\r\n\t\t\t\t\t\tcomponent.$parser = undefined;\r\n\t\t\t\t\tif (component.$formatter && !component.$formatter.length)\r\n\t\t\t\t\t\tcomponent.$formatter = undefined;\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tEMIT('destroy', component.name, component);\r\n\t\t\tEMIT('component.destroy', component.name, component);\r\n\r\n\t\t\tdelete statics['$ST_' + component.name];\r\n\t\t\tcomponent.destroy && component.destroy();\r\n\t\t\t$('#css' + component.ID).remove();\r\n\r\n\t\t\tif (c[0].nodeName !== 'BODY') {\r\n\t\t\t\tc.off();\r\n\t\t\t\tc.find('*').off();\r\n\t\t\t\tc.remove();\r\n\t\t\t}\r\n\r\n\t\t\tcomponent.$main = undefined;\r\n\t\t\tcomponent.$data = null;\r\n\t\t\tcomponent.dom = null;\r\n\t\t\tcomponent.$removed = 2;\r\n\t\t\tcomponent.path = null;\r\n\t\t\tcomponent.setter = null;\r\n\t\t\tcomponent.setter2 = null;\r\n\t\t\tcomponent.getter = null;\r\n\t\t\tcomponent.getter2 = null;\r\n\t\t\tcomponent.make = null;\r\n\r\n\t\t\tindex--;\r\n\t\t\tall.splice(index, 1);\r\n\t\t\tlength = M.components.length;\r\n\t\t\tis = true;\r\n\t\t}\r\n\r\n\t\tkeys = Object.keys(binders);\r\n\t\tfor (var i = 0; i < keys.length; i++) {\r\n\t\t\tarr = binders[keys[i]];\r\n\t\t\tvar j = 0;\r\n\t\t\twhile (true) {\r\n\t\t\t\tvar o = arr[j++];\r\n\t\t\t\tif (!o)\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tif (inDOM(o.el[0]))\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\tvar e = o.el;\r\n\t\t\t\tif (!e[0].$br) {\r\n\t\t\t\t\te.off();\r\n\t\t\t\t\te.find('*').off();\r\n\t\t\t\t\te[0].$br = 1;\r\n\t\t\t\t}\r\n\t\t\t\tj--;\r\n\t\t\t\tarr.splice(j, 1);\r\n\t\t\t}\r\n\t\t\tif (!arr.length)\r\n\t\t\t\tdelete binders[keys[i]];\r\n\t\t}\r\n\r\n\t\tclear('find');\r\n\r\n\t\t// Checks PLUGINS\r\n\t\tvar R = W.PLUGINS;\r\n\t\tOK(R).forEach(function(key) {\r\n\t\t\tvar a = R[key];\r\n\t\t\tif (!inDOM(a.element[0]) || !a.element[0].innerHTML) {\r\n\t\t\t\ta.$remove();\r\n\t\t\t\tdelete R[key];\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tW.DATETIME = W.NOW = new Date();\r\n\t\tvar now = W.NOW.getTime();\r\n\t\tvar is2 = false;\r\n\t\tvar is3 = false;\r\n\r\n\t\tfor (var key in blocked) {\r\n\t\t\tif (blocked[key] <= now) {\r\n\t\t\t\tdelete blocked[key];\r\n\t\t\t\tis2 = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tMD.localstorage && is2 && !W.isPRIVATEMODE && localStorage.setItem(M.$localstorage + '.blocked', JSON.stringify(blocked));\r\n\r\n\t\tfor (var key in storage) {\r\n\t\t\tvar item = storage[key];\r\n\t\t\tif (!item.expire || item.expire <= now) {\r\n\t\t\t\tdelete storage[key];\r\n\t\t\t\tis3 = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tis3 && save();\r\n\r\n\t\tif (is) {\r\n\t\t\trefresh();\r\n\t\t\tsetTimeout(compile, 2000);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction save() {\r\n\t\t!W.isPRIVATEMODE && MD.localstorage && localStorage.setItem(M.$localstorage + '.cache', JSON.stringify(storage));\r\n\t}\r\n\r\n\tfunction refresh() {\r\n\t\tsetTimeout2('$refresh', function() {\r\n\t\t\tM.components.sort(function(a, b) {\r\n\t\t\t\tif (a.$removed || !a.path)\r\n\t\t\t\t\treturn 1;\r\n\t\t\t\tif (b.$removed || !b.path)\r\n\t\t\t\t\treturn -1;\r\n\t\t\t\tvar al = a.path.length;\r\n\t\t\t\tvar bl = b.path.length;\r\n\t\t\t\treturn al > bl ? - 1 : al === bl ? LCOMPARER(a.path, b.path) : 1;\r\n\t\t\t});\r\n\t\t}, 200);\r\n\t}\r\n\r\n\t// what:\r\n\t// 1. valid\r\n\t// 2. dirty\r\n\t// 3. reset\r\n\t// 4. update\r\n\t// 5. set\r\n\tfunction state(arr, type, what) {\r\n\t\tarr && arr.length && setTimeout(function() {\r\n\t\t\tfor (var i = 0, length = arr.length; i < length; i++)\r\n\t\t\t\tarr[i].stateX(type, what);\r\n\t\t}, 2, arr);\r\n\t}\r\n\r\n\t// ===============================================================\r\n\t// SCOPE\r\n\t// ===============================================================\r\n\r\n\tfunction Scope() {}\r\n\r\n\tvar SCP = Scope.prototype;\r\n\r\n\tSCP.unwatch = function(path, fn) {\r\n\t\tvar self = this;\r\n\t\tOFF('scope' + self._id + '#watch', self.path + (path ? '.' + path : ''), fn);\r\n\t\treturn self;\r\n\t};\r\n\r\n\tSCP.watch = function(path, fn, init) {\r\n\t\tvar self = this;\r\n\t\tON('scope' + self._id + '#watch', self.path + (path ? '.' + path : ''), fn, init, self);\r\n\t\treturn self;\r\n\t};\r\n\r\n\tSCP.reset = function(path, timeout) {\r\n\t\tif (path > 0) {\r\n\t\t\ttimeout = path;\r\n\t\t\tpath = '';\r\n\t\t}\r\n\t\treturn RESET(this.path + '.' + (path ? + path : '*'), timeout);\r\n\t};\r\n\r\n\tSCP.default = function(path, timeout) {\r\n\t\tif (path > 0) {\r\n\t\t\ttimeout = path;\r\n\t\t\tpath = '';\r\n\t\t}\r\n\t\treturn DEFAULT(this.path + '.' + (path ? path : '*'), timeout);\r\n\t};\r\n\r\n\tSCP.set = function(path, value, timeout, reset) {\r\n\t\treturn SET(this.path + (path ? '.' + path : ''), value, timeout, reset);\r\n\t};\r\n\r\n\tSCP.push = function(path, value, timeout, reset) {\r\n\t\treturn PUSH(this.path + (path ? '.' + path : ''), value, timeout, reset);\r\n\t};\r\n\r\n\tSCP.update = function(path, timeout, reset) {\r\n\t\treturn UPDATE(this.path + (path ? '.' + path : ''), timeout, reset);\r\n\t};\r\n\r\n\tSCP.get = function(path) {\r\n\t\treturn GET(this.path + (path ? '.' + path : ''));\r\n\t};\r\n\r\n\tSCP.can = function(except) {\r\n\t\treturn CAN(this.path + '.*', except);\r\n\t};\r\n\r\n\tSCP.errors = function(except, highlight) {\r\n\t\treturn ERRORS(this.path + '.*', except, highlight);\r\n\t};\r\n\r\n\tSCP.remove = function() {\r\n\t\tvar self = this;\r\n\t\tvar arr = M.components;\r\n\r\n\t\tfor (var i = 0; i < arr.length; i++) {\r\n\t\t\tvar a = arr[i];\r\n\t\t\ta.scope && a.scope.path === self.path && a.remove(true);\r\n\t\t}\r\n\r\n\t\tif (self.isolated) {\r\n\t\t\tarr = OK(proxy);\r\n\t\t\tfor (var i = 0; i < arr.length; i++) {\r\n\t\t\t\tvar a = arr[i];\r\n\t\t\t\tif (a.substring(0, self.path.length) === self.path)\r\n\t\t\t\t\tdelete proxy[a];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tOFF('scope' + self._id + '#watch');\r\n\t\tvar e = self.element;\r\n\t\te.find('*').off();\r\n\t\te.off();\r\n\t\te.remove();\r\n\t\tsetTimeout2('$cleaner', cleaner2, 100);\r\n\t};\r\n\r\n\tSCP.FIND = function(selector, many, callback, timeout) {\r\n\t\treturn this.element.FIND(selector, many, callback, timeout);\r\n\t};\r\n\r\n\tSCP.SETTER = function(a, b, c, d, e, f, g) {\r\n\t\treturn this.element.SETTER(a, b, c, d, e, f, g);\r\n\t};\r\n\r\n\tSCP.RECONFIGURE = function(selector, name) {\r\n\t\treturn this.element.RECONFIGURE(selector, name);\r\n\t};\r\n\r\n\t// ===============================================================\r\n\t// COMPONENT DECLARATION\r\n\t// ===============================================================\r\n\r\n\tfunction COM(name) {\r\n\t\tvar self = this;\r\n\t\tself._id = self.ID = 'jc' + (C.counter++);\r\n\t\tself.usage = new USAGE();\r\n\t\tself.$dirty = true;\r\n\t\tself.$valid = true;\r\n\t\tself.$validate = false;\r\n\t\tself.$parser = [];\r\n\t\tself.$formatter = [];\r\n\t\tself.$skip = false;\r\n\t\tself.$ready = false;\r\n\t\tself.$path;\r\n\t\tself.trim = true;\r\n\t\tself.$released = false;\r\n\t\tself.$bindreleased = true;\r\n\t\tself.$data = {};\r\n\r\n\t\tvar version = name.lastIndexOf('@');\r\n\r\n\t\tself.name = name;\r\n\t\tself.$name = version === -1 ? name : name.substring(0, version);\r\n\t\tself.version = version === -1 ? '' : name.substring(version + 1);\r\n\t\tself.path;\r\n\t\tself.type;\r\n\t\tself.id;\r\n\t\tself.disabled = false;\r\n\t\tself.removed = false;\r\n\r\n\t\tself.make;\r\n\t\tself.done;\r\n\t\tself.prerender;\r\n\t\tself.destroy;\r\n\t\tself.state;\r\n\t\tself.validate;\r\n\t\tself.released;\r\n\r\n\t\tself.getter = function(value, realtime, nobind) {\r\n\r\n\t\t\tvar self = this;\r\n\r\n\t\t\tvalue = self.parser(value);\r\n\t\t\tself.getter2 && self.getter2(value, realtime);\r\n\r\n\t\t\tif (realtime)\r\n\t\t\t\tself.$skip = true;\r\n\r\n\t\t\t// Binds a value\r\n\t\t\tif (nobind)\r\n\t\t\t\tcom_validate2(self);\r\n\t\t\telse if (value !== self.get())\r\n\t\t\t\tself.set(value, 2);\r\n\t\t\telse if (realtime === 3) {\r\n\t\t\t\t// A validation for same values, \"realtime=3\" is in \"blur\" event\r\n\t\t\t\t// Because we need to validate the input if the user leaves from the control\r\n\t\t\t\tcom_validate2(self);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tself.stateX = function(type, what) {\r\n\t\t\tvar key = type + 'x' + what;\r\n\t\t\tif (!self.$bindchanges || self.$state !== key) {\r\n\t\t\t\tself.$state = key;\r\n\t\t\t\tself.config.$state && EXEC.call(self, self.config.$state, type, what);\r\n\t\t\t\tself.state(type, what);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tself.setterX = function(value, path, type) {\r\n\r\n\t\t\tif (!self.setter || (self.$bindexact && self.path !== path && self.path.indexOf(path + '.') === -1 && type))\r\n\t\t\t\treturn;\r\n\r\n\t\t\tvar cache = self.$bindcache;\r\n\t\t\tif (arguments.length) {\r\n\r\n\t\t\t\tif (skips[self.path]) {\r\n\t\t\t\t\tvar s = --skips[self.path];\r\n\t\t\t\t\tif (s <= 0) {\r\n\t\t\t\t\t\tdelete skips[self.path];\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (self.$format)\r\n\t\t\t\t\tvalue = self.$format(value, path, type);\r\n\r\n\t\t\t\tif (self.$bindreleased) {\r\n\r\n\t\t\t\t\tif (self.$bindchanges) {\r\n\t\t\t\t\t\tvar hash = HASH(value);\r\n\t\t\t\t\t\tif (hash === self.$valuehash)\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\tself.$valuehash = hash;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Binds value directly\r\n\t\t\t\t\tself.config.$setter && EXEC.call(self, self.config.$setter, value, path, type);\r\n\t\t\t\t\tself.data('', value);\r\n\t\t\t\t\tself.setter(value, path, type);\r\n\t\t\t\t\tself.setter2 && self.setter2(value, path, type);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (self.$released) {\r\n\t\t\t\t\t\tcache.is = true;\r\n\t\t\t\t\t\tcache.value = value;\r\n\t\t\t\t\t\tcache.path = path;\r\n\t\t\t\t\t\tcache.type = type;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcache.value = value;\r\n\t\t\t\t\t\tcache.path = path;\r\n\t\t\t\t\t\tcache.type = type;\r\n\t\t\t\t\t\tif (!cache.bt) {\r\n\t\t\t\t\t\t\tcache.is = true;\r\n\t\t\t\t\t\t\tself.setterX();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if (!self.$released && cache && cache.is) {\r\n\t\t\t\tcache.is = false;\r\n\t\t\t\tcache.bt && clearTimeout(cache.bt);\r\n\t\t\t\tcache.bt = setTimeout(function(self) {\r\n\t\t\t\t\tvar cache = self.$bindcache;\r\n\t\t\t\t\tcache.bt = 0; // reset timer id\r\n\r\n\t\t\t\t\tif (self.$bindchanges) {\r\n\t\t\t\t\t\tvar hash = HASH(value);\r\n\t\t\t\t\t\tif (hash === self.$valuehash)\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\tself.$valuehash = hash;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tself.config.$setter && EXEC.call(self, self.config.$setter, cache.value, cache.path, cache.type);\r\n\t\t\t\t\tself.data('', cache.value);\r\n\t\t\t\t\tself.setter(cache.value, cache.path, cache.type);\r\n\t\t\t\t\tself.setter2 && self.setter2(cache.value, cache.path, cache.type);\r\n\t\t\t\t}, self.$bindtimeout, self);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tself.setter = function(value, path, type) {\r\n\r\n\t\t\tvar self = this;\r\n\r\n\t\t\tif (type === 2) {\r\n\t\t\t\tif (self.$skip) {\r\n\t\t\t\t\tself.$skip = false;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar a = 'select-one';\r\n\t\t\tvalue = self.formatter(value);\r\n\r\n\t\t\tfindcontrol(self.element[0], function(t) {\r\n\r\n\t\t\t\tif (t.$com !== self)\r\n\t\t\t\t\tt.$com = self;\r\n\r\n\t\t\t\tvar path = t.$com.path;\r\n\t\t\t\tif (path && path.length && path !== self.path)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tif (t.type === 'checkbox') {\r\n\t\t\t\t\tvar tmp = value != null ? value.toString().toLowerCase() : '';\r\n\t\t\t\t\ttmp = tmp === 'true' || tmp === '1' || tmp === 'on';\r\n\t\t\t\t\ttmp !== t.checked && (t.checked = tmp);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (value == null)\r\n\t\t\t\t\tvalue = '';\r\n\r\n\t\t\t\tif (!type && t.type !== a && t.type !== 'range' && !self.$default && !value)\r\n\t\t\t\t\tautofill.push(t.$com);\r\n\r\n\t\t\t\tif (t.type === a || t.type === 'select') {\r\n\t\t\t\t\tvar el = $(t);\r\n\t\t\t\t\tel.val() !== value && el.val(value);\r\n\t\t\t\t} else if (t.value !== value)\r\n\t\t\t\t\tt.value = value;\r\n\t\t\t});\r\n\t\t};\r\n\t}\r\n\r\n\tvar PPC = COM.prototype;\r\n\r\n\tPPC.data = function(key, value) {\r\n\r\n\t\tif (!key)\r\n\t\t\tkey = '@';\r\n\r\n\t\tvar self = this;\r\n\t\tvar data = self.$data[key];\r\n\r\n\t\tif (arguments.length === 1)\r\n\t\t\treturn data ? data.value : null;\r\n\r\n\t\tif (data) {\r\n\t\t\tdata.value = value;\r\n\t\t\tfor (var i = 0; i < data.items.length; i++) {\r\n\t\t\t\tvar o = data.items[i];\r\n\t\t\t\to.el[0].parentNode && o.exec(value, key);\r\n\t\t\t}\r\n\t\t} else\r\n\t\t\tself.$data[key] = { value: value, items: [] };\r\n\r\n\t\tif (self.$ppc) {\r\n\t\t\tvar c = M.components;\r\n\t\t\tfor (var i = 0; i < c.length; i++) {\r\n\t\t\t\tvar com = c[i];\r\n\t\t\t\tif (com.owner === self && com.$pp && key === com.path)\r\n\t\t\t\t\tcom.setterX(value, value, 2);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn value;\r\n\t};\r\n\r\n\tPPC.$except = function(except) {\r\n\t\tvar p = self.$path;\r\n\t\tfor (var a = 0; a < except.length; a++) {\r\n\t\t\tfor (var b = 0; b < p.length; b++) {\r\n\t\t\t\tif (except[a] === p[b])\r\n\t\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t};\r\n\r\n\tPPC.$compare = function(path, fix) {\r\n\t\tvar self = this;\r\n\r\n\t\tif (fix)\r\n\t\t\treturn self.path === path;\r\n\r\n\t\tif (path.length > self.path.length) {\r\n\t\t\tvar index = path.lastIndexOf('.', self.path.length);\r\n\t\t\treturn index === -1 ? false : self.path === path.substring(0, index);\r\n\t\t}\r\n\r\n\t\tfor (var i = 0, length = self.$path.length; i < length; i++) {\r\n\t\t\tif (self.$path[i] === path)\r\n\t\t\t\treturn true;\r\n\t\t}\r\n\t};\r\n\r\n\tfunction removewaiter(obj) {\r\n\t\tif (obj.$W) {\r\n\t\t\tvar keys = OK(obj.$W);\r\n\t\t\tfor (var i = 0, length = keys.length; i < length; i++) {\r\n\t\t\t\tvar v = obj.$W[keys[i]];\r\n\t\t\t\tv.id && clearInterval(v.id);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tPPC.notmodified = function(fields) {\r\n\t\tvar t = this;\r\n\t\ttypeof(fields) === TYPE_S && (fields = [fields]);\r\n\t\treturn NOTMODIFIED(t._id, t.get(), fields);\r\n\t};\r\n\r\n\tPPC.$waiter = function(prop, callback) {\r\n\r\n\t\tvar t = this;\r\n\r\n\t\tif (prop === true) {\r\n\t\t\tif (t.$W) {\r\n\t\t\t\tvar keys = OK(t.$W);\r\n\t\t\t\tfor (var i = 0; i < keys.length; i++) {\r\n\t\t\t\t\tvar k = keys[i];\r\n\t\t\t\t\tvar o = t.$W[k];\r\n\t\t\t\t\to.id = setInterval(function(t, prop) {\r\n\t\t\t\t\t\tvar o = t.$W[prop];\r\n\t\t\t\t\t\tvar v = t[prop]();\r\n\t\t\t\t\t\tif (v) {\r\n\t\t\t\t\t\t\tclearInterval(o.id);\r\n\t\t\t\t\t\t\tfor (var i = 0; i < o.callback.length; i++)\r\n\t\t\t\t\t\t\t\to.callback[i].call(t, v);\r\n\t\t\t\t\t\t\tdelete t.$W[prop];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, MD.delaywatcher, t, k);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t} else if (prop === false) {\r\n\t\t\tif (t.$W) {\r\n\t\t\t\tvar keys = OK(t.$W);\r\n\t\t\t\tfor (var i = 0; i < keys.length; i++) {\r\n\t\t\t\t\tvar a = t.$W[keys[i]];\r\n\t\t\t\t\ta && clearInterval(a.id);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t!t.$W && (t.$W = {});\r\n\r\n\t\tif (t.$W[prop]) {\r\n\t\t\t// Checks if same callback exists\r\n\t\t\tfor (var i = 0; i < t.$W[prop].length; i++) {\r\n\t\t\t\tif (t.$W[prop][i] === callback)\r\n\t\t\t\t\treturn t;\r\n\t\t\t}\r\n\t\t\tt.$W[prop].callback.push(callback);\r\n\t\t\treturn t;\r\n\t\t} else\r\n\t\t\tt.$W[prop] = { callback: [callback] };\r\n\r\n\t\tif (!t.$released) {\r\n\t\t\tt.$W[prop].id = setInterval(function(t, prop) {\r\n\t\t\t\tvar o = t.$W[prop];\r\n\t\t\t\tvar v = t[prop]();\r\n\t\t\t\tif (v) {\r\n\t\t\t\t\tclearInterval(o.id);\r\n\t\t\t\t\tfor (var i = 0; i < o.callback.length; i++)\r\n\t\t\t\t\t\to.callback[i].call(t, v);\r\n\t\t\t\t\tdelete t.$W[prop];\r\n\t\t\t\t}\r\n\t\t\t}, MD.delaywatcher, t, prop);\r\n\t\t}\r\n\t\treturn t;\r\n\t};\r\n\r\n\tPPC.hidden = function(callback) {\r\n\t\tvar t = this;\r\n\t\tvar v = t.element ? t.element[0].offsetParent : null;\r\n\t\tv = v === null;\r\n\t\tif (callback) {\r\n\t\t\tif (v)\r\n\t\t\t\tcallback.call(t);\r\n\t\t\telse\r\n\t\t\t\tt.$waiter('hidden', callback);\r\n\t\t}\r\n\t\treturn v;\r\n\t};\r\n\r\n\tPPC.visible = function(callback) {\r\n\t\tvar t = this;\r\n\t\tvar v = t.element ? t.element[0].offsetParent : null;\r\n\t\tv = v !== null;\r\n\t\tif (callback) {\r\n\t\t\tif (v)\r\n\t\t\t\tcallback.call(t);\r\n\t\t\telse\r\n\t\t\t\tt.$waiter('visible', callback);\r\n\t\t}\r\n\t\treturn v;\r\n\t};\r\n\r\n\tPPC.width = function(callback) {\r\n\t\tvar t = this;\r\n\t\tvar v = t.element ? t.element[0].offsetWidth : 0;\r\n\t\tif (callback) {\r\n\t\t\tif (v)\r\n\t\t\t\tcallback.call(t, v);\r\n\t\t\telse\r\n\t\t\t\tt.$waiter('width', callback);\r\n\t\t}\r\n\t\treturn v;\r\n\t};\r\n\r\n\tPPC.height = function(callback) {\r\n\t\tvar t = this;\r\n\t\tvar v = t.element ? t.element[0].offsetHeight : 0;\r\n\t\tif (callback) {\r\n\t\t\tif (v)\r\n\t\t\t\tcallback.call(t, v);\r\n\t\t\telse\r\n\t\t\t\tt.$waiter('height', callback);\r\n\t\t}\r\n\t\treturn v;\r\n\t};\r\n\r\n\tPPC.import = function(url, callback, insert, preparator) {\r\n\t\tvar self = this;\r\n\t\tM.import(url, self.element, callback, insert, preparator);\r\n\t\treturn self;\r\n\t};\r\n\r\n\tPPC.release = function(value, container) {\r\n\r\n\t\tvar self = this;\r\n\t\tif (value === undefined || self.$removed)\r\n\t\t\treturn self.$released;\r\n\r\n\t\tself.attrd('jc-released', value);\r\n\r\n\t\t(container || self.element).find(ATTRCOM).each(function() {\r\n\t\t\tvar el = $(this);\r\n\t\t\tel.attrd('jc-released', value ? 'true' : 'false');\r\n\t\t\tvar com = el[0].$com;\r\n\t\t\tif (com instanceof Object) {\r\n\t\t\t\tif (com instanceof Array) {\r\n\t\t\t\t\tfor (var i = 0, length = com.length; i < length; i++) {\r\n\t\t\t\t\t\tvar o = com[i];\r\n\t\t\t\t\t\tif (!o.$removed && o.$released !== value) {\r\n\t\t\t\t\t\t\to.$released = value;\r\n\t\t\t\t\t\t\to.released && o.released(value, self);\r\n\t\t\t\t\t\t\to.$waiter(!value);\r\n\t\t\t\t\t\t\t!value && o.setterX();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (!com.$removed && com.$released !== value) {\r\n\t\t\t\t\tcom.$released = value;\r\n\t\t\t\t\tcom.released && com.released(value, self);\r\n\t\t\t\t\tcom.$waiter(!value);\r\n\t\t\t\t\t!value && com.setterX();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif (!container && self.$released !== value) {\r\n\t\t\tself.$released = value;\r\n\t\t\tself.released && self.released(value, self);\r\n\t\t\tself.$waiter(!value);\r\n\t\t\t!value && self.setterX();\r\n\t\t}\r\n\r\n\t\treturn value;\r\n\t};\r\n\r\n\tPPC.validate2 = function() {\r\n\t\treturn com_validate2(this);\r\n\t};\r\n\r\n\tPPC.exec = function(name, a, b, c, d, e) {\r\n\t\tvar self = this;\r\n\t\tself.find(ATTRCOM).each(function() {\r\n\t\t\tvar t = this;\r\n\t\t\tif (t.$com) {\r\n\t\t\t\tt.$com.caller = self;\r\n\t\t\t\tt.$com[name] && this.$com[name](a, b, c, d, e);\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn self;\r\n\t};\r\n\r\n\tPPC.replace = function(el, remove) {\r\n\t\tvar self = this;\r\n\r\n\t\tif (C.is)\r\n\t\t\tC.recompile = true;\r\n\r\n\t\tvar n = 'jc-scope';\r\n\t\tvar prev = self.element;\r\n\t\tvar scope = prev.attrd(n);\r\n\r\n\t\tself.element.rattrd('jc');\r\n\t\tself.element[0].$com = null;\r\n\t\tscope && self.element.rattrd(n);\r\n\r\n\t\tif (remove)\r\n\t\t\tprev.off().remove();\r\n\t\telse\r\n\t\t\tself.attrd('jc-replaced', 'true');\r\n\r\n\t\tself.element = $(el);\r\n\t\tself.dom = self.element[0];\r\n\t\tself.dom.$com = self;\r\n\t\tself.attrd('jc', self.name);\r\n\t\tscope && self.attrd(n, scope);\r\n\t\tself.siblings = false;\r\n\t\treturn self;\r\n\t};\r\n\r\n\tPPC.compile = function(container) {\r\n\t\tvar self = this;\r\n\t\t!container && self.attrd('jc-compile') && self.attrd('jc-compile', '1');\r\n\t\tcompile(container || self.element);\r\n\t\treturn self;\r\n\t};\r\n\r\n\tPPC.nested = function() {\r\n\t\tvar arr = [];\r\n\t\tthis.find(ATTRCOM).each(function() {\r\n\t\t\tvar el = $(this);\r\n\t\t\tvar com = el[0].$com;\r\n\t\t\tif (com && !el.attr(ATTRDEL)) {\r\n\t\t\t\tif (com instanceof Array)\r\n\t\t\t\t\tarr.push.apply(arr, com);\r\n\t\t\t\telse\r\n\t\t\t\t\tarr.push(com);\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn arr;\r\n\t};\r\n\r\n\tPPC.$interaction = function(type) {\r\n\r\n\t\t// type === 0 : init\r\n\t\t// type === 1 : manually\r\n\t\t// type === 2 : by input\r\n\t\t// type === 3 : by default\r\n\t\t// type === 100 : custom\r\n\t\t// type === 101 : dirty\r\n\t\t// type === 102 : valid\r\n\r\n\t\tvar now = Date.now();\r\n\t\tvar t = this;\r\n\r\n\t\tswitch (type) {\r\n\t\t\tcase 0:\r\n\t\t\t\tt.usage.init = now;\r\n\t\t\t\tt.$binded = true;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 1:\r\n\t\t\t\tt.usage.manually = now;\r\n\t\t\t\tt.$binded = true;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 2:\r\n\t\t\t\tt.usage.input = now;\r\n\t\t\t\tt.$binded = true;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 3:\r\n\t\t\t\tt.usage.default = now;\r\n\t\t\t\tt.$binded = true;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 100:\r\n\t\t\t\tt.usage.custom = now;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 101:\r\n\t\t\t\tt.usage.dirty = now;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 102:\r\n\t\t\t\tt.usage.valid = now;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\treturn t;\r\n\t};\r\n\r\n\tPPC.notify = function() {\r\n\t\tNOTIFY(this.path);\r\n\t\treturn this;\r\n\t};\r\n\r\n\tPPC.update = PPC.refresh = function(notify, type) {\r\n\t\tvar self = this;\r\n\t\tif (self.$binded) {\r\n\r\n\t\t\tif (typeof(notify) === TYPE_S) {\r\n\t\t\t\ttype = notify;\r\n\t\t\t\tnotify = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (notify)\r\n\t\t\t\tself.set(self.get(), type);\r\n\t\t\telse {\r\n\t\t\t\tself.setter && self.setterX(self.get(), self.path, 1);\r\n\t\t\t\tself.$interaction(1);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn self;\r\n\t};\r\n\r\n\tPPC.tclass = function(cls, v) {\r\n\t\tvar self = this;\r\n\t\tself.element.tclass(cls, v);\r\n\t\treturn self;\r\n\t};\r\n\r\n\tPPC.aclass = function(cls, timeout) {\r\n\t\tvar self = this;\r\n\t\tif (timeout)\r\n\t\t\tsetTimeout(function() { self.element.aclass(cls); }, timeout);\r\n\t\telse\r\n\t\t\tself.element.aclass(cls);\r\n\t\treturn self;\r\n\t};\r\n\r\n\tPPC.hclass = function(cls) {\r\n\t\treturn this.element.hclass(cls);\r\n\t};\r\n\r\n\tPPC.rclass = function(cls, timeout) {\r\n\t\tvar self = this;\r\n\t\tvar e = self.element;\r\n\t\tif (timeout)\r\n\t\t\tsetTimeout(function() { e.rclass(cls); }, timeout);\r\n\t\telse {\r\n\t\t\tif (cls)\r\n\t\t\t\te.rclass(cls);\r\n\t\t\telse\r\n\t\t\t\te.rclass();\r\n\t\t}\r\n\t\treturn self;\r\n\t};\r\n\r\n\tPPC.rclass2 = function(search) {\r\n\t\tthis.element.rclass2(search);\r\n\t\treturn this;\r\n\t};\r\n\r\n\tPPC.classes = function(cls) {\r\n\r\n\t\tvar key = 'cls.' + cls;\r\n\t\tvar tmp = temp[key];\r\n\t\tvar t = this;\r\n\t\tvar e = t.element;\r\n\r\n\t\tif (tmp) {\r\n\t\t\ttmp.add && e.aclass(tmp.add);\r\n\t\t\ttmp.rem && e.rclass(tmp.rem);\r\n\t\t\treturn t;\r\n\t\t}\r\n\r\n\t\tvar arr = cls instanceof Array ? cls : cls.split(' ');\r\n\t\tvar add = '';\r\n\t\tvar rem = '';\r\n\r\n\t\tfor (var i = 0, length = arr.length; i < length; i++) {\r\n\t\t\tvar c = arr[i].substring(0, 1);\r\n\t\t\tif (c === '-')\r\n\t\t\t\trem += (rem ? ' ' : '') + arr[i].substring(1);\r\n\t\t\telse\r\n\t\t\t\tadd += (add ? ' ' : '') + (c === '+' ? arr[i].substring(1) : arr[i]);\r\n\t\t}\r\n\r\n\t\tadd && e.aclass(add);\r\n\t\trem && e.rclass(rem);\r\n\r\n\t\tif (cls instanceof Array)\r\n\t\t\treturn t;\r\n\r\n\t\ttemp[key] = { add: add, rem: rem };\r\n\t\treturn t;\r\n\t};\r\n\r\n\tPPC.toggle = function(cls, visible, timeout) {\r\n\r\n\t\tvar manual = false;\r\n\t\tvar self = this;\r\n\r\n\t\tif (typeof(cls) !== TYPE_S) {\r\n\t\t\ttimeout = visible;\r\n\t\t\tvisible = cls;\r\n\t\t\tcls = 'hidden';\r\n\t\t\tmanual = true;\r\n\t\t}\r\n\r\n\t\tif (typeof(visible) === TYPE_N) {\r\n\t\t\ttimeout = visible;\r\n\t\t\tvisible = undefined;\r\n\t\t} else if (manual && visible !== undefined)\r\n\t\t\tvisible = !visible;\r\n\r\n\t\tvar el = self.element;\r\n\t\tif (!timeout) {\r\n\t\t\tel.tclass(cls, visible);\r\n\t\t\treturn self;\r\n\t\t}\r\n\r\n\t\tsetTimeout(function() {\r\n\t\t\tel.tclass(cls, visible);\r\n\t\t}, timeout);\r\n\t\treturn self;\r\n\t};\r\n\r\n\tPPC.noscope = PPC.noScope = function(value) {\r\n\t\tvar self = this;\r\n\t\tself.$noscope = value === undefined ? true : value === true;\r\n\t\treturn self;\r\n\t};\r\n\r\n\tPPC.nocompile = function() {\r\n\t\tvar self = this;\r\n\t\tself.element.attrd('jc-compile', '0');\r\n\t\treturn self;\r\n\t};\r\n\r\n\tPPC.singleton = function() {\r\n\t\tvar self = this;\r\n\t\tstatics['$ST_' + self.name] = true;\r\n\t\treturn self;\r\n\t};\r\n\r\n\tPPC.blind = function() {\r\n\t\tvar self = this;\r\n\t\tself.path = null;\r\n\t\tself.$path = null;\r\n\t\tself.$$path = null;\r\n\t\treturn self;\r\n\t};\r\n\r\n\tPPC.bindchanges = PPC.bindChanges = function(enable) {\r\n\t\tthis.$bindchanges = enable == null || enable === true;\r\n\t\treturn this;\r\n\t};\r\n\r\n\tPPC.bindexact = PPC.bindExact = function(enable) {\r\n\t\tthis.$bindexact = enable == null || enable === true;\r\n\t\treturn this;\r\n\t};\r\n\r\n\tPPC.bindvisible = PPC.bindVisible = function(timeout) {\r\n\t\tvar self = this;\r\n\t\tself.$bindreleased = false;\r\n\t\tself.$bindtimeout = timeout || MD.delaybinder;\r\n\t\tself.$bindcache = {};\r\n\t\treturn self;\r\n\t};\r\n\r\n\tPPC.readonly = function() {\r\n\t\tvar self = this;\r\n\t\tself.noDirty();\r\n\t\tself.noValid();\r\n\t\tself.getter = null;\r\n\t\tself.setter = null;\r\n\t\tself.$parser = null;\r\n\t\tself.$formatter = null;\r\n\t\treturn self;\r\n\t};\r\n\r\n\tPPC.novalidate = PPC.noValid = PPC.noValidate = function(val) {\r\n\t\tif (val === undefined)\r\n\t\t\tval = true;\r\n\t\tvar self = this;\r\n\t\tself.$valid_disabled = val;\r\n\t\tself.$valid = val;\r\n\t\treturn self;\r\n\t};\r\n\r\n\tPPC.nodirty = PPC.noDirty = function(val) {\r\n\t\tif (val === undefined)\r\n\t\t\tval = true;\r\n\t\tvar self = this;\r\n\t\tself.$dirty_disabled = val;\r\n\t\tself.$dirty = !val;\r\n\t\treturn self;\r\n\t};\r\n\r\n\tPPC.datasource = function(path, callback, init) {\r\n\t\tvar self = this;\r\n\t\tvar ds = self.$datasource;\r\n\r\n\t\tds && self.unwatch(ds.path, ds.fn);\r\n\r\n\t\tif (path) {\r\n\t\t\tself.$datasource = { path: path, fn: callback };\r\n\t\t\tself.watch(path, callback, init !== false);\r\n\t\t} else\r\n\t\t\tself.$datasource = null;\r\n\r\n\t\treturn self;\r\n\t};\r\n\r\n\tPPC.setPath = function(path, type) {\r\n\r\n\t\t// type 1: init\r\n\t\t// type 2: scope\r\n\r\n\t\tvar self = this;\r\n\t\tvar tmp = findFormat(path);\r\n\r\n\t\tif (tmp) {\r\n\t\t\tpath = tmp.path;\r\n\t\t\tself.$format = tmp.fn;\r\n\t\t} else if (!type)\r\n\t\t\tself.$format = null;\r\n\r\n\t\tvar arr = [];\r\n\r\n\t\tif (path.substring(0, 1) === '@') {\r\n\t\t\tpath = path.substring(1);\r\n\t\t\tself.$pp = true;\r\n\t\t\tself.owner.$ppc = true;\r\n\t\t} else\r\n\t\t\tself.$pp = false;\r\n\r\n\t\t// Temporary\r\n\t\tif (path.charCodeAt(0) === 37)\r\n\t\t\tpath = 'jctmp.' + path.substring(1);\r\n\r\n\t\tpath = path.env();\r\n\r\n\t\t// !path = fixed path\r\n\t\tif (path.charCodeAt(0) === 33) {\r\n\t\t\tpath = path.substring(1);\r\n\t\t\tarr.push(path);\r\n\t\t} else {\r\n\t\t\tvar p = path.split('.');\r\n\t\t\tvar s = [];\r\n\t\t\tfor (var j = 0; j < p.length; j++) {\r\n\t\t\t\tvar b = p[j].lastIndexOf('[');\r\n\t\t\t\tif (b !== -1) {\r\n\t\t\t\t\tvar c = s.join('.');\r\n\t\t\t\t\tarr.push(c + (c ? '.' : '') + p[j].substring(0, b));\r\n\t\t\t\t}\r\n\t\t\t\ts.push(p[j]);\r\n\t\t\t\tarr.push(s.join('.'));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tself.path = path;\r\n\t\tself.$path = arr;\r\n\t\ttype !== 1 && C.ready && refresh();\r\n\t\treturn self;\r\n\t};\r\n\r\n\tPPC.attr = SCP.attr = function(name, value) {\r\n\t\tvar el = this.element;\r\n\t\tif (value === undefined)\r\n\t\t\treturn el.attr(name);\r\n\t\tel.attr(name, value);\r\n\t\treturn this;\r\n\t};\r\n\r\n\tPPC.attrd = SCP.attrd = function(name, value) {\r\n\t\tname = 'data-' + name;\r\n\t\tvar el = this.element;\r\n\t\tif (value === undefined)\r\n\t\t\treturn el.attr(name);\r\n\t\tel.attr(name, value);\r\n\t\treturn this;\r\n\t};\r\n\r\n\tPPC.css = SCP.css = function(name, value) {\r\n\t\tvar el = this.element;\r\n\t\tif (value === undefined)\r\n\t\t\treturn el.css(name);\r\n\t\tel.css(name, value);\r\n\t\treturn this;\r\n\t};\r\n\r\n\tPPC.main = SCP.main = function() {\r\n\t\tvar self = this;\r\n\t\tif (self.$main === undefined) {\r\n\t\t\tvar tmp = self.parent().closest('[data-jc]')[0];\r\n\t\t\tself.$main = tmp ? tmp.$com : null;\r\n\t\t}\r\n\t\treturn self.$main;\r\n\t};\r\n\r\n\tPPC.rcwatch = function(path, value) {\r\n\t\treturn value ? this.reconfigure(value) : this;\r\n\t};\r\n\r\n\tPPC.reconfigure = function(value, callback, init) {\r\n\t\tvar self = this;\r\n\t\tif (typeof(value) === TYPE_O) {\r\n\t\t\tOK(value).forEach(function(k) {\r\n\t\t\t\tvar prev = self.config[k];\r\n\t\t\t\tif (!init && self.config[k] !== value[k])\r\n\t\t\t\t\tself.config[k] = value[k];\r\n\t\t\t\tif (callback)\r\n\t\t\t\t\tcallback(k, value[k], init, init ? undefined : prev);\r\n\t\t\t\telse if (self.configure)\r\n\t\t\t\t\tself.configure(k, value[k], init, init ? undefined : prev);\r\n\t\t\t\tself.data('config.' + k, value[k]);\r\n\t\t\t});\r\n\t\t} else if (value.substring(0, 1) === '=') {\r\n\t\t\tvalue = value.substring(1);\r\n\t\t\tif (self.watch) {\r\n\t\t\t\tself.$rcwatch && self.unwatch(self.$rcwatch, self.rcwatch);\r\n\t\t\t\tself.watch(value, self.rcwatch);\r\n\t\t\t\tself.$rcwatch = value;\r\n\t\t\t}\r\n\t\t\tself.reconfigure(get(value), callback, init);\r\n\t\t} else {\r\n\t\t\tvalue.$config(function(k, v) {\r\n\t\t\t\tvar prev = self.config[k];\r\n\t\t\t\tif (!init && self.config[k] !== v)\r\n\t\t\t\t\tself.config[k] = v;\r\n\t\t\t\tself.data('config.' + k, v);\r\n\t\t\t\tif (callback)\r\n\t\t\t\t\tcallback(k, v, init, init ? undefined : prev);\r\n\t\t\t\telse if (self.configure)\r\n\t\t\t\t\tself.configure(k, v, init, init ? undefined : prev);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tvar cfg = self.config;\r\n\r\n\t\tself.data('config', cfg);\r\n\r\n\t\tif (cfg.$type)\r\n\t\t\tself.type = cfg.$type;\r\n\r\n\t\tif (cfg.$id)\r\n\t\t\tself.id = cfg.$id;\r\n\r\n\t\tif (cfg.$compile == false)\r\n\t\t\tself.nocompile();\r\n\r\n\t\tif (cfg.$init)\r\n\t\t\tself.$init = cfg.$init;\r\n\r\n\t\tcfg.$class && self.tclass(cfg.$class);\r\n\t\tcfg.$released && self.release(cfg.$released == true);\r\n\t\tcfg.$reconfigure && EXEC.call(cfg.$reconfigure, cfg);\r\n\t\treturn self;\r\n\t};\r\n\r\n\tPPC.closest = SCP.closest = function(sel) {\r\n\t\treturn this.element.closest(sel);\r\n\t};\r\n\r\n\tPPC.parent = SCP.parent = function(sel) {\r\n\t\treturn this.element.parent(sel);\r\n\t};\r\n\r\n\tvar TNB = { number: 1, boolean: 1 };\r\n\r\n\tPPC.html = function(value) {\r\n\t\tvar el = this.element;\r\n\t\tif (value === undefined)\r\n\t\t\treturn el.html();\r\n\t\tif (value instanceof Array)\r\n\t\t\tvalue = value.join('');\r\n\t\tvar type = typeof(value);\r\n\t\tcurrent_element = el[0];\r\n\t\tvar v = (value || TNB[type]) ? el.empty().append(value) : el.empty();\r\n\t\tcurrent_element = null;\r\n\t\treturn v;\r\n\t};\r\n\r\n\tPPC.text = function(value) {\r\n\t\tvar el = this.element;\r\n\t\tif (value === undefined)\r\n\t\t\treturn el.text();\r\n\t\tif (value instanceof Array)\r\n\t\t\tvalue = value.join('');\r\n\t\tvar type = typeof(value);\r\n\t\treturn (value || TNB[type]) ? el.empty().text(value) : el.empty();\r\n\t};\r\n\r\n\tPPC.empty = function() {\r\n\r\n\t\tvar self = this;\r\n\r\n\t\tif (self.$children) {\r\n\t\t\tfor (var i = 0, length = M.components.length; i < length; i++) {\r\n\t\t\t\tvar m = M.components[i];\r\n\t\t\t\t!m.$removed && m.owner === self && m.remove();\r\n\t\t\t}\r\n\t\t\tself.$children = 0;\r\n\t\t}\r\n\r\n\t\tvar el = self.element;\r\n\t\tel.empty();\r\n\t\treturn el;\r\n\t};\r\n\r\n\tPPC.append = SCP.append = function(value) {\r\n\t\tvar el = this.element;\r\n\t\tif (value instanceof Array)\r\n\t\t\tvalue = value.join('');\r\n\t\tcurrent_element = el[0];\r\n\t\tvar v = value ? el.append(value) : el;\r\n\t\tcurrent_element = null;\r\n\t\treturn v;\r\n\t};\r\n\r\n\tPPC.event = SCP.event = function() {\r\n\t\tvar self = this;\r\n\t\tif (self.element)\r\n\t\t\tself.element.on.apply(self.element, arguments);\r\n\t\telse {\r\n\t\t\tsetTimeout(function(arg) {\r\n\t\t\t\tself.event(self, arg);\r\n\t\t\t}, 500, arguments);\r\n\t\t}\r\n\t\treturn self;\r\n\t};\r\n\r\n\tPPC.find = SCP.find = function(selector) {\r\n\t\treturn this.element.find(selector);\r\n\t};\r\n\r\n\tPPC.isInvalid = function() {\r\n\t\tvar self = this;\r\n\t\tvar is = !self.$valid;\r\n\t\tif (is && !self.$validate)\r\n\t\t\tis = !self.$dirty;\r\n\t\treturn is;\r\n\t};\r\n\r\n\tPPC.unwatch = function(path, fn) {\r\n\t\tvar self = this;\r\n\t\tOFF('com' + self._id + '#watch', path, fn);\r\n\t\treturn self;\r\n\t};\r\n\r\n\tPPC.watch = function(path, fn, init) {\r\n\r\n\t\tvar self = this;\r\n\r\n\t\tif (typeof(path) === TYPE_FN) {\r\n\t\t\tinit = fn;\r\n\t\t\tfn = path;\r\n\t\t\tpath = self.path;\r\n\t\t} else\r\n\t\t\tpath = pathmaker(path);\r\n\r\n\t\tself.on('watch', path, fn, init);\r\n\t\treturn self;\r\n\t};\r\n\r\n\tPPC.invalid = function() {\r\n\t\treturn INVALID(this.path, this);\r\n\t};\r\n\r\n\tPPC.valid = function(value, noEmit) {\r\n\r\n\t\tvar self = this;\r\n\r\n\t\tif (value === undefined)\r\n\t\t\treturn self.$valid;\r\n\r\n\t\tif (self.$valid_disabled)\r\n\t\t\treturn self;\r\n\r\n\t\tself.$valid = value;\r\n\t\tself.$validate = false;\r\n\t\tself.$interaction(102);\r\n\t\tclear('valid');\r\n\t\t!noEmit && self.state && self.stateX(1, 1);\r\n\t\treturn self;\r\n\t};\r\n\r\n\tPPC.style = function(value) {\r\n\t\tSTYLE(value, this._id);\r\n\t\treturn this;\r\n\t};\r\n\r\n\tPPC.change = function(value) {\r\n\t\tvar self = this;\r\n\t\tself.$dirty_disabled = false;\r\n\t\tself.$dirty = true;\r\n\t\tCHANGE(self.path, value === undefined ? true : value, self);\r\n\t\treturn self;\r\n\t};\r\n\r\n\tPPC.used = function() {\r\n\t\treturn this.$interaction(100);\r\n\t};\r\n\r\n\tPPC.dirty = function(value, noEmit) {\r\n\r\n\t\tvar self = this;\r\n\r\n\t\tif (value === undefined)\r\n\t\t\treturn self.$dirty;\r\n\r\n\t\tif (self.$dirty_disabled)\r\n\t\t\treturn self;\r\n\r\n\t\tself.$dirty = value;\r\n\t\tself.$interaction(101);\r\n\t\tclear('dirty');\r\n\t\t!noEmit && self.state && self.stateX(2, 2);\r\n\t\treturn self;\r\n\t};\r\n\r\n\tPPC.reset = function() {\r\n\t\tvar self = this;\r\n\t\tM.reset(self.path, 0, self);\r\n\t\treturn self;\r\n\t};\r\n\r\n\tPPC.setDefault = function(value) {\r\n\t\tthis.$default = function() {\r\n\t\t\treturn value;\r\n\t\t};\r\n\t\treturn this;\r\n\t};\r\n\r\n\tPPC.default = function(reset) {\r\n\t\tvar self = this;\r\n\t\tM.default(self.path, 0, self, reset);\r\n\t\treturn self;\r\n\t};\r\n\r\n\tPPC.remove = PPC.kill = function(noClear) {\r\n\t\tvar self = this;\r\n\t\tvar el = self.element;\r\n\t\tremovewaiter(self);\r\n\t\tel.removeData(ATTRDATA);\r\n\t\tel.attr(ATTRDEL, 'true').find(ATTRCOM).attr(ATTRDEL, 'true');\r\n\t\tself.$removed = 1;\r\n\t\tself.removed = true;\r\n\t\tOFF('com' + self._id + '#');\r\n\t\t!noClear && setTimeout2('$cleaner', cleaner2, 100);\r\n\t\treturn true;\r\n\t};\r\n\r\n\tPPC.on = function(name, path, fn, init) {\r\n\t\tif (typeof(path) === TYPE_FN) {\r\n\t\t\tinit = fn;\r\n\t\t\tfn = path;\r\n\t\t\tpath = '';\r\n\t\t} else\r\n\t\t\tpath = path.replace('.*', '');\r\n\r\n\t\tvar self = this;\r\n\t\tvar push = '';\r\n\r\n\t\tif (name.substring(0, 1) === '^') {\r\n\t\t\tpush = '^';\r\n\t\t\tname = name.substring(1);\r\n\t\t}\r\n\r\n\t\tON(push + 'com' + self._id + '#' + name, path, fn, init, self);\r\n\t\treturn self;\r\n\t};\r\n\r\n\tPPC.formatter = function(value, prepend) {\r\n\t\tvar self = this;\r\n\r\n\t\tif (typeof(value) === TYPE_FN) {\r\n\t\t\t!self.$formatter && (self.$formatter = []);\r\n\t\t\tif (prepend === true)\r\n\t\t\t\tself.$formatter.unshift(value);\r\n\t\t\telse\r\n\t\t\t\tself.$formatter.push(value);\r\n\t\t\treturn self;\r\n\t\t}\r\n\r\n\t\tvar a = self.$formatter;\r\n\t\tif (a && a.length) {\r\n\t\t\tfor (var i = 0, length = a.length; i < length; i++)\r\n\t\t\t\tvalue = a[i].call(self, self.path, value, self.type);\r\n\t\t}\r\n\r\n\t\ta = M.$formatter;\r\n\t\tif (a && a.length) {\r\n\t\t\tfor (var i = 0, length = a.length; i < length; i++)\r\n\t\t\t\tvalue = a[i].call(self, self.path, value, self.type);\r\n\t\t}\r\n\r\n\t\treturn value;\r\n\t};\r\n\r\n\tPPC.parser = function(value, prepend) {\r\n\r\n\t\tvar self = this;\r\n\t\tvar type = typeof(value);\r\n\r\n\t\tif (type === TYPE_FN) {\r\n\t\t\t!self.$parser && (self.$parser = []);\r\n\r\n\t\t\tif (prepend === true)\r\n\t\t\t\tself.$parser.unshift(value);\r\n\t\t\telse\r\n\t\t\t\tself.$parser.push(value);\r\n\r\n\t\t\treturn self;\r\n\t\t}\r\n\r\n\t\tif (self.trim && type === TYPE_S)\r\n\t\t\tvalue = value.trim();\r\n\r\n\t\tvar a = self.$parser;\r\n\t\tif (a && a.length) {\r\n\t\t\tfor (var i = 0, length = a.length; i < length; i++)\r\n\t\t\t\tvalue = a[i].call(self, self.path, value, self.type);\r\n\t\t}\r\n\r\n\t\ta = M.$parser;\r\n\t\tif (a && a.length) {\r\n\t\t\tfor (var i = 0, length = a.length; i < length; i++)\r\n\t\t\t\tvalue = a[i].call(self, self.path, value, self.type);\r\n\t\t}\r\n\r\n\t\treturn value;\r\n\t};\r\n\r\n\tPPC.emit = function() {\r\n\t\tW.EMIT.apply(M, arguments);\r\n\t\treturn this;\r\n\t};\r\n\r\n\tPPC.evaluate = function(path, expression, nopath) {\r\n\t\tif (!expression) {\r\n\t\t\texpression = path;\r\n\t\t\tpath = this.path;\r\n\t\t}\r\n\t\treturn EVALUATE(path, expression, nopath);\r\n\t};\r\n\r\n\tPPC.get = function(path) {\r\n\t\tvar self = this;\r\n\t\tif (!path)\r\n\t\t\tpath = self.path;\r\n\r\n\t\tif (self.$pp)\r\n\t\t\treturn self.owner.data(self.path);\r\n\r\n\t\tif (path)\r\n\t\t\treturn get(path);\r\n\t};\r\n\r\n\tPPC.skip = function(path) {\r\n\t\tvar self = this;\r\n\t\tSKIP(path || self.path);\r\n\t\treturn self;\r\n\t};\r\n\r\n\tPPC.set = function(value, type) {\r\n\r\n\t\tvar self = this;\r\n\t\tvar arg = arguments;\r\n\r\n\t\tif (self.$pp) {\r\n\t\t\tself.owner.set(self.path, value);\r\n\t\t\treturn self;\r\n\t\t}\r\n\r\n\t\t// Backwards compatibility\r\n\t\tif (arg.length === 3)\r\n\t\t\tM.set(arg[0], arg[1], arg[2]);\r\n\t\telse\r\n\t\t\tM.set(self.path, value, type);\r\n\r\n\t\treturn self;\r\n\t};\r\n\r\n\tPPC.inc = function(value, type) {\r\n\t\tvar self = this;\r\n\t\tM.inc(self.path, value, type);\r\n\t\treturn self;\r\n\t};\r\n\r\n\tPPC.extend = function(value, type) {\r\n\t\tvar self = this;\r\n\t\tM.extend(self.path, value, type);\r\n\t\treturn self;\r\n\t};\r\n\r\n\tPPC.rewrite = function(value) {\r\n\t\tvar self = this;\r\n\t\tREWRITE(self.path, value);\r\n\t\treturn self;\r\n\t};\r\n\r\n\tPPC.push = function(value, type) {\r\n\t\tvar self = this;\r\n\t\tM.push(self.path, value, type);\r\n\t\treturn self;\r\n\t};\r\n\r\n\t// ===============================================================\r\n\t// USAGE DECLARATION\r\n\t// ===============================================================\r\n\r\n\tfunction USAGE() {\r\n\t\tvar t = this;\r\n\t\tt.init = 0;\r\n\t\tt.manually = 0;\r\n\t\tt.input = 0;\r\n\t\tt.default = 0;\r\n\t\tt.custom = 0;\r\n\t\tt.dirty = 0;\r\n\t\tt.valid = 0;\r\n\t}\r\n\r\n\tUSAGE.prototype.compare = function(type, dt) {\r\n\t\tif (typeof(dt) === TYPE_S && dt.substring(0, 1) !== '-')\r\n\t\t\tdt = W.NOW.add('-' + dt);\r\n\t\tvar val = this[type];\r\n\t\treturn val === 0 ? true : val < dt.getTime();\r\n\t};\r\n\r\n\tUSAGE.prototype.convert = function(type) {\r\n\r\n\t\tvar n = Date.now();\r\n\t\tvar output = {};\r\n\t\tvar num = 1;\r\n\t\tvar t = this;\r\n\r\n\t\tswitch (type.toLowerCase().substring(0, 3)) {\r\n\t\t\tcase 'min':\r\n\t\t\tcase 'mm':\r\n\t\t\tcase 'm':\r\n\t\t\t\tnum = 60000;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'hou':\r\n\t\t\tcase 'hh':\r\n\t\t\tcase 'h':\r\n\t\t\t\tnum = 360000;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'sec':\r\n\t\t\tcase 'ss':\r\n\t\t\tcase 's':\r\n\t\t\t\tnum = 1000;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\toutput.init = t.init === 0 ? 0 : ((n - t.init) / num) >> 0;\r\n\t\toutput.manually = t.manually === 0 ? 0 : ((n - t.manually) / num) >> 0;\r\n\t\toutput.input = t.input === 0 ? 0 : ((n - t.input) / num) >> 0;\r\n\t\toutput.default = t.default === 0 ? 0 : ((n - t.default) / num) >> 0;\r\n\t\toutput.custom = t.custom === 0 ? 0 : ((n - t.custom) / num) >> 0;\r\n\t\toutput.dirty = t.dirty === 0 ? 0 : ((n - t.dirty) / num) >> 0;\r\n\t\toutput.valid = t.valid === 0 ? 0 : ((n - t.valid) / num) >> 0;\r\n\t\treturn output;\r\n\t};\r\n\r\n\tM.prototypes = function(fn) {\r\n\t\tvar obj = {};\r\n\t\tobj.Component = PPC;\r\n\t\tobj.Usage = USAGE.prototype;\r\n\t\tobj.Plugin = Plugin.prototype;\r\n\t\tfn.call(obj, obj);\r\n\t\treturn M;\r\n\t};\r\n\r\n\t// ===============================================================\r\n\t// WINDOW FUNCTIONS\r\n\t// ===============================================================\r\n\r\n\tW.isMOBILE = /Mobi/.test(navigator.userAgent);\r\n\tW.isROBOT = navigator.userAgent ? (/search|agent|bot|crawler|spider/i).test(navigator.userAgent) : true;\r\n\tW.isSTANDALONE = navigator.standalone || W.matchMedia('(display-mode: standalone)').matches;\r\n\tW.isTOUCH = !!('ontouchstart' in W || navigator.maxTouchPoints);\r\n\r\n\tW.setTimeout2 = function(name, fn, timeout, limit, param) {\r\n\t\tvar key = ':' + name;\r\n\t\tif (limit > 0) {\r\n\t\t\tvar key2 = key + ':limit';\r\n\t\t\tif (statics[key2] >= limit)\r\n\t\t\t\treturn;\r\n\t\t\tstatics[key2] = (statics[key2] || 0) + 1;\r\n\t\t\tstatics[key] && clearTimeout(statics[key]);\r\n\t\t\treturn statics[key] = setTimeout(function(param) {\r\n\t\t\t\tstatics[key2] = undefined;\r\n\t\t\t\tfn && fn(param);\r\n\t\t\t}, timeout, param);\r\n\t\t}\r\n\t\tstatics[key] && clearTimeout(statics[key]);\r\n\t\treturn statics[key] = setTimeout(fn, timeout, param);\r\n\t};\r\n\r\n\tW.clearTimeout2 = function(name) {\r\n\t\tvar key = ':' + name;\r\n\t\tif (statics[key]) {\r\n\t\t\tclearTimeout(statics[key]);\r\n\t\t\tstatics[key] = undefined;\r\n\t\t\tstatics[key + ':limit'] && (statics[key + ':limit'] = undefined);\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t};\r\n\r\n\tW.COMPONENT_CONFIG = function(selector, config) {\r\n\r\n\t\tif (typeof(selector) === TYPE_S) {\r\n\t\t\tvar fn = [];\r\n\t\t\tselector.split(' ').forEach(function(sel) {\r\n\t\t\t\tvar prop = '';\r\n\t\t\t\tswitch (sel.trim().substring(0, 1)) {\r\n\t\t\t\t\tcase '*':\r\n\t\t\t\t\t\tfn.push('com.path.indexOf(\\'{0}\\')!==-1'.format(sel.substring(1)));\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\tcase '.':\r\n\t\t\t\t\t\t// path\r\n\t\t\t\t\t\tprop = 'path';\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase '#':\r\n\t\t\t\t\t\t// id\r\n\t\t\t\t\t\tprop = 'id';\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t// name\r\n\t\t\t\t\t\tprop = '$name';\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tfn.push('com.{0}==\\'{1}\\''.format(prop, prop === '$name' ? sel : sel.substring(1)));\r\n\t\t\t});\r\n\t\t\tselector = FN('com=>' + fn.join('&&'));\r\n\t\t}\r\n\r\n\t\tconfigs.push({ fn: selector, config: config });\r\n\t};\r\n\r\n\tW.COMPONENT_EXTEND = function(name, config, declaration) {\r\n\r\n\t\tif (typeof(config) === TYPE_FN) {\r\n\t\t\tvar tmp = declaration;\r\n\t\t\tdeclaration = config;\r\n\t\t\tconfig = tmp;\r\n\t\t}\r\n\r\n\t\tif (extensions[name])\r\n\t\t\textensions[name].push({ config: config, fn: declaration });\r\n\t\telse\r\n\t\t\textensions[name] = [{ config: config, fn: declaration }];\r\n\r\n\t\tfor (var i = 0, length = M.components.length; i < length; i++) {\r\n\t\t\tvar m = M.components[i];\r\n\t\t\tif (!m.$removed || name === m.name){\r\n\t\t\t\tconfig && m.reconfigure(config, undefined, true);\r\n\t\t\t\tdeclaration.call(m, m, m.config);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tRECOMPILE();\r\n\t};\r\n\r\n\tW.ADD = function(value, element) {\r\n\t\tif (element instanceof COM || element instanceof Scope || element instanceof Plugin)\r\n\t\t\telement = element.element;\r\n\t\tif (value instanceof Array) {\r\n\t\t\tfor (var i = 0; i < value.length; i++)\r\n\t\t\t\tADD(value[i], element);\r\n\t\t} else {\r\n\t\t\t$(element || document.body).append('<div data-jc=\"{0}\"></div>'.format(value));\r\n\t\t\tsetTimeout2('ADD', COMPILE, 10);\r\n\t\t}\r\n\t};\r\n\r\n\tW.COMPONENT = function(name, config, declaration, dependencies) {\r\n\r\n\t\tif (typeof(config) === TYPE_FN) {\r\n\t\t\tdependencies = declaration;\r\n\t\t\tdeclaration = config;\r\n\t\t\tconfig = null;\r\n\t\t}\r\n\r\n\t\t// Multiple versions\r\n\t\tif (name.indexOf(',') !== -1) {\r\n\t\t\tname.split(',').forEach(function(item, index) {\r\n\t\t\t\titem = item.trim();\r\n\t\t\t\titem && COMPONENT(item, config, declaration, index ? null : dependencies);\r\n\t\t\t});\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tM.$components[name] && warn('Components: Overwriting component:', name);\r\n\t\tvar a = M.$components[name] = { name: name, config: config, declaration: declaration, shared: {}, dependencies: dependencies instanceof Array ? dependencies : null };\r\n\t\tEMIT('component.compile', name, a);\r\n\t};\r\n\r\n\tW.SINGLETON = function(name, def) {\r\n\t\treturn singletons[name] || (singletons[name] = (new Function('return ' + (def || '{}')))());\r\n\t};\r\n\r\n\tW.WIDTH = function(el) {\r\n\t\tif (!el)\r\n\t\t\tel = $(W);\r\n\t\tvar w = el.width();\r\n\t\tvar d = MD.devices;\r\n\t\treturn w >= d.md.min && w <= d.md.max ? 'md' : w >= d.sm.min && w <= d.sm.max ? 'sm' : w > d.lg.min ? 'lg' : w <= d.xs.max ? 'xs' : '';\r\n\t};\r\n\r\n\tW.MEDIAQUERY = function(query, element, fn) {\r\n\r\n\t\tif (typeof(query) === TYPE_N) {\r\n\t\t\tmediaqueries.remove('id', query);\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tif (typeof(element) === TYPE_FN) {\r\n\t\t\tfn = element;\r\n\t\t\telement = null;\r\n\t\t}\r\n\r\n\t\tquery = query.toLowerCase();\r\n\t\tif (query.indexOf(',') !== -1) {\r\n\t\t\tvar ids = [];\r\n\t\t\tquery.split(',').forEach(function(q) {\r\n\t\t\t\tq = q.trim();\r\n\t\t\t\tq && ids.push(MEDIAQUERY(q, element, fn));\r\n\t\t\t});\r\n\t\t\treturn ids;\r\n\t\t}\r\n\r\n\t\tvar d = MD.devices;\r\n\r\n\t\tif (query === 'md')\r\n\t\t\tquery = 'min-width:{0}px and max-width:{1}px'.format(d.md.min, d.md.max);\r\n\t\telse if (query === 'lg')\r\n\t\t\tquery = 'min-width:{0}px'.format(d.lg.min);\r\n\t\telse if (query === 'xs')\r\n\t\t\tquery = 'max-width:{0}px'.format(d.xs.max);\r\n\t\telse if (query === 'sm')\r\n\t\t\tquery = 'min-width:{0}px and max-width:{1}px'.format(d.sm.min, d.sm.max);\r\n\r\n\t\tvar arr = query.match(/(max-width|min-width|max-device-width|min-device-width|max-height|min-height|max-device-height|height|width):(\\s)\\d+(px|em|in)?/gi);\r\n\t\tvar obj = {};\r\n\r\n\t\tvar num = function(val) {\r\n\t\t\tvar n = parseInt(val.match(/\\d+/), 10);\r\n\t\t\treturn val.match(/\\d+(em)/) ? n * 16 : val.match(/\\d+(in)/) ? (n * 0.010416667) >> 0 : n;\r\n\t\t};\r\n\r\n\t\tif (arr) {\r\n\t\t\tfor (var i = 0, length = arr.length; i < length; i++) {\r\n\t\t\t\tvar item = arr[i];\r\n\t\t\t\tvar index = item.indexOf(':');\r\n\t\t\t\tswitch (item.substring(0, index).toLowerCase().trim()) {\r\n\t\t\t\t\tcase 'min-width':\r\n\t\t\t\t\tcase 'min-device-width':\r\n\t\t\t\t\tcase 'width':\r\n\t\t\t\t\t\tobj.minW = num(item);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'max-width':\r\n\t\t\t\t\tcase 'max-device-width':\r\n\t\t\t\t\t\tobj.maxW = num(item);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'min-height':\r\n\t\t\t\t\tcase 'min-device-height':\r\n\t\t\t\t\tcase 'height':\r\n\t\t\t\t\t\tobj.minH = num(item);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'max-height':\r\n\t\t\t\t\tcase 'max-device-height':\r\n\t\t\t\t\t\tobj.maxH = num(item);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tarr = query.match(/orientation:(\\s)(landscape|portrait)/gi);\r\n\t\tif (arr) {\r\n\t\t\tfor (var i = 0, length = arr.length; i < length; i++) {\r\n\t\t\t\tvar item = arr[i];\r\n\t\t\t\tif (item.toLowerCase().indexOf('portrait') !== -1)\r\n\t\t\t\t\tobj.orientation = 'portrait';\r\n\t\t\t\telse\r\n\t\t\t\t\tobj.orientation = 'landscape';\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tobj.id = mediaqueriescounter++;\r\n\t\tobj.fn = fn;\r\n\r\n\t\tif (element)\r\n\t\t\tobj.element = element;\r\n\r\n\t\tmediaqueries.push(obj);\r\n\t\treturn obj.id;\r\n\t};\r\n\r\n\tvar regfnplugin = function(v) {\r\n\t\tvar l = v.length;\r\n\t\treturn pathmaker(v.substring(0, l - 1)) + v.substring(l - 1);\r\n\t};\r\n\r\n\r\n\tW.FN = function(exp, notrim) {\r\n\r\n\t\texp = exp.replace(REGFNPLUGIN, regfnplugin);\r\n\r\n\t\tvar index = exp.indexOf('=>');\r\n\t\tif (index === -1)\r\n\t\t\treturn isValue(exp) ? FN('value=>' + rebinddecode(exp), true) : new Function('return ' + (exp.indexOf('(') === -1 ? 'typeof({0})==\\'function\\'?{0}.apply(this,arguments):{0}'.format(exp) : exp));\r\n\r\n\t\tvar arg = exp.substring(0, index).trim();\r\n\t\tvar val = exp.substring(index + 2).trim();\r\n\t\tvar is = false;\r\n\r\n\t\targ = arg.replace(/\\(|\\)|\\s/g, '').trim();\r\n\t\tif (arg)\r\n\t\t\targ = arg.split(',');\r\n\r\n\t\tif (val.charCodeAt(0) === 123 && !notrim) {\r\n\t\t\tis = true;\r\n\t\t\tval = val.substring(1, val.length - 1).trim();\r\n\t\t}\r\n\r\n\r\n\t\tvar output = (is ? '' : 'return ') + val;\r\n\t\tswitch (arg.length) {\r\n\t\t\tcase 1:\r\n\t\t\t\treturn new Function(arg[0], output);\r\n\t\t\tcase 2:\r\n\t\t\t\treturn new Function(arg[0], arg[1], output);\r\n\t\t\tcase 3:\r\n\t\t\t\treturn new Function(arg[0], arg[1], arg[2], output);\r\n\t\t\tcase 4:\r\n\t\t\t\treturn new Function(arg[0], arg[1], arg[2], arg[3], output);\r\n\t\t\tcase 0:\r\n\t\t\tdefault:\r\n\t\t\t\treturn new Function(output);\r\n\t\t}\r\n\t};\r\n\r\n\tW.RECONFIGURE = function(selector, value) {\r\n\t\tSETTER(true, selector, 'reconfigure', value);\r\n\t\treturn RECONFIGURE;\r\n\t};\r\n\r\n\tW.SETTER = function(selector, name) {\r\n\r\n\t\tvar arg = [];\r\n\t\tvar beg = selector === true ? 3 : 2;\r\n\r\n\t\tfor (var i = beg; i < arguments.length; i++)\r\n\t\t\targ.push(arguments[i]);\r\n\r\n\t\tif (beg === 3) {\r\n\r\n\t\t\tselector = name;\r\n\r\n\t\t\tif (lazycom[selector] && lazycom[selector].state !== 3) {\r\n\r\n\t\t\t\tif (lazycom[selector].state === 1) {\r\n\t\t\t\t\tlazycom[selector].state = 2;\r\n\t\t\t\t\tEMIT('lazy', selector, true);\r\n\t\t\t\t\twarn('Lazy load: ' + selector);\r\n\t\t\t\t\tcompile();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tsetTimeout(function(arg) {\r\n\t\t\t\t\targ[0] = true;\r\n\t\t\t\t\tW.SETTER.apply(W, arg);\r\n\t\t\t\t}, 555, arguments);\r\n\r\n\t\t\t\treturn SETTER;\r\n\t\t\t}\r\n\r\n\t\t\tname = arguments[2];\r\n\r\n\t\t\tFIND(selector, true, function(arr) {\r\n\t\t\t\tfor (var i = 0, length = arr.length; i < length; i++) {\r\n\t\t\t\t\tvar o = arr[i];\r\n\t\t\t\t\tif (typeof(o[name]) === TYPE_FN)\r\n\t\t\t\t\t\to[name].apply(o, arg);\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\to[name] = arg[0];\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} else {\r\n\r\n\t\t\tif (lazycom[selector] && lazycom[selector].state !== 3) {\r\n\r\n\t\t\t\tif (lazycom[selector].state === 1) {\r\n\t\t\t\t\tlazycom[selector].state = 2;\r\n\t\t\t\t\tEMIT('lazy', selector, true);\r\n\t\t\t\t\twarn('Lazy load: ' + selector);\r\n\t\t\t\t\tcompile();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tsetTimeout(function(arg) {\r\n\t\t\t\t\tW.SETTER.apply(W, arg);\r\n\t\t\t\t}, 555, arguments);\r\n\r\n\t\t\t\treturn SETTER;\r\n\t\t\t}\r\n\r\n\t\t\tvar arr = FIND(selector, true);\r\n\t\t\tfor (var i = 0, length = arr.length; i < length; i++) {\r\n\t\t\t\tvar o = arr[i];\r\n\t\t\t\tif (typeof(o[name]) === TYPE_FN)\r\n\t\t\t\t\to[name].apply(o, arg);\r\n\t\t\t\telse\r\n\t\t\t\t\to[name] = arg[0];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn SETTER;\r\n\t};\r\n\r\n\tfunction exechelper(ctx, path, arg) {\r\n\t\tsetTimeout(function() {\r\n\t\t\tEXEC.call(ctx, true, path, arg[0], arg[1], arg[2], arg[3], arg[4], arg[5], arg[6]);\r\n\t\t}, 200);\r\n\t}\r\n\r\n\tW.EXEC2 = function(path, tmp) {\r\n\t\tvar is = path === true;\r\n\t\treturn function(a, b, c, d) {\r\n\t\t\tif (is)\r\n\t\t\t\tEXEC(tmp, path, a, b, c, d);\r\n\t\t\telse\r\n\t\t\t\tEXEC(path, a, b, c, d);\r\n\t\t};\r\n\t};\r\n\r\n\tW.EXEC = function(path) {\r\n\r\n\t\tvar arg = [];\r\n\t\tvar f = 1;\r\n\t\tvar wait = false;\r\n\t\tvar p;\r\n\t\tvar ctx = this;\r\n\r\n\t\tif (path === true) {\r\n\t\t\twait = true;\r\n\t\t\tpath = arguments[1];\r\n\t\t\tf = 2;\r\n\t\t}\r\n\r\n\t\tpath = path.env();\r\n\r\n\t\tfor (var i = f; i < arguments.length; i++)\r\n\t\t\targ.push(arguments[i]);\r\n\r\n\t\tvar c = path.charCodeAt(0);\r\n\r\n\t\t// Event\r\n\t\tif (c === 35) {\r\n\t\t\tp = path.substring(1);\r\n\t\t\tif (wait)\r\n\t\t\t\t!events[p] && exechelper(ctx, path, arg);\r\n\t\t\telse\r\n\t\t\t\tEMIT.call(ctx, p, arg[0], arg[1], arg[2], arg[3], arg[4]);\r\n\t\t\treturn EXEC;\r\n\t\t}\r\n\r\n\t\tvar ok = 0;\r\n\r\n\t\t// PLUGINS\r\n\t\tif (c === 64) {\r\n\t\t\tvar index = path.indexOf('.');\r\n\t\t\tp = path.substring(1, index);\r\n\t\t\tvar ctrl = W.PLUGINS[p];\r\n\t\t\tif (ctrl) {\r\n\t\t\t\tvar fn = ctrl[path.substring(index + 1)];\r\n\t\t\t\tif (typeof(fn) === TYPE_FN) {\r\n\t\t\t\t\tfn.apply(ctx === W ? ctrl : ctx, arg);\r\n\t\t\t\t\tok = 1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\twait && !ok && exechelper(ctx, path, arg);\r\n\t\t\treturn EXEC;\r\n\t\t}\r\n\r\n\t\t// PLUGINS\r\n\t\tvar index = path.indexOf('/');\r\n\t\tif (index !== -1) {\r\n\t\t\tp = path.substring(0, index);\r\n\t\t\tvar ctrl = W.PLUGINS[p];\r\n\t\t\tvar fn = path.substring(index + 1);\r\n\t\t\tif (ctrl && typeof(ctrl[fn]) === TYPE_FN) {\r\n\t\t\t\tctrl[fn].apply(ctx === W ? ctrl : ctx, arg);\r\n\t\t\t\tok = 1;\r\n\t\t\t}\r\n\r\n\t\t\twait && !ok && exechelper(ctx, path, arg);\r\n\t\t\treturn EXEC;\r\n\t\t}\r\n\r\n\t\tvar fn = get(path);\r\n\r\n\t\tif (typeof(fn) === TYPE_FN) {\r\n\t\t\tfn.apply(ctx, arg);\r\n\t\t\tok = 1;\r\n\t\t}\r\n\r\n\t\twait && !ok && exechelper(ctx, path, arg);\r\n\t\treturn EXEC;\r\n\t};\r\n\r\n\tW.MAKE = function(obj, fn, update) {\r\n\r\n\t\tswitch (typeof(obj)) {\r\n\t\t\tcase TYPE_FN:\r\n\t\t\t\tfn = obj;\r\n\t\t\t\tobj = {};\r\n\t\t\t\tbreak;\r\n\t\t\tcase TYPE_S:\r\n\t\t\t\tvar p = obj;\r\n\t\t\t\tvar is = true;\r\n\t\t\t\tobj = get(p);\r\n\t\t\t\tif (obj == null) {\r\n\t\t\t\t\tis = false;\r\n\t\t\t\t\tobj = {};\r\n\t\t\t\t}\r\n\t\t\t\tfn.call(obj, obj, p, function(path, value) {\r\n\t\t\t\t\tset2(obj, path, value);\r\n\t\t\t\t});\r\n\t\t\t\tif (is && (update === undefined || update === true))\r\n\t\t\t\t\tM.update(p, true);\r\n\t\t\t\telse {\r\n\t\t\t\t\tif (C.ready)\r\n\t\t\t\t\t\tset(p, obj);\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tM.set(p, obj, true);\r\n\t\t\t\t}\r\n\t\t\t\treturn obj;\r\n\t\t}\r\n\r\n\t\tfn.call(obj, obj, '');\r\n\t\treturn obj;\r\n\t};\r\n\r\n\tW.OPT = function(obj, fn) {\r\n\t\tif (typeof(obj) === TYPE_FN) {\r\n\t\t\tfn = obj;\r\n\t\t\tobj = {};\r\n\t\t}\r\n\t\tfn.call(obj, function(path, value) {\r\n\t\t\treturn set2(obj, path, value);\r\n\t\t});\r\n\t\treturn obj;\r\n\t};\r\n\r\n\tW.COPY = function(a, b) {\r\n\t\tvar keys = Object.keys(a);\r\n\t\tfor (var i = 0; i < keys.length; i++) {\r\n\t\t\tvar key = keys[i];\r\n\t\t\tvar val = a[key];\r\n\t\t\tvar type = typeof(val);\r\n\t\t\tb[key] = type === TYPE_O ? val ? CLONE(val) : val : val;\r\n\t\t}\r\n\t\treturn b;\r\n\t};\r\n\r\n\tW.CLONE = function(obj, path) {\r\n\r\n\t\tvar type = typeof(obj);\r\n\t\tswitch (type) {\r\n\t\t\tcase TYPE_N:\r\n\t\t\tcase 'boolean':\r\n\t\t\t\treturn obj;\r\n\t\t\tcase TYPE_S:\r\n\t\t\t\treturn path ? obj : CLONE(get(obj), true);\r\n\t\t}\r\n\r\n\t\tif (obj == null)\r\n\t\t\treturn obj;\r\n\r\n\t\tif (obj instanceof Date)\r\n\t\t\treturn new Date(obj.getTime());\r\n\r\n\t\treturn PARSE(JSON.stringify(obj));\r\n\t};\r\n\r\n\tW.STRINGIFY = function(obj, compress, fields) {\r\n\t\tcompress === undefined && (compress = MD.jsoncompress);\r\n\t\tvar tf = typeof(fields);\r\n\t\treturn JSON.stringify(obj, function(key, value) {\r\n\r\n\t\t\tif (!key)\r\n\t\t\t\treturn value;\r\n\r\n\t\t\tif (fields) {\r\n\t\t\t\tif (fields instanceof Array) {\r\n\t\t\t\t\tif (fields.indexOf(key) === -1)\r\n\t\t\t\t\t\treturn undefined;\r\n\t\t\t\t} else if (tf === TYPE_FN) {\r\n\t\t\t\t\tif (!fields(key, value))\r\n\t\t\t\t\t\treturn undefined;\r\n\t\t\t\t} else if (fields[key] === false)\r\n\t\t\t\t\treturn undefined;\r\n\t\t\t}\r\n\r\n\t\t\tif (compress === true) {\r\n\t\t\t\tvar t = typeof(value);\r\n\t\t\t\tif (t === TYPE_S) {\r\n\t\t\t\t\tvalue = value.trim();\r\n\t\t\t\t\treturn value ? value : undefined;\r\n\t\t\t\t} else if (value === false || value == null)\r\n\t\t\t\t\treturn undefined;\r\n\t\t\t}\r\n\r\n\t\t\treturn value;\r\n\t\t});\r\n\t};\r\n\r\n\tW.PARSE = function(value, date) {\r\n\r\n\t\t// Is selector?\r\n\t\tvar c = value.substring(0, 1);\r\n\t\tif (c === '#' || c === '.')\r\n\t\t\treturn PARSE($(value).html(), date);\r\n\r\n\t\tdate === undefined && (date = MD.jsondate);\r\n\t\ttry {\r\n\t\t\treturn JSON.parse(value, function(key, value) {\r\n\t\t\t\treturn typeof(value) === TYPE_S && date && value.isJSONDate() ? new Date(value) : value;\r\n\t\t\t});\r\n\t\t} catch (e) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t};\r\n\r\n\tW.SKIP = function() {\r\n\t\tfor (var j = 0; j < arguments.length; j++) {\r\n\t\t\tvar arr = arguments[j].split(',');\r\n\t\t\tfor (var i = 0, length = arr.length; i < length; i++) {\r\n\t\t\t\tvar p = arr[i].trim();\r\n\t\t\t\tif (skips[p])\r\n\t\t\t\t\tskips[p]++;\r\n\t\t\t\telse\r\n\t\t\t\t\tskips[p] = 1;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tW.NOOP = function(){};\r\n\r\n\tW.TOGGLE = function(path, timeout, reset) {\r\n\t\tvar v = GET(path);\r\n\t\tSET(path, !v, timeout, reset);\r\n\t\treturn W;\r\n\t};\r\n\r\n\tW.SET = function(path, value, timeout, reset) {\r\n\t\tvar t = typeof(timeout);\r\n\t\tif (t === 'boolean')\r\n\t\t\treturn M.set(path, value, timeout);\r\n\t\tif (!timeout || timeout < 10 || t !== TYPE_N) // TYPE\r\n\t\t\treturn M.set(path, value, timeout);\r\n\t\tsetTimeout(function() {\r\n\t\t\tM.set(path, value, reset);\r\n\t\t}, timeout);\r\n\t\treturn W;\r\n\t};\r\n\r\n\tW.SETR = function(path, value, type) {\r\n\t\tM.set(path, value, type);\r\n\t\tRESET(path);\r\n\t\treturn W;\r\n\t};\r\n\r\n\tW.INC = function(path, value, timeout, reset) {\r\n\r\n\t\tif (value == null)\r\n\t\t\tvalue = 1;\r\n\r\n\t\tvar t = typeof(timeout);\r\n\t\tif (t === 'boolean')\r\n\t\t\treturn M.inc(path, value, timeout);\r\n\t\tif (!timeout || timeout < 10 || t !== TYPE_N) // TYPE\r\n\t\t\treturn M.inc(path, value, timeout);\r\n\t\tsetTimeout(function() {\r\n\t\t\tM.inc(path, value, reset);\r\n\t\t}, timeout);\r\n\t\treturn W;\r\n\t};\r\n\r\n\tW.EXTEND = function(path, value, timeout, reset) {\r\n\t\tvar t = typeof(timeout);\r\n\t\tif (t === 'boolean')\r\n\t\t\treturn M.extend(path, value, timeout);\r\n\t\tif (!timeout || timeout < 10 || t !== TYPE_N) // TYPE\r\n\t\t\treturn M.extend(path, value, timeout);\r\n\t\tsetTimeout(function() {\r\n\t\t\tM.extend(path, value, reset);\r\n\t\t}, timeout);\r\n\t\treturn W;\r\n\t};\r\n\r\n\tW.PUSH = function(path, value, timeout, reset) {\r\n\t\tvar t = typeof(timeout);\r\n\t\tif (t === 'boolean')\r\n\t\t\treturn M.push(path, value, timeout);\r\n\t\tif (!timeout || timeout < 10 || t !== TYPE_N) // TYPE\r\n\t\t\treturn M.push(path, value, timeout);\r\n\t\tsetTimeout(function() {\r\n\t\t\tM.push(path, value, reset);\r\n\t\t}, timeout);\r\n\t\treturn W;\r\n\t};\r\n\r\n\tW.TOGGLE2 = function(path, type) {\r\n\t\tTOGGLE(path, type);\r\n\t\tCHANGE(path);\r\n\t\treturn W;\r\n\t};\r\n\r\n\tW.EXTEND2 = function(path, value, type) {\r\n\t\tEXTEND(path, value, type);\r\n\t\tCHANGE(path);\r\n\t\treturn W;\r\n\t};\r\n\r\n\tW.SET2 = function(path, value, type) {\r\n\t\tSET(path, value, type);\r\n\t\tCHANGE(path);\r\n\t\treturn W;\r\n\t};\r\n\r\n\tW.INC2 = function(path, value, type) {\r\n\t\tINC(path, value, type);\r\n\t\tCHANGE(path);\r\n\t\treturn W;\r\n\t};\r\n\r\n\tW.PUSH2 = function(path, value, type) {\r\n\t\tPUSH(path, value, type);\r\n\t\tCHANGE(path);\r\n\t\treturn W;\r\n\t};\r\n\r\n\tW.DEFAULT = function(path, timeout, reset) {\r\n\t\tvar arr = path.split(REGMETA);\r\n\t\tif (arr.length > 1) {\r\n\t\t\tvar def = arr[1];\r\n\t\t\tpath = arr[0];\r\n\t\t\tvar index = path.indexOf('.*');\r\n\t\t\tif (index !== -1)\r\n\t\t\t\tpath = path.substring(0, index);\r\n\t\t\tSET(path, new Function('return ' + def)(), timeout > 10 ? timeout : 3, timeout > 10 ? 3 : null);\r\n\t\t}\r\n\t\treturn M.default(arr[0], timeout, null, reset);\r\n\t};\r\n\r\n\tW.UPTODATE = function(period, url, callback, condition) {\r\n\r\n\t\tif (typeof(url) === TYPE_FN) {\r\n\t\t\tcondition = callback;\r\n\t\t\tcallback = url;\r\n\t\t\turl = '';\r\n\t\t}\r\n\r\n\t\tvar dt = new Date().add(period);\r\n\t\tON('knockknock', function() {\r\n\t\t\tif (dt > W.NOW)\r\n\t\t\t\treturn;\r\n\t\t\tif (!condition || !condition())\r\n\t\t\t\treturn;\r\n\t\t\tvar id = setTimeout(function() {\r\n\t\t\t\tvar l = W.location;\r\n\t\t\t\tif (url)\r\n\t\t\t\t\tl.href = url.$env();\r\n\t\t\t\telse\r\n\t\t\t\t\tl.reload(true);\r\n\t\t\t}, 5000);\r\n\t\t\tcallback && callback(id);\r\n\t\t});\r\n\t};\r\n\r\n\tW.PING = function(url, timeout, execute) {\r\n\r\n\t\tif (navigator.onLine != null && !navigator.onLine)\r\n\t\t\treturn;\r\n\r\n\t\tif (typeof(timeout) === 'boolean') {\r\n\t\t\texecute = timeout;\r\n\t\t\ttimeout = 0;\r\n\t\t}\r\n\r\n\t\turl = url.$env();\r\n\r\n\t\tvar index = url.indexOf(' ');\r\n\t\tvar method = 'GET';\r\n\r\n\t\tif (index !== -1) {\r\n\t\t\tmethod = url.substring(0, index).toUpperCase();\r\n\t\t\turl = url.substring(index).trim();\r\n\t\t}\r\n\r\n\t\tvar options = {};\r\n\t\tvar data = $.param(MD.pingdata);\r\n\r\n\t\tif (data) {\r\n\t\t\tindex = url.lastIndexOf('?');\r\n\t\t\tif (index === -1)\r\n\t\t\t\turl += '?' + data;\r\n\t\t\telse\r\n\t\t\t\turl += '&' + data;\r\n\t\t}\r\n\r\n\t\toptions.type = method;\r\n\t\toptions.headers = { 'x-ping': location.pathname, 'x-cookies': navigator.cookieEnabled ? '1' : '0', 'x-referrer': document.referrer };\r\n\r\n\t\toptions.success = function(r) {\r\n\t\t\tif (r) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\t(new Function(r))();\r\n\t\t\t\t} catch (e) {}\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\texecute && $.ajax(makeurl(url), options);\r\n\r\n\t\treturn setInterval(function() {\r\n\t\t\t$.ajax(makeurl(url), options);\r\n\t\t}, timeout || 30000);\r\n\t};\r\n\r\n\tW.MODIFIED = function(path) {\r\n\t\tvar output = [];\r\n\t\tM.each(function(obj) {\r\n\t\t\tif (!(obj.disabled || obj.$dirty_disabled))\r\n\t\t\t\tobj.$dirty === false && output.push(obj.path);\r\n\t\t}, pathmaker(path));\r\n\t\treturn output;\r\n\t};\r\n\r\n\tW.NOTMODIFIED = function(path, value, fields) {\r\n\r\n\t\tif (value === undefined)\r\n\t\t\tvalue = get(path);\r\n\r\n\t\tif (value === undefined)\r\n\t\t\tvalue = null;\r\n\r\n\t\tif (fields)\r\n\t\t\tpath = path.concat('#', fields);\r\n\r\n\t\tvar s = STRINGIFY(value, false, fields);\r\n\t\tvar hash = HASH(s);\r\n\t\tvar key = 'notmodified.' + path;\r\n\r\n\t\tif (cache[key] === hash)\r\n\t\t\treturn true;\r\n\r\n\t\tcache[key] = hash;\r\n\t\treturn false;\r\n\t};\r\n\r\n\tW.VERSION = function() {\r\n\t\tfor (var j = 0; j < arguments.length; j++) {\r\n\t\t\tvar keys = arguments[j].split(',');\r\n\t\t\tfor (var i = 0; i < keys.length; i++) {\r\n\t\t\t\tvar key = keys[i].trim();\r\n\t\t\t\tvar tmp = key.indexOf('@');\r\n\t\t\t\tif (tmp === -1)\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\tvar version = key.substring(tmp + 1);\r\n\t\t\t\tkey = key.substring(0, tmp);\r\n\t\t\t\tversion && key && (versions[key] = version);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tW.FIND = function(value, many, noCache, callback) {\r\n\r\n\t\tvar isWaiting = false;\r\n\r\n\t\tif (typeof(many) === TYPE_FN) {\r\n\t\t\tisWaiting = true;\r\n\t\t\tcallback = many;\r\n\t\t\tmany = undefined;\r\n\t\t\t// noCache = undefined;\r\n\t\t\t// noCache can be timeout\r\n\t\t} else if (typeof(noCache) === TYPE_FN) {\r\n\t\t\tvar tmp = callback;\r\n\t\t\tisWaiting = true;\r\n\t\t\tcallback = noCache;\r\n\t\t\tnoCache = tmp;\r\n\t\t\t// noCache can be timeout\r\n\t\t}\r\n\r\n\t\tif (isWaiting) {\r\n\t\t\tWAIT(function() {\r\n\t\t\t\tvar val = FIND(value, many, noCache);\r\n\t\t\t\tif (lazycom[value] && lazycom[value].state === 1) {\r\n\t\t\t\t\tlazycom[value].state = 2;\r\n\t\t\t\t\tEMIT('lazy', value, true);\r\n\t\t\t\t\twarn('Lazy load: ' + value);\r\n\t\t\t\t\tcompile();\r\n\t\t\t\t}\r\n\t\t\t\treturn val instanceof Array ? val.length > 0 : !!val;\r\n\t\t\t}, function(err) {\r\n\t\t\t\t// timeout\r\n\t\t\t\tif (!err) {\r\n\t\t\t\t\tvar val = FIND(value, many);\r\n\t\t\t\t\tcallback.call(val ? val : W, val);\r\n\t\t\t\t}\r\n\t\t\t}, 500, noCache);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Element\r\n\t\tif (typeof(value) === TYPE_O) {\r\n\t\t\tif (!(value instanceof jQuery))\r\n\t\t\t\tvalue = $(value);\r\n\t\t\tvar output = findcomponent(value, '');\r\n\t\t\treturn many ? output : output[0];\r\n\t\t}\r\n\r\n\t\tvar key, output;\r\n\r\n\t\tif (!noCache) {\r\n\t\t\tkey = 'find.' + value + '.' + (many ? 0 : 1);\r\n\t\t\toutput = cache[key];\r\n\t\t\tif (output)\r\n\t\t\t\treturn output;\r\n\t\t}\r\n\r\n\t\tvar r = findcomponent(null, value);\r\n\t\tif (!many)\r\n\t\t\tr = r[0];\r\n\t\toutput = r;\r\n\t\t!noCache && (cache[key] = output);\r\n\t\treturn output;\r\n\t};\r\n\r\n\tW.BIND = function(path) {\r\n\t\tif (path instanceof Array) {\r\n\t\t\tfor (var i = 0; i < path.length; i++)\r\n\t\t\t\tBIND(path[i]);\r\n\t\t\treturn W;\r\n\t\t}\r\n\t\tpath = pathmaker(path);\r\n\t\tif (!path)\r\n\t\t\treturn W;\r\n\t\tvar is = path.charCodeAt(0) === 33;\r\n\t\tif (is)\r\n\t\t\tpath = path.substring(1);\r\n\t\tpath = path.replace(REGWILDCARD, '');\r\n\t\tpath && set(path, get(path), true);\r\n\t};\r\n\r\n\tW.UPDATE = function(path, timeout, reset) {\r\n\t\tvar t = typeof(timeout);\r\n\t\tif (t === 'boolean')\r\n\t\t\treturn M.update(path, timeout);\r\n\t\tif (!timeout || timeout < 10 || t !== TYPE_N) // TYPE\r\n\t\t\treturn M.update(path, reset, timeout);\r\n\t\tsetTimeout(function() {\r\n\t\t\tM.update(path, reset);\r\n\t\t}, timeout);\r\n\t};\r\n\r\n\tW.UPDATE2 = function(path, type) {\r\n\t\tUPDATE(path, type);\r\n\t\tCHANGE(path);\r\n\t\treturn W;\r\n\t};\r\n\r\n\tW.SCHEMA = function(name, declaration) {\r\n\t\treturn M.schema(name, declaration);\r\n\t};\r\n\r\n\tW.CSS = W.STYLE = function(value, id) {\r\n\t\tid && $('#css' + id).remove();\r\n\t\t$('<style type=\"text/css\"' + (id ? ' id=\"css' + id + '\"' : '') + '>' + (value instanceof Array ? value.join('') : value) + '</style>').appendTo('head');\r\n\t};\r\n\r\n\tW.HASH = function(s) {\r\n\t\tif (!s)\r\n\t\t\treturn 0;\r\n\t\tvar type = typeof(s);\r\n\t\tif (type === TYPE_N)\r\n\t\t\treturn s;\r\n\t\telse if (type === 'boolean')\r\n\t\t\treturn s ? 1 : 0;\r\n\t\telse if (s instanceof Date)\r\n\t\t\treturn s.getTime();\r\n\t\telse if (type === TYPE_O)\r\n\t\t\ts = STRINGIFY(s);\r\n\t\tvar hash = 0, i, char;\r\n\t\tif (!s.length)\r\n\t\t\treturn hash;\r\n\t\tvar l = s.length;\r\n\t\tfor (i = 0; i < l; i++) {\r\n\t\t\tchar = s.charCodeAt(i);\r\n\t\t\thash = ((hash << 5) - hash) + char;\r\n\t\t\thash |= 0; // Convert to 32bit integer\r\n\t\t}\r\n\t\treturn hash;\r\n\t};\r\n\r\n\tW.GUID = function(size) {\r\n\t\tif (!size)\r\n\t\t\tsize = 10;\r\n\t\tvar l = ((size / 10) >> 0) + 1;\r\n\t\tvar b = [];\r\n\t\tfor (var i = 0; i < l; i++)\r\n\t\t\tb.push(Math.random().toString(36).substring(2));\r\n\t\treturn b.join('').substring(0, size);\r\n\t};\r\n\r\n\tW.KEYPRESS = function(fn, timeout, key) {\r\n\t\tif (!timeout)\r\n\t\t\ttimeout = 300;\r\n\t\tvar str = fn.toString();\r\n\t\tvar beg = str.length - 20;\r\n\t\tif (beg < 0)\r\n\t\t\tbeg = 0;\r\n\t\tvar tkey = key ? key : HASH(str.substring(0, 20) + 'X' + str.substring(beg)) + '_keypress';\r\n\t\tsetTimeout2(tkey, fn, timeout);\r\n\t};\r\n\r\n\tW.WAIT = function(fn, callback, interval, timeout) {\r\n\t\tvar key = ((Math.random() * 10000) >> 0).toString(16);\r\n\t\tvar tkey = timeout > 0 ? key + '_timeout' : 0;\r\n\r\n\t\tif (typeof(callback) === TYPE_N) {\r\n\t\t\tvar tmp = interval;\r\n\t\t\tinterval = callback;\r\n\t\t\tcallback = tmp;\r\n\t\t}\r\n\r\n\t\tvar is = typeof(fn) === TYPE_S;\r\n\t\tvar run = false;\r\n\r\n\t\tif (is) {\r\n\t\t\tvar result = get(fn);\r\n\t\t\tif (result)\r\n\t\t\t\trun = true;\r\n\t\t} else if (fn())\r\n\t\t\trun = true;\r\n\r\n\t\tif (run) {\r\n\t\t\tcallback(null, function(sleep) {\r\n\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\tWAIT(fn, callback, interval, timeout);\r\n\t\t\t\t}, sleep || 1);\r\n\t\t\t});\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (tkey) {\r\n\t\t\twaits[tkey] = setTimeout(function() {\r\n\t\t\t\tclearInterval(waits[key]);\r\n\t\t\t\tdelete waits[tkey];\r\n\t\t\t\tdelete waits[key];\r\n\t\t\t\tcallback(new Error('Timeout.'));\r\n\t\t\t}, timeout);\r\n\t\t}\r\n\r\n\t\twaits[key] = setInterval(function() {\r\n\r\n\t\t\tif (is) {\r\n\t\t\t\tvar result = get(fn);\r\n\t\t\t\tif (result == null)\r\n\t\t\t\t\treturn;\r\n\t\t\t} else if (!fn())\r\n\t\t\t\treturn;\r\n\r\n\t\t\tclearInterval(waits[key]);\r\n\t\t\tdelete waits[key];\r\n\r\n\t\t\tif (tkey) {\r\n\t\t\t\tclearTimeout(waits[tkey]);\r\n\t\t\t\tdelete waits[tkey];\r\n\t\t\t}\r\n\r\n\t\t\tcallback && callback(null, function(sleep) {\r\n\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\tWAIT(fn, callback, interval);\r\n\t\t\t\t}, sleep || 1);\r\n\t\t\t});\r\n\r\n\t\t}, interval || 500);\r\n\t};\r\n\r\n\tvar $recompile;\r\n\r\n\tW.COMPILE = function(container) {\r\n\t\tclearTimeout($recompile);\r\n\t\treturn compile(container);\r\n\t};\r\n\r\n\tW.RECOMPILE = function() {\r\n\t\t$recompile && clearTimeout($recompile);\r\n\t\t$recompile = setTimeout(function() {\r\n\t\t\tCOMPILE();\r\n\t\t\t$recompile = null;\r\n\t\t}, 700);\r\n\t};\r\n\r\n\t// ===============================================================\r\n\t// PROTOTYPES\r\n\t// ===============================================================\r\n\r\n\tvar AP = Array.prototype;\r\n\tvar SP = String.prototype;\r\n\tvar NP = Number.prototype;\r\n\tvar DP = Date.prototype;\r\n\r\n\tAP.wait = AP.waitFor = function(onItem, callback, thread, tmp) {\r\n\r\n\t\tvar self = this;\r\n\t\tvar init = false;\r\n\r\n\t\t// INIT\r\n\t\tif (!tmp) {\r\n\r\n\t\t\tif (typeof(callback) !== TYPE_FN) {\r\n\t\t\t\tthread = callback;\r\n\t\t\t\tcallback = null;\r\n\t\t\t}\r\n\r\n\t\t\ttmp = {};\r\n\t\t\ttmp.pending = 0;\r\n\t\t\ttmp.index = 0;\r\n\t\t\ttmp.thread = thread;\r\n\r\n\t\t\t// thread === Boolean then array has to be removed item by item\r\n\t\t\tinit = true;\r\n\t\t}\r\n\r\n\t\tvar item = thread === true ? self.shift() : self[tmp.index++];\r\n\r\n\t\tif (item === undefined) {\r\n\t\t\tif (!tmp.pending) {\r\n\t\t\t\tcallback && callback();\r\n\t\t\t\ttmp.cancel = true;\r\n\t\t\t}\r\n\t\t\treturn self;\r\n\t\t}\r\n\r\n\t\ttmp.pending++;\r\n\t\tonItem.call(self, item, function() {\r\n\t\t\tsetTimeout(next_wait, 1, self, onItem, callback, thread, tmp);\r\n\t\t}, tmp.index);\r\n\r\n\t\tif (!init || tmp.thread === 1)\r\n\t\t\treturn self;\r\n\r\n\t\tfor (var i = 1; i < tmp.thread; i++)\r\n\t\t\tself.wait(onItem, callback, 1, tmp);\r\n\r\n\t\treturn self;\r\n\t};\r\n\r\n\tfunction next_wait(self, onItem, callback, thread, tmp) {\r\n\t\ttmp.pending--;\r\n\t\tself.wait(onItem, callback, thread, tmp);\r\n\t}\r\n\r\n\tAP.limit = function(max, fn, callback, index) {\r\n\r\n\t\tif (index === undefined)\r\n\t\t\tindex = 0;\r\n\r\n\t\tvar current = [];\r\n\t\tvar self = this;\r\n\t\tvar length = index + max;\r\n\r\n\t\tfor (var i = index; i < length; i++) {\r\n\t\t\tvar item = self[i];\r\n\r\n\t\t\tif (item !== undefined) {\r\n\t\t\t\tcurrent.push(item);\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tif (!current.length) {\r\n\t\t\t\tcallback && callback();\r\n\t\t\t\treturn self;\r\n\t\t\t}\r\n\r\n\t\t\tfn(current, function() { callback && callback(); }, index, index + max);\r\n\t\t\treturn self;\r\n\t\t}\r\n\r\n\t\tif (!current.length) {\r\n\t\t\tcallback && callback();\r\n\t\t\treturn self;\r\n\t\t}\r\n\r\n\t\tfn(current, function() {\r\n\t\t\tif (length < self.length)\r\n\t\t\t\tself.limit(max, fn, callback, length);\r\n\t\t\telse\r\n\t\t\t\tcallback && callback();\r\n\t\t}, index, index + max);\r\n\r\n\t\treturn self;\r\n\t};\r\n\r\n\tAP.async = function(context, callback) {\r\n\r\n\t\tif (typeof(context) === TYPE_FN) {\r\n\t\t\tvar tmp = callback;\r\n\t\t\tcallback = context;\r\n\t\t\tcontext = tmp;\r\n\t\t}\r\n\r\n\t\tif (!context)\r\n\t\t\tcontext = {};\r\n\r\n\t\tvar arr = this;\r\n\t\tvar index = 0;\r\n\r\n\t\tvar c = function() {\r\n\t\t\tvar fn = arr[index++];\r\n\t\t\tif (fn)\r\n\t\t\t\tfn.call(context, c, index - 1);\r\n\t\t\telse\r\n\t\t\t\treturn callback && callback.call(context);\r\n\t\t};\r\n\r\n\t\tc();\r\n\t\treturn this;\r\n\t};\r\n\r\n\tAP.take = function(count) {\r\n\t\tvar arr = [];\r\n\t\tvar self = this;\r\n\t\tvar length = self.length;\r\n\t\tfor (var i = 0; i < length; i++) {\r\n\t\t\tarr.push(self[i]);\r\n\t\t\tif (arr.length >= count)\r\n\t\t\t\treturn arr;\r\n\t\t}\r\n\t\treturn arr;\r\n\t};\r\n\r\n\tAP.skip = function(count) {\r\n\t\tvar arr = [];\r\n\t\tvar self = this;\r\n\t\tvar length = self.length;\r\n\t\tfor (var i = 0; i < length; i++)\r\n\t\t\ti >= count && arr.push(self[i]);\r\n\t\treturn arr;\r\n\t};\r\n\r\n\tAP.takeskip = function(take, skip) {\r\n\t\tvar arr = [];\r\n\t\tvar self = this;\r\n\t\tvar length = self.length;\r\n\t\tfor (var i = 0; i < length; i++) {\r\n\t\t\tif (i < skip)\r\n\t\t\t\tcontinue;\r\n\t\t\tif (arr.length >= take)\r\n\t\t\t\treturn arr;\r\n\t\t\tarr.push(self[i]);\r\n\t\t}\r\n\t\treturn arr;\r\n\t};\r\n\r\n\tSP.ROOT = function(noBase) {\r\n\t\tvar url = this;\r\n\t\tvar r = MD.root;\r\n\t\tvar b = MD.baseurl;\r\n\t\tvar ext = /(https|http|wss|ws|file):\\/\\/|\\/\\/[a-z0-9]|[a-z]:/i;\r\n\t\tvar replace = function(t) {\r\n\t\t\treturn t.substring(0, 1) + '/';\r\n\t\t};\r\n\t\tif (r)\r\n\t\t\turl = typeof(r) === TYPE_FN ? r(url) : ext.test(url) ? url : (r + url);\r\n\t\telse if (!noBase && b)\r\n\t\t\turl = typeof(b) === TYPE_FN ? b(url) : ext.test(url) ? url : (b + url);\r\n\t\treturn url.replace(/[^:]\\/{2,}/, replace);\r\n\t};\r\n\r\n\tSP.env = function() {\r\n\t\tvar self = this;\r\n\t\treturn self.replace(REGENV, function(val) {\r\n\t\t\treturn ENV[val.substring(1, val.length - 1)] || val;\r\n\t\t});\r\n\t};\r\n\r\n\tSP.$env = function() {\r\n\t\tvar self = this;\r\n\t\tvar index = this.indexOf('?');\r\n\t\treturn index === -1 ? self.env() : self.substring(0, index).env() + self.substring(index);\r\n\t};\r\n\r\n\tSP.parseConfig = SP.$config = function(def, callback) {\r\n\r\n\t\tvar output;\r\n\r\n\t\tswitch (typeof(def)) {\r\n\t\t\tcase TYPE_FN:\r\n\t\t\t\tcallback = def;\r\n\t\t\t\toutput = {};\r\n\t\t\t\tbreak;\r\n\t\t\tcase TYPE_S:\r\n\t\t\t\toutput = def.parseConfig();\r\n\t\t\t\tbreak;\r\n\t\t\tcase TYPE_O:\r\n\t\t\t\tif (def != null)\r\n\t\t\t\t\toutput = def;\r\n\t\t\t\telse\r\n\t\t\t\t\toutput = {};\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\toutput = {};\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tvar arr = this.env().replace(/\\\\;/g, '\\0').split(';');\r\n\t\tvar num = /^(-)?[0-9.]+$/;\r\n\t\tvar colon = /(https|http|wss|ws):\\/\\//gi;\r\n\r\n\t\tfor (var i = 0, length = arr.length; i < length; i++) {\r\n\r\n\t\t\tvar item = arr[i].replace(/\\0/g, ';').replace(/\\\\:/g, '\\0').replace(colon, function(text) {\r\n\t\t\t\treturn text.replace(/:/g, '\\0');\r\n\t\t\t});\r\n\r\n\t\t\tvar kv = item.split(':');\r\n\t\t\tvar l = kv.length;\r\n\r\n\t\t\tif (l !== 2)\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tvar k = kv[0].trim();\r\n\t\t\tvar v = kv[1].trim().replace(/\\0/g, ':').env();\r\n\r\n\t\t\tif (v === 'true' || v === 'false')\r\n\t\t\t\tv = v === 'true';\r\n\t\t\telse if (num.test(v)) {\r\n\t\t\t\tvar tmp = +v;\r\n\t\t\t\tif (!isNaN(tmp))\r\n\t\t\t\t\tv = tmp;\r\n\t\t\t}\r\n\r\n\t\t\toutput[k] = v;\r\n\t\t\tcallback && callback(k, v);\r\n\t\t}\r\n\r\n\t\treturn output;\r\n\t};\r\n\r\n\tSP.params = SP.arg = function(obj) {\r\n\t\treturn this.replace(REGPARAMS, function(text) {\r\n\t\t\t// Is double?\r\n\t\t\tvar l = text.charCodeAt(1) === 123 ? 2 : 1;\r\n\t\t\tvar val = get(text.substring(l, text.length - l).trim(), obj);\r\n\t\t\treturn val == null ? text : val;\r\n\t\t});\r\n\t};\r\n\r\n\tSP.render = function(a, b) {\r\n\t\treturn Tangular.render(this, a, b);\r\n\t};\r\n\r\n\tSP.isJSONDate = function() {\r\n\t\tvar t = this;\r\n\t\tvar l = t.length - 1;\r\n\t\treturn l > 18 && l < 30 && t.charCodeAt(l) === 90 && t.charCodeAt(10) === 84 && t.charCodeAt(4) === 45 && t.charCodeAt(13) === 58 && t.charCodeAt(16) === 58;\r\n\t};\r\n\r\n\tSP.parseExpire = function() {\r\n\r\n\t\tvar str = this.split(' ');\r\n\t\tvar number = parseInt(str[0]);\r\n\r\n\t\tif (isNaN(number))\r\n\t\t\treturn 0;\r\n\r\n\t\tvar min = 60000 * 60;\r\n\r\n\t\tswitch (str[1].trim().replace(/\\./g, '')) {\r\n\t\t\tcase 'minutes':\r\n\t\t\tcase 'minute':\r\n\t\t\tcase 'min':\r\n\t\t\tcase 'mm':\r\n\t\t\tcase 'm':\r\n\t\t\t\treturn 60000 * number;\r\n\t\t\tcase 'hours':\r\n\t\t\tcase 'hour':\r\n\t\t\tcase 'HH':\r\n\t\t\tcase 'hh':\r\n\t\t\tcase 'h':\r\n\t\t\tcase 'H':\r\n\t\t\t\treturn min * number;\r\n\t\t\tcase 'seconds':\r\n\t\t\tcase 'second':\r\n\t\t\tcase 'sec':\r\n\t\t\tcase 'ss':\r\n\t\t\tcase 's':\r\n\t\t\t\treturn 1000 * number;\r\n\t\t\tcase 'days':\r\n\t\t\tcase 'day':\r\n\t\t\tcase 'DD':\r\n\t\t\tcase 'dd':\r\n\t\t\tcase 'd':\r\n\t\t\t\treturn (min * 24) * number;\r\n\t\t\tcase 'months':\r\n\t\t\tcase 'month':\r\n\t\t\tcase 'MM':\r\n\t\t\tcase 'M':\r\n\t\t\t\treturn (min * 24 * 28) * number;\r\n\t\t\tcase 'weeks':\r\n\t\t\tcase 'week':\r\n\t\t\tcase 'W':\r\n\t\t\tcase 'w':\r\n\t\t\t\treturn (min * 24 * 7) * number;\r\n\t\t\tcase 'years':\r\n\t\t\tcase 'year':\r\n\t\t\tcase 'yyyy':\r\n\t\t\tcase 'yy':\r\n\t\t\tcase 'y':\r\n\t\t\t\treturn (min * 24 * 365) * number;\r\n\t\t\tdefault:\r\n\t\t\t\treturn 0;\r\n\t\t}\r\n\t};\r\n\r\n\tSP.removeDiacritics = function() {\r\n\t\tvar buf = '';\r\n\t\tfor (var i = 0, length = this.length; i < length; i++) {\r\n\t\t\tvar c = this[i];\r\n\t\t\tvar code = c.charCodeAt(0);\r\n\t\t\tvar isUpper = false;\r\n\r\n\t\t\tvar r = DIACRITICS[code];\r\n\t\t\tif (r === undefined) {\r\n\t\t\t\tcode = c.toLowerCase().charCodeAt(0);\r\n\t\t\t\tr = DIACRITICS[code];\r\n\t\t\t\tisUpper = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (r === undefined) {\r\n\t\t\t\tbuf += c;\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tc = r;\r\n\t\t\tbuf += isUpper ? c.toUpperCase() : c;\r\n\t\t}\r\n\t\treturn buf;\r\n\t};\r\n\r\n\tSP.toSearch = function() {\r\n\r\n\t\tvar str = this.replace(REGSEARCH, '').trim().toLowerCase().removeDiacritics();\r\n\t\tvar buf = [];\r\n\t\tvar prev = '';\r\n\r\n\t\tfor (var i = 0, length = str.length; i < length; i++) {\r\n\t\t\tvar c = str.substring(i, i + 1);\r\n\t\t\tif (c === 'y')\r\n\t\t\t\tc = 'i';\r\n\t\t\tif (c !== prev) {\r\n\t\t\t\tprev = c;\r\n\t\t\t\tbuf.push(c);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn buf.join('');\r\n\t};\r\n\r\n\tSP.slug = function(max) {\r\n\t\tmax = max || 60;\r\n\r\n\t\tvar self = this.trim().toLowerCase().removeDiacritics();\r\n\t\tvar builder = '';\r\n\t\tvar length = self.length;\r\n\r\n\t\tfor (var i = 0; i < length; i++) {\r\n\t\t\tvar c = self.substring(i, i + 1);\r\n\t\t\tvar code = self.charCodeAt(i);\r\n\r\n\t\t\tif (builder.length >= max)\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tif (code > 31 && code < 48) {\r\n\t\t\t\tif (builder.substring(builder.length - 1, builder.length) !== '-')\r\n\t\t\t\t\tbuilder += '-';\r\n\t\t\t} else if (code > 47 && code < 58)\r\n\t\t\t\tbuilder += c;\r\n\t\t\telse if (code > 94 && code < 123)\r\n\t\t\t\tbuilder += c;\r\n\t\t}\r\n\r\n\t\tvar l = builder.length - 1;\r\n\t\treturn builder[l] === '-' ? builder.substring(0, l) : builder;\r\n\t};\r\n\r\n\tSP.isEmail = function() {\r\n\t\tvar str = this;\r\n\t\treturn str.length <= 4 ? false : MV.email.test(str);\r\n\t};\r\n\r\n\tSP.isPhone = function() {\r\n\t\tvar str = this;\r\n\t\treturn str.length < 6 ? false : MV.phone.test(str);\r\n\t};\r\n\r\n\tSP.isURL = function() {\r\n\t\tvar str = this;\r\n\t\treturn str.length <= 7 ? false : MV.url.test(str);\r\n\t};\r\n\r\n\tSP.parseInt = function(def) {\r\n\t\tvar str = this.trim();\r\n\t\tvar val = str.match(M.regexp.int);\r\n\t\tif (!val)\r\n\t\t\treturn def || 0;\r\n\t\tval = +val[0];\r\n\t\treturn isNaN(val) ? def || 0 : val;\r\n\t};\r\n\r\n\tSP.parseFloat = function(def) {\r\n\t\tvar str = this.trim();\r\n\t\tvar val = str.match(M.regexp.float);\r\n\t\tif (!val)\r\n\t\t\treturn def || 0;\r\n\t\tval = val[0];\r\n\t\tif (val.indexOf(',') !== -1)\r\n\t\t\tval = val.replace(',', '.');\r\n\t\tval = +val;\r\n\t\treturn isNaN(val) ? def || 0 : val;\r\n\t};\r\n\r\n\tAP.trim = function(empty) {\r\n\t\tvar self = this;\r\n\t\tvar output = [];\r\n\t\tfor (var i = 0, length = self.length; i < length; i++) {\r\n\t\t\tif (typeof(self[i]) === TYPE_S)\r\n\t\t\t\tself[i] = self[i].trim();\r\n\t\t\tif (empty || self[i])\r\n\t\t\t\toutput.push(self[i]);\r\n\t\t}\r\n\t\treturn output;\r\n\t};\r\n\r\n\tAP.findIndex = function(cb, value) {\r\n\r\n\t\tvar self = this;\r\n\t\tvar isFN = typeof(cb) === TYPE_FN;\r\n\t\tvar isV = value !== undefined;\r\n\r\n\t\tfor (var i = 0, length = self.length; i < length; i++) {\r\n\t\t\tif (isFN) {\r\n\t\t\t\tif (cb.call(self, self[i], i))\r\n\t\t\t\t\treturn i;\r\n\t\t\t} else if (isV) {\r\n\t\t\t\tif (self[i][cb] === value)\r\n\t\t\t\t\treturn i;\r\n\t\t\t} else if (self[i] === cb)\r\n\t\t\t\treturn i;\r\n\t\t}\r\n\t\treturn -1;\r\n\t};\r\n\r\n\tAP.findAll = function(cb, value) {\r\n\r\n\t\tvar self = this;\r\n\t\tvar isFN = typeof(cb) === TYPE_FN;\r\n\t\tvar isV = value !== undefined;\r\n\t\tvar arr = [];\r\n\r\n\t\tfor (var i = 0, length = self.length; i < length; i++) {\r\n\t\t\tif (isFN) {\r\n\t\t\t\tcb.call(self, self[i], i) && arr.push(self[i]);\r\n\t\t\t} else if (isV) {\r\n\t\t\t\tself[i][cb] === value && arr.push(self[i]);\r\n\t\t\t} else\r\n\t\t\t\tself[i] === cb && arr.push(self[i]);\r\n\t\t}\r\n\t\treturn arr;\r\n\t};\r\n\r\n\tAP.findItem = function(cb, value) {\r\n\t\tvar index = this.findIndex(cb, value);\r\n\t\tif (index !== -1)\r\n\t\t\treturn this[index];\r\n\t};\r\n\r\n\tAP.findValue = function(cb, value, path, def, cache) {\r\n\r\n\t\tif (typeof(cb) === TYPE_FN) {\r\n\t\t\tdef = path;\r\n\t\t\tpath = value;\r\n\t\t\tvalue = undefined;\r\n\t\t\tcache = false;\r\n\t\t}\r\n\r\n\t\tvar key, val = def;\r\n\r\n\t\tif (cache) {\r\n\t\t\tkey = 'fv_' + cb + '=' + value;\r\n\t\t\tif (temp[key])\r\n\t\t\t\treturn temp[key];\r\n\t\t}\r\n\r\n\t\tvar index = this.findIndex(cb, value);\r\n\t\tif (index !== -1) {\r\n\t\t\tvar item = this[index];\r\n\t\t\tif (path.indexOf('.') === -1)\r\n\t\t\t\titem = item[path];\r\n\t\t\telse\r\n\t\t\t\titem = get(path, item);\r\n\t\t\tcache && (temp[key] = val);\r\n\t\t\tval = item == null ? def : item;\r\n\t\t}\r\n\r\n\t\treturn val;\r\n\t};\r\n\r\n\tAP.remove = function(cb, value) {\r\n\r\n\t\tvar self = this;\r\n\t\tvar arr = [];\r\n\t\tvar isFN = typeof(cb) === TYPE_FN;\r\n\t\tvar isV = value !== undefined;\r\n\r\n\t\tfor (var i = 0, length = self.length; i < length; i++) {\r\n\t\t\tif (isFN) {\r\n\t\t\t\t!cb.call(self, self[i], i) && arr.push(self[i]);\r\n\t\t\t} else if (isV) {\r\n\t\t\t\tself[i][cb] !== value && arr.push(self[i]);\r\n\t\t\t} else {\r\n\t\t\t\tself[i] !== cb && arr.push(self[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn arr;\r\n\t};\r\n\r\n\tDP.toNumber = function(format) {\r\n\t\treturn +this.format(format || 'yyyyMMdd');\r\n\t};\r\n\r\n\tDP.parseDate = function() {\r\n\t\treturn this;\r\n\t};\r\n\r\n\tDP.add = function(type, value) {\r\n\r\n\t\tif (value === undefined) {\r\n\t\t\tvar arr = type.split(' ');\r\n\t\t\ttype = arr[1];\r\n\t\t\tvalue = parseInt(arr[0]);\r\n\t\t}\r\n\r\n\t\tif (typeof(value) === TYPE_S)\r\n\t\t\tvalue = value.env();\r\n\r\n\t\tvar self = this;\r\n\t\tvar dt = new Date(self.getTime());\r\n\r\n\t\tswitch(type.substring(0, 3)) {\r\n\t\t\tcase 's':\r\n\t\t\tcase 'ss':\r\n\t\t\tcase 'sec':\r\n\t\t\t\tdt.setSeconds(dt.getSeconds() + value);\r\n\t\t\t\treturn dt;\r\n\t\t\tcase 'm':\r\n\t\t\tcase 'mm':\r\n\t\t\tcase 'min':\r\n\t\t\t\tdt.setMinutes(dt.getMinutes() + value);\r\n\t\t\t\treturn dt;\r\n\t\t\tcase 'h':\r\n\t\t\tcase 'hh':\r\n\t\t\tcase 'hou':\r\n\t\t\t\tdt.setHours(dt.getHours() + value);\r\n\t\t\t\treturn dt;\r\n\t\t\tcase 'd':\r\n\t\t\tcase 'dd':\r\n\t\t\tcase 'day':\r\n\t\t\t\tdt.setDate(dt.getDate() + value);\r\n\t\t\t\treturn dt;\r\n\t\t\tcase 'w':\r\n\t\t\tcase 'ww':\r\n\t\t\tcase 'wee':\r\n\t\t\t\tdt.setDate(dt.getDate() + (value * 7));\r\n\t\t\t\treturn dt;\r\n\t\t\tcase 'M':\r\n\t\t\tcase 'MM':\r\n\t\t\tcase 'mon':\r\n\t\t\t\tdt.setMonth(dt.getMonth() + value);\r\n\t\t\t\treturn dt;\r\n\t\t\tcase 'y':\r\n\t\t\tcase 'yy':\r\n\t\t\tcase 'yyy':\r\n\t\t\tcase 'yea':\r\n\t\t\t\tdt.setFullYear(dt.getFullYear() + value);\r\n\t\t\t\treturn dt;\r\n\t\t}\r\n\t\treturn dt;\r\n\t};\r\n\r\n\tDP.toUTC = function(ticks) {\r\n\t\tvar self = this;\r\n\t\tvar dt = self.getTime() + self.getTimezoneOffset() * 60000;\r\n\t\treturn ticks ? dt : new Date(dt);\r\n\t};\r\n\r\n\tDP.format = function(format, utc) {\r\n\r\n\t\tvar self = utc ? this.toUTC() : this;\r\n\r\n\t\tif (format == null)\r\n\t\t\tformat = MD.dateformat;\r\n\r\n\t\tif (!format)\r\n\t\t\treturn self.getFullYear() + '-' + (self.getMonth() + 1).toString().padLeft(2, '0') + '-' + self.getDate().toString().padLeft(2, '0') + 'T' + self.getHours().toString().padLeft(2, '0') + ':' + self.getMinutes().toString().padLeft(2, '0') + ':' + self.getSeconds().toString().padLeft(2, '0') + '.' + self.getMilliseconds().toString().padLeft(3, '0') + 'Z';\r\n\r\n\t\tvar key = 'dt_' + format;\r\n\r\n\t\tif (statics[key])\r\n\t\t\treturn statics[key](self);\r\n\r\n\t\tvar half = false;\r\n\r\n\t\tformat = format.env();\r\n\r\n\t\tif (format && format.substring(0, 1) === '!') {\r\n\t\t\thalf = true;\r\n\t\t\tformat = format.substring(1);\r\n\t\t}\r\n\r\n\t\tvar beg = '\\'+';\r\n\t\tvar end = '+\\'';\r\n\t\tvar before = [];\r\n\r\n\t\tvar ismm = false;\r\n\t\tvar isdd = false;\r\n\t\tvar isww = false;\r\n\r\n\t\tformat = format.replace(M.regexp.date, function(key) {\r\n\t\t\tswitch (key) {\r\n\t\t\t\tcase 'yyyy':\r\n\t\t\t\t\treturn beg + 'd.getFullYear()' + end;\r\n\t\t\t\tcase 'yy':\r\n\t\t\t\t\treturn beg + 'd.getFullYear().toString().substring(2)' + end;\r\n\t\t\t\tcase 'MMM':\r\n\t\t\t\t\tismm = true;\r\n\t\t\t\t\treturn beg + 'mm.substring(0, 3)' + end;\r\n\t\t\t\tcase 'MMMM':\r\n\t\t\t\t\tismm = true;\r\n\t\t\t\t\treturn beg + 'mm' + end;\r\n\t\t\t\tcase 'MM':\r\n\t\t\t\t\treturn beg + '(d.getMonth() + 1).padLeft(2, \\'0\\')' + end;\r\n\t\t\t\tcase 'M':\r\n\t\t\t\t\treturn beg + '(d.getMonth() + 1)' + end;\r\n\t\t\t\tcase 'ddd':\r\n\t\t\t\t\tisdd = true;\r\n\t\t\t\t\treturn beg + 'dd.substring(0, 2).toUpperCase()' + end;\r\n\t\t\t\tcase 'dddd':\r\n\t\t\t\t\tisdd = true;\r\n\t\t\t\t\treturn beg + 'dd' + end;\r\n\t\t\t\tcase 'dd':\r\n\t\t\t\t\treturn beg + 'd.getDate().padLeft(2, \\'0\\')' + end;\r\n\t\t\t\tcase 'd':\r\n\t\t\t\t\treturn beg + 'd.getDate()' + end;\r\n\t\t\t\tcase 'HH':\r\n\t\t\t\tcase 'hh':\r\n\t\t\t\t\treturn beg + (half ? 'window.$jcdatempam(d.getHours()).padLeft(2, \\'0\\')' : 'd.getHours().padLeft(2, \\'0\\')') + end;\r\n\t\t\t\tcase 'H':\r\n\t\t\t\tcase 'h':\r\n\t\t\t\t\treturn beg + (half ? 'window.$jcdatempam(d.getHours())' : 'd.getHours()') + end;\r\n\t\t\t\tcase 'mm':\r\n\t\t\t\t\treturn beg + 'd.getMinutes().padLeft(2, \\'0\\')' + end;\r\n\t\t\t\tcase 'm':\r\n\t\t\t\t\treturn beg + 'd.getMinutes()' + end;\r\n\t\t\t\tcase 'ss':\r\n\t\t\t\t\treturn beg + 'd.getSeconds().padLeft(2, \\'0\\')' + end;\r\n\t\t\t\tcase 's':\r\n\t\t\t\t\treturn beg + 'd.getSeconds()' + end;\r\n\t\t\t\tcase 'w':\r\n\t\t\t\tcase 'ww':\r\n\t\t\t\t\tisww = true;\r\n\t\t\t\t\treturn beg + (key === 'ww' ? 'ww.padLeft(2, \\'0\\')' : 'ww') + end;\r\n\t\t\t\tcase 'a':\r\n\t\t\t\t\tvar b = '\\'PM\\':\\'AM\\'';\r\n\t\t\t\t\treturn beg + '(d.getHours() >= 12 ? ' + b + ')' + end;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tismm && before.push('var mm = M.months[d.getMonth()];');\r\n\t\tisdd && before.push('var dd = M.days[d.getDay()];');\r\n\t\tisww && before.push('var ww = new Date(+d);ww.setHours(0, 0, 0);ww.setDate(ww.getDate() + 4 - (ww.getDay() || 7));ww = Math.ceil((((ww - new Date(ww.getFullYear(), 0, 1)) / 8.64e7) + 1) / 7);');\r\n\r\n\t\tstatics[key] = new Function('d', before.join('\\n') + 'return \\'' + format + '\\';');\r\n\t\treturn statics[key](self);\r\n\t};\r\n\r\n\tW.$jcdatempam = function(value) {\r\n\t\treturn value >= 12 ? value - 12 : value;\r\n\t};\r\n\r\n\tNP.pluralize = function(zero, one, few, other) {\r\n\r\n\t\tif (zero instanceof Array) {\r\n\t\t\tone = zero[1];\r\n\t\t\tfew = zero[2];\r\n\t\t\tother = zero[3];\r\n\t\t\tzero = zero[0];\r\n\t\t}\r\n\r\n\t\tvar num = this;\r\n\t\tvar value = '';\r\n\r\n\t\tif (num == 0)\r\n\t\t\tvalue = zero || '';\r\n\t\telse if (num == 1)\r\n\t\t\tvalue = one || '';\r\n\t\telse if (num > 1 && num < 5)\r\n\t\t\tvalue = few || '';\r\n\t\telse\r\n\t\t\tvalue = other;\r\n\r\n\t\treturn value.indexOf('#') === -1 ? value : value.replace(M.regexp.pluralize, function(text) {\r\n\t\t\treturn text === '##' ? num.format() : num.toString();\r\n\t\t});\r\n\t};\r\n\r\n\tNP.format = function(decimals, separator, separatorDecimal) {\r\n\r\n\t\tvar self = this;\r\n\t\tvar num = self.toString();\r\n\t\tvar dec = '';\r\n\t\tvar output = '';\r\n\t\tvar minus = num.substring(0, 1) === '-' ? '-' : '';\r\n\t\tif (minus)\r\n\t\t\tnum = num.substring(1);\r\n\r\n\t\tvar index = num.indexOf('.');\r\n\r\n\t\tif (typeof(decimals) === TYPE_S) {\r\n\t\t\tvar tmp;\r\n\t\t\tif (decimals.substring(0, 1) === '[') {\r\n\t\t\t\ttmp = ENV(decimals.substring(1, decimals.length - 1));\r\n\t\t\t\tif (tmp) {\r\n\t\t\t\t\tdecimals = tmp.decimals;\r\n\t\t\t\t\tif (tmp.separator)\r\n\t\t\t\t\t\tseparator = tmp.separator;\r\n\t\t\t\t\tif (tmp.decimalseparator)\r\n\t\t\t\t\t\tseparatorDecimal = tmp.decimalseparator;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\ttmp = separator;\r\n\t\t\t\tseparator = decimals;\r\n\t\t\t\tdecimals = tmp;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (separator === undefined)\r\n\t\t\tseparator = MD.thousandsseparator;\r\n\r\n\t\tif (index !== -1) {\r\n\t\t\tdec = num.substring(index + 1);\r\n\t\t\tnum = num.substring(0, index);\r\n\t\t}\r\n\r\n\t\tindex = -1;\r\n\t\tfor (var i = num.length - 1; i >= 0; i--) {\r\n\t\t\tindex++;\r\n\t\t\tif (index > 0 && index % 3 === 0)\r\n\t\t\t\toutput = separator + output;\r\n\t\t\toutput = num[i] + output;\r\n\t\t}\r\n\r\n\t\tif (decimals || dec.length) {\r\n\t\t\tif (dec.length > decimals)\r\n\t\t\t\tdec = dec.substring(0, decimals || 0);\r\n\t\t\telse\r\n\t\t\t\tdec = dec.padRight(decimals || 0, '0');\r\n\t\t}\r\n\r\n\t\tif (dec.length && separatorDecimal === undefined)\r\n\t\t\tseparatorDecimal = MD.decimalseparator;\r\n\r\n\t\treturn minus + output + (dec.length ? separatorDecimal + dec : '');\r\n\t};\r\n\r\n\tSP.padLeft = function(t, e) {\r\n\t\tvar r = this.toString();\r\n\t\treturn Array(Math.max(0, t - r.length + 1)).join(e || ' ') + r;\r\n\t};\r\n\r\n\tSP.padRight = function(t, e) {\r\n\t\tvar r = this.toString();\r\n\t\treturn r + Array(Math.max(0, t - r.length + 1)).join(e || ' ');\r\n\t};\r\n\r\n\tNP.padLeft = function(t, e) {\r\n\t\treturn this.toString().padLeft(t, e || '0');\r\n\t};\r\n\r\n\tNP.padRight = function(t, e) {\r\n\t\treturn this.toString().padRight(t, e || '0');\r\n\t};\r\n\r\n\tNP.async = function(fn, callback) {\r\n\t\tvar number = this;\r\n\t\tif (number >= 0)\r\n\t\t\tfn(number, function() {\r\n\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t(number - 1).async(fn, callback);\r\n\t\t\t\t}, 1);\r\n\t\t\t});\r\n\t\telse\r\n\t\t\tcallback && callback();\r\n\t\treturn number;\r\n\t};\r\n\r\n\tNP.add = NP.inc = function(value, decimals) {\r\n\r\n\t\tvar self = this;\r\n\r\n\t\tif (value == null)\r\n\t\t\treturn self;\r\n\r\n\t\tif (typeof(value) === TYPE_N)\r\n\t\t\treturn self + value;\r\n\r\n\t\tvar first = value.charCodeAt(0);\r\n\t\tvar is = false;\r\n\r\n\t\tif (first < 48 || first > 57) {\r\n\t\t\tis = true;\r\n\t\t\tvalue = value.substring(1);\r\n\t\t}\r\n\r\n\t\tvar length = value.length;\r\n\t\tvar num;\r\n\r\n\t\tif (value[length - 1] === '%') {\r\n\t\t\tvalue = value.substring(0, length - 1);\r\n\t\t\tif (is) {\r\n\t\t\t\tvar val = value.parseFloat();\r\n\t\t\t\tswitch (first) {\r\n\t\t\t\t\tcase 42:\r\n\t\t\t\t\t\tnum = self * ((self / 100) * val);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 43:\r\n\t\t\t\t\t\tnum = self + ((self / 100) * val);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 45:\r\n\t\t\t\t\t\tnum = self - ((self / 100) * val);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 47:\r\n\t\t\t\t\t\tnum = self / ((self / 100) * val);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\treturn decimals !== undefined ? num.floor(decimals) : num;\r\n\t\t\t} else {\r\n\t\t\t\tnum = (self / 100) * value.parseFloat();\r\n\t\t\t\treturn decimals !== undefined ? num.floor(decimals) : num;\r\n\t\t\t}\r\n\r\n\t\t} else\r\n\t\t\tnum = value.parseFloat();\r\n\r\n\t\tswitch (first) {\r\n\t\t\tcase 42:\r\n\t\t\t\tnum = self * num;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 43:\r\n\t\t\t\tnum = self + num;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 45:\r\n\t\t\t\tnum = self - num;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 47:\r\n\t\t\t\tnum = self / num;\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tnum = self;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\treturn decimals !== undefined ? num.floor(decimals) : num;\r\n\t};\r\n\r\n\tNP.floor = function(decimals) {\r\n\t\treturn Math.floor(this * Math.pow(10, decimals)) / Math.pow(10, decimals);\r\n\t};\r\n\r\n\tNP.parseDate = function(offset) {\r\n\t\treturn new Date(this + (offset || 0));\r\n\t};\r\n\r\n\tSP.format = function() {\r\n\t\tvar arg = arguments;\r\n\t\treturn this.replace(M.regexp.format, function(text) {\r\n\t\t\tvar value = arg[+text.substring(1, text.length - 1)];\r\n\t\t\treturn value == null ? '' : value instanceof Array ? value.join('') : value;\r\n\t\t});\r\n\t};\r\n\r\n\tSP.parseDate = function() {\r\n\t\tvar self = this.trim();\r\n\t\tif (!self)\r\n\t\t\treturn null;\r\n\r\n\t\tvar lc = self.charCodeAt(self.length - 1);\r\n\r\n\t\t// Classic date\r\n\t\tif (lc === 41)\r\n\t\t\treturn new Date(self);\r\n\r\n\t\t// JSON format\r\n\t\tif (lc === 90)\r\n\t\t\treturn new Date(Date.parse(self));\r\n\r\n\t\tvar arr = self.indexOf(' ') === -1 ? self.split('T') : self.split(' ');\r\n\t\tvar index = arr[0].indexOf(':');\r\n\t\tvar length = arr[0].length;\r\n\r\n\t\tif (index !== -1) {\r\n\t\t\tvar tmp = arr[1];\r\n\t\t\tarr[1] = arr[0];\r\n\t\t\tarr[0] = tmp;\r\n\t\t}\r\n\r\n\t\tif (arr[0] === undefined)\r\n\t\t\tarr[0] = '';\r\n\r\n\t\tvar noTime = arr[1] === undefined ? true : arr[1].length === 0;\r\n\r\n\t\tfor (var i = 0; i < length; i++) {\r\n\t\t\tvar c = arr[0].charCodeAt(i);\r\n\t\t\tif ((c > 47 && c < 58) || c === 45 || c === 46)\r\n\t\t\t\tcontinue;\r\n\t\t\tif (noTime)\r\n\t\t\t\treturn new Date(self);\r\n\t\t}\r\n\r\n\t\tif (arr[1] === undefined)\r\n\t\t\tarr[1] = '00:00:00';\r\n\r\n\t\tvar firstDay = arr[0].indexOf('-') === -1;\r\n\r\n\t\tvar date = (arr[0] || '').split(firstDay ? '.' : '-');\r\n\t\tvar time = (arr[1] || '').split(':');\r\n\t\tvar parsed = [];\r\n\r\n\t\tif (date.length < 4 && time.length < 2)\r\n\t\t\treturn new Date(self);\r\n\r\n\t\tindex = (time[2] || '').indexOf('.');\r\n\r\n\t\t// milliseconds\r\n\t\tif (index !== -1) {\r\n\t\t\ttime[3] = time[2].substring(index + 1);\r\n\t\t\ttime[2] = time[2].substring(0, index);\r\n\t\t} else\r\n\t\t\ttime[3] = '0';\r\n\r\n\t\tparsed.push(+date[firstDay ? 2 : 0]); // year\r\n\t\tparsed.push(+date[1]); // month\r\n\t\tparsed.push(+date[firstDay ? 0 : 2]); // day\r\n\t\tparsed.push(+time[0]); // hours\r\n\t\tparsed.push(+time[1]); // minutes\r\n\t\tparsed.push(+time[2]); // seconds\r\n\t\tparsed.push(+time[3]); // miliseconds\r\n\r\n\t\tvar def = W.DATETIME = W.NOW = new Date();\r\n\r\n\t\tfor (var i = 0, length = parsed.length; i < length; i++) {\r\n\t\t\tif (isNaN(parsed[i]))\r\n\t\t\t\tparsed[i] = 0;\r\n\r\n\t\t\tvar value = parsed[i];\r\n\t\t\tif (value !== 0)\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tswitch (i) {\r\n\t\t\t\tcase 0:\r\n\t\t\t\t\tif (value <= 0)\r\n\t\t\t\t\t\tparsed[i] = def.getFullYear();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 1:\r\n\t\t\t\t\tif (value <= 0)\r\n\t\t\t\t\t\tparsed[i] = def.getMonth() + 1;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 2:\r\n\t\t\t\t\tif (value <= 0)\r\n\t\t\t\t\t\tparsed[i] = def.getDate();\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn new Date(parsed[0], parsed[1] - 1, parsed[2], parsed[3], parsed[4], parsed[5]);\r\n\t};\r\n\r\n\tAP.last = function(def) {\r\n\t\tvar item = this[this.length - 1];\r\n\t\treturn item === undefined ? def : item;\r\n\t};\r\n\r\n\tAP.quicksort = function(name, asc, type) {\r\n\r\n\t\tvar self = this;\r\n\t\tvar length = self.length;\r\n\t\tif (!length || length === 1)\r\n\t\t\treturn self;\r\n\r\n\t\tif (typeof(name) === 'boolean') {\r\n\t\t\tasc = name;\r\n\t\t\tname = undefined;\r\n\t\t}\r\n\r\n\t\tif (asc == null || asc === 'asc')\r\n\t\t\tasc = true;\r\n\t\telse if (asc === 'desc')\r\n\t\t\tasc = false;\r\n\r\n\t\tswitch (type) {\r\n\t\t\tcase 'date':\r\n\t\t\t\ttype = 4;\r\n\t\t\t\tbreak;\r\n\t\t\tcase TYPE_S:\r\n\t\t\t\ttype = 1;\r\n\t\t\t\tbreak;\r\n\t\t\tcase TYPE_N:\r\n\t\t\t\ttype = 2;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'bool':\r\n\t\t\tcase 'boolean':\r\n\t\t\t\ttype = 3;\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\ttype = 0;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tif (!type) {\r\n\t\t\tvar index = 0;\r\n\t\t\twhile (!type) {\r\n\t\t\t\tvar field = self[index++];\r\n\t\t\t\tif (field === undefined)\r\n\t\t\t\t\treturn self;\r\n\t\t\t\tif (name)\r\n\t\t\t\t\tfield = field[name];\r\n\t\t\t\tswitch (typeof(field)) {\r\n\t\t\t\t\tcase TYPE_S:\r\n\t\t\t\t\t\ttype = field.isJSONDate() ? 4 : 1;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase TYPE_N:\r\n\t\t\t\t\t\ttype = 2;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'boolean':\r\n\t\t\t\t\t\ttype = 3;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tif (field instanceof Date)\r\n\t\t\t\t\t\t\ttype = 4;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tself.sort(function(a, b) {\r\n\r\n\t\t\tvar va = name ? a[name] : a;\r\n\t\t\tvar vb = name ? b[name] : b;\r\n\r\n\t\t\tif (va == null)\r\n\t\t\t\treturn asc ? -1 : 1;\r\n\r\n\t\t\tif (vb == null)\r\n\t\t\t\treturn asc ? 1 : -1;\r\n\r\n\t\t\t// String\r\n\t\t\tif (type === 1) {\r\n\t\t\t\treturn va && vb ? (asc ? LCOMPARER(va, vb) : LCOMPARER(vb, va)) : 0;\r\n\t\t\t} else if (type === 2) {\r\n\t\t\t\treturn va > vb ? (asc ? 1 : -1) : va < vb ? (asc ? -1 : 1) : 0;\r\n\t\t\t} else if (type === 3) {\r\n\t\t\t\treturn va === true && vb === false ? (asc ? 1 : -1) : va === false && vb === true ? (asc ? -1 : 1) : 0;\r\n\t\t\t} else if (type === 4) {\r\n\t\t\t\tif (!va || !vb)\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\tif (!va.getTime)\r\n\t\t\t\t\tva = new Date(va);\r\n\t\t\t\tif (!vb.getTime)\r\n\t\t\t\t\tvb = new Date(vb);\r\n\t\t\t\tvar at = va.getTime();\r\n\t\t\t\tvar bt = vb.getTime();\r\n\t\t\t\treturn at > bt ? (asc ? 1 : -1) : at < bt ? (asc ? -1 : 1) : 0;\r\n\t\t\t}\r\n\t\t\treturn 0;\r\n\t\t});\r\n\r\n\t\treturn self;\r\n\t};\r\n\r\n\tAP.attr = function(name, value) {\r\n\r\n\t\tvar self = this;\r\n\r\n\t\tif (arguments.length === 2) {\r\n\t\t\tif (value == null)\r\n\t\t\t\treturn self;\r\n\t\t} else if (value === undefined)\r\n\t\t\tvalue = name.toString();\r\n\r\n\t\tself.push(name + '=\"' + value.toString().env().toString().replace(/[<>&\"]/g, function(c) {\r\n\t\t\tswitch (c) {\r\n\t\t\t\tcase '&': return '&amp;';\r\n\t\t\t\tcase '<': return '&lt;';\r\n\t\t\t\tcase '>': return '&gt;';\r\n\t\t\t\tcase '\"': return '&quot;';\r\n\t\t\t}\r\n\t\t\treturn c;\r\n\t\t}) + '\"');\r\n\r\n\t\treturn self;\r\n\t};\r\n\r\n\tAP.scalar = function(type, key, def) {\r\n\r\n\t\tvar output = def;\r\n\t\tvar isDate = false;\r\n\t\tvar isAvg = type === 'avg' || type === 'average';\r\n\t\tvar isDistinct = type === 'distinct';\r\n\t\tvar self = this;\r\n\r\n\t\tfor (var i = 0, length = self.length; i < length; i++) {\r\n\t\t\tvar val = key ? self[i][key] : self[i];\r\n\r\n\t\t\tif (typeof(val) === TYPE_S)\r\n\t\t\t\tval = val.parseFloat();\r\n\r\n\t\t\tif (val instanceof Date) {\r\n\t\t\t\tisDate = true;\r\n\t\t\t\tval = val.getTime();\r\n\t\t\t}\r\n\r\n\t\t\tif (isDistinct) {\r\n\t\t\t\tif (!output)\r\n\t\t\t\t\toutput = [];\r\n\t\t\t\toutput.indexOf(val) === -1 && output.push(val);\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tif (type === 'median') {\r\n\t\t\t\tif (!output)\r\n\t\t\t\t\toutput = [];\r\n\t\t\t\toutput.push(val);\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tif (type === 'sum' || isAvg) {\r\n\t\t\t\tif (output)\r\n\t\t\t\t\toutput += val;\r\n\t\t\t\telse\r\n\t\t\t\t\toutput = val;\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tif (type !== 'range') {\r\n\t\t\t\tif (!output)\r\n\t\t\t\t\toutput = val;\r\n\t\t\t} else {\r\n\t\t\t\tif (!output) {\r\n\t\t\t\t\toutput = new Array(2);\r\n\t\t\t\t\toutput[0] = val;\r\n\t\t\t\t\toutput[1] = val;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tswitch (type) {\r\n\t\t\t\tcase 'range':\r\n\t\t\t\t\toutput[0] = Math.min(output[0], val);\r\n\t\t\t\t\toutput[1] = Math.max(output[1], val);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'min':\r\n\t\t\t\t\toutput = Math.min(output, val);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'max':\r\n\t\t\t\t\toutput = Math.max(output, val);\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (isDistinct)\r\n\t\t\treturn output;\r\n\r\n\t\tif (isAvg) {\r\n\t\t\toutput = output / self.length;\r\n\t\t\treturn isDate ? new Date(output) : output;\r\n\t\t}\r\n\r\n\t\tif (type === 'median') {\r\n\t\t\tif (!output)\r\n\t\t\t\toutput = [0];\r\n\t\t\toutput.sort(function(a, b) {\r\n\t\t\t\treturn a - b;\r\n\t\t\t});\r\n\t\t\tvar half = Math.floor(output.length / 2);\r\n\t\t\toutput = output.length % 2 ? output[half] : (output[half - 1] + output[half]) / 2.0;\r\n\t\t}\r\n\r\n\t\tif (isDate) {\r\n\t\t\tif (typeof(output) === TYPE_N)\r\n\t\t\t\treturn new Date(output);\r\n\t\t\toutput[0] = new Date(output[0]);\r\n\t\t\toutput[1] = new Date(output[1]);\r\n\t\t}\r\n\r\n\t\treturn output;\r\n\t};\r\n\r\n\tvar BLACKLIST = { sort: 1, reverse: 1, splice: 1, slice: 1, pop: 1, unshift: 1, shift: 1, push: 1 };\r\n\r\n\tW.CREATE = function(path) {\r\n\r\n\t\tvar is = false;\r\n\t\tvar callback;\r\n\r\n\t\tif (typeof(path) === TYPE_S) {\r\n\t\t\tif (proxy[path])\r\n\t\t\t\treturn proxy[path];\r\n\t\t\tis = true;\r\n\t\t\tcallback = function(key) {\r\n\r\n\t\t\t\tvar p = path + (key ? '.' + key : '');\r\n\t\t\t\tif (M.skipproxy === p) {\r\n\t\t\t\t\tM.skipproxy = '';\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\tif (M.skipproxy === p)\r\n\t\t\t\t\t\tM.skipproxy = '';\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tNOTIFY(p);\r\n\t\t\t\t\t\tRESET(p);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, MD.delaybinder);\r\n\t\t\t};\r\n\r\n\t\t} else\r\n\t\t\tcallback = path;\r\n\r\n\t\tvar blocked = false;\r\n\t\tvar obj = path ? (GET(path) || {}) : {};\r\n\t\tvar handler = {\r\n\t\t\tget: function(target, property, receiver) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\treturn new Proxy(target[property], handler);\r\n\t\t\t\t} catch (err) {\r\n\t\t\t\t\treturn Reflect.get(target, property, receiver);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tdefineProperty: function(target, property, descriptor) {\r\n\t\t\t\t!blocked && callback(property, descriptor);\r\n\t\t\t\treturn Reflect.defineProperty(target, property, descriptor);\r\n\t\t\t},\r\n\t\t\tdeleteProperty: function(target, property) {\r\n\t\t\t\t!blocked && callback(property);\r\n\t\t\t\treturn Reflect.deleteProperty(target, property);\r\n\t\t\t},\r\n\t\t\tapply: function(target, thisArg, argumentsList) {\r\n\t\t\t\tif (BLACKLIST[target.name]) {\r\n\t\t\t\t\tblocked = true;\r\n\t\t\t\t\tvar result = Reflect.apply(target, thisArg, argumentsList);\r\n\t\t\t\t\tcallback('', argumentsList[0]);\r\n\t\t\t\t\tblocked = false;\r\n\t\t\t\t\treturn result;\r\n\t\t\t\t}\r\n\t\t\t\treturn Reflect.apply(target, thisArg, argumentsList);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tvar o = new Proxy(obj, handler);\r\n\r\n\t\tif (is) {\r\n\t\t\tM.skipproxy = path;\r\n\t\t\tGET(path) == null && SET(path, obj, true);\r\n\t\t\treturn proxy[path] = o;\r\n\t\t} else\r\n\t\t\treturn o;\r\n\t};\r\n\r\n\t// Waits for jQuery\r\n\tWAIT(function() {\r\n\t\treturn !!W.jQuery;\r\n\t}, function() {\r\n\r\n\t\tsetInterval(function() {\r\n\t\t\ttemp = {};\r\n\t\t\tpaths = {};\r\n\t\t\tcleaner();\r\n\t\t}, (1000 * 60) * 5);\r\n\r\n\t\t// scheduler\r\n\t\tschedulercounter = 0;\r\n\t\tsetInterval(function() {\r\n\r\n\t\t\tif (!schedulers.length)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tschedulercounter++;\r\n\t\t\tvar now = new Date();\r\n\t\t\tW.DATETIME = W.NOW = now;\r\n\t\t\tfor (var i = 0, length = schedulers.length; i < length; i++) {\r\n\t\t\t\tvar item = schedulers[i];\r\n\t\t\t\tif (item.type === 'm') {\r\n\t\t\t\t\tif (schedulercounter % 30 !== 0)\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t} else if (item.type === 'h') {\r\n\t\t\t\t\t// 1800 seconds --> 30 minutes\r\n\t\t\t\t\t// 1800 / 2 (seconds) --> 900\r\n\t\t\t\t\tif (schedulercounter % 900 !== 0)\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar dt = now.add(item.expire);\r\n\t\t\t\tvar arr = FIND(item.selector, true);\r\n\t\t\t\tfor (var j = 0; j < arr.length; j++) {\r\n\t\t\t\t\tvar a = arr[j];\r\n\t\t\t\t\ta && a.usage.compare(item.name, dt) && item.callback(a);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}, 3500);\r\n\r\n\t\t$.fn.FIND = function(selector, many, callback, timeout) {\r\n\r\n\t\t\tif (typeof(many) === TYPE_FN) {\r\n\t\t\t\ttimeout = callback;\r\n\t\t\t\tcallback = many;\r\n\t\t\t\tmany = undefined;\r\n\t\t\t}\r\n\r\n\t\t\tvar self = this;\r\n\t\t\tvar output = findcomponent(self, selector);\r\n\t\t\tif (typeof(callback) === TYPE_FN) {\r\n\r\n\t\t\t\tif (output.length) {\r\n\t\t\t\t\tcallback.call(output, output);\r\n\t\t\t\t\treturn self;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tWAIT(function() {\r\n\t\t\t\t\tvar val = self.FIND(selector, many);\r\n\t\t\t\t\treturn val instanceof Array ? val.length > 0 : !!val;\r\n\t\t\t\t}, function(err) {\r\n\t\t\t\t\t// timeout\r\n\t\t\t\t\tif (!err) {\r\n\t\t\t\t\t\tvar val = self.FIND(selector, many);\r\n\t\t\t\t\t\tcallback.call(val ? val : W, val);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, 500, timeout);\r\n\r\n\t\t\t\treturn self;\r\n\t\t\t}\r\n\r\n\t\t\treturn many ? output : output[0];\r\n\t\t};\r\n\r\n\t\t$.fn.SETTER = function(selector, name) {\r\n\r\n\t\t\tvar self = this;\r\n\t\t\tvar arg = [];\r\n\t\t\tvar beg = selector === true ? 3 : 2;\r\n\r\n\t\t\tfor (var i = beg; i < arguments.length; i++)\r\n\t\t\t\targ.push(arguments[i]);\r\n\r\n\t\t\tif (beg === 3) {\r\n\t\t\t\tselector = name;\r\n\t\t\t\tname = arguments[2];\r\n\r\n\t\t\t\tif (lazycom[selector] && lazycom[selector].state !== 3) {\r\n\r\n\t\t\t\t\tif (lazycom[selector].state === 1) {\r\n\t\t\t\t\t\tlazycom[selector].state = 2;\r\n\t\t\t\t\t\tEMIT('lazy', selector, true);\r\n\t\t\t\t\t\twarn('Lazy load: ' + selector);\r\n\t\t\t\t\t\tcompile();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tsetTimeout(function(arg) {\r\n\t\t\t\t\t\t$.fn.SETTER.apply(self, arg);\r\n\t\t\t\t\t}, 555, arguments);\r\n\r\n\t\t\t\t\treturn self;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tself.FIND(selector, true, function(arr) {\r\n\t\t\t\t\tfor (var i = 0, length = arr.length; i < length; i++) {\r\n\t\t\t\t\t\tvar o = arr[i];\r\n\t\t\t\t\t\tif (typeof(o[name]) === TYPE_FN)\r\n\t\t\t\t\t\t\to[name].apply(o, arg);\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\to[name] = arg[0];\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tif (lazycom[selector] && lazycom[selector].state !== 3) {\r\n\r\n\t\t\t\t\tif (lazycom[selector].state === 1) {\r\n\t\t\t\t\t\tlazycom[selector].state = 2;\r\n\t\t\t\t\t\tEMIT('lazy', selector, true);\r\n\t\t\t\t\t\twarn('Lazy load: ' + selector);\r\n\t\t\t\t\t\tcompile();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tsetTimeout(function(arg) {\r\n\t\t\t\t\t\t$.fn.SETTER.apply(self, arg);\r\n\t\t\t\t\t}, 555, arguments);\r\n\r\n\t\t\t\t\treturn self;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar arr = self.FIND(selector, true);\r\n\t\t\t\tfor (var i = 0, length = arr.length; i < length; i++) {\r\n\t\t\t\t\tvar o = arr[i];\r\n\t\t\t\t\tif (typeof(o[name]) === TYPE_FN)\r\n\t\t\t\t\t\to[name].apply(o, arg);\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\to[name] = arg[0];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn self;\r\n\t\t};\r\n\r\n\t\t$.fn.RECONFIGURE = function(selector, value) {\r\n\t\t\treturn this.SETTER(selector, 'reconfigure', value);\r\n\t\t};\r\n\r\n\t\t$.fn.scope = function() {\r\n\r\n\t\t\tif (!this.length)\r\n\t\t\t\treturn null;\r\n\r\n\t\t\tvar data = this[0].$scopedata;\r\n\t\t\tif (data)\r\n\t\t\t\treturn data;\r\n\t\t\tvar el = this.closest('[' + ATTRSCOPE + ']');\r\n\t\t\tif (el.length) {\r\n\t\t\t\tdata = el[0].$scopedata;\r\n\t\t\t\tif (data)\r\n\t\t\t\t\treturn data;\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t};\r\n\r\n\t\t$.fn.aclass = function(a) {\r\n\t\t\treturn this.addClass(a);\r\n\t\t};\r\n\r\n\t\t$.fn.rclass = function(a) {\r\n\t\t\treturn a == null ? this.removeClass() : this.removeClass(a);\r\n\t\t};\r\n\r\n\t\t$.fn.rattr = function(a) {\r\n\t\t\treturn this.removeAttr(a);\r\n\t\t};\r\n\r\n\t\t$.fn.rattrd = function(a) {\r\n\t\t\treturn this.removeAttr('data-' + a);\r\n\t\t};\r\n\r\n\t\t$.fn.rclass2 = function(a) {\r\n\r\n\t\t\tvar self = this;\r\n\t\t\tvar arr = (self.attr('class') || '').split(' ');\r\n\t\t\tvar isReg = typeof(a) === TYPE_O;\r\n\r\n\t\t\tfor (var i = 0, length = arr.length; i < length; i++) {\r\n\t\t\t\tvar cls = arr[i];\r\n\t\t\t\tif (cls) {\r\n\t\t\t\t\tif (isReg) {\r\n\t\t\t\t\t\ta.test(cls) && self.rclass(cls);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcls.indexOf(a) !== -1 && self.rclass(cls);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn self;\r\n\t\t};\r\n\r\n\t\t$.fn.hclass = function(a) {\r\n\t\t\treturn this.hasClass(a);\r\n\t\t};\r\n\r\n\t\t$.fn.tclass = function(a, v) {\r\n\t\t\treturn this.toggleClass(a, v);\r\n\t\t};\r\n\r\n\t\t$.fn.attrd = function(a, v) {\r\n\t\t\ta = 'data-' + a;\r\n\t\t\treturn v == null ? this.attr(a) : this.attr(a, v);\r\n\t\t};\r\n\r\n\t\t// Appends an SVG element\r\n\t\t$.fn.asvg = function(tag) {\r\n\r\n\t\t\tif (tag.indexOf('<') === -1) {\r\n\t\t\t\tvar el = document.createElementNS('http://www.w3.org/2000/svg', tag);\r\n\t\t\t\tthis.append(el);\r\n\t\t\t\treturn $(el);\r\n\t\t\t}\r\n\r\n\t\t\tvar d = document.createElementNS('http://www.w3.org/1999/xhtml', 'div');\r\n\t\t\td.innerHTML = '<svg xmlns=\"http://www.w3.org/2000/svg\">' + tag + '</svg>';\r\n\t\t\tvar f = document.createDocumentFragment();\r\n\t\t\twhile (d.firstChild.firstChild)\r\n\t\t\t\tf.appendChild(d.firstChild.firstChild);\r\n\t\t\tf = $(f);\r\n\t\t\tthis.append(f);\r\n\t\t\treturn f;\r\n\t\t};\r\n\r\n\t\t$.fn.psvg = function(tag) {\r\n\r\n\t\t\tif (tag.indexOf('<') === -1) {\r\n\t\t\t\tvar el = document.createElementNS('http://www.w3.org/2000/svg', tag);\r\n\t\t\t\tthis.prepend(el);\r\n\t\t\t\treturn $(el);\r\n\t\t\t}\r\n\r\n\t\t\tvar d = document.createElementNS('http://www.w3.org/1999/xhtml', 'div');\r\n\t\t\td.innerHTML = '<svg xmlns=\"http://www.w3.org/2000/svg\">' + tag + '</svg>';\r\n\t\t\tvar f = document.createDocumentFragment();\r\n\t\t\twhile (d.firstChild.firstChild)\r\n\t\t\t\tf.appendChild(d.firstChild.firstChild);\r\n\t\t\tf = $(f);\r\n\t\t\tthis.prepend(f);\r\n\t\t\treturn f;\r\n\t\t};\r\n\r\n\t\tfunction findinstance(t, type) {\r\n\r\n\t\t\tif (!t.length)\r\n\t\t\t\treturn null;\r\n\r\n\t\t\tfor (var i = 0; i < t.length; i++) {\r\n\t\t\t\tif (t[i][type])\r\n\t\t\t\t\treturn t[i][type];\r\n\t\t\t}\r\n\r\n\t\t\tvar el = t[0].parentElement;\r\n\t\t\twhile (el !== null) {\r\n\t\t\t\tif (el[type])\r\n\t\t\t\t\treturn el[type];\r\n\t\t\t\tel = el.parentElement;\r\n\t\t\t}\r\n\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\t$.fn.vbind = function() {\r\n\t\t\treturn findinstance(this, '$vbind');\r\n\t\t};\r\n\r\n\t\t$.fn.vbindarray = function() {\r\n\t\t\treturn findinstance(this, '$vbindarray');\r\n\t\t};\r\n\r\n\t\t$.fn.component = function() {\r\n\t\t\treturn findinstance(this, '$com');\r\n\t\t};\r\n\r\n\t\t$.fn.components = function(fn) {\r\n\t\t\tvar all = this.find(ATTRCOM);\r\n\t\t\tvar output = null;\r\n\t\t\tall.each(function(index) {\r\n\t\t\t\tvar com = this.$com;\r\n\t\t\t\tif (com) {\r\n\t\t\t\t\tvar isarr = com instanceof Array;\r\n\t\t\t\t\tif (isarr) {\r\n\t\t\t\t\t\tcom.forEach(function(o) {\r\n\t\t\t\t\t\t\tif (o && o.$ready && !o.$removed) {\r\n\t\t\t\t\t\t\t\tif (fn)\r\n\t\t\t\t\t\t\t\t\treturn fn.call(o, index);\r\n\t\t\t\t\t\t\t\tif (!output)\r\n\t\t\t\t\t\t\t\t\toutput = [];\r\n\t\t\t\t\t\t\t\toutput.push(o);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else if (com && com.$ready && !com.$removed) {\r\n\t\t\t\t\t\tif (fn)\r\n\t\t\t\t\t\t\treturn fn.call(com, index);\r\n\t\t\t\t\t\tif (!output)\r\n\t\t\t\t\t\t\toutput = [];\r\n\t\t\t\t\t\toutput.push(com);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn fn ? all : output;\r\n\t\t};\r\n\r\n\t\t$.fn.rescroll = function(offset, bottom) {\r\n\t\t\tvar t = this;\r\n\t\t\tt.each(function() {\r\n\t\t\t\tvar e = this;\r\n\t\t\t\tvar el = e;\r\n\t\t\t\tel.scrollIntoView(true);\r\n\t\t\t\tif (offset) {\r\n\t\t\t\t\tvar count = 0;\r\n\t\t\t\t\twhile (el && el.scrollTop == 0 && count++ < 25) {\r\n\t\t\t\t\t\tel = el.parentNode;\r\n\t\t\t\t\t\tif (el && el.scrollTop) {\r\n\r\n\t\t\t\t\t\t\tvar off = el.scrollTop + offset;\r\n\r\n\t\t\t\t\t\t\tif (bottom != false) {\r\n\t\t\t\t\t\t\t\tif (el.scrollTop + el.getBoundingClientRect().height >= el.scrollHeight) {\r\n\t\t\t\t\t\t\t\t\tel.scrollTop = el.scrollHeight;\r\n\t\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tel.scrollTop = off;\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn t;\r\n\t\t};\r\n\r\n\t\t$.components = M;\r\n\r\n\t\tsetInterval(function() {\r\n\t\t\tW.DATETIME = W.NOW = new Date();\r\n\t\t\tvar c = M.components;\r\n\t\t\tfor (var i = 0, length = c.length; i < length; i++)\r\n\t\t\t\tc[i].knockknock && c[i].knockknock(knockknockcounter);\r\n\t\t\tEMIT('knockknock', knockknockcounter++);\r\n\t\t}, 60000);\r\n\r\n\t\tfunction resize() {\r\n\t\t\tvar w = $(window);\r\n\t\t\tW.WW = w.width();\r\n\t\t\tW.WH = w.height();\r\n\t\t\tmediaquery();\r\n\t\t}\r\n\r\n\t\tresize();\r\n\r\n\t\t$(window).on('resize', resize);\r\n\t\t$(document).ready(function() {\r\n\r\n\t\t\tif ($ready) {\r\n\t\t\t\tclearTimeout($ready);\r\n\t\t\t\tload();\r\n\t\t\t}\r\n\r\n\t\t\t$(W).on('orientationchange', mediaquery);\r\n\r\n\t\t\t$(document).on('input', 'input[data-jc-bind],textarea[data-jc-bind]', function() {\r\n\r\n\t\t\t\t// realtime binding\r\n\t\t\t\tvar self = this;\r\n\t\t\t\tvar com = self.$com;\r\n\r\n\t\t\t\tif (!com || com.$removed || !com.getter || self.$jckeypress === false)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tself.$jcevent = 2;\r\n\r\n\t\t\t\tif (self.$jckeypress === undefined) {\r\n\t\t\t\t\tvar tmp = attrcom(self, 'keypress');\r\n\t\t\t\t\tif (tmp)\r\n\t\t\t\t\t\tself.$jckeypress = tmp === 'true';\r\n\t\t\t\t\telse if (com.config.$realtime != null)\r\n\t\t\t\t\t\tself.$jckeypress = com.config.$realtime === true;\r\n\t\t\t\t\telse if (com.config.$binding)\r\n\t\t\t\t\t\tself.$jckeypress = com.config.$binding === 1;\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tself.$jckeypress = MD.keypress;\r\n\t\t\t\t\tif (self.$jckeypress === false)\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (self.$jcdelay === undefined)\r\n\t\t\t\t\tself.$jcdelay = +(attrcom(self, 'keypress-delay') || com.config.$delay || MD.delay);\r\n\r\n\t\t\t\tif (self.$jconly === undefined)\r\n\t\t\t\t\tself.$jconly = attrcom(self, 'keypress-only') === 'true' || com.config.$keypress === true || com.config.$binding === 2;\r\n\r\n\t\t\t\tself.$jctimeout && clearTimeout(self.$jctimeout);\r\n\t\t\t\tself.$jctimeout = setTimeout(keypressdelay, self.$jcdelay, self);\r\n\t\t\t});\r\n\r\n\t\t\t$(document).on('focus blur', 'input[data-jc-bind],textarea[data-jc-bind],select[data-jc-bind]', function(e) {\r\n\r\n\t\t\t\tvar self = this;\r\n\t\t\t\tvar com = self.$com;\r\n\r\n\t\t\t\tif (!com || com.$removed || !com.getter)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tif (e.type === 'focusin')\r\n\t\t\t\t\tself.$jcevent = 1;\r\n\t\t\t\telse if (self.$jcevent === 1) {\r\n\t\t\t\t\tcom.dirty(false, true);\r\n\t\t\t\t\tcom.getter(self.value, 3);\r\n\t\t\t\t} else if (self.$jcskip) {\r\n\t\t\t\t\tself.$jcskip = false;\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// formatter\r\n\t\t\t\t\tvar tmp = com.$skip;\r\n\t\t\t\t\tif (tmp)\r\n\t\t\t\t\t\tcom.$skip = false;\r\n\t\t\t\t\tcom.setter(com.get(), com.path, 2);\r\n\t\t\t\t\tif (tmp)\r\n\t\t\t\t\t\tcom.$skip = tmp;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t$(document).on('change', 'input[data-jc-bind],textarea[data-jc-bind],select[data-jc-bind]', function() {\r\n\r\n\t\t\t\tvar self = this;\r\n\t\t\t\tvar com = self.$com;\r\n\r\n\t\t\t\tif (self.$jconly || !com || com.$removed || !com.getter)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tif (self.$jckeypress === false) {\r\n\t\t\t\t\t// bind + validate\r\n\t\t\t\t\tself.$jcskip = true;\r\n\t\t\t\t\tcom.getter(self.value, false);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tswitch (self.tagName) {\r\n\t\t\t\t\tcase 'SELECT':\r\n\t\t\t\t\t\tvar sel = self[self.selectedIndex];\r\n\t\t\t\t\t\tself.$jcevent = 2;\r\n\t\t\t\t\t\tcom.dirty(false, true);\r\n\t\t\t\t\t\tcom.getter(sel.value, false);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\tcase 'INPUT':\r\n\t\t\t\t\t\tif (self.type === 'checkbox' || self.type === 'radio') {\r\n\t\t\t\t\t\t\tself.$jcevent = 2;\r\n\t\t\t\t\t\t\tcom.dirty(false, true);\r\n\t\t\t\t\t\t\tcom.getter(self.checked, false);\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (self.$jctimeout) {\r\n\t\t\t\t\tcom.dirty(false, true);\r\n\t\t\t\t\tcom.getter(self.value, true);\r\n\t\t\t\t\tclearTimeout(self.$jctimeout);\r\n\t\t\t\t\tself.$jctimeout = 0;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tself.$jcskip = true;\r\n\t\t\t\t\tcom.setter && com.setterX(com.get(), self.path, 2);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tsetTimeout(compile, 2);\r\n\t\t\t$domready = true;\r\n\t\t});\r\n\t}, 100);\r\n\r\n\tfunction keypressdelay(self) {\r\n\t\tvar com = self.$com;\r\n\t\t// Reset timeout\r\n\t\tself.$jctimeout = 0;\r\n\t\t// It's not dirty\r\n\t\tcom.dirty(false, true);\r\n\t\t// Binds a value\r\n\t\tcom.getter(self.value, true);\r\n\t}\r\n\r\n\tM.$parser.push(function(path, value, type) {\r\n\r\n\t\tswitch (type) {\r\n\t\t\tcase TYPE_N:\r\n\t\t\tcase 'currency':\r\n\t\t\tcase 'float':\r\n\t\t\t\tvar v = +(typeof(value) == TYPE_S ? value.replace(REGEMPTY, '').replace(REGCOMMA, '.') : value);\r\n\t\t\t\treturn isNaN(v) ? null : v;\r\n\r\n\t\t\tcase 'date':\r\n\t\t\tcase 'datetime':\r\n\r\n\t\t\t\tif (!value)\r\n\t\t\t\t\treturn null;\r\n\r\n\t\t\t\tif (value instanceof Date)\r\n\t\t\t\t\treturn value;\r\n\r\n\t\t\t\tvalue = value.parseDate();\r\n\t\t\t\treturn value && value.getTime() ? value : null;\r\n\t\t}\r\n\r\n\t\treturn value;\r\n\t});\r\n\r\n\tfunction binderbind(path, absolutePath, ticks) {\r\n\t\tvar arr = binders[path];\r\n\t\tfor (var i = 0; i < arr.length; i++) {\r\n\t\t\tvar item = arr[i];\r\n\t\t\tif (item.ticks !== ticks) {\r\n\t\t\t\titem.ticks = ticks;\r\n\t\t\t\titem.exec(GET(item.path), absolutePath);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tvar $rebinder;\r\n\r\n\tfunction rebindbinder() {\r\n\t\t$rebinder && clearTimeout($rebinder);\r\n\t\t$rebinder = setTimeout(function() {\r\n\t\t\tvar arr = bindersnew.splice(0);\r\n\t\t\tfor (var i = 0; i < arr.length; i++) {\r\n\t\t\t\tvar item = arr[i];\r\n\t\t\t\tif (!item.init) {\r\n\t\t\t\t\tif (item.com)\r\n\t\t\t\t\t\titem.exec(item.com.data(item.path), item.path);\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\titem.exec(GET(item.path), item.path);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}, 50);\r\n\t}\r\n\r\n\tfunction rebinddecode(val) {\r\n\t\treturn val.replace(/&#39;/g, '\\'');\r\n\t}\r\n\r\n\tfunction parsebinderskip(str) {\r\n\t\tvar a = arguments;\r\n\t\tfor (var i = 1; i < a.length; i++) {\r\n\t\t\tif (str.indexOf(a[i]) !== -1)\r\n\t\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\r\n\tfunction parsebinder(el, b, scopes, r) {\r\n\t\tvar meta = b.split(REGMETA);\r\n\t\tif (meta.indexOf('|') !== -1) {\r\n\t\t\tif (!r) {\r\n\t\t\t\tvar tmp = [];\r\n\t\t\t\tvar output = [];\r\n\t\t\t\tfor (var i = 0; i < meta.length; i++) {\r\n\t\t\t\t\tvar m = meta[i];\r\n\t\t\t\t\tif (m === '|') {\r\n\t\t\t\t\t\ttmp.length && output.push(parsebinder(el, tmp.join('__'), scopes));\r\n\t\t\t\t\t\ttmp = [];\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tm && tmp.push(m);\r\n\t\t\t\t}\r\n\t\t\t\ttmp.length && output.push(parsebinder(el, tmp.join('__'), scopes, true));\r\n\t\t\t}\r\n\t\t\treturn output;\r\n\t\t}\r\n\r\n\t\tvar path = null;\r\n\t\tvar index = null;\r\n\t\tvar obj = new jBinder();\r\n\t\tvar cls = [];\r\n\t\tvar sub = {};\r\n\t\tvar e = obj.el = $(el);\r\n\r\n\t\tfor (var i = 0; i < meta.length; i++) {\r\n\t\t\tvar item = meta[i].trim();\r\n\t\t\tif (item) {\r\n\t\t\t\tif (i) {\r\n\r\n\t\t\t\t\tvar k, v;\r\n\r\n\t\t\t\t\tif (item !== 'template' && item !== '!template' && item !== 'strict') {\r\n\r\n\t\t\t\t\t\tindex = item.indexOf(':');\r\n\r\n\t\t\t\t\t\tif (index === -1) {\r\n\t\t\t\t\t\t\tindex = item.length;\r\n\t\t\t\t\t\t\titem += ':value';\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tk = item.substring(0, index).trim();\r\n\t\t\t\t\t\tv = item.substring(index + 1).trim();\r\n\t\t\t\t\t} else\r\n\t\t\t\t\t\tk = item;\r\n\r\n\t\t\t\t\tif (k === 'selector') {\r\n\t\t\t\t\t\tobj[k] = v;\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar rki = k.indexOf(' ');\r\n\t\t\t\t\tvar rk = rki === -1 ? k : k.substring(0, rki);\r\n\t\t\t\t\tvar fn = parsebinderskip(rk, 'setter', 'strict', 'track', 'delay', 'import', 'class', 'template') && k.substring(0, 3) !== 'def' ? v.indexOf('=>') !== -1 ? FN(rebinddecode(v)) : isValue(v) ? FN('(value,path,el)=>' + rebinddecode(v), true) : v.substring(0, 1) === '@' ? obj.com[v.substring(1)] : GET(v) : 1;\r\n\t\t\t\t\tif (!fn)\r\n\t\t\t\t\t\treturn null;\r\n\r\n\t\t\t\t\tvar keys = k.split('+');\r\n\t\t\t\t\tfor (var j = 0; j < keys.length; j++) {\r\n\r\n\t\t\t\t\t\tk = keys[j].trim();\r\n\r\n\t\t\t\t\t\tvar s = '';\r\n\t\t\t\t\t\tvar notvisible = false;\r\n\t\t\t\t\t\tvar notnull = false;\r\n\t\t\t\t\t\tvar backup = false;\r\n\r\n\t\t\t\t\t\tindex = k.indexOf(' ');\r\n\t\t\t\t\t\tif (index !== -1) {\r\n\t\t\t\t\t\t\ts = k.substring(index + 1);\r\n\t\t\t\t\t\t\tk = k.substring(0, index);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tk = k.replace(/^(~!|!~|!|~)/, function(text) {\r\n\t\t\t\t\t\t\tif (text.indexOf('!') !== -1)\r\n\t\t\t\t\t\t\t\tnotnull = true;\r\n\t\t\t\t\t\t\tif (text.indexOf('~') !== -1)\r\n\t\t\t\t\t\t\t\tnotvisible = true;\r\n\t\t\t\t\t\t\treturn '';\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tvar c = k.substring(0, 1);\r\n\r\n\t\t\t\t\t\tif (k === 'class')\r\n\t\t\t\t\t\t\tk = 'tclass';\r\n\r\n\t\t\t\t\t\tif (c === '.') {\r\n\t\t\t\t\t\t\tif (notnull)\r\n\t\t\t\t\t\t\t\tfn.$nn = 1;\r\n\t\t\t\t\t\t\tcls.push({ name: k.substring(1), fn: fn });\r\n\t\t\t\t\t\t\tk = 'class';\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (typeof(fn) === TYPE_FN) {\r\n\t\t\t\t\t\t\tif (notnull)\r\n\t\t\t\t\t\t\t\tfn.$nn = 1;\r\n\t\t\t\t\t\t\tif (notvisible)\r\n\t\t\t\t\t\t\t\tfn.$nv = 1;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tswitch (k) {\r\n\t\t\t\t\t\t\tcase 'track':\r\n\t\t\t\t\t\t\t\tobj[k] = v.split(',').trim();\r\n\t\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t\tcase 'strict':\r\n\t\t\t\t\t\t\t\tobj[k] = true;\r\n\t\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t\tcase 'hidden':\r\n\t\t\t\t\t\t\t\tk = 'hide';\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase 'exec':\r\n\t\t\t\t\t\t\t\tk = 'change';\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase 'disable':\r\n\t\t\t\t\t\t\t\tk = 'disabled';\r\n\t\t\t\t\t\t\t\tbackup = true;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase 'value':\r\n\t\t\t\t\t\t\t\tk = 'val';\r\n\t\t\t\t\t\t\t\tbackup = true;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase 'default':\r\n\t\t\t\t\t\t\t\tk = 'def';\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase 'delay':\r\n\t\t\t\t\t\t\t\tfn = +v;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase 'href':\r\n\t\t\t\t\t\t\tcase 'src':\r\n\t\t\t\t\t\t\tcase 'val':\r\n\t\t\t\t\t\t\tcase 'title':\r\n\t\t\t\t\t\t\tcase 'html':\r\n\t\t\t\t\t\t\tcase 'text':\r\n\t\t\t\t\t\t\tcase 'disabled':\r\n\t\t\t\t\t\t\tcase 'enabled':\r\n\t\t\t\t\t\t\tcase 'checked':\r\n\t\t\t\t\t\t\t\tbackup = true;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tcase 'setter':\r\n\t\t\t\t\t\t\t\tfn = FN('(value,path,el)=>el.SETTER(' + v + ')');\r\n\t\t\t\t\t\t\t\tif (notnull)\r\n\t\t\t\t\t\t\t\t\tfn.$nn = 1;\r\n\t\t\t\t\t\t\t\tif (notvisible)\r\n\t\t\t\t\t\t\t\t\tfn.$nv =1;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase 'import':\r\n\t\t\t\t\t\t\t\tvar c = v.substring(0, 1);\r\n\t\t\t\t\t\t\t\tif ((/^(https|http):\\/\\//).test(v) || c === '/' || c === '.') {\r\n\t\t\t\t\t\t\t\t\tif (c === '.')\r\n\t\t\t\t\t\t\t\t\t\tfn = v.substring(1);\r\n\t\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t\t\tfn = v;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t\tfn = FN(rebinddecode(v));\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase 'tclass':\r\n\t\t\t\t\t\t\t\tfn = v;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase 'template':\r\n\t\t\t\t\t\t\t\tvar scr = e.find('script');\r\n\t\t\t\t\t\t\t\tif (!scr.length)\r\n\t\t\t\t\t\t\t\t\tscr = e;\r\n\t\t\t\t\t\t\t\tfn = Tangular.compile(scr.html());\r\n\t\t\t\t\t\t\t\tif (notnull)\r\n\t\t\t\t\t\t\t\t\tfn.$nn = 1;\r\n\t\t\t\t\t\t\t\tif (notvisible)\r\n\t\t\t\t\t\t\t\t\tfn.$nv = 1;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (k === 'def')\r\n\t\t\t\t\t\t\tfn = new Function('return ' + v)();\r\n\r\n\t\t\t\t\t\tif (backup && notnull)\r\n\t\t\t\t\t\t\tobj[k + 'bk'] = (k == 'src' || k == 'href' || k == 'title') ? e.attr(k) : (k == 'html' || k == 'text') ? e.html() : k == 'val' ? e.val() : (k == 'disabled' || k == 'checked') ? e.prop(k) : '';\r\n\r\n\t\t\t\t\t\tif (s) {\r\n\r\n\t\t\t\t\t\t\tif (!sub[s])\r\n\t\t\t\t\t\t\t\tsub[s] = {};\r\n\r\n\t\t\t\t\t\t\tif (k !== 'class')\r\n\t\t\t\t\t\t\t\tsub[s][k] = fn;\r\n\r\n\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\tvar p = cls.pop();\r\n\t\t\t\t\t\t\t\tif (sub[s].cls)\r\n\t\t\t\t\t\t\t\t\tsub[s].cls.push(p);\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t\tsub[s].cls = [p];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (k !== 'class')\r\n\t\t\t\t\t\t\t\tobj[k] = fn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t// path\r\n\t\t\t\t\tpath = item;\r\n\r\n\t\t\t\t\tvar c = path.substring(0, 1);\r\n\r\n\t\t\t\t\tif (c === '!') {\r\n\t\t\t\t\t\tpath = path.substring(1);\r\n\t\t\t\t\t\tobj.notnull = true;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (meta.length === 1) {\r\n\t\t\t\t\t\tvar fn = GET(path);\r\n\t\t\t\t\t\tfn && fn.call(obj.el, obj.el);\r\n\t\t\t\t\t\treturn fn ? fn : null;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar tmp = findFormat(path);\r\n\t\t\t\t\tif (tmp) {\r\n\t\t\t\t\t\tpath = tmp.path;\r\n\t\t\t\t\t\tobj.format = tmp.fn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Is virtual path?\r\n\t\t\t\t\tif (c === '.') {\r\n\t\t\t\t\t\tobj.virtual = true;\r\n\t\t\t\t\t\tpath = path.substring(1);\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (path.substring(path.length - 1) === '.')\r\n\t\t\t\t\t\tpath = path.substring(0, path.length - 1);\r\n\r\n\t\t\t\t\tif (path.substring(0, 1) === '@') {\r\n\t\t\t\t\t\tpath = path.substring(1);\r\n\r\n\t\t\t\t\t\tvar isCtrl = false;\r\n\t\t\t\t\t\tif (path.substring(0, 1) === '@') {\r\n\t\t\t\t\t\t\tisCtrl = true;\r\n\t\t\t\t\t\t\tpath = path.substring(1);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (!path)\r\n\t\t\t\t\t\t\tpath = '@';\r\n\r\n\t\t\t\t\t\tvar parent = el.parentNode;\r\n\t\t\t\t\t\twhile (parent) {\r\n\t\t\t\t\t\t\tif (isCtrl) {\r\n\t\t\t\t\t\t\t\tif (parent.$ctrl) {\r\n\t\t\t\t\t\t\t\t\tobj.com = parent.$ctrl;\r\n\t\t\t\t\t\t\t\t\tif (path === '@' && !obj.com.$dataw) {\r\n\t\t\t\t\t\t\t\t\t\tobj.com.$dataw = 1;\r\n\t\t\t\t\t\t\t\t\t\tobj.com.watch(function(path, value) {\r\n\t\t\t\t\t\t\t\t\t\t\tobj.com.data('@', value);\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tif (parent.$com) {\r\n\t\t\t\t\t\t\t\t\tobj.com = parent.$com;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tparent = parent.parentNode;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (!obj.com)\r\n\t\t\t\t\t\t\treturn null;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar keys = Object.keys(sub);\r\n\t\tfor (var i = 0; i < keys.length; i++) {\r\n\t\t\tvar key = keys[i];\r\n\t\t\tif (!obj.child)\r\n\t\t\t\tobj.child = [];\r\n\t\t\tvar o = sub[key];\r\n\t\t\to.selector = key;\r\n\t\t\tobj.child.push(o);\r\n\t\t}\r\n\r\n\t\tif (cls.length)\r\n\t\t\tobj.classes = cls;\r\n\r\n\t\tif (obj.virtual) {\r\n\t\t\tpath = pathmaker(path);\r\n\t\t} else {\r\n\r\n\t\t\tvar bj = obj.com && path.substring(0, 1) === '@';\r\n\t\t\tpath = bj ? path : pathmaker(path);\r\n\r\n\t\t\tif (path.indexOf('?') !== -1) {\r\n\t\t\t\tvar scope = initscopes(scopes);\r\n\t\t\t\tif (scope)\r\n\t\t\t\t\tpath = path.replace(/\\?/g, scope.path);\r\n\t\t\t\telse\r\n\t\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar arr = path.split('.');\r\n\t\t\tvar p = '';\r\n\r\n\t\t\tif (obj.com) {\r\n\t\t\t\t!obj.com.$data[path] && (obj.com.$data[path] = { value: null, items: [] });\r\n\t\t\t\tobj.com.$data[path].items.push(obj);\r\n\t\t\t} else {\r\n\t\t\t\tfor (var i = 0, length = arr.length; i < length; i++) {\r\n\t\t\t\t\tp += (p ? '.' : '') + arr[i];\r\n\t\t\t\t\tvar k = i === length - 1 ? p : '!' + p;\r\n\t\t\t\t\tif (binders[k])\r\n\t\t\t\t\t\tbinders[k].push(obj);\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tbinders[k] = [obj];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tobj.path = path;\r\n\r\n\t\tif (obj.track) {\r\n\t\t\tfor (var i = 0; i < obj.track.length; i++)\r\n\t\t\t\tobj.track[i] = path + '.' + obj.track[i];\r\n\t\t}\r\n\r\n\t\tobj.init = 0;\r\n\t\t!obj.virtual && bindersnew.push(obj);\r\n\t\treturn obj;\r\n\t}\r\n\r\n\tfunction jBinder() {}\r\n\r\n\tvar JBP = jBinder.prototype;\r\n\tJBP.exec = function(value, path, index, wakeup, can) {\r\n\r\n\t\tvar item = this;\r\n\t\tvar el = item.el;\r\n\t\tif (index != null) {\r\n\t\t\tif (item.child == null)\r\n\t\t\t\treturn;\r\n\t\t\titem = item.child[index];\r\n\t\t\tif (item == null)\r\n\t\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (item.notnull && value == null)\r\n\t\t\treturn;\r\n\r\n\t\tif (item.selector) {\r\n\t\t\tif (item.cache)\r\n\t\t\t\tel = item.cache;\r\n\t\t\telse {\r\n\t\t\t\tel = el.find(item.selector);\r\n\t\t\t\tif (el.length)\r\n\t\t\t\t\titem.cache = el;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (!el.length)\r\n\t\t\treturn;\r\n\r\n\t\tif (!wakeup && item.delay) {\r\n\t\t\titem.$delay && clearTimeout(item.$delay);\r\n\t\t\titem.$delay = setTimeout(function(obj, value, path, index, can) {\r\n\t\t\t\tobj.$delay = null;\r\n\t\t\t\tobj.exec(value, path, index, true, can);\r\n\t\t\t}, item.delay, item, value, path, index, can);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (item.init) {\r\n\t\t\tif (item.strict && item.path !== path)\r\n\t\t\t\treturn;\r\n\t\t\tif (item.track && item.path !== path) {\r\n\t\t\t\tvar can = false;\r\n\t\t\t\tfor (var i = 0; i < item.track.length; i++) {\r\n\t\t\t\t\tif (item.track[i] === path) {\r\n\t\t\t\t\t\tcan = true;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (!can)\r\n\t\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t} else\r\n\t\t\titem.init = 1;\r\n\r\n\t\tif (item.def && value == null)\r\n\t\t\tvalue = item.def;\r\n\r\n\t\tif (item.format)\r\n\t\t\tvalue = item.format(value, path);\r\n\r\n\t\tvar tmp = null;\r\n\r\n\t\tcan = can !== false;\r\n\r\n\t\tif (item.show && (value != null || !item.show.$nn)) {\r\n\t\t\ttmp = item.show.call(item.el, value, path, item.el);\r\n\t\t\tel.tclass('hidden', !tmp);\r\n\t\t\tif (!tmp)\r\n\t\t\t\tcan = false;\r\n\t\t}\r\n\r\n\t\tif (item.hide && (value != null || !item.hide.$nn)) {\r\n\t\t\ttmp = item.hide.call(el, value, path, el);\r\n\t\t\tel.tclass('hidden', tmp);\r\n\t\t\tif (tmp)\r\n\t\t\t\tcan = false;\r\n\t\t}\r\n\r\n\t\tif (item.invisible && (value != null || !item.invisible.$nn)) {\r\n\t\t\ttmp = item.invisible.call(item.el, value, path, item.el);\r\n\t\t\tel.tclass('invisible', tmp);\r\n\t\t\tif (!tmp)\r\n\t\t\t\tcan = false;\r\n\t\t}\r\n\r\n\t\tif (item.visible && (value != null || !item.visible.$nn)) {\r\n\t\t\ttmp = item.visible.call(item.el, value, path, item.el);\r\n\t\t\tel.tclass('invisible', !tmp);\r\n\t\t\tif (!tmp)\r\n\t\t\t\tcan = false;\r\n\t\t}\r\n\r\n\t\tif (item.classes) {\r\n\t\t\tfor (var i = 0; i < item.classes.length; i++) {\r\n\t\t\t\tvar cls = item.classes[i];\r\n\t\t\t\tif (!cls.fn.$nn || value != null)\r\n\t\t\t\t\tel.tclass(cls.name, !!cls.fn.call(el, value, path, el));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (can && item.import) {\r\n\t\t\tif (typeof(item.import) === TYPE_FN) {\r\n\t\t\t\tif (value) {\r\n\t\t\t\t\t!item.$ic && (item.$ic = {});\r\n\t\t\t\t\t!item.$ic[value] && IMPORT('ONCE ' + value, el);\r\n\t\t\t\t\titem.$ic[value] = 1;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tIMPORT(item.import, el);\r\n\t\t\t\tdelete item.import;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (item.config && (can || item.config.$nv)) {\r\n\t\t\tif (value != null || !item.config.$nn) {\r\n\t\t\t\ttmp = item.config.call(el, value, path, el);\r\n\t\t\t\tif (tmp) {\r\n\t\t\t\t\tfor (var i = 0; i < el.length; i++) {\r\n\t\t\t\t\t\tvar c = el[i].$com;\r\n\t\t\t\t\t\tc && c.$ready && c.reconfigure(tmp);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (item.html && (can || item.html.$nv)) {\r\n\t\t\tif (value != null || !item.html.$nn) {\r\n\t\t\t\ttmp = item.html.call(el, value, path, el);\r\n\t\t\t\tel.html(tmp == null ? (item.htmlbk || '') : tmp);\r\n\t\t\t} else\r\n\t\t\t\tel.html(item.htmlbk || '');\r\n\t\t}\r\n\r\n\t\tif (item.text && (can || item.text.$nv)) {\r\n\t\t\tif (value != null || !item.text.$nn) {\r\n\t\t\t\ttmp = item.text.call(el, value, path, el);\r\n\t\t\t\tel.text(tmp == null ? (item.htmlbk || '') : tmp);\r\n\t\t\t} else\r\n\t\t\t\tel.html(item.htmlbk || '');\r\n\t\t}\r\n\r\n\t\tif (item.val && (can || item.val.$nv)) {\r\n\t\t\tif (value != null || !item.val.$nn) {\r\n\t\t\t\ttmp = item.val.call(el, value, path, el);\r\n\t\t\t\tel.val(tmp == null ? (item.valbk || '') : tmp);\r\n\t\t\t} else\r\n\t\t\t\tel.val(item.valbk || '');\r\n\t\t}\r\n\r\n\t\tif (item.template && (can || item.template.$nv) && (value != null || !item.template.$nn)) {\r\n\t\t\tDEFMODEL.value = value;\r\n\t\t\tDEFMODEL.path = path;\r\n\t\t\tel.html(item.template(DEFMODEL));\r\n\t\t}\r\n\r\n\t\tif (item.disabled && (can || item.disabled.$nv)) {\r\n\t\t\tif (value != null || !item.disabled.$nn) {\r\n\t\t\t\ttmp = item.disabled.call(el, value, path, el);\r\n\t\t\t\tel.prop('disabled', tmp == true);\r\n\t\t\t} else\r\n\t\t\t\tel.prop('disabled', item.disabledbk == true);\r\n\t\t}\r\n\r\n\t\tif (item.enabled && (can || item.enabled.$nv)) {\r\n\t\t\tif (value != null || !item.enabled.$nn) {\r\n\t\t\t\ttmp = item.enabled.call(el, value, path, el);\r\n\t\t\t\tel.prop('disabled', !tmp);\r\n\t\t\t} else\r\n\t\t\t\tel.prop('disabled', item.enabledbk == false);\r\n\t\t}\r\n\r\n\t\tif (item.checked && (can || item.checked.$nv)) {\r\n\t\t\tif (value != null || !item.checked.$nn) {\r\n\t\t\t\ttmp = item.checked.call(el, value, path, el);\r\n\t\t\t\tel.prop('checked', tmp == true);\r\n\t\t\t} else\r\n\t\t\t\tel.prop('checked', item.checkedbk == true);\r\n\t\t}\r\n\r\n\t\tif (item.title && (can || item.title.$nv)) {\r\n\t\t\tif (value != null || !item.title.$nn) {\r\n\t\t\t\ttmp = item.title.call(el, value, path, el);\r\n\t\t\t\tel.attr('title', tmp == null ? (item.titlebk || '') : tmp);\r\n\t\t\t} else\r\n\t\t\t\tel.attr('title', item.titlebk || '');\r\n\t\t}\r\n\r\n\t\tif (item.href && (can || item.href.$nv)) {\r\n\t\t\tif (value != null || !item.href.$nn) {\r\n\t\t\t\ttmp = item.href.call(el, value, path, el);\r\n\t\t\t\tel.attr('href', tmp == null ? (item.hrefbk || '') : tmp);\r\n\t\t\t} else\r\n\t\t\t\tel.attr(item.hrefbk || '');\r\n\t\t}\r\n\r\n\t\tif (item.src && (can || item.src.$nv)) {\r\n\t\t\tif (value != null || !item.src.$nn) {\r\n\t\t\t\ttmp = item.src.call(el, value, path, el);\r\n\t\t\t\tel.attr('src', tmp == null ? (item.srcbk || '') : tmp);\r\n\t\t\t} else\r\n\t\t\t\tel.attr('src', item.srcbk || '');\r\n\t\t}\r\n\r\n\t\tif (item.setter && (can || item.setter.$nv) && (value != null || !item.setter.$nn))\r\n\t\t\titem.setter.call(el, value, path, el);\r\n\r\n\t\tif (item.change && (value != null || !item.change.$nn))\r\n\t\t\titem.change.call(el, value, path, el);\r\n\r\n\t\tif (can && index == null && item.child) {\r\n\t\t\tfor (var i = 0; i < item.child.length; i++)\r\n\t\t\t\titem.exec(value, path, i, undefined, can);\r\n\t\t}\r\n\r\n\t\tif (item.tclass) {\r\n\t\t\tel.tclass(item.tclass);\r\n\t\t\tdelete item.tclass;\r\n\t\t}\r\n\t};\r\n\r\n\tfunction isValue(val) {\r\n\t\tvar index = val.indexOf('value');\r\n\t\treturn index !== -1 ? (((/\\W/).test(val)) || val === 'value') : false;\r\n\t}\r\n\r\n\tfunction Plugin(name, fn) {\r\n\t\t(/\\W/).test(name) && warn('Plugin name must contain A-Z chars only.');\r\n\t\tW.PLUGINS[name] && W.PLUGINS[name].$remove(true);\r\n\t\tvar t = this;\r\n\t\tt.element = $(current_element || document.body);\r\n\t\tt.id = 'plug' + name;\r\n\t\tt.name = name;\r\n\t\tW.PLUGINS[name] = t;\r\n\t\tvar a = current_owner;\r\n\t\tcurrent_owner = t.id;\r\n\t\tfn.call(t, t);\r\n\t\tcurrent_owner = a;\r\n\t\tEMIT('plugin', t);\r\n\t}\r\n\r\n\tPlugin.prototype.$remove = function() {\r\n\r\n\t\tvar self = this;\r\n\t\tif (!self.element)\r\n\t\t\treturn true;\r\n\r\n\t\tEMIT('plugin.destroy', self);\r\n\t\tself.destroy && self.destroy();\r\n\r\n\t\t// Remove all global events\r\n\t\tOK(events).forEach(function(e) {\r\n\t\t\tvar evt = events[e];\r\n\t\t\tevt = evt.remove('owner', self.id);\r\n\t\t\tif (!evt.length)\r\n\t\t\t\tdelete events[e];\r\n\t\t});\r\n\r\n\t\twatches = watches.remove('owner', self.id);\r\n\r\n\t\t// Remove events\r\n\t\tOFF(self.id + '#watch');\r\n\r\n\t\t// Remove schedulers\r\n\t\tschedulers = schedulers.remove('owner', self.id);\r\n\r\n\t\t// self.element.remove();\r\n\t\tself.element = null;\r\n\r\n\t\tdelete W.PLUGINS[self.name];\r\n\t\treturn true;\r\n\t};\r\n\r\n\tW.PLUGIN = function(name, fn) {\r\n\t\treturn fn ? new Plugin(name, fn) : W.PLUGINS[name];\r\n\t};\r\n\r\n\treturn jc;\r\n});"]}