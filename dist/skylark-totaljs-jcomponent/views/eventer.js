/**
 * skylark-totaljs-jcomponent - A version of totaljs jcomponent that ported to running on skylarkjs
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylarkui/skylark-totaljs-jcomponent/
 * @license MIT
 */
define([],function(){return function(t){var n={};function e(t,r,o,a,f){if(-1!==t.indexOf(MULTIPLE)){for(var l=t.split(MULTIPLE).trim(),s=0;s<l.length;s++)e(l[s],r,o,a,f);return this}var u=!0;"^"===t.substring(0,1)&&(u=!1,t=t.substring(1));var c=null,h=t.indexOf("#");h&&(c=t.substring(0,h).trim(),t=t.substring(h+1).trim()),langx.isFunction(r)?(o=r,r="watch"===t?"*":""):r=r.replace(".*","");var g={name:t,fn:o,owner:c||current_owner,context:f||(null==current_com?void 0:current_com)};if("watch"===t){l=[];var m=findFormat(r);if(m&&(r=m.path,g.format=m.fn),"."===r.substring(r.length-1)&&(r=r.substring(0,r.length-1)),37===r.charCodeAt(0)&&(r="jctmp."+r.substring(1)),33===(r=r.env()).charCodeAt(0))r=r.substring(1),l.push(r);else for(var v=r.split("."),x=[],p=0;p<v.length;p++){var d=v[p].lastIndexOf("[");if(-1!==d){var b=x.join(".");l.push(b+(b?".":"")+v[p].substring(0,d))}x.push(v[p]),l.push(x.join("."))}g.path=r,g.$path=l,u?i.push(g):i.unshift(g),a&&o.call(f||M,r,g.format?g.format(get(r),r,0):get(r),0)}else n[t]?u?n[t].push(g):n[t].unshift(g):n[t]=[g],!C.ready&&("ready"===t||"init"===t)&&o();return this}function r(t,e,o){if(-1!==t.indexOf("+")){for(var a=t.split("+").trim(),f=0;f<a.length;f++)r(a[f],e,o);return this}lang.isFunction(e)&&(o=e,e=""),void 0===e&&(e="");var l=null,s=t.indexOf("#");if(s&&(l=t.substring(0,s).trim(),t=t.substring(s+1).trim()),e){e=e.replace(".*","").trim();var u=findFormat(e);u&&(e=u.path),"."===e.substring(e.length-1)&&(e=e.substring(0,e.length-1))}var c=0;!l||e||o||t?l&&t&&!o&&!e?c=2:l&&t&&e?c=3:l&&t&&e&&o?c=4:t&&e&&o?c=5:t&&e?c=7:o&&(c=6):c=1;var h=function(n,r){return n.remove(function(n){return!(c>2&&c<5&&n.path!==e)&&(1===c?n.owner===l:2===c?r===t&&n.owner===l:3===c?r===t&&n.owner===l:4===c?r===t&&n.owner===l&&n.fn===o:5===c||6===c?r===t&&n.fn===o:6===c?n.fn===o:7===c?r===t&&n.path===e:r===t)})};return Object.keys(n).forEach(function(t){n[t]=h(n[t],t),n[t].length||delete n[t]}),i=h(i,"watch"),this}var i=[];return{clean:function(){for(topic.each(function(t,e){for(index=0;;){var r=e[index++];if(void 0===r)break;null==r.context||r.context.element&&inDOM(r.context.element[0])||(r.context&&r.context.element&&r.context.element.remove(),r.context.$removed=!0,r.context=null,e.splice(index-1,1),e.length||delete n[t],index-=2,is=!0)}}),index=0;;){var t=i[index++];if(void 0===t)break;null==t.context||t.context.element&&inDOM(t.context.element[0])||(t.context&&t.context.element&&t.context.element.remove(),t.context.$removed=!0,t.context=null,i.splice(index-1,1),index-=2,is=!0)}},on:e,off:r,emit:function(t){var e=n[t];if(!e)return!1;for(var r=[],i=1,o=arguments.length;i<o;i++)r.push(arguments[i]);for(i=0,o=e.length;i<o;i++){var a=e[i].context;(void 0===a||null!==a&&!a.$removed)&&e[i].fn.apply(a||window,r)}return!0},watch:function t(n,r,i){if(-1!==n.indexOf(MULTIPLE)){for(var o=n.split(MULTIPLE).trim(),a=0;a<o.length;a++)t(o[a],r,i);return this}langx.isFunction(n)&&(i=r,r=n,n="*");var f="";return"^"===n.substring(0,1)&&(n=n.substring(1),f="^"),e(f+"watch",n=pathmaker(n,!0),r,i),this},unwatch:function t(n,e){if(-1!==n.indexOf(MULTIPLE)){for(var i=n.split(MULTIPLE).trim(),o=0;o<i.length;o++)t(i[o],e);return this}return r("watch",n,e)},emitwatch:function(t,n,e){for(var r=0,o=i.length;r<o;r++){var a=i[r];if("*"===a.path)a.fn.call(a.context,t,a.format?a.format(n,t,e):n,e);else if(t.length>a.path.length){var f=t.lastIndexOf(".",a.path.length);if(-1!==f&&a.path===t.substring(0,f)){var l=get(a.path);a.fn.call(a.context,t,a.format?a.format(l,t,e):l,e)}}else for(var s=0,u=a.$path.length;s<u;s++)if(a.$path[s]===t){l=get(a.path),a.fn.call(a.context,t,a.format?a.format(l,t,e):l,e);break}}}}}});
//# sourceMappingURL=../sourcemaps/views/eventer.js.map
