/**
 * skylark-totaljs-jcomponent - A version of totaljs jcomponent that ported to running on skylarkjs
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylarkui/skylark-totaljs-jcomponent/
 * @license MIT
 */
define(["../langx","./compose","./crawler","./download","./pend"],function(e,t,i,s,r){var n;function a(e){var t=e.$com;e.$jctimeout=0,t.dirty(!1,!0),t.getter(e.value,!0)}var c=e.Evented.inherit({options:{elmComAttrNames:{base:"data-jc",url:"data-jc-url",removed:"data-jc-removed",released:"data-jc-released",scope:"data-jc-scope"}},_construct:function(e,t){this.is=!1,this.recompile=!1,this.importing=0,this.pending=[],this.init=[],this.imports={},this.ready=[],this.storer=storing(this)},attrcom:function(e){return attrcom(e)},compile:function(a,c){var o=this;if(o.is)o.recompile=!0;else{var h=[];if(W.READY instanceof Array&&h.push.apply(h,W.READY),W.jComponent instanceof Array&&h.push.apply(h,W.jComponent),W.components instanceof Array&&h.push.apply(h,W.components),h.length)for(;;){var d=h.shift();if(!d)break;d()}if(o.is=!0,s(o),o.pending.length)!function(e){o.pending.push(function(){compile(o,e)})}(a);else{if(i(o,a,t),n&&clearTimeout(n),n=setTimeout(function(){for(var e=bindersnew.splice(0),t=0;t<e.length;t++){var i=e[t];i.init||(i.com?i.exec(i.com.data(i.path),i.path):i.exec(getx(i.path),i.path))}},50),o.is=!1,void 0!==a||!toggles.length)return r();e.async(toggles,function(e,t){for(var i=0,s=e.toggle.length;i<s;i++)e.element.tclass(e.toggle[i]);t()},r)}}},refresh:function(){setTimeout2("$refresh",function(){all.sort(function(e,t){if(e.$removed||!e.path)return 1;if(t.$removed||!t.path)return-1;var i=e.path.length,s=t.path.length;return i>s?-1:i===s?LCOMPARER(e.path,t.path):1})},200)},start:function(){var e=$(this.elm);$(document).ready(function(){$ready&&(clearTimeout($ready),load()),e.on("input","input[data-jc-bind],textarea[data-jc-bind]",function(){var e=this.$com;if(e&&!e.$removed&&e.getter&&!1!==this.$jckeypress){if(this.$jcevent=2,void 0===this.$jckeypress){var t=attrcom(this,"keypress");if(t?this.$jckeypress="true"===t:null!=e.config.$realtime?this.$jckeypress=!0===e.config.$realtime:e.config.$binding?this.$jckeypress=1===e.config.$binding:this.$jckeypress=MD.keypress,!1===this.$jckeypress)return}void 0===this.$jcdelay&&(this.$jcdelay=+(attrcom(this,"keypress-delay")||e.config.$delay||MD.delay)),void 0===this.$jconly&&(this.$jconly="true"===attrcom(this,"keypress-only")||!0===e.config.$keypress||2===e.config.$binding),this.$jctimeout&&clearTimeout(this.$jctimeout),this.$jctimeout=setTimeout(a,this.$jcdelay,this)}}),e.on("focus blur","input[data-jc-bind],textarea[data-jc-bind],select[data-jc-bind]",function(e){var t=this.$com;if(t&&!t.$removed&&t.getter)if("focusin"===e.type)this.$jcevent=1;else if(1===this.$jcevent)t.dirty(!1,!0),t.getter(this.value,3);else if(this.$jcskip)this.$jcskip=!1;else{var i=t.$skip;i&&(t.$skip=!1),t.setter(t.get(),t.path,2),i&&(t.$skip=i)}}),e.on("change","input[data-jc-bind],textarea[data-jc-bind],select[data-jc-bind]",function(){var e=this.$com;if(!this.$jconly&&e&&!e.$removed&&e.getter){if(!1===this.$jckeypress)return this.$jcskip=!0,void e.getter(this.value,!1);switch(this.tagName){case"SELECT":var t=this[this.selectedIndex];return this.$jcevent=2,e.dirty(!1,!0),void e.getter(t.value,!1);case"INPUT":if("checkbox"===this.type||"radio"===this.type)return this.$jcevent=2,e.dirty(!1,!0),void e.getter(this.checked,!1)}this.$jctimeout?(e.dirty(!1,!0),e.getter(this.value,!0),clearTimeout(this.$jctimeout),this.$jctimeout=0):(this.$jcskip=!0,e.setter&&e.setterX(e.get(),this.path,2))}}),setTimeout(compile,2),$domready=!0})},end:function(){}});return["cache","can","change","changed","create","default","disabled","errors","evaluate","exec","exec2","extend","format","get","inc","invalid","make","modify","modified","parser","push","reset","rewrite","set","set2","setx","skip","update","used","validate"].forEach(function(e){c.prototype[e]=function(){return this.storer[e].apply(this,arguments)}}),c});
//# sourceMappingURL=../sourcemaps/views/View.js.map
