{"version":3,"sources":["views/binding.js"],"names":["define","domx","parsebinder","pathmaker","view","$rebinder","binders","bindersnew","parse","el","b","scopes","binder","$jcbind","binderbind","path","absolutePath","ticks","arr","i","length","item","exec","storing","get","rebindbinder","clearTimeout","setTimeout","splice","init","com","data","clean","keys","Object","j","o","inDOM","e","$br","off","find"],"mappings":";;;;;;;AAAAA,QACC,gBACA,mBACA,wBACC,SAASC,EAAMC,EAAYC,GAyF5B,OAxFA,SAAiBC,GAChB,IAiBIC,EAjBAC,KACHC,KA0ED,OACCC,MAtED,SAAeC,EAAGC,EAAEC,GACnB,OAAOT,EAAYO,EAAGC,EAAEC,GACvBL,QAAYA,EACZC,WAAeA,KAoEhBJ,UAAcA,EACdS,OAjED,SAAgBH,GACf,OAAOA,EAAGI,SAiEVP,QAAYA,EACZQ,WA7DD,SAAoBC,EAAMC,EAAcC,GAEvC,IADA,IAAIC,EAAMZ,EAAQS,GACTI,EAAI,EAAGA,EAAID,EAAIE,OAAQD,IAAK,CACpC,IAAIE,EAAOH,EAAIC,GACXE,EAAKJ,QAAUA,IAClBI,EAAKJ,MAAQA,EACbI,EAAKC,KAAKlB,EAAKmB,QAAQC,IAAIH,EAAKN,MAAOC,MAwDzCS,aAnDD,WACCpB,GAAaqB,aAAarB,GAC1BA,EAAYsB,WAAW,WAEtB,IADA,IAAIT,EAAMX,EAAWqB,OAAO,GACnBT,EAAI,EAAGA,EAAID,EAAIE,OAAQD,IAAK,CACpC,IAAIE,EAAOH,EAAIC,GACVE,EAAKQ,OACLR,EAAKS,IACRT,EAAKC,KAAKD,EAAKS,IAAIC,KAAKV,EAAKN,MAAOM,EAAKN,MAEzCM,EAAKC,KAAKlB,EAAKmB,QAAQC,IAAIH,EAAKN,MAAOM,EAAKN,SAI7C,KAsCHiB,MAnCD,WACCC,KAAOC,OAAOD,KAAK3B,GACnB,IAAK,IAAIa,EAAI,EAAGA,EAAIc,KAAKb,OAAQD,IAAK,CACrCD,IAAMZ,EAAQ2B,KAAKd,IAEnB,IADA,IAAIgB,EAAI,IACK,CACZ,IAAIC,EAAIlB,IAAIiB,KACZ,IAAKC,EACJ,MACD,IAAInC,EAAKoC,MAAMD,EAAE3B,GAAG,IAApB,CAGA,IAAI6B,EAAIF,EAAE3B,GACL6B,EAAE,GAAGC,MACTD,EAAEE,MACFF,EAAEG,KAAK,KAAKD,MACZF,EAAE,GAAGC,IAAM,GAEZJ,IACAjB,IAAIU,OAAOO,EAAG,IAEVjB,IAAIE,eACDd,EAAQ2B,KAAKd","file":"../../views/binding.js","sourcesContent":["define([\r\n\t\"../utils/domx\",\r\n\t\"../binding/parse\",\r\n\t\"../binding/pathmaker\"\r\n],function(domx, parsebinder,pathmaker){\r\n\tfunction binding(view) {\r\n\t\tvar binders = {},\r\n\t\t\tbindersnew = [];\r\n\r\n\r\n \t\t//function parsebinder(el, b, scopes,\r\n\r\n\t\tfunction parse(el,b,scopes) {\r\n\t\t\treturn parsebinder(el,b,scopes,{\r\n\t\t\t\t\"binders\" : binders,\r\n\t\t\t\t\"bindersnew\" : bindersnew\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tfunction binder(el) {\r\n\t\t\treturn el.$jcbind; \r\n\t\t}\r\n\r\n\t\tvar $rebinder;\r\n\r\n\t\tfunction binderbind(path, absolutePath, ticks) {\r\n\t\t\tvar arr = binders[path];\r\n\t\t\tfor (var i = 0; i < arr.length; i++) {\r\n\t\t\t\tvar item = arr[i];\r\n\t\t\t\tif (item.ticks !== ticks) {\r\n\t\t\t\t\titem.ticks = ticks;\r\n\t\t\t\t\titem.exec(view.storing.get(item.path), absolutePath);  //GET no pathmake\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction rebindbinder() {\r\n\t\t\t$rebinder && clearTimeout($rebinder);\r\n\t\t\t$rebinder = setTimeout(function() {\r\n\t\t\t\tvar arr = bindersnew.splice(0);\r\n\t\t\t\tfor (var i = 0; i < arr.length; i++) {\r\n\t\t\t\t\tvar item = arr[i];\r\n\t\t\t\t\tif (!item.init) {\r\n\t\t\t\t\t\tif (item.com) {\r\n\t\t\t\t\t\t\titem.exec(item.com.data(item.path), item.path);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\titem.exec(view.storing.get(item.path), item.path);  // GET\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}, 50);\r\n\t\t}\r\n\r\n\t\tfunction clean() {\r\n\t\t\tkeys = Object.keys(binders);\r\n\t\t\tfor (var i = 0; i < keys.length; i++) {\r\n\t\t\t\tarr = binders[keys[i]];\r\n\t\t\t\tvar j = 0;\r\n\t\t\t\twhile (true) {\r\n\t\t\t\t\tvar o = arr[j++];\r\n\t\t\t\t\tif (!o)\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tif (domx.inDOM(o.el[0])) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar e = o.el;\r\n\t\t\t\t\tif (!e[0].$br) {\r\n\t\t\t\t\t\te.off();\r\n\t\t\t\t\t\te.find('*').off();\r\n\t\t\t\t\t\te[0].$br = 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tj--;\r\n\t\t\t\t\tarr.splice(j, 1);\r\n\t\t\t\t}\r\n\t\t\t\tif (!arr.length) {\r\n\t\t\t\t\tdelete binders[keys[i]];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\t\"parse\" : parse,\r\n\t\t\t\"pathmaker\" : pathmaker,\r\n\t\t\t\"binder\" : binder,\r\n\t\t\t\"binders\" : binders,\r\n\t\t\t\"binderbind\" : binderbind,\r\n\t\t\t\"rebindbinder\" : rebindbinder,\r\n\t\t\t\"clean\" : clean\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn binding;\r\n});"]}