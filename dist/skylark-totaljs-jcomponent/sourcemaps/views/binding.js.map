{"version":3,"sources":["views/binding.js"],"names":["define","domx","parsebinder","pathmaker","view","$rebinder","binders","bindersnew","parse","el","b","scopes","binder","$jcbind","rebindbinder","clearTimeout","setTimeout","arr","splice","i","length","item","init","com","exec","data","path","getx","clean","keys","Object","j","o","inDOM","e","$br","off","find"],"mappings":";;;;;;;AAAAA,QACC,gBACA,mBACA,wBACC,SAASC,EAAMC,EAAYC,GA2E5B,OA1EA,SAAiBC,GAChB,IAgBIC,EAhBAC,KACAC,KA8DJ,OACCC,MA3DD,SAAeC,EAAGC,EAAEC,GACnB,OAAOT,EAAYO,EAAGC,EAAEC,GACvBL,QAAYA,EACZC,WAAeA,KAyDhBJ,UAAcA,EACdS,OAtDD,SAAgBH,GACf,OAAOA,EAAGI,SAsDVC,aAjDD,WACCT,GAAaU,aAAaV,GAC1BA,EAAYW,WAAW,WAEtB,IADA,IAAIC,EAAMV,EAAWW,OAAO,GACnBC,EAAI,EAAGA,EAAIF,EAAIG,OAAQD,IAAK,CACpC,IAAIE,EAAOJ,EAAIE,GACVE,EAAKC,OACLD,EAAKE,IACRF,EAAKG,KAAKH,EAAKE,IAAIE,KAAKJ,EAAKK,MAAOL,EAAKK,MAEzCL,EAAKG,KAAKG,KAAKN,EAAKK,MAAOL,EAAKK,SAIjC,KAoCHE,MAjCD,WACCC,KAAOC,OAAOD,KAAKvB,GACnB,IAAK,IAAIa,EAAI,EAAGA,EAAIU,KAAKT,OAAQD,IAAK,CACrCF,IAAMX,EAAQuB,KAAKV,IAEnB,IADA,IAAIY,EAAI,IACK,CACZ,IAAIC,EAAIf,IAAIc,KACZ,IAAKC,EACJ,MACD,IAAI/B,EAAKgC,MAAMD,EAAEvB,GAAG,IAApB,CAGA,IAAIyB,EAAIF,EAAEvB,GACLyB,EAAE,GAAGC,MACTD,EAAEE,MACFF,EAAEG,KAAK,KAAKD,MACZF,EAAE,GAAGC,IAAM,GAEZJ,IACAd,IAAIC,OAAOa,EAAG,IAEVd,IAAIG,eACDd,EAAQuB,KAAKV","file":"../../views/binding.js","sourcesContent":["define([\r\n\t\"../utils/domx\",\r\n\t\"../binding/parse\",\r\n\t\"../binding/pathmaker\"\r\n],function(domx, parsebinder,pathmaker){\r\n\tfunction binding(view) {\r\n\t\tvar binders = [];\r\n\t\tvar bindersnew = [];\r\n\r\n \t\t//function parsebinder(el, b, scopes,\r\n\r\n\t\tfunction parse(el,b,scopes) {\r\n\t\t\treturn parsebinder(el,b,scopes,{\r\n\t\t\t\t\"binders\" : binders,\r\n\t\t\t\t\"bindersnew\" : bindersnew\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tfunction binder(el) {\r\n\t\t\treturn el.$jcbind; \r\n\t\t}\r\n\r\n\t\tvar $rebinder;\r\n\r\n\t\tfunction rebindbinder() {\r\n\t\t\t$rebinder && clearTimeout($rebinder);\r\n\t\t\t$rebinder = setTimeout(function() {\r\n\t\t\t\tvar arr = bindersnew.splice(0);\r\n\t\t\t\tfor (var i = 0; i < arr.length; i++) {\r\n\t\t\t\t\tvar item = arr[i];\r\n\t\t\t\t\tif (!item.init) {\r\n\t\t\t\t\t\tif (item.com) {\r\n\t\t\t\t\t\t\titem.exec(item.com.data(item.path), item.path);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\titem.exec(getx(item.path), item.path);  // GET\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}, 50);\r\n\t\t}\r\n\r\n\t\tfunction clean() {\r\n\t\t\tkeys = Object.keys(binders);\r\n\t\t\tfor (var i = 0; i < keys.length; i++) {\r\n\t\t\t\tarr = binders[keys[i]];\r\n\t\t\t\tvar j = 0;\r\n\t\t\t\twhile (true) {\r\n\t\t\t\t\tvar o = arr[j++];\r\n\t\t\t\t\tif (!o)\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tif (domx.inDOM(o.el[0])) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar e = o.el;\r\n\t\t\t\t\tif (!e[0].$br) {\r\n\t\t\t\t\t\te.off();\r\n\t\t\t\t\t\te.find('*').off();\r\n\t\t\t\t\t\te[0].$br = 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tj--;\r\n\t\t\t\t\tarr.splice(j, 1);\r\n\t\t\t\t}\r\n\t\t\t\tif (!arr.length) {\r\n\t\t\t\t\tdelete binders[keys[i]];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\t\"parse\" : parse,\r\n\t\t\t\"pathmaker\" : pathmaker,\r\n\t\t\t\"binder\" : binder,\r\n\t\t\t\"rebindbinder\" : rebindbinder,\r\n\t\t\t\"clean\" : clean\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn binding;\r\n});"]}