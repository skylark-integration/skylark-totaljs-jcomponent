{"version":3,"sources":["views/binding.js"],"names":["define","domx","parsebinder","view","binders","parse","el","b","scopes","binder","$jcbind","clean","keys","Object","i","length","arr","j","o","inDOM","e","$br","off","find","splice"],"mappings":";;;;;;;AAAAA,QACC,gBACA,oBACC,SAASC,EAAMC,GAmDhB,OAlDA,SAAiBC,GAChB,IAAIC,KAyCJ,OACCC,MAvCD,SAAeC,EAAGC,EAAEC,GACnB,OAAON,EAAYI,EAAGC,EAAEC,GACvBJ,QAAYA,KAsCbK,OAlCD,SAAgBH,GACf,OAAOA,EAAGI,SAkCVC,MA/BD,WACCC,KAAOC,OAAOD,KAAKR,GACnB,IAAK,IAAIU,EAAI,EAAGA,EAAIF,KAAKG,OAAQD,IAAK,CACrCE,IAAMZ,EAAQQ,KAAKE,IAEnB,IADA,IAAIG,EAAI,IACK,CACZ,IAAIC,EAAIF,IAAIC,KACZ,IAAKC,EACJ,MACD,IAAIjB,EAAKkB,MAAMD,EAAEZ,GAAG,IAApB,CAGA,IAAIc,EAAIF,EAAEZ,GACLc,EAAE,GAAGC,MACTD,EAAEE,MACFF,EAAEG,KAAK,KAAKD,MACZF,EAAE,GAAGC,IAAM,GAEZJ,IACAD,IAAIQ,OAAOP,EAAG,IAEVD,IAAID,eACDX,EAAQQ,KAAKE","file":"../../views/binding.js","sourcesContent":["define([\r\n\t\"../utils/domx\",\r\n\t\"../binding/parse\"\r\n],function(domx, parsebinder){\r\n\tfunction binding(view) {\r\n\t\tvar binders = [];\r\n \t\t//function parsebinder(el, b, scopes,\r\n\r\n\t\tfunction parse(el,b,scopes) {\r\n\t\t\treturn parsebinder(el,b,scopes,{\r\n\t\t\t\t\"binders\" : binders\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tfunction binder(el) {\r\n\t\t\treturn el.$jcbind; \r\n\t\t}\r\n\r\n\t\tfunction clean() {\r\n\t\t\tkeys = Object.keys(binders);\r\n\t\t\tfor (var i = 0; i < keys.length; i++) {\r\n\t\t\t\tarr = binders[keys[i]];\r\n\t\t\t\tvar j = 0;\r\n\t\t\t\twhile (true) {\r\n\t\t\t\t\tvar o = arr[j++];\r\n\t\t\t\t\tif (!o)\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tif (domx.inDOM(o.el[0])) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar e = o.el;\r\n\t\t\t\t\tif (!e[0].$br) {\r\n\t\t\t\t\t\te.off();\r\n\t\t\t\t\t\te.find('*').off();\r\n\t\t\t\t\t\te[0].$br = 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tj--;\r\n\t\t\t\t\tarr.splice(j, 1);\r\n\t\t\t\t}\r\n\t\t\t\tif (!arr.length) {\r\n\t\t\t\t\tdelete binders[keys[i]];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\t\"parse\" : parse,\r\n\t\t\t\"binder\" : binder,\r\n\t\t\t\"clean\" : clean\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn binding;\r\n});"]}