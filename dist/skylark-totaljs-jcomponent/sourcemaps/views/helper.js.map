{"version":3,"sources":["views/helper.js"],"names":["define","langx","domx","$","Component","configs","MD","keypress","view","ATTRCOM","ATTRURL","ATTRDATA","ATTRDEL","ATTRREL","ATTRSCOPE","ATTRCOMPILE","REGCOM","findControl","container","onElement","level","arr","childNodes","sub","inputable","i","length","el","tagName","getAttribute","push","attrcom","name","attrd","attrbind","attrscope","canCompile","html","innerHTML","test","findComponent","selector","callback","index","components","componenter","s","split","path","id","version","substring","indexOf","trim","lastIndexOf","undefined","stop","find","option","each","com","this","$com","$loaded","$removed","$name","$version","$pp","pathscope","findControl2","input","$inputcontrol","element","findUrl","kill","$el","removeData","attr","nested","Array","apply","nocompile","value","released","scope","results","closest","reesults","startView","elm","keypressdelay","self","$jctimeout","dirty","getter","on","$jckeypress","$jcevent","tmp","config","$realtime","$binding","$jcdelay","$delay","delay","$jconly","$keypress","clearTimeout","setTimeout","e","type","$jcskip","$skip","setter","get","sel","selectedIndex","checked","setterX"],"mappings":";;;;;;;AAAAA,QACC,WACA,gBACA,iBACA,0BACA,yBACC,SAASC,EAAOC,EAAMC,EAAEC,EAAUC,GAEnC,IAAIC,GACHC,UAAW,GAkYZ,OA9XA,SAAgBC,GACf,IAAIC,EAAU,YACbC,EAAU,gBACVC,EAAW,KACXC,EAAU,kBACVC,EAAU,mBACVC,EAAY,gBACZC,EAAc,iBAGXC,EAAS,mEAoBb,SAASC,EAAYC,EAAWC,EAAWC,GAE1C,IAAIC,EAAMH,EAAUI,WAChBC,KAEJrB,EAAKsB,UAAUN,IAAcC,EAAUD,GAE1B,MAATE,EACHA,EAAQ,EAERA,IAGD,IAAK,IAAIK,EAAI,EAAGC,EAASL,EAAIK,OAAQD,EAAIC,EAAQD,IAAK,CACrD,IAAIE,EAAKN,EAAII,GACb,GAAIE,GAAMA,EAAGC,UACZD,EAAGL,WAAWI,QAAyB,WAAfC,EAAGC,SAAsD,MAA9BD,EAAGE,aAAa,YAAsBN,EAAIO,KAAKH,GAC9FzB,EAAKsB,UAAUG,IAA0C,MAAnCA,EAAGE,aAAa,kBAA6C,IAAlBV,EAAUQ,IAC9E,OAIH,IAASF,EAAI,EAAGC,EAASH,EAAIG,OAAQD,EAAIC,EAAQD,IAEhD,IADAE,EAAKJ,EAAIE,MACuC,IAAtCR,EAAYU,EAAIR,EAAWC,GACpC,OAkHH,SAASW,EAAQJ,EAAIK,GAEpB,OADAA,EAAOA,EAAO,IAAMA,EAAO,GACpBL,EAAGE,aAAeF,EAAGE,aAAa,UAAYG,GAAQL,EAAGM,MAAM,KAAOD,GA+L9E,OACCD,QAAcA,EACdG,SA9LD,SAAkBP,GACjB,OAAOA,EAAGE,aAAa,cAAgBF,EAAGE,aAAa,SA8LvDM,UA3LD,SAAmBR,GAClB,OAAOA,EAAGE,aAAaf,IA2LvBsB,WAnJD,SAAoBT,GACnB,IAAIU,EAAOV,EAAGW,UAAYX,EAAGW,UAAYX,EACzC,OAAOX,EAAOuB,KAAKF,IAkJnBjC,UAAkBA,EAClBoC,cA3RD,SAAuBtB,EAAWuB,EAAUC,GAU3C,IATA,IAOIC,EAPAC,EAAapC,EAAKqC,YAAYD,WAE9BE,EAAKL,EAAWA,EAASM,MAAM,QAC/BC,EAAO,GACPhB,EAAO,GACPiB,EAAK,GACLC,EAAU,GAGLzB,EAAI,EAAGC,EAASoB,EAAEpB,OAAQD,EAAIC,EAAQD,IAC9C,OAAQqB,EAAErB,GAAG0B,UAAU,EAAG,IACzB,IAAK,IACJ,MACD,IAAK,IAEJH,EAAOF,EAAErB,GAAG0B,UAAU,GACtB,MACD,IAAK,KAIW,KADfR,GADAM,EAAKH,EAAErB,GAAG0B,UAAU,IACTC,QAAQ,QAElBJ,EAAOC,EAAGE,UAAUR,EAAQ,EAAGM,EAAGvB,OAAS,GAAG2B,OAC9CJ,EAAKA,EAAGE,UAAU,EAAGR,IAEtB,MACD,SAKgB,KAFfA,GADAX,EAAOc,EAAErB,IACI2B,QAAQ,QAGpBJ,EAAOhB,EAAKmB,UAAUR,EAAQ,EAAGX,EAAKN,OAAS,GAAG2B,OAClDrB,EAAOA,EAAKmB,UAAU,EAAGR,KAKX,KAFfA,EAAQX,EAAKsB,YAAY,QAGxBJ,EAAUlB,EAAKmB,UAAUR,EAAQ,GACjCX,EAAOA,EAAKmB,UAAU,EAAGR,IAO7B,IAAItB,EAAMqB,OAAWa,KACrB,GAAIrC,EAAW,CACd,IAAIsC,GAAO,EACXtC,EAAUuC,KAAK,IAAIjD,EAAKkD,OAAO,yBAAyB,KAAKC,KAAK,WACjE,IAAIC,EAAMC,KAAKC,KAEXN,IAASI,IAAQA,EAAIG,SAAWH,EAAII,UAAaf,GAAMW,EAAIX,KAAOA,GAAQjB,GAAQ4B,EAAIK,QAAUjC,GAAUkB,GAAWU,EAAIM,WAAahB,GAAaF,IAASY,EAAIO,KAAQP,EAAIZ,OAASA,KAAUY,EAAIQ,WAAeR,EAAIQ,UAAY,IAAMpB,IAAUY,EAAIZ,SAGtPN,GACmB,IAAlBA,EAASkB,KACZJ,GAAO,GAGRnC,EAAIS,KAAK8B,WAIX,IAASnC,EAAI,EAAGC,EAASkB,EAAWlB,OAAQD,EAAIC,EAAQD,IAAK,CAC5D,IAAImC,EAAMhB,EAAWnB,GACrB,MAAKmC,IAAQA,EAAIG,SAAWH,EAAII,UAAaf,GAAMW,EAAIX,KAAOA,GAAQjB,GAAQ4B,EAAIK,QAAUjC,GAAUkB,GAAWU,EAAIM,WAAahB,GAAcF,IAASY,EAAIO,KAAQP,EAAIZ,OAASA,KAAUY,EAAIQ,WAAeR,EAAIQ,UAAY,IAAMpB,IAAUY,EAAIZ,QAGnP,GAAIN,GACH,IAAsB,IAAlBA,EAASkB,GACZ,WAGDvC,EAAIS,KAAK8B,GAKZ,OAAOvC,GA2MPJ,YAAiBA,EACjBoD,aAtWD,SAAsBT,EAAKU,GAEtBV,EAAIW,eACHX,EAAIW,cAAgB,GAAM,EAC7BX,EAAIW,gBAMNtD,GADaqD,GAAgBV,EAAIY,SACd,GAAI,SAAS7C,GAC1BA,EAAGmC,MAAQnC,EAAGmC,OAASF,IAC3BjC,EAAGmC,KAAOF,EACVA,EAAIW,cAAgB,MA0VtBE,QAnJD,SAAiBvD,GAChB,OAAOf,EAAEO,EAAQQ,IAmJjBwD,KArSD,SAAc/C,GACb,IAAIgD,EAAMxE,EAAEwB,GACZgD,EAAIC,WAAWjE,GACfgE,EAAIE,KAAKjE,EAAS,QAAQ6C,KAAKhD,GAASoE,KAAKjE,EAAS,SAmStDkE,OAxTD,SAAgBnD,GACf,IACCN,KAYD,OAbUlB,EAAEwB,GAER8B,KAAKhD,GAASkD,KAAK,WACtB,IAAIhC,EAAKxB,EAAE0D,MACPD,EAAMjC,EAAG,GAAGmC,KACZF,IAAQjC,EAAGkD,KAAKjE,KACfgD,aAAemB,MAClB1D,EAAIS,KAAKkD,MAAM3D,EAAKuC,GAEpBvC,EAAIS,KAAK8B,MAILvC,GA2SP4D,UAzLD,SAAmBtD,EAAGuD,GACrB,YAAc3B,IAAV2B,EAEW,OADVA,EAAQ/E,EAAEwB,GAAIkD,KAAK9D,KACQ,UAAVmE,GAOrB/E,EAAEwB,GAAIkD,KAAK9D,EAAYmE,GAChBrB,OA+KRsB,SA3KD,SAAkBxD,EAAGuD,GACpB,YAAc3B,IAAV2B,EAEW,OADVA,EAAQ/E,EAAEwB,GAAIkD,KAAKhE,KACQ,UAAVqE,GAOrB/E,EAAEwB,GAAIkD,KAAKhE,EAAQqE,GACZrB,OAiKRuB,MAlMD,SAAezD,GACd,IAAI0D,EAAUlF,EAAEwB,GAAI2D,QAAQ,IAAMvE,EAAc,KAChD,GAAIsE,GAAWA,EAAQ3D,OACtB,OAAO6D,SAAS,IAgMjBC,UApJD,WACC,IAAIb,EAAMxE,EAAEK,EAAKiF,OAOjB,SAASC,EAAcC,GACtB,IAAI/B,EAAM+B,EAAK7B,KAEf6B,EAAKC,WAAa,EAElBhC,EAAIiC,OAAM,GAAO,GAEjBjC,EAAIkC,OAAOH,EAAKT,OAAO,GAIxBP,EAAIoB,GAAG,QAAS,6CAA8C,WAG7D,IACInC,EADOC,KACIC,KAEf,GAAKF,IAAOA,EAAII,UAAaJ,EAAIkC,SAA+B,IAHrDjC,KAGqCmC,YAAhD,CAMA,GATWnC,KAONoC,SAAW,OAES1C,IATdM,KASFmC,YAA2B,CACnC,IAAIE,EAAMnE,EAVA8B,KAUc,YASxB,GARIqC,EAXMrC,KAYJmC,YAAsB,SAARE,EACa,MAAxBtC,EAAIuC,OAAOC,UAbVvC,KAcJmC,aAAuC,IAAzBpC,EAAIuC,OAAOC,UACtBxC,EAAIuC,OAAOE,SAfVxC,KAgBJmC,YAAsC,IAAxBpC,EAAIuC,OAAOE,SAhBrBxC,KAkBJmC,YAAc1F,EAAGC,UACE,IAnBfsD,KAmBDmC,YACR,YAGoBzC,IAvBXM,KAuBFyC,WAvBEzC,KAwBLyC,WAAavE,EAxBR8B,KAwBsB,mBAAqBD,EAAIuC,OAAOI,QAAUjG,EAAGkG,aAGzDjD,IA3BVM,KA2BF4C,UA3BE5C,KA4BL4C,QAA6C,SAAnC1E,EA5BL8B,KA4BmB,mBAAwD,IAAzBD,EAAIuC,OAAOO,WAA8C,IAAxB9C,EAAIuC,OAAOE,UA5B9FxC,KA+BF+B,YACRe,aAhCU9C,KAgCQ+B,YAhCR/B,KAkCN+B,WAAagB,WAAWlB,EAlClB7B,KAkCsCyC,SAlCtCzC,SAqCZc,EAAIoB,GAAG,aAAc,kEAAmE,SAASc,GAEhG,IACIjD,EADOC,KACIC,KAEf,GAAKF,IAAOA,EAAII,UAAaJ,EAAIkC,OAGjC,GAAe,YAAXe,EAAEC,KANKjD,KAOLoC,SAAW,OACZ,GAAsB,IARhBpC,KAQGoC,SACbrC,EAAIiC,OAAM,GAAO,GACjBjC,EAAIkC,OAVMjC,KAUMqB,MAAO,QACjB,GAXIrB,KAWKkD,QAXLlD,KAYLkD,SAAU,MACT,CAEN,IAAIb,EAAMtC,EAAIoD,MACVd,IACHtC,EAAIoD,OAAQ,GACbpD,EAAIqD,OAAOrD,EAAIsD,MAAOtD,EAAIZ,KAAM,GAC5BkD,IACHtC,EAAIoD,MAAQd,MAKfvB,EAAIoB,GAAG,SAAU,kEAAmE,WAEnF,IACInC,EADOC,KACIC,KAEf,IAHWD,KAGF4C,SAAY7C,IAAOA,EAAII,UAAaJ,EAAIkC,OAAjD,CAGA,IAAyB,IANdjC,KAMFmC,YAIR,OAVUnC,KAQLkD,SAAU,OACfnD,EAAIkC,OATMjC,KASMqB,OAAO,GAIxB,OAbWrB,KAaEjC,SACZ,IAAK,SACJ,IAAIuF,EAfKtD,KAAAA,KAeWuD,eAIpB,OAnBSvD,KAgBJoC,SAAW,EAChBrC,EAAIiC,OAAM,GAAO,QACjBjC,EAAIkC,OAAOqB,EAAIjC,OAAO,GAEvB,IAAK,QACJ,GAAkB,aArBTrB,KAqBAiD,MAAqC,UArBrCjD,KAqB4BiD,KAIpC,OAzBQjD,KAsBHoC,SAAW,EAChBrC,EAAIiC,OAAM,GAAO,QACjBjC,EAAIkC,OAxBIjC,KAwBQwD,SAAS,GAxBjBxD,KA8BF+B,YACRhC,EAAIiC,OAAM,GAAO,GACjBjC,EAAIkC,OAhCMjC,KAgCMqB,OAAO,GACvByB,aAjCU9C,KAiCQ+B,YAjCR/B,KAkCL+B,WAAa,IAlCR/B,KAoCLkD,SAAU,EACfnD,EAAIqD,QAAUrD,EAAI0D,QAAQ1D,EAAIsD,MArCpBrD,KAqCgCb,KAAM","file":"../../views/helper.js","sourcesContent":["define([\r\n\t\"../langx\",\t\r\n\t\"../utils/domx\",\t\r\n\t\"../utils/query\",\t\r\n\t\"../components/Component\",\r\n\t\"../components/configs\"\r\n],function(langx, domx, $,Component,configs){\r\n\r\n\tvar MD = {\r\n\t\tkeypress : true,\r\n\r\n\t};\r\n\r\n\tfunction helper(view) {\r\n\t\tvar ATTRCOM = '[data-jc]',\r\n\t\t\tATTRURL = '[data-jc-url]',\r\n\t\t\tATTRDATA = 'jc',\r\n\t\t\tATTRDEL = 'data-jc-removed',\r\n\t\t\tATTRREL = 'data-jc-released',\r\n\t\t\tATTRSCOPE = 'data-jc-scope',\r\n\t\t\tATTRCOMPILE = 'data-jc-comile';\r\n\r\n\r\n\t\tvar REGCOM = /(data-jc|data-jc-url|data-jc-import|data-bind|bind)=|COMPONENT\\(/;\r\n\r\n\t\tfunction findControl2(com, input) {\r\n\r\n\t\t\tif (com.$inputcontrol) {\r\n\t\t\t\tif (com.$inputcontrol % 2 !== 0) {\r\n\t\t\t\t\tcom.$inputcontrol++;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar target = input ? input : com.element;\r\n\t\t\tfindControl(target[0], function(el) {\r\n\t\t\t\tif (!el.$com || el.$com !== com) {\r\n\t\t\t\t\tel.$com = com;\r\n\t\t\t\t\tcom.$inputcontrol = 1;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tfunction findControl(container, onElement, level) {\r\n\r\n\t\t\tvar arr = container.childNodes;\r\n\t\t\tvar sub = [];\r\n\r\n\t\t\tdomx.inputable(container) && onElement(container);\r\n\r\n\t\t\tif (level == null) {\r\n\t\t\t\tlevel = 0;\r\n\t\t\t} else {\r\n\t\t\t\tlevel++;\r\n\t\t\t}\r\n\r\n\t\t\tfor (var i = 0, length = arr.length; i < length; i++) {\r\n\t\t\t\tvar el = arr[i];\r\n\t\t\t\tif (el && el.tagName) {\r\n\t\t\t\t\tel.childNodes.length && el.tagName !== 'SCRIPT' && el.getAttribute('data-jc') == null && sub.push(el);\r\n\t\t\t\t\tif (domx.inputable(el) && el.getAttribute('data-jc-bind') != null && onElement(el) === false)\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfor (var i = 0, length = sub.length; i < length; i++) {\r\n\t\t\t\tel = sub[i];\r\n\t\t\t\tif (el && findControl(el, onElement, level) === false) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// find all nested component\r\n\t\tfunction nested(el) {\r\n\t\t\tvar $el = $(el),\r\n\t\t\t\tarr = [];\r\n\t\t\t$el.find(ATTRCOM).each(function() {\r\n\t\t\t\tvar el = $(this);\r\n\t\t\t\tvar com = el[0].$com;\r\n\t\t\t\tif (com && !el.attr(ATTRDEL)) {\r\n\t\t\t\t\tif (com instanceof Array) {\r\n\t\t\t\t\t\tarr.push.apply(arr, com);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tarr.push(com);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn arr;\r\n\t\t}\r\n\r\n\t\t// destory all nested component\r\n\t\tfunction kill(el) {\r\n\t\t\tvar $el = $(el);\r\n\t\t\t$el.removeData(ATTRDATA);\r\n\t\t\t$el.attr(ATTRDEL, 'true').find(ATTRCOM).attr(ATTRDEL, 'true');\r\n\t\t}\r\n\r\n\t\tfunction findComponent(container, selector, callback) {\r\n\t\t\tvar components = view.componenter.components;\r\n\r\n\t\t\tvar s = (selector ? selector.split(' ') : []);\r\n\t\t\tvar path = '';\r\n\t\t\tvar name = '';\r\n\t\t\tvar id = '';\r\n\t\t\tvar version = '';\r\n\t\t\tvar index;\r\n\r\n\t\t\tfor (var i = 0, length = s.length; i < length; i++) {\r\n\t\t\t\tswitch (s[i].substring(0, 1)) {\r\n\t\t\t\t\tcase '*':\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase '.':\r\n\t\t\t\t\t\t// path\r\n\t\t\t\t\t\tpath = s[i].substring(1);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase '#':\r\n\t\t\t\t\t\t// id;\r\n\t\t\t\t\t\tid = s[i].substring(1);\r\n\t\t\t\t\t\tindex = id.indexOf('[');\r\n\t\t\t\t\t\tif (index !== -1) {\r\n\t\t\t\t\t\t\tpath = id.substring(index + 1, id.length - 1).trim();\r\n\t\t\t\t\t\t\tid = id.substring(0, index);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t// name\r\n\t\t\t\t\t\tname = s[i];\r\n\t\t\t\t\t\tindex = name.indexOf('[');\r\n\r\n\t\t\t\t\t\tif (index !== -1) {\r\n\t\t\t\t\t\t\tpath = name.substring(index + 1, name.length - 1).trim();\r\n\t\t\t\t\t\t\tname = name.substring(0, index);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tindex = name.lastIndexOf('@');\r\n\r\n\t\t\t\t\t\tif (index !== -1) {\r\n\t\t\t\t\t\t\tversion = name.substring(index + 1);\r\n\t\t\t\t\t\t\tname = name.substring(0, index);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar arr = callback ? undefined : [];\r\n\t\t\tif (container) {\r\n\t\t\t\tvar stop = false;\r\n\t\t\t\tcontainer.find('['+view.option(\"elmAttrNames.com.base\")+']').each(function() { // [data-jc]\r\n\t\t\t\t\tvar com = this.$com;\r\n\r\n\t\t\t\t\tif (stop || !com || !com.$loaded || com.$removed || (id && com.id !== id) || (name && com.$name !== name) || (version && com.$version !== version) || (path && (com.$pp || (com.path !== path && (!com.pathscope || ((com.pathscope + '.' + path) !== com.path))))))\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\tif (callback) {\r\n\t\t\t\t\t\tif (callback(com) === false) {\r\n\t\t\t\t\t\t\tstop = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tarr.push(com);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tfor (var i = 0, length = components.length; i < length; i++) { // M.components.length\r\n\t\t\t\t\tvar com = components[i]; // M.components[i]\r\n\t\t\t\t\tif (!com || !com.$loaded || com.$removed || (id && com.id !== id) || (name && com.$name !== name) || (version && com.$version !== version) || ((path && (com.$pp || (com.path !== path && (!com.pathscope || ((com.pathscope + '.' + path) !== com.path)))))))\r\n\t\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\t\tif (callback) {\r\n\t\t\t\t\t\tif (callback(com) === false) {\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tarr.push(com);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn arr;\r\n\t\t}\r\n\r\n\t\tfunction attrcom(el, name) {\r\n\t\t\tname = name ? '-' + name : '';\r\n\t\t\treturn el.getAttribute ? el.getAttribute('data-jc' + name) : el.attrd('jc' + name);\r\n\t\t}\r\n\r\n\t\tfunction attrbind(el) {\r\n\t\t\treturn el.getAttribute('data-bind') || el.getAttribute('bind');\r\n\t\t}\r\n\r\n\t\tfunction attrscope(el) {\r\n\t\t\treturn el.getAttribute(ATTRSCOPE);\r\n\t\t}\r\n\r\n\t\tfunction scope(el) {\r\n\t\t\tvar results = $(el).closest('[' + ATTRCOMPILE + ']');\r\n\t\t\tif (results && results.length) {\r\n\t\t\t\treturn reesults[0];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction nocompile(el,value) {\r\n\t\t\tif (value === undefined) {\r\n\t\t\t\tvar value = $(el).attr(ATTRCOMPILE) ;\r\n\t\t\t\tif (value === '0' || value === 'false') {\r\n\t\t\t\t\t// no compile\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\t$(el).attr(ATTRCOMPILE,value);\r\n\t\t\t\treturn this; \r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction released(el,value) {\r\n\t\t\tif (value === undefined) {\r\n\t\t\t\tvar value = $(el).attr(ATTRREL) ;\r\n\t\t\t\tif (value === '0' || value === 'false') {\r\n\t\t\t\t\t// no compile\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\t$(el).attr(ATTRREL,value);\r\n\t\t\t\treturn this; \r\n\t\t\t}\r\n\t\t}\t\t\r\n\r\n\t\tfunction canCompile(el) {\r\n\t\t\tvar html = el.innerHTML ? el.innerHTML : el;\r\n\t\t\treturn REGCOM.test(html);\r\n\t\t}\r\n\r\n\t\tfunction findUrl(container) {\r\n\t\t\treturn $(ATTRURL,container);\r\n\t\t}\r\n\r\n\r\n\t\tfunction startView() {\r\n\t\t\tvar $el = $(view.elm());\r\n\r\n\t\t\t//if ($ready) {\r\n\t\t\t//\tclearTimeout($ready);\r\n\t\t\t//\tload();\r\n\t\t\t//}\r\n\r\n\t\t\tfunction keypressdelay(self) {\r\n\t\t\t\tvar com = self.$com;\r\n\t\t\t\t// Reset timeout\r\n\t\t\t\tself.$jctimeout = 0;\r\n\t\t\t\t// It's not dirty\r\n\t\t\t\tcom.dirty(false, true);\r\n\t\t\t\t// Binds a value\r\n\t\t\t\tcom.getter(self.value, true);\r\n\t\t\t}\r\n\t\t\t\r\n\r\n\t\t\t$el.on('input', 'input[data-jc-bind],textarea[data-jc-bind]', function() {\r\n\r\n\t\t\t\t// realtime binding\r\n\t\t\t\tvar self = this;\r\n\t\t\t\tvar com = self.$com;\r\n\r\n\t\t\t\tif (!com || com.$removed || !com.getter || self.$jckeypress === false) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tself.$jcevent = 2;\r\n\r\n\t\t\t\tif (self.$jckeypress === undefined) {\r\n\t\t\t\t\tvar tmp = attrcom(self, 'keypress');\r\n\t\t\t\t\tif (tmp)\r\n\t\t\t\t\t\tself.$jckeypress = tmp === 'true';\r\n\t\t\t\t\telse if (com.config.$realtime != null)\r\n\t\t\t\t\t\tself.$jckeypress = com.config.$realtime === true;\r\n\t\t\t\t\telse if (com.config.$binding)\r\n\t\t\t\t\t\tself.$jckeypress = com.config.$binding === 1;\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tself.$jckeypress = MD.keypress;\r\n\t\t\t\t\tif (self.$jckeypress === false)\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (self.$jcdelay === undefined) {\r\n\t\t\t\t\tself.$jcdelay = +(attrcom(self, 'keypress-delay') || com.config.$delay || MD.delay);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (self.$jconly === undefined) {\r\n\t\t\t\t\tself.$jconly = attrcom(self, 'keypress-only') === 'true' || com.config.$keypress === true || com.config.$binding === 2;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (self.$jctimeout) {\r\n\t\t\t\t\tclearTimeout(self.$jctimeout);\t\r\n\t\t\t\t} \r\n\t\t\t\tself.$jctimeout = setTimeout(keypressdelay, self.$jcdelay, self);\r\n\t\t\t});\r\n\r\n\t\t\t$el.on('focus blur', 'input[data-jc-bind],textarea[data-jc-bind],select[data-jc-bind]', function(e) {\r\n\r\n\t\t\t\tvar self = this;\r\n\t\t\t\tvar com = self.$com;\r\n\r\n\t\t\t\tif (!com || com.$removed || !com.getter)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tif (e.type === 'focusin')\r\n\t\t\t\t\tself.$jcevent = 1;\r\n\t\t\t\telse if (self.$jcevent === 1) {\r\n\t\t\t\t\tcom.dirty(false, true);\r\n\t\t\t\t\tcom.getter(self.value, 3);\r\n\t\t\t\t} else if (self.$jcskip) {\r\n\t\t\t\t\tself.$jcskip = false;\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// formatter\r\n\t\t\t\t\tvar tmp = com.$skip;\r\n\t\t\t\t\tif (tmp)\r\n\t\t\t\t\t\tcom.$skip = false;\r\n\t\t\t\t\tcom.setter(com.get(), com.path, 2);\r\n\t\t\t\t\tif (tmp) {\r\n\t\t\t\t\t\tcom.$skip = tmp;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t$el.on('change', 'input[data-jc-bind],textarea[data-jc-bind],select[data-jc-bind]', function() {\r\n\r\n\t\t\t\tvar self = this;\r\n\t\t\t\tvar com = self.$com;\r\n\r\n\t\t\t\tif (self.$jconly || !com || com.$removed || !com.getter)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tif (self.$jckeypress === false) {\r\n\t\t\t\t\t// bind + validate\r\n\t\t\t\t\tself.$jcskip = true;\r\n\t\t\t\t\tcom.getter(self.value, false);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tswitch (self.tagName) {\r\n\t\t\t\t\tcase 'SELECT':\r\n\t\t\t\t\t\tvar sel = self[self.selectedIndex];\r\n\t\t\t\t\t\tself.$jcevent = 2;\r\n\t\t\t\t\t\tcom.dirty(false, true);\r\n\t\t\t\t\t\tcom.getter(sel.value, false);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\tcase 'INPUT':\r\n\t\t\t\t\t\tif (self.type === 'checkbox' || self.type === 'radio') {\r\n\t\t\t\t\t\t\tself.$jcevent = 2;\r\n\t\t\t\t\t\t\tcom.dirty(false, true);\r\n\t\t\t\t\t\t\tcom.getter(self.checked, false);\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (self.$jctimeout) {\r\n\t\t\t\t\tcom.dirty(false, true);\r\n\t\t\t\t\tcom.getter(self.value, true);\r\n\t\t\t\t\tclearTimeout(self.$jctimeout);\r\n\t\t\t\t\tself.$jctimeout = 0;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tself.$jcskip = true;\r\n\t\t\t\t\tcom.setter && com.setterX(com.get(), self.path, 2);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t//setTimeout(compile, 2);\r\n\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\t\"attrcom\" \t\t: attrcom,\r\n\t\t\t\"attrbind\"      : attrbind,\r\n\t\t\t\"attrscope\"     : attrscope,\r\n\t\t\t\"canCompile\"    : canCompile,\r\n\t\t\t\"Component\"     : Component,\r\n\t\t\t\"findComponent\" : findComponent,\r\n\t\t\t\"findControl\" \t: findControl,\r\n\t\t\t\"findControl2\" \t: findControl2,\r\n\t\t\t\"findUrl\"       : findUrl,\r\n\t\t\t\"kill\"          : kill,\r\n\t\t\t\"nested\"        : nested,\r\n\t\t\t\"nocompile\" \t: nocompile,\r\n\t\t\t\"released\" \t\t: released,\r\n\t\t\t\"scope\" \t\t: scope,\r\n\t\t\t\"startView\"     : startView\r\n\t\t};\r\n\r\n\t}\r\n\r\n\treturn helper;\r\n});"]}