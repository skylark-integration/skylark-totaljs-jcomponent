{"version":3,"sources":["views/compiler.js"],"names":["define","langx","$","domx","http","registry","plugins","statics","MD","fallback","fallbackcache","version","clean","clear","setInterval","temp","paths","view","helper","storing","eventer","scoper","is","componentater","dependencies","declaration","callback","obj","el","importing","wait","length","item","next","isFunction","import2","indexOf","setTimeout","init","collection","type","tagName","inputable","$input","element","findControl2","released","$released","componenter","components","push","initing","canCompile","compile","request","onComponent","name","dom","level","scope","meta","split","trim","has","remove","instances","all","y","keys","i","key","lazy","substring","toLowerCase","lastIndexOf","versions","com","lo","namea","lazycom","state","Component","parent","parentNode","$com","pc","owner","$children","nodeName","global","shared","p","attrcom","_id","$noscope","setPath","pathmaker","config","reconfigure","NOOP","tmp","$init","id","siblings","$lazy","configs","con","fn","caches","current","call","attrd","code","path","charCodeAt","$pp","output","initscopes","replace","$$path","pathscope","template","warn","format","isString","data","prerender","make","c","html","k","HASH","a","get","makeurl","response","x","imports","container","immediate","self","this","recompile","arr","shift","count","findUrl","_elm","each","t","$downloaded","url","once","toggle","expire","importcache","async","ajaxCache","removescripts","importscripts","importstyles","toggles","download","pending","crawler","binding","document","body","nocompile","scopes","b","binders","$jcbind","attrbind","childNodes","sub","undefined","parsebinder","rebindbinder","nextpending","tclass","ready"],"mappings":"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","file":"../../views/compiler.js","sourcesContent":["define([\r\n\t\"../langx\",\r\n\t\"../utils/query\",\r\n\t\"../utils/domx\",\r\n\t\"../utils/http\",\r\n\t\"../components/registry\",\r\n\t\"../plugins\"\r\n],function(langx, $, domx, http, registry,plugins){\r\n\tvar statics = langx.statics;\r\n\r\n\tvar MD = {\r\n\t\tfallback : 'https://cdn.componentator.com/j-{0}.html',\r\n\t\tfallbackcache : '',\r\n\t\tversion : 'v16'\r\n\t};\r\n\r\n\tvar fallback = { $: 0 }; // $ === count of new items in fallback\r\n\r\n\tsetInterval(function() {\r\n\t\ttemp = {};\r\n\t\tpaths = {};\r\n//\t\tcleaner();\r\n\t}, (1000 * 60) * 5);\t\r\n\r\n\tfunction clean2() {\r\n\t\tclear();\r\n\t\tclean();\r\n\t}\r\n\r\n\tfunction clean() {\r\n\t\tvar is = false;\r\n\t\tvar index;\r\n\r\n\r\n\r\n\t\tclear('find');\r\n\r\n\r\n\t\t//W.DATETIME = W.NOW = new Date();\r\n\t\t//var now = W.NOW.getTime();\r\n\t\tvar is2 = false;\r\n\t\tvar is3 = false;\r\n\r\n\r\n\r\n\r\n\t\tif (is) {\r\n\t\t\trefresh();\r\n\t\t\tsetTimeout(compile, 2000);\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tsetInterval(function() {\r\n//\t\ttemp = {};\r\n//\t\tpaths = {};\r\n\t\tclean();\r\n\t}, (1000 * 60) * 5);\r\n\r\n\r\n    /*\r\n    for (var i = 0, length = all.length; i < length; i++) { // M.components.length\r\n        var m = all[i]; // M.components[i];\r\n        if (!m.$removed || name === m.name){\r\n            config && m.reconfigure(config, undefined, true);\r\n            declaration.call(m, m, m.config);\r\n        }\r\n    }\r\n\r\n    RECOMPILE();\r\n    */\r\n\r\n\r\n\r\n\tfunction compiler(view) {\r\n\t\tvar helper = view.helper,\r\n\t\t\teventer = view.eventer,\r\n\t\t\tstoring = view.storing,\r\n\t\t\tscoper = view.scoper,\r\n\t\t\tcomponentater = view.componentater;\r\n    \r\n\t\tvar is = false;\r\n\t\t\trecompile = false,\r\n\t\t\timporting = 0,\r\n\t\t\tpending = [],\r\n\t\t\tiniting = [],\r\n\t\t\timports = {},\r\n\t\t\ttoggles = [],\r\n\t\t\tready = [],\r\n\t\t\tlazycom = {},\r\n\t\t\tcaches = {\r\n\t\t\t\tcurrent : {}\r\n\t\t\t};\r\n\r\n\t\t//C.get = get; // paths\r\n\r\n\t\t// ===============================================================\r\n\t\t// PRIVATE FUNCTIONS\r\n\t\t// ===============================================================\r\n\t\t//var $ready = setTimeout(load, 2);\r\n\t\tvar $loaded = false;\r\n\r\n\t\tvar fallbackPending = [];\r\n\r\n\t\tfunction download(view) {\r\n\r\n\t\t\tvar arr = [];\r\n\t\t\tvar count = 0;\r\n\r\n\t\t\thelper.findUrl(view._elm).each(function() {\r\n\r\n\t\t\t\tvar t = this;\r\n\t\t\t\tvar el = $(t);\r\n\r\n\t\t\t\tif (t.$downloaded) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tt.$downloaded = 1;\r\n\t\t\t\tvar url = helper.attrcom(el, 'url');\r\n\r\n\t\t\t\t// Unique\r\n\t\t\t\tvar once = url.substring(0, 5).toLowerCase() === 'once ';\r\n\t\t\t\tif (url.substring(0, 1) === '!' || once) {\r\n\t\t\t\t\tif (once) {\r\n\t\t\t\t\t\turl = url.substring(5);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\turl = url.substring(1);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (statics[url]) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tstatics[url] = 2;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar item = {};\r\n\t\t\t\titem.url = url;\r\n\t\t\t\titem.element = el;\r\n\t\t\t\titem.callback = helper.attrcom(el, 'init');\r\n\t\t\t\titem.path = helper.attrcom(el, 'path');\r\n\t\t\t\titem.toggle = (helper.attrcom(el, 'class') || '').split(' ');\r\n\t\t\t\titem.expire = helper.attrcom(el, 'cache') || MD.importcache;\r\n\t\t\t\tarr.push(item);\r\n\t\t\t});\r\n\r\n\t\t\tif (!arr.length) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar canCompile = false;\r\n\t\t\timporting++;\r\n\r\n\t\t\tlangx.async(arr, function(item, next) {\r\n\r\n\t\t\t\tvar key = helper.makeurl(item.url);\r\n\t\t\t\tvar can = false;\r\n\r\n\t\t\t\thttp.ajaxCache('GET ' + item.url, null, function(response) {\r\n\r\n\t\t\t\t\tkey = '$import' + key;\r\n\r\n\t\t\t\t\tcaches.current.element = item.element[0];\r\n\r\n\t\t\t\t\tif (statics[key]) {\r\n\t\t\t\t\t\tresponse = domx.removescripts(response);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tresponse = domx.importscripts(importstyles(response));\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tcan = response && helper.canCompile(response);\r\n\r\n\t\t\t\t\tif (can) {\r\n\t\t\t\t\t\tcanCompile = true;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\titem.element.html(response);\r\n\t\t\t\t\tstatics[key] = true;\r\n\t\t\t\t\titem.toggle.length && item.toggle[0] && toggles.push(item);\r\n\r\n\t\t\t\t\tif (item.callback && ! helper.attrcom(item.element)) {\r\n\t\t\t\t\t\tvar callback = storing.get(item.callback);\r\n\t\t\t\t\t\tif (langx.isFunction(callback)) {\r\n\t\t\t\t\t\t\tcallback(item.element);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tcaches.current.element = null;\r\n\t\t\t\t\tcount++;\r\n\t\t\t\t\tnext();\r\n\r\n\t\t\t\t}, item.expire);\r\n\r\n\t\t\t}, function() {\r\n\t\t\t\timporting--;\r\n\t\t\t\tcomponenter.clean(); // clear('valid', 'dirty', 'find');\r\n\t\t\t\tif (count && canCompile){\r\n\t\t\t\t\tview.compile();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tfunction downloadFallback() {\r\n\t\t\tif (importing) {\r\n\t\t\t\tsetTimeout(downloadFallback, 1000);\r\n\t\t\t} else {\r\n\t\t\t\tlangx.setTimeout2('$fallback', function() {\r\n\t\t\t\t\tfallbackPending.splice(0).wait(function(item, next) {\r\n\t\t\t\t\t\tif (registry[item]){ // M.$components\r\n\t\t\t\t\t\t\tnext();\r\n\t\t\t\t\t\t}else {\r\n\t\t\t\t\t\t\twarn('Downloading: ' + item);\r\n\t\t\t\t\t\t\thttp.importCache(MD.fallback.format(item), MD.fallbackcache, next);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, 3);\r\n\t\t\t\t}, 100);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction nextPending() {\r\n\r\n\t\t\tvar next = pending.shift();\r\n\t\t\tif (next) {\r\n\t\t\t\tnext();\r\n\t\t\t} else if ($domready) {\r\n\t\t\t\tif (ready) {\r\n\t\t\t\t\tis = false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (MD.fallback && fallback.$ && !importing) {\r\n\t\t\t\t\tvar arr = Object.keys(fallback);\r\n\t\t\t\t\tfor (var i = 0; i < arr.length; i++) {\r\n\t\t\t\t\t\tif (arr[i] !== '$') {\r\n\t\t\t\t\t\t\tvar num = fallback[arr[i]];\r\n\t\t\t\t\t\t\tif (num === 1) {\r\n\t\t\t\t\t\t\t\tfallbackPending.push(arr[i].toLowerCase());\r\n\t\t\t\t\t\t\t\tfallback[arr[i]] = 2;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfallback.$ = 0;\r\n\t\t\t\t\tif (fallbackPending.length) {\r\n\t\t\t\t\t\tdownloadFallback();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\tfunction dependencies(declaration, callback, obj, el) {\r\n\r\n\t\t\tif (declaration.importing) {\r\n\t\t\t\tlangx.wait(function() {\r\n\t\t\t\t\treturn declaration.importing !== true;\r\n\t\t\t\t}, function() {\r\n\t\t\t\t\tcallback(obj, el);\r\n\t\t\t\t});\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (!declaration.dependencies || !declaration.dependencies.length) {\r\n\t\t\t\tsetTimeout(function(callback, obj, el) {\r\n\t\t\t\t\tcallback(obj, el);\r\n\t\t\t\t}, 5, callback, obj, el);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tdeclaration.importing = true;\r\n\t\t\tdeclaration.dependencies.wait(function(item, next) {\r\n\t\t\t\tif (langx.isFunction(item)) {\r\n\t\t\t\t\titem(next);\r\n\t\t\t\t} else {\r\n\t\t\t\t\thttp.import2((item.indexOf('<') === -1 ? 'once ' : '') + item, next);  // IMPORT\r\n\t\t\t\t}\r\n\t\t\t}, function() {\r\n\t\t\t\tdeclaration.importing = false;\r\n\t\t\t\tcallback(obj, el);\r\n\t\t\t}, 3);\r\n\t\t}\r\n\r\n\t\tfunction init(el, obj) {\r\n\r\n\t\t\tvar dom = el[0];\r\n\t\t\tvar type = dom.tagName;\r\n\t\t\tvar collection;\r\n\r\n\t\t\t// autobind\r\n\t\t\tif (domx.inputable(type)) {\r\n\t\t\t\tobj.$input = true;\r\n\t\t\t\tcollection = obj.element;\r\n\t\t\t} else {\r\n\t\t\t\tcollection = el;\r\n\t\t\t}\r\n\r\n\t\t\thelper.findControl2(obj, collection);\r\n\r\n\t\t\tobj.released && obj.released(obj.$released);\r\n\t\t\tcomponenter.components.push(obj); // M.components.push(obj)\r\n\t\t\tiniting.push(obj);\r\n\t\t\tif (type !== 'BODY' && helper.canCompile(el[0])) {//REGCOM.test(el[0].innerHTML)) {\r\n\t\t\t\tcompile(el);\r\n\t\t\t}\r\n\t\t\trequest(); // ready\r\n\t\t}\t\t\r\n\r\n\r\n\t\t// parse dom element and create a component instance\r\n\t\tfunction onComponent(name, dom, level, scope) {\r\n\r\n\t\t\tvar el = $(dom);\r\n\t\t\tvar meta = name.split(/_{2,}/);\r\n\t\t\tif (meta.length) {\r\n\t\t\t\tmeta = meta.trim(true);\r\n\t\t\t\tname = meta[0];\r\n\t\t\t} else\r\n\t\t\t\tmeta = null;\r\n\r\n\t\t\thas = true;\r\n\r\n\t\t\t// Check singleton instance\r\n\t\t\tif (statics['$ST_' + name]) {\r\n\t\t\t\tdomx.remove(el);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar instances = [];\r\n\t\t\tvar all = name.split(',');\r\n\r\n\t\t\tfor (var y = 0; y < all.length; y++) {\r\n\r\n\t\t\t\tvar name = all[y].trim();\r\n\t\t\t\tvar is = false;\r\n\r\n\t\t\t\tif (name.indexOf('|') !== -1) {\r\n\r\n\t\t\t\t\t// Multiple versions\r\n\t\t\t\t\tvar keys = name.split('|');\r\n\t\t\t\t\tfor (var i = 0; i < keys.length; i++) {\r\n\t\t\t\t\t\tvar key = keys[i].trim();\r\n\t\t\t\t\t\tif (key &&  registry[key]) { // M.$components\r\n\t\t\t\t\t\t\tname = key;\r\n\t\t\t\t\t\t\tis = true;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (!is) {\r\n\t\t\t\t\t\tname = keys[0].trim();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar lazy = false;\r\n\r\n\t\t\t\tif (name.substring(0, 5).toLowerCase() === 'lazy ') {\r\n\t\t\t\t\tname = name.substring(5);\r\n\t\t\t\t\tlazy = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!is && name.lastIndexOf('@') === -1) {\r\n\t\t\t\t\tif (versions[name]) {\r\n\t\t\t\t\t\tname += '@' + versions[name];\r\n\t\t\t\t\t} else if (MD.version) {\r\n\t\t\t\t\t\tname += '@' + MD.version;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar com = registry[name]; // M.$components[name];\r\n\t\t\t\tvar lo = null;\r\n\r\n\t\t\t\tif (lazy && name) {\r\n\t\t\t\t\tvar namea = name.substring(0, name.indexOf('@'));\r\n\t\t\t\t\tlo = lazycom[name];\r\n\t\t\t\t\tif (!lo) {\r\n\t\t\t\t\t\tif (namea && name !== namea) {\r\n\t\t\t\t\t\t\tlazycom[name] = lazycom[namea] = { state: 1 };\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tlazycom[name] = { state: 1 };\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (lo.state === 1) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!com) {\r\n\r\n\t\t\t\t\tif (!fallback[name]) {\r\n\t\t\t\t\t\tfallback[name] = 1;\r\n\t\t\t\t\t\tfallback.$++;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar x = helper.attrcom(el, 'import');\r\n\t\t\t\t\tif (!x) {\r\n\t\t\t\t\t\t!statics['$NE_' + name] && (statics['$NE_' + name] = true);\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (imports[x] === 1) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (imports[x] === 2) {\r\n\t\t\t\t\t\t!statics['$NE_' + name] && (statics['$NE_' + name] = true);\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\timports[x] = 1;\r\n\t\t\t\t\timporting++;\r\n\r\n\t\t\t\t\thttp.import2(x, function() {\r\n\t\t\t\t\t\timporting--;\r\n\t\t\t\t\t\timports[x] = 2;\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (fallback[name] === 1) {\r\n\t\t\t\t\tfallback.$--;\r\n\t\t\t\t\tdelete fallback[name];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar obj = new helper.Component(com.name,view);\r\n\t\t\t\tvar parent = dom.parentNode;\r\n\r\n\t\t\t\twhile (true) {\r\n\t\t\t\t\tif (parent.$com) {\r\n\t\t\t\t\t\tvar pc = parent.$com;\r\n\t\t\t\t\t\tobj.owner = pc;\r\n\t\t\t\t\t\tif (pc.$children) {\r\n\t\t\t\t\t\t\tpc.$children++;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tpc.$children = 1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t} else if (parent.nodeName === 'BODY') {\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tparent = parent.parentNode;\r\n\t\t\t\t\tif (parent == null) {\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tobj.global = com.shared;\r\n\t\t\t\tobj.element = el;\r\n\t\t\t\tobj.dom = dom;\r\n\r\n\t\t\t\tvar p = helper.attrcom(el, 'path') || (meta ? meta[1] === 'null' ? '' : meta[1] : '') || obj._id;\r\n\r\n\t\t\t\tif (p.substring(0, 1) === '%') {\r\n\t\t\t\t\tobj.$noscope = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tobj.setPath(pathmaker(p, true), 1);\r\n\t\t\t\tobj.config = {};\r\n\r\n\t\t\t\t// Default config\r\n\t\t\t\tif (com.config) {\r\n\t\t\t\t\tobj.reconfigure(com.config, NOOP);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar tmp = helper.attrcom(el, 'config') || (meta ? meta[2] === 'null' ? '' : meta[2] : ''); // // data-jc-config\r\n\t\t\t\tif (tmp) {\r\n\t\t\t\t\tobj.reconfigure(tmp, NOOP);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!obj.$init) {\r\n\t\t\t\t\tobj.$init = helper.attrcom(el, 'init') || null; // data-jc-init\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!obj.type) {\r\n\t\t\t\t\tobj.type = helper.attrcom(el, 'type') || '';   // data-jc-type\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!obj.id) {\r\n\t\t\t\t\tobj.id = helper.attrcom(el, 'id') || obj._id;  // data-jc-id\r\n\t\t\t\t}\r\n\r\n\t\t\t\tobj.siblings = all.length > 1;\r\n\t\t\t\tobj.$lazy = lo;\r\n\r\n\t\t\t\tfor (var i = 0; i < configs.length; i++) {\r\n\t\t\t\t\tvar con = configs[i];\r\n\t\t\t\t\tcon.fn(obj) && obj.reconfigure(con.config, NOOP);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcaches.current.com = obj;\r\n\t\t\t\tcom.declaration.call(obj, obj, obj.config);\r\n\t\t\t\tcaches.current.com = null;\r\n\r\n\t\t\t\tmeta[3] && el.attrd('jc-value', meta[3]);\r\n\r\n\t\t\t\tif (obj.init && !statics[name]) {\r\n\t\t\t\t\tstatics[name] = true;\r\n\t\t\t\t\tobj.init();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdom.$com = obj;\r\n\r\n\t\t\t\tif (!obj.$noscope) {\r\n\t\t\t\t\tobj.$noscope = helper.attrcom(el, 'noscope') === 'true';   // data-jc-noscope\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar code = obj.path ? obj.path.charCodeAt(0) : 0;\r\n\t\t\t\tif (!obj.$noscope && scope.length && !obj.$pp) {\r\n\r\n\t\t\t\t\tvar output = scoper.initscopes(scope);\r\n\r\n\t\t\t\t\tif (obj.path && code !== 33 && code !== 35) {\r\n\t\t\t\t\t\tobj.setPath(obj.path === '?' ? output.path : (obj.path.indexOf('?') === -1 ? output.path + '.' + obj.path : obj.path.replace(/\\?/g, output.path)), 2);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tobj.$$path = [];//EMPTYARRAY;\r\n\t\t\t\t\t\tobj.path = '';\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tobj.scope = output;\r\n\t\t\t\t\tobj.pathscope = output.path;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tinstances.push(obj);\r\n\r\n\t\t\t\tvar template = helper.attrcom(el, 'template') || obj.template;  // data-jc-template\r\n\t\t\t\tif (template) {\r\n\t\t\t\t\tobj.template = template;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (helper.attrcom(el, 'released') === 'true') { // data-jc-released\r\n\t\t\t\t\tobj.$released = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (helper.attrcom(el, 'url')) {\r\n\t\t\t\t\twarn('Components: You have to use \"data-jc-template\" attribute instead of \"data-jc-url\" for the component: {0}[{1}].'.format(obj.name, obj.path));\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (langx.isString(template)) {\r\n\t\t\t\t\tvar fn = function(data) {\r\n\t\t\t\t\t\tif (obj.prerender) {\r\n\t\t\t\t\t\t\tdata = obj.prerender(data);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tdependencies(com, function(obj, el) {\r\n\t\t\t\t\t\t\tif (langx.isFunction(obj.make)) {\r\n\t\t\t\t\t\t\t\tvar parent = caches.current.com;\r\n\t\t\t\t\t\t\t\tcaches.current.com = obj;\r\n\t\t\t\t\t\t\t\tobj.make(data);\r\n\t\t\t\t\t\t\t\tcaches.current.com = parent;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tinit(el, obj);\r\n\t\t\t\t\t\t}, obj, el);\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tvar c = template.substring(0, 1);\r\n\t\t\t\t\tif (c === '.' || c === '#' || c === '[') {\r\n\t\t\t\t\t\tfn($(template).html());\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar k = 'TE' + HASH(template);\r\n\t\t\t\t\tvar a = statics[k];\r\n\t\t\t\t\tif (a) {\r\n\t\t\t\t\t\tfn(a);\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t$.get(helper.makeurl(template), function(response) {\r\n\t\t\t\t\t\tstatics[k] = response;\r\n\t\t\t\t\t\tfn(response);\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (langx.isString(obj.make)) {\r\n\r\n\t\t\t\t\tif (obj.make.indexOf('<') !== -1) {\r\n\t\t\t\t\t\tdependencies(com, function(obj, el) {\r\n\t\t\t\t\t\t\tif (obj.prerender)\r\n\t\t\t\t\t\t\t\tobj.make = obj.prerender(obj.make);\r\n\t\t\t\t\t\t\tel.html(obj.make);\r\n\t\t\t\t\t\t\tinit(el, obj);\r\n\t\t\t\t\t\t}, obj, el);\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t$.get(makeurl(obj.make), function(data) {\r\n\t\t\t\t\t\tdependencies(com, function(obj, el) {\r\n\t\t\t\t\t\t\tif (obj.prerender) {\r\n\t\t\t\t\t\t\t\tdata = obj.prerender(data);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tel.html(data);\r\n\t\t\t\t\t\t\tinit(el, obj);\r\n\t\t\t\t\t\t}, obj, el);\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (com.dependencies) {\r\n\t\t\t\t\tdependencies(com, function(obj, el) {\r\n\r\n\t\t\t\t\t\tif (obj.make) {\r\n\t\t\t\t\t\t\tvar parent = caches.current.com;\r\n\t\t\t\t\t\t\tcaches.current.com = obj;\r\n\t\t\t\t\t\t\tobj.make();\r\n\t\t\t\t\t\t\tcaches.current.com = parent;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tinit(el, obj);\r\n\t\t\t\t\t}, obj, el);\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t// Because sometimes make doesn't contain the content of the element\r\n\t\t\t\t\tsetTimeout(function(init, el, obj) {\r\n\r\n\t\t\t\t\t\tif (obj.make) {\r\n\t\t\t\t\t\t\tvar parent = caches.current.com;\r\n\t\t\t\t\t\t\tcaches.current.com = obj;\r\n\t\t\t\t\t\t\tobj.make();\r\n\t\t\t\t\t\t\tcaches.current.com = parent;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tinit(el, obj);\r\n\t\t\t\t\t}, 5, init, el, obj);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// A reference to instances\r\n\t\t\tif (instances.length > 0) {\r\n\t\t\t\tel.$com = instances.length > 1 ? instances : instances[0];\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\tfunction crawler(container, onComponent, level, paths) {\r\n\t\t\tvar helper = view.helper,\r\n\t\t\t\tbinding = view.binding;\r\n\r\n\t\t\tif (container) {\r\n\t\t\t\tcontainer = $(container)[0];\r\n\t\t\t} else {\r\n\t\t\t\tcontainer = document.body;\r\n\t\t\t}\r\n\r\n\t\t\tif (!container) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t/*\r\n\t\t\tvar comp = view.attrcom(container, 'compile') ;\r\n\t\t\tif (comp === '0' || comp === 'false') {\r\n\t\t\t\t// no compile\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t*/\r\n\t\t\tif (helper.nocompile(container)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (level == null || level === 0) {\r\n\t\t\t\tpaths = [];\r\n\t\t\t\tif (container !== document.body) {\r\n\t\t\t\t\t/*\r\n\t\t\t\t\tvar scope = $(container).closest('[' + ATTRSCOPE + ']'); //ATTRCOPE\r\n\t\t\t\t\tif (scope && scope.length) {\r\n\t\t\t\t\t\tpaths.push(scope[0]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t*/\r\n\t\t\t\t\tvar scope = helper.scope(container);\r\n\t\t\t\t\tif (scope) {\r\n\t\t\t\t\t\tscopes.push(scope);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar b = null;\r\n\t\t\tvar released = container ? helper.released(container) : false; // sttrcom\r\n\t\t\tvar tmp = helper.scope(container); //attrcom\r\n\t\t\tvar binders = null;\r\n\r\n\t\t\tif (tmp) {\r\n\t\t\t\tpaths.push(container);\r\n\t\t\t}\r\n\r\n\t\t\tif (!container.$jcbind) {\r\n\t\t\t\tb = helper.attrbind(container); //container.getAttribute('data-bind') || container.getAttribute('bind');\r\n\t\t\t\tif (b) {\r\n\t\t\t\t\tif (!binders) {\r\n\t\t\t\t\t\tbinders = [];\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbinders.push({ \r\n\t\t\t\t\t\tel: container, \r\n\t\t\t\t\t\tb: b \r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar name = helper.attrcom(container);\r\n\t\t\tif (!container.$com && name != null) {\r\n\t\t\t\tonComponent(name, container, 0, paths);\r\n\t\t\t}\r\n\r\n\t\t\tvar arr = container.childNodes;\r\n\t\t\tvar sub = [];\r\n\r\n\t\t\tif (level === undefined) {\r\n\t\t\t\tlevel = 0;\r\n\t\t\t} else {\r\n\t\t\t\tlevel++;\r\n\t\t\t}\r\n\r\n\t\t\tfor (var i = 0, length = arr.length; i < length; i++) {\r\n\t\t\t\tvar el = arr[i];\r\n\t\t\t\tif (el) {\r\n\r\n\t\t\t\t\tif (!el.tagName) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t/*\r\n\t\t\t\t\tcomp = el.getAttribute('data-jc-compile');\r\n\t\t\t\t\tif (comp === '0' || comp === 'false') {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t*/\r\n\t\t\t\t\tif (helper.nocompile(el)) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (el.$com === undefined) {\r\n\t\t\t\t\t\tname = helper.attrcom(el);\r\n\t\t\t\t\t\tif (name != null) {\r\n\t\t\t\t\t\t\tif (released) {\r\n\t\t\t\t\t\t\t\thelper.released(el,\"true\"); //el.setAttribute(ATTRREL, 'true');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tonComponent(name || '', el, level, paths);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (!el.$jcbind) {\r\n\t\t\t\t\t\tb = helper.attrbind(el); //el.getAttribute('data-bind') || el.getAttribute('bind');\r\n\t\t\t\t\t\tif (b) {\r\n\t\t\t\t\t\t\tel.$jcbind = 1;\r\n\t\t\t\t\t\t\t!binders && (binders = []);\r\n\t\t\t\t\t\t\tbinders.push({ el: el, b: b });\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t/*\r\n\t\t\t\t\tcomp = el.getAttribute('data-jc-compile');\r\n\t\t\t\t\tif (comp !== '0' && comp !== 'false') {\r\n\t\t\t\t\t\tif (el.childNodes.length && el.tagName !== 'SCRIPT' && REGCOM.test(el.innerHTML) && sub.indexOf(el) === -1)  {\r\n\t\t\t\t\t\t  sub.push(el);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t*/\r\n\t\t\t\t\tif (!helper.nocompile(el)) {\r\n\t\t\t\t\t\tif (el.childNodes.length && el.tagName !== 'SCRIPT' && helper.canCompile(el) && sub.indexOf(el) === -1)  { // REGCOM.test(el.innerHTML)\r\n\t\t\t\t\t\t  sub.push(el);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfor (var i = 0, length = sub.length; i < length; i++) {\r\n\t\t\t\tel = sub[i];\r\n\t\t\t\tif (el) {\r\n\t\t\t\t\tcrawler(el, onComponent, level, paths && paths.length ? paths : []);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (binders) {\r\n\t\t\t\tfor (var i = 0; i < binders.length; i++) {\r\n\t\t\t\t\tvar a = binders[i];\r\n\t\t\t\t\ta.el.$jcbind = parsebinder(a.el, a.b, paths);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\r\n\t\tfunction compile(container,immediate) {\r\n\t\t\tvar self = this;\r\n\r\n\t\t\tif (is) {\r\n\t\t\t\trecompile = true;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar arr = [];\r\n\r\n\t\t\t//if (W.READY instanceof Array)  {\r\n\t\t\t//\tarr.push.apply(arr, W.READY);\r\n\t\t\t//}\r\n\t\t\t//if (W.jComponent instanceof Array) {\r\n\t\t\t//\tarr.push.apply(arr, W.jComponent);\r\n\t\t\t//}\r\n\t\t\t//if (W.components instanceof Array) {\r\n\t\t\t//\tarr.push.apply(arr, W.components);\r\n\t\t\t//\t}\r\n\r\n\t\t\tif (arr.length) {\r\n\t\t\t\twhile (true) {\r\n\t\t\t\t\tvar fn = arr.shift();\r\n\t\t\t\t\tif (!fn){\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfn();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tis = true;\r\n\t\t\tdownload(self);\r\n\r\n\t\t\tif (pending.length) {\r\n\t\t\t\t(function(container) {\r\n\t\t\t\t\tpending.push(function() {\r\n\t\t\t\t\t\tcompile(self,container);\r\n\t\t\t\t\t});\r\n\t\t\t\t})(container);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar has = false;\r\n\r\n\t\t\tcrawler(container, onComponent);\r\n\r\n\t\t\t// perform binder\r\n\t\t\trebindbinder();\r\n\r\n\t\t\tif (!has || !pending.length) {\r\n\t\t\t\tis = false;\r\n\t\t\t}\r\n\r\n\t\t\tif (container !== undefined || !toggles.length) {\r\n\t\t\t\treturn nextpending();\r\n\t\t\t}\r\n\r\n\t\t\tlangx.async(toggles, function(item, next) {\r\n\t\t\t\tfor (var i = 0, length = item.toggle.length; i < length; i++)\r\n\t\t\t\t\titem.element.tclass(item.toggle[i]);\r\n\t\t\t\tnext();\r\n\t\t\t}, nextpending);\r\n\t\t}\t\t\r\n\r\n\r\n\t\treturn {\r\n\r\n\t\t\t\"compile\" : compile,\r\n\t\t\t\"request\" : request\r\n\r\n\t\t}\r\n\t}\r\n\r\n\treturn compiler;\r\n\r\n});"]}