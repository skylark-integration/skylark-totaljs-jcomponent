{"version":3,"sources":["views/compiler.js"],"names":["define","langx","$","domx","logs","registry","configs","versions","statics","warn","MD","fallback","fallbackcache","importcache","version","view","helper","eventer","storing","scoper","binding","cache","http","componenter","clean","clear","setInterval","temp","importing","pending","initing","imports","toggles","current","compiles","is","recompile","$loaded","fallbackPending","downloadFallback","setTimeout","setTimeout2","splice","wait","item","next","importCache","format","nextPending","shift","ready","arr","Object","keys","i","length","push","toLowerCase","dependencies","declaration","callback","obj","el","isFunction","import","indexOf","init","collection","type","tagName","inputable","$input","element","findControl2","released","$released","components","canCompile","compile","request","onComponent","name","dom","level","scope","meta","split","trim","has","remove","instances","all","y","key","lazy","substring","lastIndexOf","get","com","lo","checkLazy","state","Component","parent","parentNode","$com","pc","owner","$children","nodeName","global","shared","p","attrcom","_id","$noscope","setPath","pathmaker","config","reconfigure","NOOP","tmp","$init","id","siblings","$lazy","con","fn","call","attrd","code","path","charCodeAt","$pp","output","initscopes","replace","$$path","pathscope","template","isString","data","prerender","make","c","html","k","HASH","a","makeurl","response","x","container","immediate","self","this","count","findUrl","elm","each","t","$downloaded","url","once","toggle","expire","async","ajaxCache","removescripts","importscripts","importstyles","download","crawler","paths","nocompile","scopes","b","binders","$jcbind","attrbind","childNodes","sub","undefined","parse","rebindbinder","tclass","refresh","initialize","pop","$removed","prepare","document","trigger","emit","autofill","$default","findControl","val","parser","dirty","set","mixin"],"mappings":"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","file":"../../views/compiler.js","sourcesContent":["define([\r\n\t\"../langx\",\r\n\t\"../utils/query\",\r\n\t\"../utils/domx\",\r\n\t\"../utils/logs\",\r\n\t\"../components/registry\",\r\n\t\"../components/configs\",\r\n\t\"../components/versions\"\r\n],function(langx, $, domx, logs,registry,configs,versions){\r\n\tvar statics = langx.statics;\r\n\tvar warn = logs.warn;\r\n\r\n\tvar MD = {\r\n\t\tfallback : 'https://cdn.componentator.com/j-{0}.html',\r\n\t\tfallbackcache : '',\r\n\t\timportcache : 'session',\r\n\t\tversion : ''\r\n\t};\r\n\r\n\tvar fallback = { $: 0 }; // $ === count of new items in fallback\r\n\r\n\tfunction compiler(view) {\r\n\t\tvar helper = view.helper,\r\n\t\t\teventer = view.eventer,\r\n\t\t\tstoring = view.storing,\r\n\t\t\tscoper = view.scoper,\r\n\t\t\tbinding = view.binding,\r\n\t\t\tcache = view.cache,\r\n\t\t\thttp = view.http,\r\n\t\t\tcomponenter = view.componenter;\r\n\r\n\t\tsetInterval(function() {\r\n\t\t\ttemp = {};\r\n\t//\t\tpaths = {};\r\n\t//\t\tcleaner();\r\n\t\t}, (1000 * 60) * 5);\t\r\n\r\n\t\tfunction clean2() {\r\n\t\t\tcache.clear();\r\n\t\t\tclean();\r\n\t\t}\r\n\r\n\t\tfunction clean() {\r\n\t\t\tvar is = false;\r\n\t\t\tvar index;\r\n\r\n\r\n\r\n\t\t\tcache.clear('find');\r\n\r\n\r\n\t\t\t//W.DATETIME = W.NOW = new Date();\r\n\t\t\t//var now = W.NOW.getTime();\r\n\t\t\tvar is2 = false;\r\n\t\t\tvar is3 = false;\r\n\r\n\r\n\r\n\r\n\t\t\tif (is) {\r\n\t\t\t\trefresh();\r\n\t\t\t\tsetTimeout(compile, 2000);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\tsetInterval(function() {\r\n\t//\t\ttemp = {};\r\n\t//\t\tpaths = {};\r\n\t\t\tclean();\r\n\t\t}, (1000 * 60) * 5);\r\n\r\n\r\n\t    /*\r\n\t    for (var i = 0, length = all.length; i < length; i++) { // M.components.length\r\n\t        var m = all[i]; // M.components[i];\r\n\t        if (!m.$removed || name === m.name){\r\n\t            config && m.reconfigure(config, undefined, true);\r\n\t            declaration.call(m, m, m.config);\r\n\t        }\r\n\t    }\r\n\r\n\t    RECOMPILE();\r\n\t    */\r\n    \r\n\t\tvar \r\n\t\t\timporting = 0,\r\n\t\t\tpending = [],\r\n\t\t\tiniting = [],\r\n\t\t\timports = {},\r\n\t\t\ttoggles = [],\r\n\t\t\t//ready = [], // view.ready\r\n\t\t\tcurrent = {},\r\n\t\t\tcompiles = {\r\n\t\t\t\tis : false,\r\n\t\t\t\trecompile : false\r\n\t\t\t}\r\n\r\n\t\t//C.get = get; // paths\r\n\r\n\t\t// ===============================================================\r\n\t\t// PRIVATE FUNCTIONS\r\n\t\t// ===============================================================\r\n\t\t//var $ready = setTimeout(load, 2);\r\n\t\tvar $loaded = false;\r\n\r\n\t\tvar fallbackPending = [];\r\n\r\n\t\tfunction download() {\r\n\r\n\t\t\tvar arr = [];\r\n\t\t\tvar count = 0;\r\n\r\n\t\t\thelper.findUrl(view.elm()).each(function() {\r\n\r\n\t\t\t\tvar t = this;\r\n\t\t\t\tvar el = $(t);\r\n\r\n\t\t\t\tif (t.$downloaded) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tt.$downloaded = 1;\r\n\t\t\t\tvar url = helper.attrcom(el, 'url');\r\n\r\n\t\t\t\t// Unique\r\n\t\t\t\tvar once = url.substring(0, 5).toLowerCase() === 'once ';\r\n\t\t\t\tif (url.substring(0, 1) === '!' || once) {\r\n\t\t\t\t\tif (once) {\r\n\t\t\t\t\t\turl = url.substring(5);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\turl = url.substring(1);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (statics[url]) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tstatics[url] = 2;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar item = {};\r\n\t\t\t\titem.url = url;\r\n\t\t\t\titem.element = el;\r\n\t\t\t\titem.callback = helper.attrcom(el, 'init');\r\n\t\t\t\titem.path = helper.attrcom(el, 'path');\r\n\t\t\t\titem.toggle = (helper.attrcom(el, 'class') || '').split(' ');\r\n\t\t\t\titem.expire = helper.attrcom(el, 'cache') || MD.importcache;\r\n\t\t\t\tarr.push(item);\r\n\t\t\t});\r\n\r\n\t\t\tif (!arr.length) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar canCompile = false;\r\n\t\t\timporting++;\r\n\r\n\t\t\tlangx.async(arr, function(item, next) {\r\n\r\n\t\t\t\tvar key = helper.makeurl(item.url);\r\n\t\t\t\tvar can = false;\r\n\r\n\t\t\t\thttp.ajaxCache('GET ' + item.url, null, function(response) {\r\n\r\n\t\t\t\t\tkey = '$import' + key;\r\n\r\n\t\t\t\t\tcurrent.element = item.element[0];\r\n\r\n\t\t\t\t\tif (statics[key]) {\r\n\t\t\t\t\t\tresponse = domx.removescripts(response);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tresponse = domx.importscripts(importstyles(response));\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tcan = response && helper.canCompile(response);\r\n\r\n\t\t\t\t\tif (can) {\r\n\t\t\t\t\t\tcanCompile = true;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\titem.element.html(response);\r\n\t\t\t\t\tstatics[key] = true;\r\n\t\t\t\t\titem.toggle.length && item.toggle[0] && toggles.push(item);\r\n\r\n\t\t\t\t\tif (item.callback && ! helper.attrcom(item.element)) {\r\n\t\t\t\t\t\tvar callback = storing.get(item.callback);\r\n\t\t\t\t\t\tif (langx.isFunction(callback)) {\r\n\t\t\t\t\t\t\tcallback(item.element);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tcurrent.element = null;\r\n\t\t\t\t\tcount++;\r\n\t\t\t\t\tnext();\r\n\r\n\t\t\t\t}, item.expire);\r\n\r\n\t\t\t}, function() {\r\n\t\t\t\timporting--;\r\n\t\t\t\tcomponenter.clean(); // clear('valid', 'dirty', 'find');\r\n\t\t\t\tif (count && canCompile){\r\n\t\t\t\t\tcompile();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tfunction downloadFallback() {\r\n\t\t\tif (importing) {\r\n\t\t\t\tsetTimeout(downloadFallback, 1000);\r\n\t\t\t} else {\r\n\t\t\t\tlangx.setTimeout2('$fallback', function() {\r\n\t\t\t\t\tfallbackPending.splice(0).wait(function(item, next) {\r\n\t\t\t\t\t\tif (registry[item]){ // M.$components\r\n\t\t\t\t\t\t\tnext();\r\n\t\t\t\t\t\t}else {\r\n\t\t\t\t\t\t\twarn('Downloading: ' + item);\r\n\t\t\t\t\t\t\thttp.importCache(MD.fallback.format(item), MD.fallbackcache, next);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, 3);\r\n\t\t\t\t}, 100);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction nextPending() {\r\n\r\n\t\t\tvar next = pending.shift();\r\n\t\t\tif (next) {\r\n\t\t\t\tnext();\r\n\t\t\t} else { //if ($domready) {\r\n\t\t\t\tif (view.ready) {\r\n\t\t\t\t\tcompiles.is = false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (MD.fallback && fallback.$ && !importing) {\r\n\t\t\t\t\tvar arr = Object.keys(fallback);\r\n\t\t\t\t\tfor (var i = 0; i < arr.length; i++) {\r\n\t\t\t\t\t\tif (arr[i] !== '$') {\r\n\t\t\t\t\t\t\tvar num = fallback[arr[i]];\r\n\t\t\t\t\t\t\tif (num === 1) {\r\n\t\t\t\t\t\t\t\tfallbackPending.push(arr[i].toLowerCase());\r\n\t\t\t\t\t\t\t\tfallback[arr[i]] = 2;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfallback.$ = 0;\r\n\t\t\t\t\tif (fallbackPending.length) {\r\n\t\t\t\t\t\tdownloadFallback();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\tfunction dependencies(declaration, callback, obj, el) {\r\n\r\n\t\t\tif (declaration.importing) {\r\n\t\t\t\tview.storing.wait(function() {\r\n\t\t\t\t\treturn declaration.importing !== true;\r\n\t\t\t\t}, function() {\r\n\t\t\t\t\tcallback(obj, el);\r\n\t\t\t\t});\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (!declaration.dependencies || !declaration.dependencies.length) {\r\n\t\t\t\tsetTimeout(function(callback, obj, el) {\r\n\t\t\t\t\tcallback(obj, el);\r\n\t\t\t\t}, 5, callback, obj, el);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tdeclaration.importing = true;\r\n\t\t\tdeclaration.dependencies.wait(function(item, next) {\r\n\t\t\t\tif (langx.isFunction(item)) {\r\n\t\t\t\t\titem(next);\r\n\t\t\t\t} else {\r\n\t\t\t\t\thttp.import((item.indexOf('<') === -1 ? 'once ' : '') + item, next);  // IMPORT\r\n\t\t\t\t}\r\n\t\t\t}, function() {\r\n\t\t\t\tdeclaration.importing = false;\r\n\t\t\t\tcallback(obj, el);\r\n\t\t\t}, 3);\r\n\t\t}\r\n\r\n\t\tfunction init(el, obj) {\r\n\r\n\t\t\tvar dom = el[0];\r\n\t\t\tvar type = dom.tagName;\r\n\t\t\tvar collection;\r\n\r\n\t\t\t// autobind\r\n\t\t\tif (domx.inputable(type)) {\r\n\t\t\t\tobj.$input = true;\r\n\t\t\t\tcollection = obj.element;\r\n\t\t\t} else {\r\n\t\t\t\tcollection = el;\r\n\t\t\t}\r\n\r\n\t\t\thelper.findControl2(obj, collection);\r\n\r\n\t\t\tobj.released && obj.released(obj.$released);\r\n\t\t\tcomponenter.components.push(obj); // M.components.push(obj)\r\n\t\t\tiniting.push(obj);\r\n\t\t\tif (type !== 'BODY' && helper.canCompile(el[0])) {//REGCOM.test(el[0].innerHTML)) {\r\n\t\t\t\tcompile(el);\r\n\t\t\t}\r\n\t\t\trequest(); // ready\r\n\t\t}\t\t\r\n\r\n\r\n\t\t// parse dom element and create a component instance\r\n\t\tfunction onComponent(name, dom, level, scope) {\r\n\r\n\t\t\tvar el = $(dom);\r\n\t\t\tvar meta = name.split(/_{2,}/);\r\n\t\t\tif (meta.length) {\r\n\t\t\t\tmeta = meta.trim(true);\r\n\t\t\t\tname = meta[0];\r\n\t\t\t} else\r\n\t\t\t\tmeta = null;\r\n\r\n\t\t\thas = true;\r\n\r\n\t\t\t// Check singleton instance\r\n\t\t\tif (statics['$ST_' + name]) {\r\n\t\t\t\tdomx.remove(el);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar instances = [];\r\n\t\t\tvar all = name.split(',');\r\n\r\n\t\t\tfor (var y = 0; y < all.length; y++) {\r\n\r\n\t\t\t\tvar name = all[y].trim();\r\n\t\t\t\tvar is = false;\r\n\r\n\t\t\t\tif (name.indexOf('|') !== -1) {\r\n\r\n\t\t\t\t\t// Multiple versions\r\n\t\t\t\t\tvar keys = name.split('|');\r\n\t\t\t\t\tfor (var i = 0; i < keys.length; i++) {\r\n\t\t\t\t\t\tvar key = keys[i].trim();\r\n\t\t\t\t\t\tif (key &&  registry[key]) { // M.$components\r\n\t\t\t\t\t\t\tname = key;\r\n\t\t\t\t\t\t\tis = true;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (!is) {\r\n\t\t\t\t\t\tname = keys[0].trim();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar lazy = false;\r\n\r\n\t\t\t\tif (name.substring(0, 5).toLowerCase() === 'lazy ') {\r\n\t\t\t\t\tname = name.substring(5);\r\n\t\t\t\t\tlazy = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!is && name.lastIndexOf('@') === -1) {\r\n\t\t\t\t\tvar version = versions.get(name); \r\n\t\t\t\t\tif (version) {\r\n\t\t\t\t\t\tname += '@' + version;\r\n\t\t\t\t\t} else if (MD.version) {\r\n\t\t\t\t\t\tname += '@' + MD.version;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar com = registry[name]; // M.$components[name];\r\n\t\t\t\tvar lo = null;\r\n\r\n\t\t\t\tif (lazy && name) {\r\n\t\t\t\t\tlo = componenter.checkLazy(name);;\r\n\r\n\t\t\t\t\tif (lo.state === 1) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!com) {\r\n\r\n\t\t\t\t\tif (!fallback[name]) {\r\n\t\t\t\t\t\tfallback[name] = 1;\r\n\t\t\t\t\t\tfallback.$++;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar x = helper.attrcom(el, 'import');\r\n\t\t\t\t\tif (!x) {\r\n\t\t\t\t\t\t!statics['$NE_' + name] && (statics['$NE_' + name] = true);\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (imports[x] === 1) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (imports[x] === 2) {\r\n\t\t\t\t\t\t!statics['$NE_' + name] && (statics['$NE_' + name] = true);\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\timports[x] = 1;\r\n\t\t\t\t\timporting++;\r\n\r\n\t\t\t\t\thttp.import(x, function() {\r\n\t\t\t\t\t\timporting--;\r\n\t\t\t\t\t\timports[x] = 2;\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (fallback[name] === 1) {\r\n\t\t\t\t\tfallback.$--;\r\n\t\t\t\t\tdelete fallback[name];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar obj = new helper.Component(com.name,view);\r\n\t\t\t\tvar parent = dom.parentNode;\r\n\r\n\t\t\t\twhile (true) {\r\n\t\t\t\t\tif (parent.$com) {\r\n\t\t\t\t\t\tvar pc = parent.$com;\r\n\t\t\t\t\t\tobj.owner = pc;\r\n\t\t\t\t\t\tif (pc.$children) {\r\n\t\t\t\t\t\t\tpc.$children++;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tpc.$children = 1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t} else if (parent.nodeName === 'BODY') {\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tparent = parent.parentNode;\r\n\t\t\t\t\tif (parent == null) {\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tobj.global = com.shared;\r\n\t\t\t\tobj.element = el;\r\n\t\t\t\tobj.dom = dom;\r\n\r\n\t\t\t\tvar p = helper.attrcom(el, 'path') || (meta ? meta[1] === 'null' ? '' : meta[1] : '') || obj._id;\r\n\r\n\t\t\t\tif (p.substring(0, 1) === '%') {\r\n\t\t\t\t\tobj.$noscope = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tobj.setPath(binding.pathmaker(p, true), 1);\r\n\t\t\t\tobj.config = {};\r\n\r\n\t\t\t\t// Default config\r\n\t\t\t\tif (com.config) {\r\n\t\t\t\t\tobj.reconfigure(com.config, NOOP);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar tmp = helper.attrcom(el, 'config') || (meta ? meta[2] === 'null' ? '' : meta[2] : ''); // // data-jc-config\r\n\t\t\t\tif (tmp) {\r\n\t\t\t\t\tobj.reconfigure(tmp, NOOP);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!obj.$init) {\r\n\t\t\t\t\tobj.$init = helper.attrcom(el, 'init') || null; // data-jc-init\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!obj.type) {\r\n\t\t\t\t\tobj.type = helper.attrcom(el, 'type') || '';   // data-jc-type\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!obj.id) {\r\n\t\t\t\t\tobj.id = helper.attrcom(el, 'id') || obj._id;  // data-jc-id\r\n\t\t\t\t}\r\n\r\n\t\t\t\tobj.siblings = all.length > 1;\r\n\t\t\t\tobj.$lazy = lo;\r\n\r\n\t\t\t\tfor (var i = 0; i < configs.length; i++) {\r\n\t\t\t\t\tvar con = configs[i];\r\n\t\t\t\t\tcon.fn(obj) && obj.reconfigure(con.config, NOOP);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcurrent.com = obj;\r\n\t\t\t\tcom.declaration.call(obj, obj, obj.config);\r\n\t\t\t\tcurrent.com = null;\r\n\r\n\t\t\t\tmeta[3] && el.attrd('jc-value', meta[3]);\r\n\r\n\t\t\t\tif (obj.init && !statics[name]) {\r\n\t\t\t\t\tstatics[name] = true;\r\n\t\t\t\t\tobj.init();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdom.$com = obj;\r\n\r\n\t\t\t\tif (!obj.$noscope) {\r\n\t\t\t\t\tobj.$noscope = helper.attrcom(el, 'noscope') === 'true';   // data-jc-noscope\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar code = obj.path ? obj.path.charCodeAt(0) : 0;\r\n\t\t\t\tif (!obj.$noscope && scope.length && !obj.$pp) {\r\n\r\n\t\t\t\t\tvar output = scoper.initscopes(scope);\r\n\r\n\t\t\t\t\tif (obj.path && code !== 33 && code !== 35) {\r\n\t\t\t\t\t\tobj.setPath(obj.path === '?' ? output.path : (obj.path.indexOf('?') === -1 ? output.path + '.' + obj.path : obj.path.replace(/\\?/g, output.path)), 2);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tobj.$$path = [];//EMPTYARRAY;\r\n\t\t\t\t\t\tobj.path = '';\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tobj.scope = output;\r\n\t\t\t\t\tobj.pathscope = output.path;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tinstances.push(obj);\r\n\r\n\t\t\t\tvar template = helper.attrcom(el, 'template') || obj.template;  // data-jc-template\r\n\t\t\t\tif (template) {\r\n\t\t\t\t\tobj.template = template;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (helper.attrcom(el, 'released') === 'true') { // data-jc-released\r\n\t\t\t\t\tobj.$released = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (helper.attrcom(el, 'url')) {\r\n\t\t\t\t\twarn('Components: You have to use \"data-jc-template\" attribute instead of \"data-jc-url\" for the component: {0}[{1}].'.format(obj.name, obj.path));\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (langx.isString(template)) {\r\n\t\t\t\t\tvar fn = function(data) {\r\n\t\t\t\t\t\tif (obj.prerender) {\r\n\t\t\t\t\t\t\tdata = obj.prerender(data);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tdependencies(com, function(obj, el) {\r\n\t\t\t\t\t\t\tif (langx.isFunction(obj.make)) {\r\n\t\t\t\t\t\t\t\tvar parent = current.com;\r\n\t\t\t\t\t\t\t\tcurrent.com = obj;\r\n\t\t\t\t\t\t\t\tobj.make(data);\r\n\t\t\t\t\t\t\t\tcurrent.com = parent;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tinit(el, obj);\r\n\t\t\t\t\t\t}, obj, el);\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tvar c = template.substring(0, 1);\r\n\t\t\t\t\tif (c === '.' || c === '#' || c === '[') {\r\n\t\t\t\t\t\tfn($(template).html());\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar k = 'TE' + HASH(template);\r\n\t\t\t\t\tvar a = statics[k];\r\n\t\t\t\t\tif (a) {\r\n\t\t\t\t\t\tfn(a);\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t$.get(helper.makeurl(template), function(response) {\r\n\t\t\t\t\t\tstatics[k] = response;\r\n\t\t\t\t\t\tfn(response);\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (langx.isString(obj.make)) {\r\n\r\n\t\t\t\t\tif (obj.make.indexOf('<') !== -1) {\r\n\t\t\t\t\t\tdependencies(com, function(obj, el) {\r\n\t\t\t\t\t\t\tif (obj.prerender)\r\n\t\t\t\t\t\t\t\tobj.make = obj.prerender(obj.make);\r\n\t\t\t\t\t\t\tel.html(obj.make);\r\n\t\t\t\t\t\t\tinit(el, obj);\r\n\t\t\t\t\t\t}, obj, el);\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t$.get(makeurl(obj.make), function(data) {\r\n\t\t\t\t\t\tdependencies(com, function(obj, el) {\r\n\t\t\t\t\t\t\tif (obj.prerender) {\r\n\t\t\t\t\t\t\t\tdata = obj.prerender(data);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tel.html(data);\r\n\t\t\t\t\t\t\tinit(el, obj);\r\n\t\t\t\t\t\t}, obj, el);\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (com.dependencies) {\r\n\t\t\t\t\tdependencies(com, function(obj, el) {\r\n\r\n\t\t\t\t\t\tif (obj.make) {\r\n\t\t\t\t\t\t\tvar parent = current.com;\r\n\t\t\t\t\t\t\tcurrent.com = obj;\r\n\t\t\t\t\t\t\tobj.make();\r\n\t\t\t\t\t\t\tcurrent.com = parent;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tinit(el, obj);\r\n\t\t\t\t\t}, obj, el);\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t// Because sometimes make doesn't contain the content of the element\r\n\t\t\t\t\tsetTimeout(function(init, el, obj) {\r\n\r\n\t\t\t\t\t\tif (obj.make) {\r\n\t\t\t\t\t\t\tvar parent = current.com;\r\n\t\t\t\t\t\t\tcurrent.com = obj;\r\n\t\t\t\t\t\t\tobj.make();\r\n\t\t\t\t\t\t\tcurrent.com = parent;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tinit(el, obj);\r\n\t\t\t\t\t}, 5, init, el, obj);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// A reference to instances\r\n\t\t\tif (instances.length > 0) {\r\n\t\t\t\tel.$com = instances.length > 1 ? instances : instances[0];\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\tfunction crawler(container, onComponent, level, paths) {\r\n\t\t\tif (container) {\r\n\t\t\t\tcontainer = $(container)[0];\r\n\t\t\t} else {\r\n\t\t\t\tcontainer = view.elm();//document.body;\r\n\t\t\t}\r\n\r\n\t\t\tif (!container) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t/*\r\n\t\t\tvar comp = view.attrcom(container, 'compile') ;\r\n\t\t\tif (comp === '0' || comp === 'false') {\r\n\t\t\t\t// no compile\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t*/\r\n\t\t\tif (helper.nocompile(container)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (level == null || level === 0) {\r\n\t\t\t\tpaths = [];\r\n\t\t\t\tif (container !== view.elm()) { // document.body) {\r\n\t\t\t\t\t/*\r\n\t\t\t\t\tvar scope = $(container).closest('[' + ATTRSCOPE + ']'); //ATTRCOPE\r\n\t\t\t\t\tif (scope && scope.length) {\r\n\t\t\t\t\t\tpaths.push(scope[0]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t*/\r\n\t\t\t\t\tvar scope = helper.scope(container);\r\n\t\t\t\t\tif (scope) {\r\n\t\t\t\t\t\tscopes.push(scope);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar b = null;\r\n\t\t\tvar released = container ? helper.released(container) : false; // sttrcom\r\n\t\t\tvar tmp = helper.scope(container); //attrcom\r\n\t\t\tvar binders = null;\r\n\r\n\t\t\tif (tmp) {\r\n\t\t\t\tpaths.push(container);\r\n\t\t\t}\r\n\r\n\t\t\tif (!container.$jcbind) {\r\n\t\t\t\tb = helper.attrbind(container); //container.getAttribute('data-bind') || container.getAttribute('bind');\r\n\t\t\t\tif (b) {\r\n\t\t\t\t\tif (!binders) {\r\n\t\t\t\t\t\tbinders = [];\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbinders.push({ \r\n\t\t\t\t\t\tel: container, \r\n\t\t\t\t\t\tb: b \r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar name = helper.attrcom(container);\r\n\t\t\tif (!container.$com && name != null) {\r\n\t\t\t\tonComponent(name, container, 0, paths);\r\n\t\t\t}\r\n\r\n\t\t\tvar arr = container.childNodes;\r\n\t\t\tvar sub = [];\r\n\r\n\t\t\tif (level === undefined) {\r\n\t\t\t\tlevel = 0;\r\n\t\t\t} else {\r\n\t\t\t\tlevel++;\r\n\t\t\t}\r\n\r\n\t\t\tfor (var i = 0, length = arr.length; i < length; i++) {\r\n\t\t\t\tvar el = arr[i];\r\n\t\t\t\tif (el) {\r\n\r\n\t\t\t\t\tif (!el.tagName) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t/*\r\n\t\t\t\t\tcomp = el.getAttribute('data-jc-compile');\r\n\t\t\t\t\tif (comp === '0' || comp === 'false') {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t*/\r\n\t\t\t\t\tif (helper.nocompile(el)) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (el.$com === undefined) {\r\n\t\t\t\t\t\tname = helper.attrcom(el);\r\n\t\t\t\t\t\tif (name != null) {\r\n\t\t\t\t\t\t\tif (released) {\r\n\t\t\t\t\t\t\t\thelper.released(el,\"true\"); //el.setAttribute(ATTRREL, 'true');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tonComponent(name || '', el, level, paths);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (!el.$jcbind) {\r\n\t\t\t\t\t\tb = helper.attrbind(el); //el.getAttribute('data-bind') || el.getAttribute('bind');\r\n\t\t\t\t\t\tif (b) {\r\n\t\t\t\t\t\t\tel.$jcbind = 1;\r\n\t\t\t\t\t\t\t!binders && (binders = []);\r\n\t\t\t\t\t\t\tbinders.push({ el: el, b: b });\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t/*\r\n\t\t\t\t\tcomp = el.getAttribute('data-jc-compile');\r\n\t\t\t\t\tif (comp !== '0' && comp !== 'false') {\r\n\t\t\t\t\t\tif (el.childNodes.length && el.tagName !== 'SCRIPT' && REGCOM.test(el.innerHTML) && sub.indexOf(el) === -1)  {\r\n\t\t\t\t\t\t  sub.push(el);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t*/\r\n\t\t\t\t\tif (!helper.nocompile(el)) {\r\n\t\t\t\t\t\tif (el.childNodes.length && el.tagName !== 'SCRIPT' && helper.canCompile(el) && sub.indexOf(el) === -1)  { // REGCOM.test(el.innerHTML)\r\n\t\t\t\t\t\t  sub.push(el);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfor (var i = 0, length = sub.length; i < length; i++) {\r\n\t\t\t\tel = sub[i];\r\n\t\t\t\tif (el) {\r\n\t\t\t\t\tcrawler(el, onComponent, level, paths && paths.length ? paths : []);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (binders) {\r\n\t\t\t\tfor (var i = 0; i < binders.length; i++) {\r\n\t\t\t\t\tvar a = binders[i];\r\n\t\t\t\t\ta.el.$jcbind = binding.parse(a.el, a.b, paths); //parsebinder\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\r\n\t\tfunction compile(container,immediate) {\r\n\t\t\tvar self = this;\r\n\r\n\t\t\tif (compiles.is) {\r\n\t\t\t\tcompiles.recompile = true;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar arr = [];\r\n\r\n\t\t\t//if (W.READY instanceof Array)  {\r\n\t\t\t//\tarr.push.apply(arr, W.READY);\r\n\t\t\t//}\r\n\t\t\t//if (W.jComponent instanceof Array) {\r\n\t\t\t//\tarr.push.apply(arr, W.jComponent);\r\n\t\t\t//}\r\n\t\t\t//if (W.components instanceof Array) {\r\n\t\t\t//\tarr.push.apply(arr, W.components);\r\n\t\t\t//\t}\r\n\r\n\t\t\tif (arr.length) {\r\n\t\t\t\twhile (true) {\r\n\t\t\t\t\tvar fn = arr.shift();\r\n\t\t\t\t\tif (!fn){\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfn();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tcompiles.is = true;\r\n\t\t\tdownload(self);\r\n\r\n\t\t\tif (pending.length) {\r\n\t\t\t\t(function(container) {\r\n\t\t\t\t\tpending.push(function() {\r\n\t\t\t\t\t\tcompile(self,container);\r\n\t\t\t\t\t});\r\n\t\t\t\t})(container);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar has = false;\r\n\r\n\t\t\tcrawler(container, onComponent);\r\n\r\n\t\t\t// perform binder\r\n\t\t\tbinding.rebindbinder();\r\n\r\n\t\t\tif (!has || !pending.length) {\r\n\t\t\t\tcompiles.is = false;\r\n\t\t\t}\r\n\r\n\t\t\tif (container !== undefined || !toggles.length) {\r\n\t\t\t\treturn nextPending();\r\n\t\t\t}\r\n\r\n\t\t\tlangx.async(toggles, function(item, next) {\r\n\t\t\t\tfor (var i = 0, length = item.toggle.length; i < length; i++)\r\n\t\t\t\t\titem.element.tclass(item.toggle[i]);\r\n\t\t\t\tnext();\r\n\t\t\t}, nextPending);\r\n\t\t}\t\t\r\n\r\n\t\tfunction request() {\r\n\r\n\t\t\tlangx.setTimeout2('$ready', function() {\r\n\r\n\t\t\t\t//mediaquery(); // TODO\r\n\t\t\t\tview.refresh(); // TODO\r\n\r\n\t\t\t\tfunction initialize() {\r\n\t\t\t\t\tvar item = initing.pop();\r\n\t\t\t\t\tif (item === undefined)\r\n\t\t\t\t\t\t!view.ready && compile();\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tif (!item.$removed) {\r\n\t\t\t\t\t\t\tcomponenter.prepare(item);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tinitialize();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tinitialize();\r\n\r\n\t\t\t\tvar count = componenter.components.length; // M.components\r\n\t\t\t\t$(document).trigger('components', [count]);\r\n\r\n\t\t\t\tif (!$loaded) {\r\n\t\t\t\t\t$loaded = true;\r\n\t\t\t\t\tcomponenter.clean(); //caches.clear('valid', 'dirty', 'find');\r\n\t\t\t\t\teventer.emit('init');\r\n\t\t\t\t\teventer.emit('ready');\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlangx.setTimeout2('$initcleaner', function() {\r\n\t\t\t\t\tcomponenter.clean();\r\n\t\t\t\t\tvar arr = componenter.autofill.splice(0);\r\n\t\t\t\t\tfor (var i = 0; i < arr.length; i++) {\r\n\t\t\t\t\t\tvar com = arr[i];\r\n\t\t\t\t\t\t!com.$default && helper.findControl(com.element[0], function(el) {\r\n\t\t\t\t\t\t\tvar val = $(el).val();\r\n\t\t\t\t\t\t\tif (val) {\r\n\t\t\t\t\t\t\t\tvar tmp = com.parser(val);\r\n\t\t\t\t\t\t\t\tif (tmp && com.get() !== tmp) {\r\n\t\t\t\t\t\t\t\t\tcom.dirty(false, true);\r\n\t\t\t\t\t\t\t\t\tcom.set(tmp, 0);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}, 1000);\r\n\r\n\t\t\t\tcompiles.is = false;\r\n\r\n\t\t\t\tif (compiles.recompile) {\r\n\t\t\t\t\tcompiles.recompile = false;\r\n\t\t\t\t\tcompile();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (view.ready) {\r\n\t\t\t\t\tvar arr = view.ready;\r\n\t\t\t\t\tfor (var i = 0, length = arr.length; i < length; i++)\r\n\t\t\t\t\t\tarr[i](count);\r\n\t\t\t\t\tview.ready = undefined;\r\n\t\t\t\t\tcompile();\r\n\t\t\t\t\tsetTimeout(compile, 3000);\r\n\t\t\t\t\tsetTimeout(compile, 6000);\r\n\t\t\t\t\tsetTimeout(compile, 9000);\r\n\t\t\t\t}\r\n\t\t\t}, 100);\r\n\t\t}\r\n\r\n\t\treturn langx.mixin(compiles, {\r\n\r\n\t\t\t\"compile\" : compile,\r\n\t\t\t\"request\" : request\r\n\r\n\t\t});\r\n\t}\r\n\r\n\treturn compiler;\r\n\r\n});"]}