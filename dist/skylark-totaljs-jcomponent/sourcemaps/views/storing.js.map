{"version":3,"sources":["views/storing.js"],"names":["define","langx","pathmaker","BLACKLIST","sort","reverse","splice","slice","pop","unshift","shift","push","store","view","cache","skipproxy","parsepath","path","arr","split","builder","all","i","length","p","index","indexOf","join","a","substring","data","binders","paths","defaults","$formatter","skips","binderbind","absolutePath","ticks","item","exec","getx","expire","rebind","key","WATCH","value","obj","storages","get","put","undefined","setx","this","scope","charCodeAt","stores","root","v","fn","Function","set","is","binder","type","REGISARR","test","Array","M","isUpdate","reset","update","result","state","components","com","disabled","$removed","$loaded","$compare","setter","setterX","$interaction","$ready","$dirty_disabled","$dirty","$valid_disabled","$valid","$validate","validate","findControl2","valid","caches","clear","stateX","emitwatch","wasset","replaceWildcard","$skip","n","apply","change","com_dirty","arg","f","wait","ctx","arguments","env","c","events","exechelper","EMIT","call","EXEC","ok","ctrl","plugins","find","isFunction","Window","TYPE_FN","W","timeout","onlyComponent","setTimeout","_id","parser","$parser","nmCache","temp","isString","trimAll","replace","REGCOMMA","isNaN","Date","parseDate","getTime","bind","can","except","com_valid","changed","create","callback","proxy","notify","MD","delaybinder","blocked","get2","handler","target","property","receiver","Proxy","err","Reflect","defineProperty","descriptor","deleteProperty","thisArg","argumentsList","name","o","default","defaultValue","hashCode","$default","clearPageData","errors","highlight","each","$except","evaluate","expression","nopath","exp","val","exec2","tmp","b","d","extend","format","inc","current","isNumber","parseFloat","invalid","make","C","ready","modify","Object","keys","forEach","k","modified","output","rewrite","set2","skip","j","trim","used"],"mappings":"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","file":"../../views/storing.js","sourcesContent":["define([\r\n\t\"../langx\",\r\n\t\"../binding/pathmaker\"\r\n],function(langx,pathmaker){\r\n\tvar\tSELINPUT = 'input,textarea,select';\r\n\tvar BLACKLIST = { sort: 1, reverse: 1, splice: 1, slice: 1, pop: 1, unshift: 1, shift: 1, push: 1 };\r\n\t\r\n\tvar MULTIPLE = ' + ';\r\n\r\n\t\t\r\n\tfunction storing (store,view) {\r\n\t\tvar cache = {}; // lwf\r\n\r\n\t\tvar skipproxy = '';\r\n\r\n\r\n\t\tvar data = store.data;\r\n\r\n\t\tfunction parsepath(path) {\r\n\t\t\tvar arr = path.split('.');\r\n\t\t\tvar builder = [];\r\n\t\t\tvar all = [];\r\n\r\n\t\t\tfor (var i = 0; i < arr.length; i++) {\r\n\t\t\t\tvar p = arr[i];\r\n\t\t\t\tvar index = p.indexOf('[');\r\n\t\t\t\tif (index === -1) {\r\n\t\t\t\t\tif (p.indexOf('-') === -1) {\r\n\t\t\t\t\t\tall.push(p);\r\n\t\t\t\t\t\tbuilder.push(all.join('.'));\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvar a = all.splice(all.length - 1);\r\n\t\t\t\t\t\tall.push(a + '[\\'' + p + '\\']');\r\n\t\t\t\t\t\tbuilder.push(all.join('.'));\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (p.indexOf('-') === -1) {\r\n\t\t\t\t\t\tall.push(p.substring(0, index));\r\n\t\t\t\t\t\tbuilder.push(all.join('.'));\r\n\t\t\t\t\t\tall.splice(all.length - 1);\r\n\t\t\t\t\t\tall.push(p);\r\n\t\t\t\t\t\tbuilder.push(all.join('.'));\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tall.push('[\\'' + p.substring(0, index) + '\\']');\r\n\t\t\t\t\t\tbuilder.push(all.join(''));\r\n\t\t\t\t\t\tall.push(p.substring(index));\r\n\t\t\t\t\t\tbuilder.push(all.join(''));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn builder;\r\n\t\t}\r\n\r\n\r\n\t\tvar binders = {},\r\n\r\n\t\t\tpaths = {},\r\n\t\t\tdefaults = {},\r\n\t\t\t$formatter = [],\r\n\t\t\tskips = {};\r\n\t\t\t$parser = [],\r\n\t\t\tnmCache = {},  // notmodified cache \r\n\t\t\ttemp = {};\r\n\r\n\r\n\t\tfunction bind(path) { // W.BIND = \r\n\t\t\tif (path instanceof Array) {\r\n\t\t\t\tfor (var i = 0; i < path.length; i++) {\r\n\t\t\t\t\tbind(path[i]);\r\n\t\t\t\t}\r\n\t\t\t\treturn this; // \r\n\t\t\t}\r\n\t\t\tpath = pathmaker(path);\r\n\t\t\tif (!path) {\r\n\t\t\t\treturn this;\r\n\t\t\t}\r\n\t\t\tvar is = path.charCodeAt(0) === 33; // !\r\n\t\t\tif (is) {\r\n\t\t\t\tpath = path.substring(1);\r\n\t\t\t}\r\n\t\t\tpath = path.replaceWildcard();\r\n\t\t\tif(path){\r\n\t\t\t\tset(path, get(path), true);\t\r\n\t\t\t} \r\n\t\t}\r\n\r\n\t\tfunction binderbind(path, absolutePath, ticks) {\r\n\t\t\tvar arr = binders[path];\r\n\t\t\tfor (var i = 0; i < arr.length; i++) {\r\n\t\t\t\tvar item = arr[i];\r\n\t\t\t\tif (item.ticks !== ticks) {\r\n\t\t\t\t\titem.ticks = ticks;\r\n\t\t\t\t\titem.exec(getx(item.path), absolutePath);  //GET no pathmake\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t   /**\r\n\t   * Creates a watcher for all changes.\r\n\t   * @param  {String} path \r\n\t   */\r\n\t\tfunction create(path) { //W.CREATE\r\n\r\n\t\t\tvar is = false;\r\n\t\t\tvar callback;\r\n\r\n\t\t\tif (langx.isString(path)) {\r\n\t\t\t\tif (proxy[path]) {\r\n\t\t\t\t\treturn proxy[path];\r\n\t\t\t\t}\r\n\t\t\t\tis = true;\r\n\t\t\t\tcallback = function(key) {\r\n\r\n\t\t\t\t\tvar p = path + (key ? '.' + key : '');\r\n\t\t\t\t\tif (skipproxy === p) {\r\n\t\t\t\t\t\tskipproxy = '';\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\tif (skipproxy === p) {\r\n\t\t\t\t\t\t\tskipproxy = '';\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tnotify(p);  // NOTIFY\r\n\t\t\t\t\t\t\treset(p);   // REEST\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, MD.delaybinder);\r\n\t\t\t\t};\r\n\r\n\t\t\t} else {\r\n\t\t\t\tcallback = path;\r\n\t\t\t}\r\n\r\n\t\t\tvar blocked = false;\r\n\t\t\tvar obj = path ? (get2(path) || {}) : {};\r\n\t\t\tvar handler = {\r\n\t\t\t\tget: function(target, property, receiver) {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\treturn new Proxy(target[property], handler);\r\n\t\t\t\t\t} catch (err) {\r\n\t\t\t\t\t\treturn Reflect.get(target, property, receiver);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tdefineProperty: function(target, property, descriptor) {\r\n\t\t\t\t\t!blocked && callback(property, descriptor);\r\n\t\t\t\t\treturn Reflect.defineProperty(target, property, descriptor);\r\n\t\t\t\t},\r\n\t\t\t\tdeleteProperty: function(target, property) {\r\n\t\t\t\t\t!blocked && callback(property);\r\n\t\t\t\t\treturn Reflect.deleteProperty(target, property);\r\n\t\t\t\t},\r\n\t\t\t\tapply: function(target, thisArg, argumentsList) {\r\n\t\t\t\t\tif (BLACKLIST[target.name]) {\r\n\t\t\t\t\t\tblocked = true;\r\n\t\t\t\t\t\tvar result = Reflect.apply(target, thisArg, argumentsList);\r\n\t\t\t\t\t\tcallback('', argumentsList[0]);\r\n\t\t\t\t\t\tblocked = false;\r\n\t\t\t\t\t\treturn result;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn Reflect.apply(target, thisArg, argumentsList);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tvar o = new Proxy(obj, handler);\r\n\r\n\t\t\tif (is) {\r\n\t\t\t\tskipproxy = path;\r\n\t\t\t\tgetx(path) == null && setx(path, obj, true);  // GET SET\r\n\t\t\t\treturn proxy[path] = o;\r\n\t\t\t} else\r\n\t\t\t\treturn o;\r\n\t\t}\r\n\r\n\r\n\t \t//cache\r\n\t\tfunction cache(path, expire, rebind) { // W.CACHEPATH = \r\n\t\t\tvar key = '$jcpath';\r\n\t\t\tWATCH(path, function(p, value) {\r\n\t\t\t\tvar obj = storages.get(key); // cachestorage(key);\r\n\t\t\t\tif (obj) {\r\n\t\t\t\t\tobj[path] = value;\r\n\t\t\t\t}else {\r\n\t\t\t\t\tobj = {};\r\n\t\t\t\t\tobj[path] = value;\r\n\t\t\t\t}\r\n\t\t\t\tstorages.put(key, obj, expire); // cachestorage(key, obj, expire);\r\n\t\t\t});\r\n\r\n\t\t\tif (rebind === undefined || rebind) {\r\n\t\t\t\tvar cache = storages.get(key); // cachestorage(key);\r\n\t\t\t\tif (cache && cache[path] !== undefined && cache[path] !== get(path)){\r\n\t\t\t\t\tsetx(path, cache[path], true);\t\r\n\t\t\t\t} \r\n\t\t\t}\r\n\t\t\treturn this; //W \r\n\t\t};\r\n\r\n\r\n\t   /**\r\n\t   * Evaluates a global formatter.\r\n\t   * @param  {String} path \r\n\t   * @param  {Object} value\r\n\t   * @param  {String} type \r\n\t   * @returns {Boolean}   \r\n\t   * OR\r\n\t   * Registers a global formatter.\r\n\t   * @param  {Function} value \r\n\t   * @param  {Boolean} path \r\n\t   */\r\n\t\tfunction format(value, path, type) {  // W.FORMATTER = M.formatter =\r\n\r\n\t\t\tif (langx.isFunction(value)) {\r\n\t\t\t\t// Prepend\r\n\t\t\t\tif (path === true) {\r\n\t\t\t\t\t$formatter.unshift(value);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t$formatter.push(value);\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn M;\r\n\t\t\t}\r\n\r\n\t\t\tvar a = $formatter;\r\n\t\t\tif (a && a.length) {\r\n\t\t\t\tfor (var i = 0, length = a.length; i < length; i++) {\r\n\t\t\t\t\tvar val = a[i].call(M, path, value, type);\r\n\t\t\t\t\tif (val !== undefined)\r\n\t\t\t\t\t\tvalue = val;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn value;\r\n\t\t};\r\n\r\n\t\t//get... \r\n\r\n\t\tfunction get(path, scope) {\r\n\r\n\t\t\tif (path == null) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar code = path.charCodeAt(0);\r\n\t\t\tif (code === 37)　{  // % \r\n\t\t\t\tpath = 'jctmp.' + path.substring(1);\r\n\t\t\t}\r\n\r\n\t\t\tvar key = '=' + path;\r\n\t\t\tif (paths[key]) {\r\n\t\t\t\treturn paths[key](scope || stores.root);\r\n\t\t\t}\r\n\r\n\t\t\tif (path.indexOf('?') !== -1) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar arr = parsepath(path);\r\n\t\t\tvar builder = [];\r\n\r\n\t\t\tfor (var i = 0, length = arr.length - 1; i < length; i++) {\r\n\t\t\t\tvar item = arr[i];\r\n\t\t\t\tif (item.substring(0, 1) !== '[') {\r\n\t\t\t\t\titem = '.' + item;\r\n\t\t\t\t}\r\n\t\t\t\tbuilder.push('if(!w' + item + ')return');\r\n\t\t\t}\r\n\r\n\t\t\tvar v = arr[arr.length - 1];\r\n\t\t\tif (v.substring(0, 1) !== '['){\r\n\t\t\t\tv = '.' + v;\r\n\t\t\t}\r\n\r\n\t\t\tvar fn = (new Function('w', builder.join(';') + ';return w' + v));\r\n\t\t\tpaths[key] = fn;\r\n\t\t\treturn fn(scope || store.data);  // MD.scope\r\n\t\t}\r\n\r\n\t\t// set...\r\n\t\tfunction set(path, value, is) {\r\n\r\n\t\t\tif (path == null) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar key = '+' + path;\r\n\r\n\t\t\tif (paths[key]) {\r\n\t\t\t\treturn paths[key](store.data, value, path, binders, binderbind, is); // MD.scope\r\n\t\t\t}\r\n\r\n\t\t\tif (path.indexOf('?') !== -1) {\r\n\t\t\t\tpath = '';\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar arr = parsepath(path);\r\n\t\t\tvar builder = [];\r\n\t\t\tvar binder = [];\r\n\r\n\t\t\tfor (var i = 0; i < arr.length - 1; i++) {\r\n\t\t\t\tvar item = arr[i];\r\n\t\t\t\tvar type = arr[i + 1] ? (REGISARR.test(arr[i + 1]) ? '[]' : '{}') : '{}';\r\n\t\t\t\tvar p = 'w' + (item.substring(0, 1) === '[' ? '' : '.') + item;\r\n\t\t\t\tbuilder.push('if(typeof(' + p + ')!==\\'object\\'||' + p + '==null)' + p + '=' + type);\r\n\t\t\t}\r\n\r\n\t\t\tfor (var i = 0; i < arr.length - 1; i++) {\r\n\t\t\t\tvar item = arr[i];\r\n\t\t\t\tbinder.push('binders[\\'' + item + '\\']&&binderbind(\\'' + item + '\\',\\'' + path + '\\',$ticks)');\r\n\t\t\t}\r\n\r\n\t\t\tvar v = arr[arr.length - 1];\r\n\t\t\tbinder.push('binders[\\'' + v + '\\']&&binderbind(\\'' + v + '\\',\\'' + path + '\\',$ticks)');\r\n\t\t\tbinder.push('binders[\\'!' + v + '\\']&&binderbind(\\'!' + v + '\\',\\'' + path + '\\',$ticks)');\r\n\r\n\t\t\tif (v.substring(0, 1) !== '['){\r\n\t\t\t\tv = '.' + v;\r\n\t\t\t}\r\n\r\n\t\t\tvar fn = (new Function('w', 'a', 'b', 'binders', 'binderbind', 'nobind', 'var $ticks=Math.random().toString().substring(2,8);if(!nobind){' + builder.join(';') + ';var v=typeof(a)==\\'function\\'?a(MAIN.compiler.get(b)):a;w' + v + '=v}' + binder.join(';') + ';return a'));\r\n\t\t\tpaths[key] = fn;\r\n\t\t\tfn(store.data, value, path, binders, binderbind, is); // MD.scope\r\n\r\n\t\t\treturn this; //C\r\n\t\t}\r\n\r\n\t\tfunction set2(scope, path, value) {\r\n\r\n\t\t\tif (path == null) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar key = '++' + path;\r\n\r\n\t\t\tif (paths[key]) {\r\n\t\t\t\treturn paths[key](scope, value, path);\r\n\t\t\t}\r\n\r\n\t\t\tvar arr = parsepath(path);\r\n\r\n\t\t\tvar builder = [];\r\n\r\n\t\t\tfor (var i = 0; i < arr.length - 1; i++) {\r\n\t\t\t\tvar item = arr[i];\r\n\t\t\t\tvar type = arr[i + 1] ? (REGISARR.test(arr[i + 1]) ? '[]' : '{}') : '{}';\r\n\t\t\t\tvar p = 'w' + (item.substring(0, 1) === '[' ? '' : '.') + item;\r\n\t\t\t\tbuilder.push('if(typeof(' + p + ')!==\\'object\\'||' + p + '==null)' + p + '=' + type);\r\n\t\t\t}\r\n\r\n\t\t\tvar v = arr[arr.length - 1];\r\n\r\n\t\t\tif (v.substring(0, 1) !== '[') {\r\n\t\t\t\tv = '.' + v;\r\n\t\t\t}\r\n\r\n\t\t\tvar fn = (new Function('w', 'a', 'b', builder.join(';') + ';w' + v + '=a;return a'));\r\n\t\t\tpaths[key] = fn;\r\n\t\t\tfn(scope, value, path);\r\n\t\t\treturn scope;\r\n\t\t}\r\n\r\n\t\t// 1 === manually\r\n\t\t// 2 === by input\r\n\t\t// 3 === default\r\n\t\tfunction setx(path, value, type) {  // M.set\r\n\r\n\t\t\tif (path instanceof Array) {\r\n\t\t\t\tfor (var i = 0; i < path.length; i++) \r\n\t\t\t\t\tsetx(path[i], value, type);\r\n\t\t\t\treturn M;\r\n\t\t\t}\r\n\r\n\t\t\tpath = pathmaker(path);\r\n\r\n\t\t\tif (!path) {\r\n\t\t\t\treturn M;\r\n\t\t\t}\r\n\r\n\t\t\tvar is = path.charCodeAt(0) === 33; // !\r\n\t\t\tif (is) {\r\n\t\t\t\tpath = path.substring(1);\r\n\t\t\t}\r\n\r\n\t\t\tif (path.charCodeAt(0) === 43) { // +\r\n\t\t\t\tpath = path.substring(1);\r\n\t\t\t\treturn push(path, value, type);\r\n\t\t\t}\r\n\r\n\t\t\tif (!path) {\r\n\t\t\t\treturn M;\r\n\t\t\t}\r\n\r\n\t\t\tvar isUpdate = (typeof(value) === 'object' && !(value instanceof Array) && value != null);\r\n\t\t\tvar reset = type === true;\r\n\t\t\tif (reset) {\r\n\t\t\t\ttype = 1;\r\n\t\t\t}\r\n\r\n\t\t\tskipproxy = path;\r\n\t\t\tset(path, value);\r\n\r\n\t\t\tif (isUpdate) {\r\n\t\t\t\treturn update(path, reset, type, true);\r\n\t\t\t}\r\n\r\n\t\t\tvar result = get(path);\r\n\t\t\tvar state = [];\r\n\r\n\t\t\tif (type === undefined) {\r\n\t\t\t\ttype = 1;\r\n\t\t\t}\r\n\r\n\t\t\tvar all = view.components;//M.components;\r\n\r\n\t\t\tfor (var i = 0, length = all.length; i < length; i++) {\r\n\t\t\t\tvar com = all[i];\r\n\r\n\t\t\t\tif (!com || com.disabled || com.$removed || !com.$loaded || !com.path || !com.$compare(path))\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\tif (com.setter) {\r\n\t\t\t\t\tif (com.path === path) {\r\n\t\t\t\t\t\tif (com.setter) {\r\n\t\t\t\t\t\t\tcom.setterX(result, path, type);\r\n\t\t\t\t\t\t\tcom.$interaction(type);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (com.setter) {\r\n\t\t\t\t\t\t\tcom.setterX(get(com.path), path, type);\r\n\t\t\t\t\t\t\tcom.$interaction(type);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!com.$ready) {\r\n\t\t\t\t\tcom.$ready = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttype !== 3 && com.state && state.push(com);\r\n\r\n\t\t\t\tif (reset) {\r\n\t\t\t\t\tif (!com.$dirty_disabled)\r\n\t\t\t\t\t\tcom.$dirty = true;\r\n\t\t\t\t\tif (!com.$valid_disabled) {\r\n\t\t\t\t\t\tcom.$valid = true;\r\n\t\t\t\t\t\tcom.$validate = false;\r\n\t\t\t\t\t\tif (com.validate) {\r\n\t\t\t\t\t\t\tcom.$valid = com.validate(result);\r\n\t\t\t\t\t\t\tcom.$interaction(102);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfindControl2(com);\r\n\r\n\t\t\t\t} else if (com.validate && !com.$valid_disabled) {\r\n\t\t\t\t\tcom.valid(com.validate(result), true);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (reset) {\r\n\t\t\t\tcaches.clear('dirty', 'valid');\r\n\t\t\t}\r\n\r\n\t\t\tfor (var i = 0, length = state.length; i < length; i++) {\r\n\t\t\t\tstate[i].stateX(type, 5);\r\n\t\t\t}\r\n\r\n\t\t\temitwatch(path, result, type);\r\n\t\t\treturn M;\r\n\t\t}\r\n\r\n\t\tfunction defaultValue(path, timeout, onlyComponent, reset) { //M.default = \r\n\r\n\t\t\tif (timeout > 0) {\r\n\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\tdefaultValue(path, 0, onlyComponent, reset);\r\n\t\t\t\t}, timeout);\r\n\t\t\t\treturn this;\r\n\t\t\t}\r\n\r\n\t\t\tif (typeof(onlyComponent) === 'boolean') {\r\n\t\t\t\treset = onlyComponent;\r\n\t\t\t\tonlyComponent = null;\r\n\t\t\t}\r\n\r\n\t\t\tif (reset === undefined) {\r\n\t\t\t\treset = true;\r\n\t\t\t}\r\n\r\n\t\t\tpath = pathmaker(path.replaceWildcard()); //pathmaker(path.replace(REGWILDCARD, ''));\r\n\r\n\t\t\t// Reset scope\r\n\t\t\tvar key = path.replace(/\\.\\*$/, '');\r\n\t\t\tvar fn = defaults['#' + langx.hashCode(key)]; // HASH\r\n\t\t\tvar tmp;\r\n\r\n\t\t\tif (fn) {\r\n\t\t\t\ttmp = fn();\r\n\t\t\t\tset(key, tmp);\r\n\t\t\t}\r\n\r\n\t\t\tvar arr = [];\r\n\t\t\tvar all = view.components;//M.components;\r\n\r\n\t\t\tfor (var i = 0, length = all.length; i < length; i++) {\r\n\t\t\t\tvar com = all[i];\r\n\r\n\t\t\t\tif (!com || com.$removed || com.disabled || !com.$loaded || !com.path || !com.$compare(path)) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (com.state) {\r\n\t\t\t\t\tarr.push(com);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (onlyComponent && onlyComponent._id !== com._id) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (com.$default) {\r\n\t\t\t\t com.set(com.$default(), 3);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!reset) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfindControl2(com);\r\n\r\n\t\t\t\tif (!com.$dirty_disabled) {\r\n\t\t\t\t\tcom.$dirty = true;\r\n\t\t\t\t}\r\n\t\t\t\tif (!com.$valid_disabled) {\r\n\t\t\t\t\tcom.$valid = true;\r\n\t\t\t\t\tcom.$validate = false;\r\n\t\t\t\t\tif (com.validate) {\r\n\t\t\t\t\t\tcom.$valid = com.validate(com.get());\r\n\t\t\t\t\t\tcom.$interaction(102);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (reset) {\r\n\t\t\t\tcache.clearPageData('valid', 'dirty');\r\n\t\t\t\tlangx.state(arr, 3, 3);\r\n\t\t\t}\r\n\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\r\n\t\t// 1 === manually\r\n\t\t// 2 === by input\r\n\t\tfunction update(path, reset, type, wasset) { // M.update =  // immUpdate\r\n\t\t\tif (path instanceof Array) {\r\n\t\t\t\tfor (var i = 0; i < path.length; i++) {\r\n\t\t\t\t\tupdate(store, path[i], reset, type);\r\n\t\t\t\t}\r\n\t\t\t\treturn this;  // M\r\n\t\t\t}\r\n\r\n\t\t\tpath = pathmaker(path);\r\n\t\t\tif (!path) {\r\n\t\t\t\treturn this;  // M\r\n\t\t\t}\r\n\r\n\t\t\tvar is = path.charCodeAt(0) === 33; // !\r\n\t\t\tif (is) {\r\n\t\t\t\tpath = path.substring(1);\r\n\t\t\t}\r\n\r\n\t\t\tpath = path.replaceWildcard();\r\n\t\t\tif (!path) {\r\n\t\t\t\treturn this;  // M\r\n\t\t\t}\r\n\r\n\t\t\tif (!wasset) {\r\n\t\t\t\tget(path, get(path), true);\r\n\t\t\t}\r\n\r\n\t\t\tvar state = [];\r\n\r\n\t\t\tif (type === undefined) {\r\n\t\t\t\ttype = 1; // manually\r\n\t\t\t}\r\n\r\n\t\t\tskipproxy = path;\r\n\r\n\t\t\tvar all = view.components;//M.components;\r\n\t\t\tfor (var i = 0, length = all.length; i < length; i++) {\r\n\t\t\t\tvar com = all[i];\r\n\r\n\t\t\t\tif (!com || com.disabled || com.$removed || !com.$loaded || !com.path || !com.$compare(path))\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\tvar result = com.get();\r\n\t\t\t\tif (com.setter) {\r\n\t\t\t\t\tcom.$skip = false;\r\n\t\t\t\t\tcom.setterX(result, path, type);\r\n\t\t\t\t\tcom.$interaction(type);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!com.$ready) {\r\n\t\t\t\t\tcom.$ready = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (reset === true) {\r\n\r\n\t\t\t\t\tif (!com.$dirty_disabled) {\r\n\t\t\t\t\t\tcom.$dirty = true;\r\n\t\t\t\t\t\tcom.$interaction(101);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (!com.$valid_disabled) {\r\n\t\t\t\t\t\tcom.$valid = true;\r\n\t\t\t\t\t\tcom.$validate = false;\r\n\t\t\t\t\t\tif (com.validate) {\r\n\t\t\t\t\t\t\tcom.$valid = com.validate(result);\r\n\t\t\t\t\t\t\tcom.$interaction(102);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfindControl2(com);\r\n\r\n\t\t\t\t} else if (com.validate && !com.$valid_disabled) {\r\n\t\t\t\t\tcom.valid(com.validate(result), true);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (com.state) {\r\n\t\t\t\t\tstate.push(com);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (reset) {\r\n\t\t\t\tclear('dirty', 'valid');\r\n\t\t\t}\r\n\r\n\t\t\tfor (var i = 0, length = state.length; i < length; i++) {\r\n\t\t\t\tstate[i].stateX(1, 4);\r\n\t\t\t}\r\n\r\n\t\t\temitwatch(path, get(path), type);\r\n\r\n\t\t\treturn this; // M\r\n\t\t}\r\n\t\t\r\n\t   /**\r\n\t   * Evaluate String expression as JavaScript code.\r\n\t   * @param  {String/Object} path Can be object if \"path_is_real_value\" is \"true\"\r\n\t   * @param  {String} expression A condition.\r\n\t   * @param  {Boolean} path_is_real_value Optional, default: false\r\n\t   * @returns {Boolean}   \r\n\t   */\r\n\t\tfunction evaluate(path, expression, nopath) { //W.EVALUATE = \r\n\r\n\t\t\tvar key = 'eval' + expression;\r\n\t\t\tvar exp = temp[key];\r\n\t\t\tvar val = null;\r\n\r\n\t\t\tif (nopath) {\r\n\t\t\t\tval = path;\r\n\t\t\t} else {\r\n\t\t\t\tval = get(path);\r\n\t\t\t}\r\n\r\n\t\t\tif (exp) {\r\n\t\t\t\treturn exp.call(val, val, path);\r\n\t\t\t}\r\n\r\n\t\t\tif (expression.indexOf('return') === -1) {\r\n\t\t\t\texpression = 'return ' + expression;\r\n\t\t\t}\r\n\r\n\t\t\texp = new Function('value', 'path', expression);\r\n\t\t\ttemp[key] = exp;\r\n\t\t\treturn exp.call(val, val, path);\r\n\t\t}\r\n\r\n\t\t// inc.. \r\n\t\tfunction inc(path, value, type) {  // M.inc\r\n\r\n\t\t\tif (path instanceof Array) {\r\n\t\t\t\tfor (var i = 0; i < path.length; i++)\r\n\t\t\t\t\tinc(path[i], value, type);\r\n\t\t\t\treturn this; // M\r\n\t\t\t}\r\n\r\n\t\t\t//path = pathmaker(path); ---\r\n\r\n\t\t\tif (!path) {\r\n\t\t\t\treturn this; // M\r\n\t\t\t}\r\n\r\n\t\t\tvar current = get(path);\r\n\t\t\tif (!current) {\r\n\t\t\t\tcurrent = 0;\r\n\t\t\t} else if (!langx.isNumber(current)) {\r\n\t\t\t\tcurrent = parseFloat(current);\r\n\t\t\t\tif (isNaN(current))\r\n\t\t\t\t\tcurrent = 0;\r\n\t\t\t}\r\n\r\n\t\t\tcurrent += value;\r\n\t\t\tsetx(path, current, type);\r\n\t\t\treturn this; // M\r\n\t\t}\r\n\r\n\r\n\t\t// extend...\r\n\t\tfunction extend(path, value, type) { // M.extend\r\n\t\t\tpath = pathmaker(path);\r\n\t\t\tif (path) {\r\n\t\t\t\tvar val = get(path);\r\n\t\t\t\tif (val == null) {\r\n\t\t\t\t\tval = {};\r\n\t\t\t\t}\r\n\t\t\t\tsetx(path, langx.extend(val, value), type);\r\n\t\t\t}\r\n\t\t\treturn this; // M\r\n\t\t}\r\n\r\n\r\n\t\tfunction push(path, value, type) { // M.push\r\n\r\n\t\t\tif (path instanceof Array) {\r\n\t\t\t\tfor (var i = 0; i < path.length; i++) {\r\n\t\t\t\t\tpush(path[i], value, type);\r\n\t\t\t\t}\r\n\t\t\t\treturn this; // M\r\n\t\t\t}\r\n\r\n\t\t\tvar arr = get(path);\r\n\t\t\tvar n = false;\r\n\r\n\t\t\tif (!(arr instanceof Array)) {\r\n\t\t\t\tarr = [];\r\n\t\t\t\tn = true;\r\n\t\t\t}\r\n\r\n\t\t\tvar is = true;\r\n\t\t\tskipproxy = path;\r\n\r\n\t\t\tif (value instanceof Array) {\r\n\t\t\t\tif (value.length)\r\n\t\t\t\t\tarr.push.apply(arr, value);\r\n\t\t\t\telse {\r\n\t\t\t\t\tis = false;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tarr.push(value);\r\n\t\t\t}\r\n\r\n\t\t\tif (n) {\r\n\t\t\t\tsetx(path, arr, type);\r\n\t\t\t} else if (is) {\r\n\t\t\t\tupdate(path, undefined, type);\r\n\t\t\t}\r\n\r\n\t\t\treturn this; // M\r\n\t\t}\r\n\r\n\t   /**\r\n\t   * Creates an object on the path and notifies all components\r\n\t   * @param  {String} path \r\n\t   * @param  {Function} fn \r\n\t   * @param  {Boolean} update Optional Optional, default \"true\"\r\n\t   */\r\n\t\tfunction make(obj, fn, update) { // W.MAKE\r\n\r\n\t\t\tswitch (typeof(obj)) {\r\n\t\t\t\tcase 'function':\r\n\t\t\t\t\tfn = obj;\r\n\t\t\t\t\tobj = {};\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'string':\r\n\t\t\t\t\tvar p = obj;\r\n\t\t\t\t\tvar is = true;\r\n\t\t\t\t\tobj = get(p);\r\n\t\t\t\t\tif (obj == null) {\r\n\t\t\t\t\t\tis = false;\r\n\t\t\t\t\t\tobj = {};\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfn.call(obj, obj, p, function(path, value) {\r\n\t\t\t\t\t\tsetx(obj, path, value);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif (is && (update === undefined || update === true))\r\n\t\t\t\t\t\tupdate(p, true);\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tif (C.ready) {\r\n\t\t\t\t\t\t\tset(p, obj);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tsetx(p, obj, true);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn obj;\r\n\t\t\t}\r\n\r\n\t\t\tfn.call(obj, obj, '');\r\n\t\t\treturn obj;\r\n\t\t}\r\n\r\n\t   /**\r\n\t   * Reads a state, it works with dirty state.\r\n\t   * @param  {String} path \r\n\t   * @return {Boolean} \r\n\t   */\r\n\t\tfunction changed(path) {\r\n\t\t\treturn !com_dirty(path);\r\n\t\t};\r\n\r\n\r\n\t   /**\r\n\t   * Set a change for the path or can read the state, it works with dirty state.\r\n\t   * @param  {String} path \r\n\t   * @param  {Boolean} value Optional\r\n\t   * @return {Boolean} \r\n\t   */\r\n\t\tfunction change(path, value) {\r\n\t\t\tif (value == null) {\r\n\t\t\t\tvalue = true;\r\n\t\t\t}\r\n\t\t\treturn !com_dirty(path, !value);\r\n\t\t};\r\n\r\n\r\n\t\t/*\r\n\t\t * This method is same like EXEC() method but it returns a function.\r\n\t\t * It must be used as a callback. All callback arguments will be used for the targeted method.\r\n\t\t */\r\n\t\tfunction exec2(path, tmp) { //W.EXEC2 = \r\n\t\t\tvar is = path === true;\r\n\t\t\treturn function(a, b, c, d) {\r\n\t\t\t\tif (is) {\r\n\t\t\t\t\texec(tmp, path, a, b, c, d);\r\n\t\t\t\t} else {\r\n\t\t\t\t\texec(path, a, b, c, d);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t};\r\n\r\n\t  /**\r\n\t   * Executes a method according to the path. It wont't throw any exception if the method not exist.\r\n\t   * @param  {Boolean} wait Optional enables a waiter for the method instance (if method doesn't exist) \r\n\t   * @param  {String} path \r\n\t   * @param  {Object} a - Optional, additional argument\r\n\t   * @param  {Object} b - Optional, additional argument\r\n\t   * @param  {Object} c - Optional, additional argument\r\n\t   */\r\n\t\tfunction exec(path) {   // W.EXEC = \r\n\r\n\t\t\tvar arg = [];\r\n\t\t\tvar f = 1;\r\n\t\t\tvar wait = false;\r\n\t\t\tvar p;\r\n\t\t\tvar ctx = this;\r\n\r\n\t\t\tif (path === true) {\r\n\t\t\t\twait = true;\r\n\t\t\t\tpath = arguments[1];\r\n\t\t\t\tf = 2;\r\n\t\t\t}\r\n\r\n\t\t\tpath = path.env();\r\n\r\n\t\t\tfor (var i = f; i < arguments.length; i++) {\r\n\t\t\t\targ.push(arguments[i]);\r\n\t\t\t}\r\n\r\n\t\t\tvar c = path.charCodeAt(0);\r\n\r\n\t\t\t// Event\r\n\t\t\tif (c === 35) { // # , ex: EXEC('#submit', true); --> EMIT('submit', true);\r\n\t\t\t\tp = path.substring(1);\r\n\t\t\t\tif (wait) {\r\n\t\t\t\t\t!events[p] && exechelper(ctx, path, arg);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tEMIT.call(ctx, p, arg[0], arg[1], arg[2], arg[3], arg[4]);\r\n\t\t\t\t}\r\n\t\t\t\treturn EXEC;\r\n\t\t\t}\r\n\r\n\t\t\tvar ok = 0;\r\n\r\n\t\t\t// PLUGINS\r\n\t\t\tif (c === 64) { // @ , ex: EXEC('@PLUGIN.method_name');\r\n\t\t\t\tvar index = path.indexOf('.');\r\n\t\t\t\tp = path.substring(1, index);\r\n\t\t\t\tvar ctrl = plugins.find(p); //W.PLUGINS[p];\r\n\t\t\t\tif (ctrl) {\r\n\t\t\t\t\tvar fn = ctrl[path.substring(index + 1)];\r\n\t\t\t\t\tif (langx.isFunction(fn) ) { // if (typeof(fn) === TYPE_FN) {\r\n\t\t\t\t\t\tfn.apply(ctx === Window ? ctrl : ctx, arg);\r\n\t\t\t\t\t\tok = 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (wait && !ok) {\r\n\t\t\t\t exechelper(ctx, path, arg);\r\n\t\t\t\t}\r\n\t\t\t\treturn EXEC;\r\n\t\t\t}\r\n\r\n\t\t\t// PLUGINS\r\n\t\t\tvar index = path.indexOf('/'); // ex : EXEC('PLUGIN/method_name');\r\n\t\t\tif (index !== -1) {\r\n\t\t\t\tp = path.substring(0, index);\r\n\t\t\t\tvar ctrl = plugins.find(p); //W.PLUGINS[p];\r\n\t\t\t\tvar fn = path.substring(index + 1);\r\n\t\t\t\tif (ctrl && typeof(ctrl[fn]) === TYPE_FN) {\r\n\t\t\t\t\tctrl[fn].apply(ctx === W ? ctrl : ctx, arg);\r\n\t\t\t\t\tok = 1;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (wait && !ok) {\r\n\t\t\t\t exechelper(ctx, path, arg);\r\n\t\t\t\t}\r\n\t\t\t\treturn EXEC;\r\n\t\t\t}\r\n\r\n\t\t\tvar fn = paths.get(path);\r\n\r\n\t\t\tif (langx.isFunction(fn)) {\r\n\t\t\t\tfn.apply(ctx, arg);\r\n\t\t\t\tok = 1;\r\n\t\t\t}\r\n\r\n\t\t\tif (wait && !ok) {\r\n\t\t\t\texechelper(ctx, path, arg);\r\n\t\t\t}\r\n\t\t\treturn exec;\r\n\t\t};\r\n\r\n\r\n\r\n\t   /**\r\n\t   * Checks dirty and valid paths for all declared components on the path. \r\n\t   * If the method return true then the components are validated and \r\n\t   * some component has been changed by user (otherwise: false).\r\n\t   * @param  {String} path \r\n\t   * @param  {String|Array} except  With absolute paths for skipping\r\n\t   * @returns {Boolean}   \r\n\t   */\r\n\t\tfunction can(path, except) { // W.CAN = \r\n\t\t\tpath = pathmaker(path);\r\n\t\t\treturn !com_dirty(path, except) && com_valid(path, except);\r\n\t\t}\r\n\r\n\t   /**\r\n\t   * Checks dirty and valid paths for all declared components on the path. \r\n\t   * If the method return false then the components are validated and \r\n\t   * some component has been changed by user (otherwise: true).\r\n\t   * @param  {String} path \r\n\t   * @param  {String|Array} except  With absolute paths for skipping\r\n\t   * @returns {Boolean}   \r\n\t   */\r\n\t\tfunction disabled(path, except) { // W.DISABLED = \r\n\t\t\tpath = pathmaker(path);\r\n\t\t\treturn com_dirty(path, except) || !com_valid(path, except);\r\n\t\t}\r\n\r\n\t   /**\r\n\t   * Highlights all components on the path as invalid. \r\n\t   * @param  {String} path \r\n\t   * @param  {String|Array} except  With absolute paths for skipping\r\n\t   * @returns {Boolean}   \r\n\t   */\r\n\t\tfunction invalid(path, onlyComponent) {  // W.INVALID = \r\n\t\t\tpath = pathmaker(path);\r\n\t\t\tif (path) {\r\n\t\t\t\tcom_dirty(path, false, onlyComponent, true);\r\n\t\t\t\tcom_valid(path, false, onlyComponent);\r\n\t\t\t}\r\n\t\t\treturn W;\r\n\t\t};\r\n\r\n\t   /**\r\n\t   * Resets dirty and valid state in all components on the path.\r\n\t   * @param  {String} path \r\n\t   * @param  {Number} delay  Optional, in milliseconds (default: 0)\r\n\t   */\r\n\t\tfunction reset(path, timeout, onlyComponent) { //W.RESET = M.reset\r\n\r\n\t\t\tif (timeout > 0) {\r\n\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\treset(path);\r\n\t\t\t\t}, timeout);\r\n\t\t\t\treturn this;\r\n\t\t\t}\r\n\r\n\t\t\tpath = pathmaker(path).replaceWildcard();\r\n\r\n\t\t\tvar arr = [];\r\n\t\t\tvar all = view.components;//M.components;\r\n\r\n\t\t\tfor (var i = 0, length = all.length; i < length; i++) {\r\n\t\t\t\tvar com = all[i];\r\n\t\t\t\tif (!com || com.$removed || com.disabled || !com.$loaded || !com.path || !com.$compare(path)) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcom.state && arr.push(com);\r\n\r\n\t\t\t\tif (onlyComponent && onlyComponent._id !== com._id) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfindControl2(com);\r\n\r\n\t\t\t\tif (!com.$dirty_disabled) {\r\n\t\t\t\t\tcom.$dirty = true;\r\n\t\t\t\t\tcom.$interaction(101);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!com.$valid_disabled) {\r\n\t\t\t\t\tcom.$valid = true;\r\n\t\t\t\t\tcom.$validate = false;\r\n\t\t\t\t\tif (com.validate) {\r\n\t\t\t\t\t\tcom.$valid = com.validate(com.get());\r\n\t\t\t\t\t\tcom.$interaction(102);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tclear('valid', 'dirty');\r\n\t\t\tstate(arr, 1, 3);\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\tfunction used(path) {   //M.used\r\n\t\t\teach(function(obj) {\r\n\t\t\t\t!obj.disabled && obj.used();\r\n\t\t\t}, path);\r\n\t\t\treturn this;\r\n\t\t};\r\n\r\n\t   /**\r\n\t   * Performs SET() and CHANGE() together.\r\n\t   * @param  {String} path \r\n\t   * @param  {Object|Array} value.\r\n\t   * @param  {String/Number} timeout  Optional, \"value > 10\" will be used as delay\r\n\t   * @param {Boolean} reset Optional\r\n\t   */\r\n\t\tfunction modify (path, value, timeout) { // W.MODIFY =\r\n\t\t\tif (path && typeof(path) === 'object') {\r\n\t\t\t\tObject.keys(path).forEach(function(k) {\r\n\t\t\t\t\tmodify(k, path[k], value);\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tif (langx.isFunction(value)) {\r\n\t\t\t\t\tvalue = value(get(path));\r\n\t\t\t\t}\r\n\t\t\t\tsetx(path, value, timeout); \r\n\t\t\t\tif (timeout) {\r\n\t\t\t\t\tlangx.setTimeout(change, timeout + 5, path);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tchange(path);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn this;\r\n\t\t};\r\n\r\n\t   /**\r\n\t   * Returns all modified components by user on the path.\r\n\t   * @param  {String} path \r\n\t   * @returns {Array<String>}   \r\n\t   */\r\n\t\tfunction modified(path) { //W.MODIFIED = \r\n\t\t\tvar output = [];\r\n\t\t\teach(function(obj) {\r\n\t\t\t\tif (!(obj.disabled || obj.$dirty_disabled)) {\r\n\t\t\t\t\tobj.$dirty === false && output.push(obj.path);\r\n\t\t\t\t}\r\n\t\t\t}, pathmaker(path));\r\n\t\t\treturn output;\r\n\t\t}\r\n\r\n\r\n\t   /**\r\n\t   * Checks whether the value has not been modified on the path.\r\n\t   * @param  {String} path \r\n\t   * @param {Object} value  Optional\r\n\t   * @param {Array<String>} fields  Optional, field names\r\n\t   * @returns {Booean}   \r\n\t   */\r\n\t\tfunction notmodified(path, value, fields) { // W.NOTMODIFIED = \r\n\r\n\t\t\tif (value === undefined) {\r\n\t\t\t\tvalue = get(path);\r\n\t\t\t}\r\n\r\n\t\t\tif (value === undefined) {\r\n\t\t\t\tvalue = null;\r\n\t\t\t}\r\n\r\n\t\t\tif (fields) {\r\n\t\t\t\tpath = path.concat('#', fields);\r\n\t\t\t}\r\n\r\n\t\t\tvar s = langx.stringify(value, false, fields); // STRINGIFY\r\n\t\t\tvar hash = langx.hashCode(s); // HASH\r\n\t\t\tvar key =  path; // 'notmodified.' + path\r\n\r\n\t\t\tif (nmCache[key] === hash) { // cache\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t\tnmCache[key] = hash; //cache \r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tfunction errors(path, except, highlight) { //W.ERRORS = \r\n\r\n\t\t\tif (path instanceof Array) {\r\n\t\t\t\texcept = path;\r\n\t\t\t\tpath = undefined;\r\n\t\t\t}\r\n\r\n\t\t\tif (except === true) {\r\n\t\t\t\texcept = highlight instanceof Array ? highlight : null;\r\n\t\t\t\thighlight = true;\r\n\t\t\t}\r\n\r\n\t\t\tvar arr = [];\r\n\r\n\t\t\teach(function(obj) { // M.each\r\n\t\t\t\tif (!obj.disabled && (!except || !obj.$except(except)) && obj.$valid === false && !obj.$valid_disabled)\r\n\t\t\t\t\tarr.push(obj);\r\n\t\t\t}, pathmaker(path));\r\n\r\n\t\t\thighlight && langx.state(arr, 1, 1);\r\n\t\t\treturn arr;\r\n\t\t}\r\n\r\n\r\n\t\tfunction rewrite(path, value, type) { // W.REWRITE = \r\n\t\t\tpath = pathmaker(path);\r\n\t\t\tif (path) {\r\n\t\t\t\tskipproxy = path;\r\n\t\t\t\tset(path, value);\r\n\t\t\t\temitwatch(path, value, type);\r\n\t\t\t}\r\n\t\t\treturn this; // W\r\n\t\t}\r\n\r\n\t\t// ===============================================================\r\n\t\t// MAIN FUNCTIONS\r\n\t\t// ===============================================================\r\n\r\n\t   /**\r\n\t   * Evaluates a global parser.\r\n\t   * @param  {String} path \r\n\t   * @param  {Object} value\r\n\t   * @param  {String} type \r\n\t   * @returns {Boolean}   \r\n\t   * OR\r\n\t   * Registers a global parser.\r\n\t   * @param  {Function} value \r\n\t   */\r\n\t\tfunction parser(value, path, type) { //W.PARSER = M.parser =  \r\n\r\n\t\t\tif (langx.isFunction(value)) {\r\n\r\n\t\t\t\t// Prepend\r\n\t\t\t\tif (path === true) {\r\n\t\t\t\t\t$parser.unshift(value);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t$parser.push(value);\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn this;\r\n\t\t\t}\r\n\r\n\t\t\tvar a = $parser;\r\n\t\t\tif (a && a.length) {\r\n\t\t\t\tfor (var i = 0, length = a.length; i < length; i++) {\r\n\t\t\t\t\tvalue = a[i].call(this, path, value, type);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn value;\r\n\t\t}\r\n\r\n\t\tparser(function(path, value, type) {\r\n\r\n\t\t\tswitch (type) {\r\n\t\t\t\tcase 'number':\r\n\t\t\t\tcase 'currency':\r\n\t\t\t\tcase 'float':\r\n\t\t\t\t\tvar v = +(langx.isString(value) ? value.trimAll().replace(REGCOMMA, '.') : value);\r\n\t\t\t\t\treturn isNaN(v) ? null : v;\r\n\r\n\t\t\t\tcase 'date':\r\n\t\t\t\tcase 'datetime':\r\n\r\n\t\t\t\t\tif (!value) {\r\n\t\t\t\t\t\treturn null;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (value instanceof Date) {\r\n\t\t\t\t\t\treturn value;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvalue = value.parseDate();\r\n\t\t\t\t\treturn value && value.getTime() ? value : null;\r\n\t\t\t}\r\n\r\n\t\t\treturn value;\r\n\t\t});\r\n\r\n\t   /**\r\n\t   * skips component.setter for future update. It's incremental.\r\n\t   * @param  {String} pathA Absolute path according to the component \"data-jc-path\"  \r\n\t   * @param  {String} pathB Absolute path according to the component \"data-jc-path\"  \r\n\t   * @param  {String} pathN Absolute path according to the component \"data-jc-path\"  \r\n\t   */\r\n\t\tfunction skip() { // W.SKIP = \r\n\t\t\tfor (var j = 0; j < arguments.length; j++) {\r\n\t\t\t\tvar arr = arguments[j].split(',');\r\n\t\t\t\tfor (var i = 0, length = arr.length; i < length; i++) {\r\n\t\t\t\t\tvar p = arr[i].trim();\r\n\t\t\t\t\tif (skips[p]) {\r\n\t\t\t\t\t\tskips[p]++;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tskips[p] = 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\treturn {\r\n\t\t\t\"bind\"  : bind,\r\n\t\t\t\"cache\" : cache,\r\n\t\t\t\"can\" : can,\r\n\t\t\t\"change\" : change,\r\n\t\t\t\"changed\" : changed,\r\n\t\t\t\"create\" : create,\r\n\t\t\t\"default\" : defaultValue,\r\n\t\t\t\"disabled\" : disabled,\r\n\t\t\t\"errors\" : errors,\r\n\t\t\t\"evaluate\" : evaluate,\r\n\t\t\t\"exec\" : exec,\r\n\t\t\t\"exec2\" : exec2,\r\n\t\t\t\"extend\" : extend,\r\n\t\t\t\"format\" : format,\r\n\t\t\t\"get\"  : get,\r\n\t\t\t\"inc\"  : inc,\r\n\t\t\t\"invalid\" : invalid,\r\n\t\t\t\"make\" : make,\r\n\t\t\t\"modify\" : modify,\r\n\t\t\t\"modified\" : modified,\r\n\t\t\t\"parser\" : parser,\r\n\t\t\t\"push\" : push,\r\n\t\t\t\"reset\" : reset,\r\n\t\t\t\"rewrite\" : rewrite,\r\n\t\t\t\"set\"  : set,\r\n\t\t\t\"set2\" : set2,\r\n \t\t\t\"setx\" : setx,\r\n \t\t\t\"skip\" : skip,\r\n \t\t\t\"update\" : update,\r\n \t\t\t\"used\" : used\r\n\t\t};\r\n\t}\r\n\r\n\treturn storing;\r\n});"]}