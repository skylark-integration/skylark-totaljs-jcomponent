{"version":3,"sources":["views/storing.js"],"names":["define","langx","pathmaker","BLACKLIST","sort","reverse","splice","slice","pop","unshift","shift","push","REGISARR","view","cache","skipproxy","eventer","binding","store","option","parsepath","path","arr","split","builder","all","i","length","p","index","indexOf","join","a","substring","paths","defaults","$formatter","skips","expire","rebind","key","WATCH","value","obj","storages","get","put","undefined","setx","this","scope","charCodeAt","data","item","v","fn","Function","set","is","binders","binderbind","binder","type","test","Array","isUpdate","reset","update","result","state","componenter","components","com","disabled","$removed","$loaded","$compare","setter","setterX","$interaction","$ready","$dirty_disabled","$dirty","$valid_disabled","$valid","$validate","validate","findControl2","valid","caches","clear","stateX","emitwatch","wasset","replaceWildcard","$skip","n","apply","change","com_dirty","exec","arg","f","wait","ctx","arguments","env","c","events","exechelper","EMIT","call","EXEC","ok","ctrl","plugins","find","isFunction","Window","TYPE_FN","W","timeout","onlyComponent","setTimeout","_id","parser","$parser","nmCache","temp","isString","trimAll","replace","REGCOMMA","isNaN","Date","parseDate","getTime","bind","can","except","com_valid","changed","create","callback","proxy","notify","MD","delaybinder","blocked","handler","target","property","receiver","Proxy","err","Reflect","defineProperty","descriptor","deleteProperty","thisArg","argumentsList","name","o","default","defaultValue","hashCode","$default","clearPageData","errors","highlight","each","$except","evaluate","expression","nopath","exp","val","exec2","tmp","b","d","extend","format","M","inc","current","isNumber","parseFloat","invalid","make","C","ready","modify","Object","keys","forEach","k","modified","output","rewrite","set2","skipInc","j","trim","skipDec","used"],"mappings":"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","file":"../../views/storing.js","sourcesContent":["define([\r\n\t\"../langx\",\r\n\t\"../binding/pathmaker\"\r\n],function(langx,pathmaker){\r\n\tvar\tSELINPUT = 'input,textarea,select';\r\n\tvar BLACKLIST = { sort: 1, reverse: 1, splice: 1, slice: 1, pop: 1, unshift: 1, shift: 1, push: 1 };\r\n\t\r\n\tvar REGISARR = /\\[\\d+\\]$/;\r\n\t\r\n\tfunction storing (view) {\r\n\t\tvar cache = {}; // lwf\r\n\r\n\t\tvar skipproxy = '';\r\n\r\n\t\tvar eventer = view.eventer,\r\n\t\t\tbinding = view.binding;\r\n\r\n\t\tvar store = view.option(\"store\");\r\n\r\n\r\n\r\n\t\tfunction parsepath(path) {\r\n\t\t\tvar arr = path.split('.');\r\n\t\t\tvar builder = [];\r\n\t\t\tvar all = [];\r\n\r\n\t\t\tfor (var i = 0; i < arr.length; i++) {\r\n\t\t\t\tvar p = arr[i];\r\n\t\t\t\tvar index = p.indexOf('[');\r\n\t\t\t\tif (index === -1) {\r\n\t\t\t\t\tif (p.indexOf('-') === -1) {\r\n\t\t\t\t\t\tall.push(p);\r\n\t\t\t\t\t\tbuilder.push(all.join('.'));\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvar a = all.splice(all.length - 1);\r\n\t\t\t\t\t\tall.push(a + '[\\'' + p + '\\']');\r\n\t\t\t\t\t\tbuilder.push(all.join('.'));\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (p.indexOf('-') === -1) {\r\n\t\t\t\t\t\tall.push(p.substring(0, index));\r\n\t\t\t\t\t\tbuilder.push(all.join('.'));\r\n\t\t\t\t\t\tall.splice(all.length - 1);\r\n\t\t\t\t\t\tall.push(p);\r\n\t\t\t\t\t\tbuilder.push(all.join('.'));\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tall.push('[\\'' + p.substring(0, index) + '\\']');\r\n\t\t\t\t\t\tbuilder.push(all.join(''));\r\n\t\t\t\t\t\tall.push(p.substring(index));\r\n\t\t\t\t\t\tbuilder.push(all.join(''));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn builder;\r\n\t\t}\r\n\r\n\t\tvar paths = {},\r\n\t\t\tdefaults = {},\r\n\t\t\t$formatter = [],\r\n\t\t\tskips = {};\r\n\t\t\t$parser = [],\r\n\t\t\tnmCache = {},  // notmodified cache \r\n\t\t\ttemp = {};\r\n\r\n\r\n\t\tfunction bind(path) { // W.BIND = \r\n\t\t\tif (path instanceof Array) {\r\n\t\t\t\tfor (var i = 0; i < path.length; i++) {\r\n\t\t\t\t\tbind(path[i]);\r\n\t\t\t\t}\r\n\t\t\t\treturn this; // \r\n\t\t\t}\r\n\t\t\tpath = pathmaker(path);\r\n\t\t\tif (!path) {\r\n\t\t\t\treturn this;\r\n\t\t\t}\r\n\t\t\tvar is = path.charCodeAt(0) === 33; // !\r\n\t\t\tif (is) {\r\n\t\t\t\tpath = path.substring(1);\r\n\t\t\t}\r\n\t\t\tpath = path.replaceWildcard();\r\n\t\t\tif(path){\r\n\t\t\t\tset(path, get(path), true);\t\r\n\t\t\t} \r\n\t\t}\r\n\r\n\r\n\t   /**\r\n\t   * Creates a watcher for all changes.\r\n\t   * @param  {String} path \r\n\t   */\r\n\t\tfunction create(path) { //W.CREATE\r\n\r\n\t\t\tvar is = false;\r\n\t\t\tvar callback;\r\n\r\n\t\t\tif (langx.isString(path)) {\r\n\t\t\t\tif (proxy[path]) {\r\n\t\t\t\t\treturn proxy[path];\r\n\t\t\t\t}\r\n\t\t\t\tis = true;\r\n\t\t\t\tcallback = function(key) {\r\n\r\n\t\t\t\t\tvar p = path + (key ? '.' + key : '');\r\n\t\t\t\t\tif (skipproxy === p) {\r\n\t\t\t\t\t\tskipproxy = '';\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\tif (skipproxy === p) {\r\n\t\t\t\t\t\t\tskipproxy = '';\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tnotify(p);  // NOTIFY\r\n\t\t\t\t\t\t\treset(p);   // REEST\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, MD.delaybinder);\r\n\t\t\t\t};\r\n\r\n\t\t\t} else {\r\n\t\t\t\tcallback = path;\r\n\t\t\t}\r\n\r\n\t\t\tvar blocked = false;\r\n\t\t\tvar obj = path ? (get(path) || {}) : {}; // GET\r\n\t\t\tvar handler = {\r\n\t\t\t\tget: function(target, property, receiver) {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\treturn new Proxy(target[property], handler);\r\n\t\t\t\t\t} catch (err) {\r\n\t\t\t\t\t\treturn Reflect.get(target, property, receiver);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tdefineProperty: function(target, property, descriptor) {\r\n\t\t\t\t\t!blocked && callback(property, descriptor);\r\n\t\t\t\t\treturn Reflect.defineProperty(target, property, descriptor);\r\n\t\t\t\t},\r\n\t\t\t\tdeleteProperty: function(target, property) {\r\n\t\t\t\t\t!blocked && callback(property);\r\n\t\t\t\t\treturn Reflect.deleteProperty(target, property);\r\n\t\t\t\t},\r\n\t\t\t\tapply: function(target, thisArg, argumentsList) {\r\n\t\t\t\t\tif (BLACKLIST[target.name]) {\r\n\t\t\t\t\t\tblocked = true;\r\n\t\t\t\t\t\tvar result = Reflect.apply(target, thisArg, argumentsList);\r\n\t\t\t\t\t\tcallback('', argumentsList[0]);\r\n\t\t\t\t\t\tblocked = false;\r\n\t\t\t\t\t\treturn result;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn Reflect.apply(target, thisArg, argumentsList);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tvar o = new Proxy(obj, handler);\r\n\r\n\t\t\tif (is) {\r\n\t\t\t\tskipproxy = path;\r\n\t\t\t\tget(path) == null && setx(path, obj, true);  // GET SET\r\n\t\t\t\treturn proxy[path] = o;\r\n\t\t\t} else\r\n\t\t\t\treturn o;\r\n\t\t}\r\n\r\n\r\n\t \t//cache\r\n\t\tfunction cache(path, expire, rebind) { // W.CACHEPATH = \r\n\t\t\tvar key = '$jcpath';\r\n\t\t\tWATCH(path, function(p, value) {\r\n\t\t\t\tvar obj = storages.get(key); // cachestorage(key);\r\n\t\t\t\tif (obj) {\r\n\t\t\t\t\tobj[path] = value;\r\n\t\t\t\t}else {\r\n\t\t\t\t\tobj = {};\r\n\t\t\t\t\tobj[path] = value;\r\n\t\t\t\t}\r\n\t\t\t\tstorages.put(key, obj, expire); // cachestorage(key, obj, expire);\r\n\t\t\t});\r\n\r\n\t\t\tif (rebind === undefined || rebind) {\r\n\t\t\t\tvar cache = storages.get(key); // cachestorage(key);\r\n\t\t\t\tif (cache && cache[path] !== undefined && cache[path] !== get(path)){\r\n\t\t\t\t\tsetx(path, cache[path], true);\t\r\n\t\t\t\t} \r\n\t\t\t}\r\n\t\t\treturn this; //W \r\n\t\t};\r\n\r\n\r\n\t   /**\r\n\t   * Evaluates a global formatter.\r\n\t   * @param  {String} path \r\n\t   * @param  {Object} value\r\n\t   * @param  {String} type \r\n\t   * @returns {Boolean}   \r\n\t   * OR\r\n\t   * Registers a global formatter.\r\n\t   * @param  {Function} value \r\n\t   * @param  {Boolean} path \r\n\t   */\r\n\t\tfunction format(value, path, type) {  // W.FORMATTER = M.formatter =\r\n\r\n\t\t\tif (langx.isFunction(value)) {\r\n\t\t\t\t// Prepend\r\n\t\t\t\tif (path === true) {\r\n\t\t\t\t\t$formatter.unshift(value);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t$formatter.push(value);\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn this;  //M\r\n\t\t\t}\r\n\r\n\t\t\tvar a = $formatter;\r\n\t\t\tif (a && a.length) {\r\n\t\t\t\tfor (var i = 0, length = a.length; i < length; i++) {\r\n\t\t\t\t\tvar val = a[i].call(M, path, value, type);\r\n\t\t\t\t\tif (val !== undefined)\r\n\t\t\t\t\t\tvalue = val;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn value;\r\n\t\t};\r\n\r\n\t\t//get... \r\n\r\n\t\tfunction get(path, scope) {\r\n\r\n\t\t\tif (path == null) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar code = path.charCodeAt(0);\r\n\t\t\tif (code === 37)　{  // % \r\n\t\t\t\tpath = 'jctmp.' + path.substring(1);\r\n\t\t\t}\r\n\r\n\t\t\tvar key = '=' + path;\r\n\t\t\tif (paths[key]) {\r\n\t\t\t\treturn paths[key](scope || store.data);\r\n\t\t\t}\r\n\r\n\t\t\tif (path.indexOf('?') !== -1) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar arr = parsepath(path);\r\n\t\t\tvar builder = [];\r\n\r\n\t\t\tfor (var i = 0, length = arr.length - 1; i < length; i++) {\r\n\t\t\t\tvar item = arr[i];\r\n\t\t\t\tif (item.substring(0, 1) !== '[') {\r\n\t\t\t\t\titem = '.' + item;\r\n\t\t\t\t}\r\n\t\t\t\tbuilder.push('if(!w' + item + ')return');\r\n\t\t\t}\r\n\r\n\t\t\tvar v = arr[arr.length - 1];\r\n\t\t\tif (v.substring(0, 1) !== '['){\r\n\t\t\t\tv = '.' + v;\r\n\t\t\t}\r\n\r\n\t\t\tvar fn = (new Function('w', builder.join(';') + ';return w' + v));\r\n\t\t\tpaths[key] = fn;\r\n\t\t\treturn fn(scope || store.data);  // MD.scope\r\n\t\t}\r\n\r\n\t\t// set...\r\n\t\tfunction set(path, value, is) {\r\n\r\n\t\t\tif (path == null) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar key = '+' + path;\r\n\r\n\t\t\tif (paths[key]) {\r\n\t\t\t\treturn paths[key](store.data, value, path, binding.binders, binding.binderbind, is); // MD.scope\r\n\t\t\t}\r\n\r\n\t\t\tif (path.indexOf('?') !== -1) {\r\n\t\t\t\tpath = '';\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar arr = parsepath(path);\r\n\t\t\tvar builder = [];\r\n\t\t\tvar binder = [];\r\n\r\n\t\t\tfor (var i = 0; i < arr.length - 1; i++) {\r\n\t\t\t\tvar item = arr[i];\r\n\t\t\t\tvar type = arr[i + 1] ? (REGISARR.test(arr[i + 1]) ? '[]' : '{}') : '{}';\r\n\t\t\t\tvar p = 'w' + (item.substring(0, 1) === '[' ? '' : '.') + item;\r\n\t\t\t\tbuilder.push('if(typeof(' + p + ')!==\\'object\\'||' + p + '==null)' + p + '=' + type);\r\n\t\t\t}\r\n\r\n\t\t\tfor (var i = 0; i < arr.length - 1; i++) {\r\n\t\t\t\tvar item = arr[i];\r\n\t\t\t\tbinder.push('binders[\\'' + item + '\\']&&binderbind(\\'' + item + '\\',\\'' + path + '\\',$ticks)');\r\n\t\t\t}\r\n\r\n\t\t\tvar v = arr[arr.length - 1];\r\n\t\t\tbinder.push('binders[\\'' + v + '\\']&&binderbind(\\'' + v + '\\',\\'' + path + '\\',$ticks)');\r\n\t\t\tbinder.push('binders[\\'!' + v + '\\']&&binderbind(\\'!' + v + '\\',\\'' + path + '\\',$ticks)');\r\n\r\n\t\t\tif (v.substring(0, 1) !== '['){\r\n\t\t\t\tv = '.' + v;\r\n\t\t\t}\r\n\r\n\t\t\tvar fn = (new Function('w', 'a', 'b', 'binders', 'binderbind', 'nobind', 'var $ticks=Math.random().toString().substring(2,8);if(!nobind){' + builder.join(';') + ';var v=typeof(a)==\\'function\\'?a(MAIN.compiler.get(b)):a;w' + v + '=v}' + binder.join(';') + ';return a'));\r\n\t\t\tpaths[key] = fn;\r\n\t\t\tfn(store.data, value, path, binding.binders, binding.binderbind, is); // MD.scope\r\n\r\n\t\t\treturn this; //C\r\n\t\t}\r\n\r\n\t\tfunction set2(scope, path, value) {\r\n\r\n\t\t\tif (path == null) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar key = '++' + path;\r\n\r\n\t\t\tif (paths[key]) {\r\n\t\t\t\treturn paths[key](scope, value, path);\r\n\t\t\t}\r\n\r\n\t\t\tvar arr = parsepath(path);\r\n\r\n\t\t\tvar builder = [];\r\n\r\n\t\t\tfor (var i = 0; i < arr.length - 1; i++) {\r\n\t\t\t\tvar item = arr[i];\r\n\t\t\t\tvar type = arr[i + 1] ? (REGISARR.test(arr[i + 1]) ? '[]' : '{}') : '{}';\r\n\t\t\t\tvar p = 'w' + (item.substring(0, 1) === '[' ? '' : '.') + item;\r\n\t\t\t\tbuilder.push('if(typeof(' + p + ')!==\\'object\\'||' + p + '==null)' + p + '=' + type);\r\n\t\t\t}\r\n\r\n\t\t\tvar v = arr[arr.length - 1];\r\n\r\n\t\t\tif (v.substring(0, 1) !== '[') {\r\n\t\t\t\tv = '.' + v;\r\n\t\t\t}\r\n\r\n\t\t\tvar fn = (new Function('w', 'a', 'b', builder.join(';') + ';w' + v + '=a;return a'));\r\n\t\t\tpaths[key] = fn;\r\n\t\t\tfn(scope, value, path);\r\n\t\t\treturn scope;\r\n\t\t}\r\n\r\n\t\t// 1 === manually\r\n\t\t// 2 === by input\r\n\t\t// 3 === default\r\n\t\tfunction setx(path, value, type) {  // M.set\r\n\r\n\t\t\tif (path instanceof Array) {\r\n\t\t\t\tfor (var i = 0; i < path.length; i++) \r\n\t\t\t\t\tsetx(path[i], value, type);\r\n\t\t\t\treturn this; // M\r\n\t\t\t}\r\n\r\n\t\t\tpath = pathmaker(path);\r\n\r\n\t\t\tif (!path) {\r\n\t\t\t\treturn this; // M\r\n\t\t\t}\r\n\r\n\t\t\tvar is = path.charCodeAt(0) === 33; // !\r\n\t\t\tif (is) {\r\n\t\t\t\tpath = path.substring(1);\r\n\t\t\t}\r\n\r\n\t\t\tif (path.charCodeAt(0) === 43) { // +\r\n\t\t\t\tpath = path.substring(1);\r\n\t\t\t\treturn push(path, value, type);\r\n\t\t\t}\r\n\r\n\t\t\tif (!path) {\r\n\t\t\t\treturn this; // M\r\n\t\t\t}\r\n\r\n\t\t\tvar isUpdate = (typeof(value) === 'object' && !(value instanceof Array) && value != null);\r\n\t\t\tvar reset = type === true;\r\n\t\t\tif (reset) {\r\n\t\t\t\ttype = 1;\r\n\t\t\t}\r\n\r\n\t\t\tskipproxy = path;\r\n\t\t\tset(path, value);\r\n\r\n\t\t\tif (isUpdate) {\r\n\t\t\t\treturn update(path, reset, type, true);\r\n\t\t\t}\r\n\r\n\t\t\tvar result = get(path);\r\n\t\t\tvar state = [];\r\n\r\n\t\t\tif (type === undefined) {\r\n\t\t\t\ttype = 1;\r\n\t\t\t}\r\n\r\n\t\t\tvar all = view.componenter.components;//M.components;\r\n\r\n\t\t\tfor (var i = 0, length = all.length; i < length; i++) {\r\n\t\t\t\tvar com = all[i];\r\n\r\n\t\t\t\tif (!com || com.disabled || com.$removed || !com.$loaded || !com.path || !com.$compare(path))\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\tif (com.setter) {\r\n\t\t\t\t\tif (com.path === path) {\r\n\t\t\t\t\t\tif (com.setter) {\r\n\t\t\t\t\t\t\tcom.setterX(result, path, type);\r\n\t\t\t\t\t\t\tcom.$interaction(type);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (com.setter) {\r\n\t\t\t\t\t\t\tcom.setterX(get(com.path), path, type);\r\n\t\t\t\t\t\t\tcom.$interaction(type);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!com.$ready) {\r\n\t\t\t\t\tcom.$ready = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttype !== 3 && com.state && state.push(com);\r\n\r\n\t\t\t\tif (reset) {\r\n\t\t\t\t\tif (!com.$dirty_disabled)\r\n\t\t\t\t\t\tcom.$dirty = true;\r\n\t\t\t\t\tif (!com.$valid_disabled) {\r\n\t\t\t\t\t\tcom.$valid = true;\r\n\t\t\t\t\t\tcom.$validate = false;\r\n\t\t\t\t\t\tif (com.validate) {\r\n\t\t\t\t\t\t\tcom.$valid = com.validate(result);\r\n\t\t\t\t\t\t\tcom.$interaction(102);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfindControl2(com);\r\n\r\n\t\t\t\t} else if (com.validate && !com.$valid_disabled) {\r\n\t\t\t\t\tcom.valid(com.validate(result), true);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (reset) {\r\n\t\t\t\tcaches.clear('dirty', 'valid');\r\n\t\t\t}\r\n\r\n\t\t\tfor (var i = 0, length = state.length; i < length; i++) {\r\n\t\t\t\tstate[i].stateX(type, 5);\r\n\t\t\t}\r\n\r\n\t\t\teventer.emitwatch(path, result, type);\r\n\t\t\treturn this; // M;\r\n\t\t}\r\n\r\n\t\tfunction defaultValue(path, timeout, onlyComponent, reset) { //M.default = \r\n\r\n\t\t\tif (timeout > 0) {\r\n\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\tdefaultValue(path, 0, onlyComponent, reset);\r\n\t\t\t\t}, timeout);\r\n\t\t\t\treturn this;\r\n\t\t\t}\r\n\r\n\t\t\tif (typeof(onlyComponent) === 'boolean') {\r\n\t\t\t\treset = onlyComponent;\r\n\t\t\t\tonlyComponent = null;\r\n\t\t\t}\r\n\r\n\t\t\tif (reset === undefined) {\r\n\t\t\t\treset = true;\r\n\t\t\t}\r\n\r\n\t\t\tpath = pathmaker(path.replaceWildcard()); //pathmaker(path.replace(REGWILDCARD, ''));\r\n\r\n\t\t\t// Reset scope\r\n\t\t\tvar key = path.replace(/\\.\\*$/, '');\r\n\t\t\tvar fn = defaults['#' + langx.hashCode(key)]; // HASH\r\n\t\t\tvar tmp;\r\n\r\n\t\t\tif (fn) {\r\n\t\t\t\ttmp = fn();\r\n\t\t\t\tset(key, tmp);\r\n\t\t\t}\r\n\r\n\t\t\tvar arr = [];\r\n\t\t\tvar all = view.componenter.components;//M.components;\r\n\r\n\t\t\tfor (var i = 0, length = all.length; i < length; i++) {\r\n\t\t\t\tvar com = all[i];\r\n\r\n\t\t\t\tif (!com || com.$removed || com.disabled || !com.$loaded || !com.path || !com.$compare(path)) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (com.state) {\r\n\t\t\t\t\tarr.push(com);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (onlyComponent && onlyComponent._id !== com._id) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (com.$default) {\r\n\t\t\t\t com.set(com.$default(), 3);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!reset) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfindControl2(com);\r\n\r\n\t\t\t\tif (!com.$dirty_disabled) {\r\n\t\t\t\t\tcom.$dirty = true;\r\n\t\t\t\t}\r\n\t\t\t\tif (!com.$valid_disabled) {\r\n\t\t\t\t\tcom.$valid = true;\r\n\t\t\t\t\tcom.$validate = false;\r\n\t\t\t\t\tif (com.validate) {\r\n\t\t\t\t\t\tcom.$valid = com.validate(com.get());\r\n\t\t\t\t\t\tcom.$interaction(102);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (reset) {\r\n\t\t\t\tcache.clearPageData('valid', 'dirty');\r\n\t\t\t\tlangx.state(arr, 3, 3);\r\n\t\t\t}\r\n\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\r\n\t\t// 1 === manually\r\n\t\t// 2 === by input\r\n\t\tfunction update(path, reset, type, wasset) { // M.update =  // immUpdate\r\n\t\t\tif (path instanceof Array) {\r\n\t\t\t\tfor (var i = 0; i < path.length; i++) {\r\n\t\t\t\t\tupdate(store, path[i], reset, type);\r\n\t\t\t\t}\r\n\t\t\t\treturn this;  // M\r\n\t\t\t}\r\n\r\n\t\t\tpath = pathmaker(path);\r\n\t\t\tif (!path) {\r\n\t\t\t\treturn this;  // M\r\n\t\t\t}\r\n\r\n\t\t\tvar is = path.charCodeAt(0) === 33; // !\r\n\t\t\tif (is) {\r\n\t\t\t\tpath = path.substring(1);\r\n\t\t\t}\r\n\r\n\t\t\tpath = path.replaceWildcard();\r\n\t\t\tif (!path) {\r\n\t\t\t\treturn this;  // M\r\n\t\t\t}\r\n\r\n\t\t\tif (!wasset) {\r\n\t\t\t\tget(path, get(path), true);\r\n\t\t\t}\r\n\r\n\t\t\tvar state = [];\r\n\r\n\t\t\tif (type === undefined) {\r\n\t\t\t\ttype = 1; // manually\r\n\t\t\t}\r\n\r\n\t\t\tskipproxy = path;\r\n\r\n\t\t\tvar all = view.componenter.components;//M.components;\r\n\t\t\tfor (var i = 0, length = all.length; i < length; i++) {\r\n\t\t\t\tvar com = all[i];\r\n\r\n\t\t\t\tif (!com || com.disabled || com.$removed || !com.$loaded || !com.path || !com.$compare(path))\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\tvar result = com.get();\r\n\t\t\t\tif (com.setter) {\r\n\t\t\t\t\tcom.$skip = false;\r\n\t\t\t\t\tcom.setterX(result, path, type);\r\n\t\t\t\t\tcom.$interaction(type);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!com.$ready) {\r\n\t\t\t\t\tcom.$ready = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (reset === true) {\r\n\r\n\t\t\t\t\tif (!com.$dirty_disabled) {\r\n\t\t\t\t\t\tcom.$dirty = true;\r\n\t\t\t\t\t\tcom.$interaction(101);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (!com.$valid_disabled) {\r\n\t\t\t\t\t\tcom.$valid = true;\r\n\t\t\t\t\t\tcom.$validate = false;\r\n\t\t\t\t\t\tif (com.validate) {\r\n\t\t\t\t\t\t\tcom.$valid = com.validate(result);\r\n\t\t\t\t\t\t\tcom.$interaction(102);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfindControl2(com);\r\n\r\n\t\t\t\t} else if (com.validate && !com.$valid_disabled) {\r\n\t\t\t\t\tcom.valid(com.validate(result), true);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (com.state) {\r\n\t\t\t\t\tstate.push(com);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (reset) {\r\n\t\t\t\tclear('dirty', 'valid');\r\n\t\t\t}\r\n\r\n\t\t\tfor (var i = 0, length = state.length; i < length; i++) {\r\n\t\t\t\tstate[i].stateX(1, 4);\r\n\t\t\t}\r\n\r\n\t\t\teventer.emitwatch(path, get(path), type);\r\n\r\n\t\t\treturn this; // M\r\n\t\t}\r\n\t\t\r\n\t   /**\r\n\t   * Evaluate String expression as JavaScript code.\r\n\t   * @param  {String/Object} path Can be object if \"path_is_real_value\" is \"true\"\r\n\t   * @param  {String} expression A condition.\r\n\t   * @param  {Boolean} path_is_real_value Optional, default: false\r\n\t   * @returns {Boolean}   \r\n\t   */\r\n\t\tfunction evaluate(path, expression, nopath) { //W.EVALUATE = \r\n\r\n\t\t\tvar key = 'eval' + expression;\r\n\t\t\tvar exp = temp[key];\r\n\t\t\tvar val = null;\r\n\r\n\t\t\tif (nopath) {\r\n\t\t\t\tval = path;\r\n\t\t\t} else {\r\n\t\t\t\tval = get(path);\r\n\t\t\t}\r\n\r\n\t\t\tif (exp) {\r\n\t\t\t\treturn exp.call(val, val, path);\r\n\t\t\t}\r\n\r\n\t\t\tif (expression.indexOf('return') === -1) {\r\n\t\t\t\texpression = 'return ' + expression;\r\n\t\t\t}\r\n\r\n\t\t\texp = new Function('value', 'path', expression);\r\n\t\t\ttemp[key] = exp;\r\n\t\t\treturn exp.call(val, val, path);\r\n\t\t}\r\n\r\n\t\t// inc.. \r\n\t\tfunction inc(path, value, type) {  // M.inc\r\n\r\n\t\t\tif (path instanceof Array) {\r\n\t\t\t\tfor (var i = 0; i < path.length; i++)\r\n\t\t\t\t\tinc(path[i], value, type);\r\n\t\t\t\treturn this; // M\r\n\t\t\t}\r\n\r\n\t\t\t//path = pathmaker(path); ---\r\n\r\n\t\t\tif (!path) {\r\n\t\t\t\treturn this; // M\r\n\t\t\t}\r\n\r\n\t\t\tvar current = get(path);\r\n\t\t\tif (!current) {\r\n\t\t\t\tcurrent = 0;\r\n\t\t\t} else if (!langx.isNumber(current)) {\r\n\t\t\t\tcurrent = parseFloat(current);\r\n\t\t\t\tif (isNaN(current))\r\n\t\t\t\t\tcurrent = 0;\r\n\t\t\t}\r\n\r\n\t\t\tcurrent += value;\r\n\t\t\tsetx(path, current, type);\r\n\t\t\treturn this; // M\r\n\t\t}\r\n\r\n\r\n\t\t// extend...\r\n\t\tfunction extend(path, value, type) { // M.extend\r\n\t\t\tpath = pathmaker(path);\r\n\t\t\tif (path) {\r\n\t\t\t\tvar val = get(path);\r\n\t\t\t\tif (val == null) {\r\n\t\t\t\t\tval = {};\r\n\t\t\t\t}\r\n\t\t\t\tsetx(path, langx.extend(val, value), type);\r\n\t\t\t}\r\n\t\t\treturn this; // M\r\n\t\t}\r\n\r\n\r\n\t\tfunction push(path, value, type) { // M.push\r\n\r\n\t\t\tif (path instanceof Array) {\r\n\t\t\t\tfor (var i = 0; i < path.length; i++) {\r\n\t\t\t\t\tpush(path[i], value, type);\r\n\t\t\t\t}\r\n\t\t\t\treturn this; // M\r\n\t\t\t}\r\n\r\n\t\t\tvar arr = get(path);\r\n\t\t\tvar n = false;\r\n\r\n\t\t\tif (!(arr instanceof Array)) {\r\n\t\t\t\tarr = [];\r\n\t\t\t\tn = true;\r\n\t\t\t}\r\n\r\n\t\t\tvar is = true;\r\n\t\t\tskipproxy = path;\r\n\r\n\t\t\tif (value instanceof Array) {\r\n\t\t\t\tif (value.length)\r\n\t\t\t\t\tarr.push.apply(arr, value);\r\n\t\t\t\telse {\r\n\t\t\t\t\tis = false;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tarr.push(value);\r\n\t\t\t}\r\n\r\n\t\t\tif (n) {\r\n\t\t\t\tsetx(path, arr, type);\r\n\t\t\t} else if (is) {\r\n\t\t\t\tupdate(path, undefined, type);\r\n\t\t\t}\r\n\r\n\t\t\treturn this; // M\r\n\t\t}\r\n\r\n\t   /**\r\n\t   * Creates an object on the path and notifies all components\r\n\t   * @param  {String} path \r\n\t   * @param  {Function} fn \r\n\t   * @param  {Boolean} update Optional Optional, default \"true\"\r\n\t   */\r\n\t\tfunction make(obj, fn, update) { // W.MAKE\r\n\r\n\t\t\tswitch (typeof(obj)) {\r\n\t\t\t\tcase 'function':\r\n\t\t\t\t\tfn = obj;\r\n\t\t\t\t\tobj = {};\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'string':\r\n\t\t\t\t\tvar p = obj;\r\n\t\t\t\t\tvar is = true;\r\n\t\t\t\t\tobj = get(p);\r\n\t\t\t\t\tif (obj == null) {\r\n\t\t\t\t\t\tis = false;\r\n\t\t\t\t\t\tobj = {};\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfn.call(obj, obj, p, function(path, value) {\r\n\t\t\t\t\t\tsetx(obj, path, value);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif (is && (update === undefined || update === true))\r\n\t\t\t\t\t\tupdate(p, true);\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tif (C.ready) {\r\n\t\t\t\t\t\t\tset(p, obj);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tsetx(p, obj, true);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn obj;\r\n\t\t\t}\r\n\r\n\t\t\tfn.call(obj, obj, '');\r\n\t\t\treturn obj;\r\n\t\t}\r\n\r\n\t   /**\r\n\t   * Reads a state, it works with dirty state.\r\n\t   * @param  {String} path \r\n\t   * @return {Boolean} \r\n\t   */\r\n\t\tfunction changed(path) {\r\n\t\t\treturn !com_dirty(path);\r\n\t\t};\r\n\r\n\r\n\t   /**\r\n\t   * Set a change for the path or can read the state, it works with dirty state.\r\n\t   * @param  {String} path \r\n\t   * @param  {Boolean} value Optional\r\n\t   * @return {Boolean} \r\n\t   */\r\n\t\tfunction change(path, value) {\r\n\t\t\tif (value == null) {\r\n\t\t\t\tvalue = true;\r\n\t\t\t}\r\n\t\t\treturn !com_dirty(path, !value);\r\n\t\t};\r\n\r\n\r\n\t\t/*\r\n\t\t * This method is same like EXEC() method but it returns a function.\r\n\t\t * It must be used as a callback. All callback arguments will be used for the targeted method.\r\n\t\t */\r\n\t\tfunction exec2(path, tmp) { //W.EXEC2 = \r\n\t\t\tvar is = path === true;\r\n\t\t\treturn function(a, b, c, d) {\r\n\t\t\t\tif (is) {\r\n\t\t\t\t\texec(tmp, path, a, b, c, d);\r\n\t\t\t\t} else {\r\n\t\t\t\t\texec(path, a, b, c, d);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t};\r\n\r\n\t  /**\r\n\t   * Executes a method according to the path. It wont't throw any exception if the method not exist.\r\n\t   * @param  {Boolean} wait Optional enables a waiter for the method instance (if method doesn't exist) \r\n\t   * @param  {String} path \r\n\t   * @param  {Object} a - Optional, additional argument\r\n\t   * @param  {Object} b - Optional, additional argument\r\n\t   * @param  {Object} c - Optional, additional argument\r\n\t   */\r\n\t\tfunction exec(path) {   // W.EXEC = \r\n\r\n\t\t\tvar arg = [];\r\n\t\t\tvar f = 1;\r\n\t\t\tvar wait = false;\r\n\t\t\tvar p;\r\n\t\t\tvar ctx = this;\r\n\r\n\t\t\tif (path === true) {\r\n\t\t\t\twait = true;\r\n\t\t\t\tpath = arguments[1];\r\n\t\t\t\tf = 2;\r\n\t\t\t}\r\n\r\n\t\t\tpath = path.env();\r\n\r\n\t\t\tfor (var i = f; i < arguments.length; i++) {\r\n\t\t\t\targ.push(arguments[i]);\r\n\t\t\t}\r\n\r\n\t\t\tvar c = path.charCodeAt(0);\r\n\r\n\t\t\t// Event\r\n\t\t\tif (c === 35) { // # , ex: EXEC('#submit', true); --> EMIT('submit', true);\r\n\t\t\t\tp = path.substring(1);\r\n\t\t\t\tif (wait) {\r\n\t\t\t\t\t!events[p] && exechelper(ctx, path, arg);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tEMIT.call(ctx, p, arg[0], arg[1], arg[2], arg[3], arg[4]);\r\n\t\t\t\t}\r\n\t\t\t\treturn EXEC;\r\n\t\t\t}\r\n\r\n\t\t\tvar ok = 0;\r\n\r\n\t\t\t// PLUGINS\r\n\t\t\tif (c === 64) { // @ , ex: EXEC('@PLUGIN.method_name');\r\n\t\t\t\tvar index = path.indexOf('.');\r\n\t\t\t\tp = path.substring(1, index);\r\n\t\t\t\tvar ctrl = plugins.find(p); //W.PLUGINS[p];\r\n\t\t\t\tif (ctrl) {\r\n\t\t\t\t\tvar fn = ctrl[path.substring(index + 1)];\r\n\t\t\t\t\tif (langx.isFunction(fn) ) { // if (typeof(fn) === TYPE_FN) {\r\n\t\t\t\t\t\tfn.apply(ctx === Window ? ctrl : ctx, arg);\r\n\t\t\t\t\t\tok = 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (wait && !ok) {\r\n\t\t\t\t exechelper(ctx, path, arg);\r\n\t\t\t\t}\r\n\t\t\t\treturn EXEC;\r\n\t\t\t}\r\n\r\n\t\t\t// PLUGINS\r\n\t\t\tvar index = path.indexOf('/'); // ex : EXEC('PLUGIN/method_name');\r\n\t\t\tif (index !== -1) {\r\n\t\t\t\tp = path.substring(0, index);\r\n\t\t\t\tvar ctrl = plugins.find(p); //W.PLUGINS[p];\r\n\t\t\t\tvar fn = path.substring(index + 1);\r\n\t\t\t\tif (ctrl && typeof(ctrl[fn]) === TYPE_FN) {\r\n\t\t\t\t\tctrl[fn].apply(ctx === W ? ctrl : ctx, arg);\r\n\t\t\t\t\tok = 1;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (wait && !ok) {\r\n\t\t\t\t exechelper(ctx, path, arg);\r\n\t\t\t\t}\r\n\t\t\t\treturn EXEC;\r\n\t\t\t}\r\n\r\n\t\t\tvar fn = paths.get(path);\r\n\r\n\t\t\tif (langx.isFunction(fn)) {\r\n\t\t\t\tfn.apply(ctx, arg);\r\n\t\t\t\tok = 1;\r\n\t\t\t}\r\n\r\n\t\t\tif (wait && !ok) {\r\n\t\t\t\texechelper(ctx, path, arg);\r\n\t\t\t}\r\n\t\t\treturn exec;\r\n\t\t};\r\n\r\n\r\n\r\n\t   /**\r\n\t   * Checks dirty and valid paths for all declared components on the path. \r\n\t   * If the method return true then the components are validated and \r\n\t   * some component has been changed by user (otherwise: false).\r\n\t   * @param  {String} path \r\n\t   * @param  {String|Array} except  With absolute paths for skipping\r\n\t   * @returns {Boolean}   \r\n\t   */\r\n\t\tfunction can(path, except) { // W.CAN = \r\n\t\t\tpath = pathmaker(path);\r\n\t\t\treturn !com_dirty(path, except) && com_valid(path, except);\r\n\t\t}\r\n\r\n\t   /**\r\n\t   * Checks dirty and valid paths for all declared components on the path. \r\n\t   * If the method return false then the components are validated and \r\n\t   * some component has been changed by user (otherwise: true).\r\n\t   * @param  {String} path \r\n\t   * @param  {String|Array} except  With absolute paths for skipping\r\n\t   * @returns {Boolean}   \r\n\t   */\r\n\t\tfunction disabled(path, except) { // W.DISABLED = \r\n\t\t\tpath = pathmaker(path);\r\n\t\t\treturn com_dirty(path, except) || !com_valid(path, except);\r\n\t\t}\r\n\r\n\t   /**\r\n\t   * Highlights all components on the path as invalid. \r\n\t   * @param  {String} path \r\n\t   * @param  {String|Array} except  With absolute paths for skipping\r\n\t   * @returns {Boolean}   \r\n\t   */\r\n\t\tfunction invalid(path, onlyComponent) {  // W.INVALID = \r\n\t\t\tpath = pathmaker(path);\r\n\t\t\tif (path) {\r\n\t\t\t\tcom_dirty(path, false, onlyComponent, true);\r\n\t\t\t\tcom_valid(path, false, onlyComponent);\r\n\t\t\t}\r\n\t\t\treturn W;\r\n\t\t};\r\n\r\n\t   /**\r\n\t   * Resets dirty and valid state in all components on the path.\r\n\t   * @param  {String} path \r\n\t   * @param  {Number} delay  Optional, in milliseconds (default: 0)\r\n\t   */\r\n\t\tfunction reset(path, timeout, onlyComponent) { //W.RESET = M.reset\r\n\r\n\t\t\tif (timeout > 0) {\r\n\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\treset(path);\r\n\t\t\t\t}, timeout);\r\n\t\t\t\treturn this;\r\n\t\t\t}\r\n\r\n\t\t\tpath = pathmaker(path).replaceWildcard();\r\n\r\n\t\t\tvar arr = [];\r\n\t\t\tvar all = view.componenter.components;//M.components;\r\n\r\n\t\t\tfor (var i = 0, length = all.length; i < length; i++) {\r\n\t\t\t\tvar com = all[i];\r\n\t\t\t\tif (!com || com.$removed || com.disabled || !com.$loaded || !com.path || !com.$compare(path)) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcom.state && arr.push(com);\r\n\r\n\t\t\t\tif (onlyComponent && onlyComponent._id !== com._id) {\t\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfindControl2(com);\r\n\r\n\t\t\t\tif (!com.$dirty_disabled) {\r\n\t\t\t\t\tcom.$dirty = true;\r\n\t\t\t\t\tcom.$interaction(101);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!com.$valid_disabled) {\r\n\t\t\t\t\tcom.$valid = true;\r\n\t\t\t\t\tcom.$validate = false;\r\n\t\t\t\t\tif (com.validate) {\r\n\t\t\t\t\t\tcom.$valid = com.validate(com.get());\r\n\t\t\t\t\t\tcom.$interaction(102);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tclear('valid', 'dirty');\r\n\t\t\tstate(arr, 1, 3);\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\tfunction used(path) {   //M.used\r\n\t\t\teach(function(obj) {\r\n\t\t\t\t!obj.disabled && obj.used();\r\n\t\t\t}, path);\r\n\t\t\treturn this;\r\n\t\t};\r\n\r\n\t   /**\r\n\t   * Performs SET() and CHANGE() together.\r\n\t   * @param  {String} path \r\n\t   * @param  {Object|Array} value.\r\n\t   * @param  {String/Number} timeout  Optional, \"value > 10\" will be used as delay\r\n\t   * @param {Boolean} reset Optional\r\n\t   */\r\n\t\tfunction modify (path, value, timeout) { // W.MODIFY =\r\n\t\t\tif (path && typeof(path) === 'object') {\r\n\t\t\t\tObject.keys(path).forEach(function(k) {\r\n\t\t\t\t\tmodify(k, path[k], value);\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tif (langx.isFunction(value)) {\r\n\t\t\t\t\tvalue = value(get(path));\r\n\t\t\t\t}\r\n\t\t\t\tsetx(path, value, timeout); \r\n\t\t\t\tif (timeout) {\r\n\t\t\t\t\tlangx.setTimeout(change, timeout + 5, path);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tchange(path);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn this;\r\n\t\t};\r\n\r\n\t   /**\r\n\t   * Returns all modified components by user on the path.\r\n\t   * @param  {String} path \r\n\t   * @returns {Array<String>}   \r\n\t   */\r\n\t\tfunction modified(path) { //W.MODIFIED = \r\n\t\t\tvar output = [];\r\n\t\t\teach(function(obj) {\r\n\t\t\t\tif (!(obj.disabled || obj.$dirty_disabled)) {\r\n\t\t\t\t\tobj.$dirty === false && output.push(obj.path);\r\n\t\t\t\t}\r\n\t\t\t}, pathmaker(path));\r\n\t\t\treturn output;\r\n\t\t}\r\n\r\n\r\n\t   /**\r\n\t   * Checks whether the value has not been modified on the path.\r\n\t   * @param  {String} path \r\n\t   * @param {Object} value  Optional\r\n\t   * @param {Array<String>} fields  Optional, field names\r\n\t   * @returns {Booean}   \r\n\t   */\r\n\t\tfunction notmodified(path, value, fields) { // W.NOTMODIFIED = \r\n\r\n\t\t\tif (value === undefined) {\r\n\t\t\t\tvalue = get(path);\r\n\t\t\t}\r\n\r\n\t\t\tif (value === undefined) {\r\n\t\t\t\tvalue = null;\r\n\t\t\t}\r\n\r\n\t\t\tif (fields) {\r\n\t\t\t\tpath = path.concat('#', fields);\r\n\t\t\t}\r\n\r\n\t\t\tvar s = langx.stringify(value, false, fields); // STRINGIFY\r\n\t\t\tvar hash = langx.hashCode(s); // HASH\r\n\t\t\tvar key =  path; // 'notmodified.' + path\r\n\r\n\t\t\tif (nmCache[key] === hash) { // cache\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t\tnmCache[key] = hash; //cache \r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tfunction errors(path, except, highlight) { //W.ERRORS = \r\n\r\n\t\t\tif (path instanceof Array) {\r\n\t\t\t\texcept = path;\r\n\t\t\t\tpath = undefined;\r\n\t\t\t}\r\n\r\n\t\t\tif (except === true) {\r\n\t\t\t\texcept = highlight instanceof Array ? highlight : null;\r\n\t\t\t\thighlight = true;\r\n\t\t\t}\r\n\r\n\t\t\tvar arr = [];\r\n\r\n\t\t\teach(function(obj) { // M.each\r\n\t\t\t\tif (!obj.disabled && (!except || !obj.$except(except)) && obj.$valid === false && !obj.$valid_disabled)\r\n\t\t\t\t\tarr.push(obj);\r\n\t\t\t}, pathmaker(path));\r\n\r\n\t\t\thighlight && langx.state(arr, 1, 1);\r\n\t\t\treturn arr;\r\n\t\t}\r\n\r\n\r\n\t\tfunction rewrite(path, value, type) { // W.REWRITE = \r\n\t\t\tpath = pathmaker(path);\r\n\t\t\tif (path) {\r\n\t\t\t\tskipproxy = path;\r\n\t\t\t\tset(path, value);\r\n\t\t\t\teventer.emitwatch(path, value, type);\r\n\t\t\t}\r\n\t\t\treturn this; // W\r\n\t\t}\r\n\r\n\t\t// ===============================================================\r\n\t\t// MAIN FUNCTIONS\r\n\t\t// ===============================================================\r\n\r\n\t   /**\r\n\t   * Evaluates a global parser.\r\n\t   * @param  {String} path \r\n\t   * @param  {Object} value\r\n\t   * @param  {String} type \r\n\t   * @returns {Boolean}   \r\n\t   * OR\r\n\t   * Registers a global parser.\r\n\t   * @param  {Function} value \r\n\t   */\r\n\t\tfunction parser(value, path, type) { //W.PARSER = M.parser =  \r\n\r\n\t\t\tif (langx.isFunction(value)) {\r\n\r\n\t\t\t\t// Prepend\r\n\t\t\t\tif (path === true) {\r\n\t\t\t\t\t$parser.unshift(value);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t$parser.push(value);\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn this;\r\n\t\t\t}\r\n\r\n\t\t\tvar a = $parser;\r\n\t\t\tif (a && a.length) {\r\n\t\t\t\tfor (var i = 0, length = a.length; i < length; i++) {\r\n\t\t\t\t\tvalue = a[i].call(this, path, value, type);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn value;\r\n\t\t}\r\n\r\n\t\tparser(function(path, value, type) {\r\n\r\n\t\t\tswitch (type) {\r\n\t\t\t\tcase 'number':\r\n\t\t\t\tcase 'currency':\r\n\t\t\t\tcase 'float':\r\n\t\t\t\t\tvar v = +(langx.isString(value) ? value.trimAll().replace(REGCOMMA, '.') : value);\r\n\t\t\t\t\treturn isNaN(v) ? null : v;\r\n\r\n\t\t\t\tcase 'date':\r\n\t\t\t\tcase 'datetime':\r\n\r\n\t\t\t\t\tif (!value) {\r\n\t\t\t\t\t\treturn null;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (value instanceof Date) {\r\n\t\t\t\t\t\treturn value;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvalue = value.parseDate();\r\n\t\t\t\t\treturn value && value.getTime() ? value : null;\r\n\t\t\t}\r\n\r\n\t\t\treturn value;\r\n\t\t});\r\n\r\n\t   /**\r\n\t   * skips component.setter for future update. It's incremental.\r\n\t   * @param  {String} pathA Absolute path according to the component \"data-jc-path\"  \r\n\t   * @param  {String} pathB Absolute path according to the component \"data-jc-path\"  \r\n\t   * @param  {String} pathN Absolute path according to the component \"data-jc-path\"  \r\n\t   */\r\n\t\tfunction skipInc() { // W.SKIP = \r\n\t\t\tfor (var j = 0; j < arguments.length; j++) {\r\n\t\t\t\tvar arr = arguments[j].split(',');\r\n\t\t\t\tfor (var i = 0, length = arr.length; i < length; i++) {\r\n\t\t\t\t\tvar p = arr[i].trim();\r\n\t\t\t\t\tif (skips[p]) {\r\n\t\t\t\t\t\tskips[p]++;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tskips[p] = 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction skipDec(p) { // \r\n\t\t\tif (skips[p]) {\r\n\t\t\t\tvar s = --skips[p];\r\n\t\t\t\tif (s <= 0) {\r\n\t\t\t\t\tdelete skips[p];\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn true\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\t\"bind\"  : bind,\r\n\t\t\t\"cache\" : cache,\r\n\t\t\t\"can\" : can,\r\n\t\t\t\"change\" : change,\r\n\t\t\t\"changed\" : changed,\r\n\t\t\t\"create\" : create,\r\n\t\t\t\"default\" : defaultValue,\r\n\t\t\t\"disabled\" : disabled,\r\n\t\t\t\"errors\" : errors,\r\n\t\t\t\"evaluate\" : evaluate,\r\n\t\t\t\"exec\" : exec,\r\n\t\t\t\"exec2\" : exec2,\r\n\t\t\t\"extend\" : extend,\r\n\t\t\t\"format\" : format,\r\n\t\t\t\"get\"  : get,\r\n\t\t\t\"inc\"  : inc,\r\n\t\t\t\"invalid\" : invalid,\r\n\t\t\t\"make\" : make,\r\n\t\t\t\"modify\" : modify,\r\n\t\t\t\"modified\" : modified,\r\n\t\t\t\"parser\" : parser,\r\n\t\t\t\"push\" : push,\r\n\t\t\t\"reset\" : reset,\r\n\t\t\t\"rewrite\" : rewrite,\r\n\t\t\t\"set\"  : set,\r\n\t\t\t\"set2\" : set2,\r\n \t\t\t\"setx\" : setx,\r\n \t\t\t\"skipInc\" : skipInc,\r\n \t\t\t\"skipDec\" : skipDec,\r\n \t\t\t\"update\" : update,\r\n \t\t\t\"used\" : used\r\n\t\t};\r\n\t}\r\n\r\n\treturn storing;\r\n});"]}