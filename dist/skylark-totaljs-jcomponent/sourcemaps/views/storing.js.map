{"version":3,"sources":["views/storing.js"],"names":["define","langx","storage","pathmaker","BLACKLIST","sort","reverse","splice","slice","pop","unshift","shift","push","REGISARR","view","skipproxy","eventer","binding","cache","store","option","parsepath","path","arr","split","builder","all","i","length","p","index","indexOf","join","a","substring","paths","defaults","$formatter","skips","get","scope","charCodeAt","key","data","item","v","fn","Function","set","value","is","binders","binderbind","binder","type","test","this","setx","Array","isUpdate","reset","update","result","state","undefined","componenter","components","com","disabled","$removed","$loaded","$compare","setter","setterX","$interaction","$ready","$dirty_disabled","$dirty","$valid_disabled","$valid","$validate","validate","findControl2","valid","clear","stateX","emitwatch","wasset","replaceWildcard","$skip","n","apply","change","com_dirty","exec","arg","f","wait","ctx","arguments","env","c","events","exechelper","EMIT","call","EXEC","ok","ctrl","plugins","find","isFunction","Window","W","timeout","onlyComponent","setTimeout","_id","parser","$parser","nmCache","temp","isString","trimAll","replace","REGCOMMA","isNaN","Date","parseDate","getTime","bind","cachePath","expire","rebind","WATCH","obj","can","except","com_valid","changed","create","callback","proxy","notify","MD","delaybinder","blocked","handler","target","property","receiver","Proxy","err","Reflect","defineProperty","descriptor","deleteProperty","thisArg","argumentsList","name","o","default","defaultValue","hashCode","$default","clearPageData","errors","highlight","each","$except","evaluate","expression","nopath","exp","val","exec2","tmp","b","d","extend","format","M","inc","current","isNumber","parseFloat","invalid","make","needsUpdate","ready","modify","Object","keys","forEach","k","modified","output","rewrite","set2","skipInc","j","trim","skipDec","used"],"mappings":"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","file":"../../views/storing.js","sourcesContent":["define([\r\n\t\"../langx\",\r\n\t\"../utils/storage\",\r\n\t\"../binding/pathmaker\"\r\n],function(langx,storage,pathmaker){\r\n\tvar\tSELINPUT = 'input,textarea,select';\r\n\tvar BLACKLIST = { sort: 1, reverse: 1, splice: 1, slice: 1, pop: 1, unshift: 1, shift: 1, push: 1 };\r\n\t\r\n\tvar REGISARR = /\\[\\d+\\]$/;\r\n\t\r\n\tfunction storing (view) {\r\n\r\n\t\tvar skipproxy = '';\r\n\r\n\t\tvar eventer = view.eventer,\r\n\t\t\tbinding = view.binding,\r\n\t\t\tcache = view.cache;\r\n\r\n\t\tvar store = view.option(\"store\");\r\n\r\n\t\tfunction parsepath(path) {\r\n\t\t\tvar arr = path.split('.');\r\n\t\t\tvar builder = [];\r\n\t\t\tvar all = [];\r\n\r\n\t\t\tfor (var i = 0; i < arr.length; i++) {\r\n\t\t\t\tvar p = arr[i];\r\n\t\t\t\tvar index = p.indexOf('[');\r\n\t\t\t\tif (index === -1) {\r\n\t\t\t\t\tif (p.indexOf('-') === -1) {\r\n\t\t\t\t\t\tall.push(p);\r\n\t\t\t\t\t\tbuilder.push(all.join('.'));\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvar a = all.splice(all.length - 1);\r\n\t\t\t\t\t\tall.push(a + '[\\'' + p + '\\']');\r\n\t\t\t\t\t\tbuilder.push(all.join('.'));\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (p.indexOf('-') === -1) {\r\n\t\t\t\t\t\tall.push(p.substring(0, index));\r\n\t\t\t\t\t\tbuilder.push(all.join('.'));\r\n\t\t\t\t\t\tall.splice(all.length - 1);\r\n\t\t\t\t\t\tall.push(p);\r\n\t\t\t\t\t\tbuilder.push(all.join('.'));\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tall.push('[\\'' + p.substring(0, index) + '\\']');\r\n\t\t\t\t\t\tbuilder.push(all.join(''));\r\n\t\t\t\t\t\tall.push(p.substring(index));\r\n\t\t\t\t\t\tbuilder.push(all.join(''));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn builder;\r\n\t\t}\r\n\r\n\t\tvar paths = {},\r\n\t\t\tdefaults = {},\r\n\t\t\t$formatter = [],\r\n\t\t\tskips = {};\r\n\t\t\t$parser = [],\r\n\t\t\tnmCache = {},  // notmodified cache \r\n\t\t\ttemp = {};\r\n\r\n\r\n\t\tfunction bind(path) { // W.BIND = \r\n\t\t\tif (path instanceof Array) {\r\n\t\t\t\tfor (var i = 0; i < path.length; i++) {\r\n\t\t\t\t\tbind(path[i]);\r\n\t\t\t\t}\r\n\t\t\t\treturn this; // \r\n\t\t\t}\r\n\t\t\tpath = pathmaker(path);\r\n\t\t\tif (!path) {\r\n\t\t\t\treturn this;\r\n\t\t\t}\r\n\t\t\tvar is = path.charCodeAt(0) === 33; // !\r\n\t\t\tif (is) {\r\n\t\t\t\tpath = path.substring(1);\r\n\t\t\t}\r\n\t\t\tpath = path.replaceWildcard();\r\n\t\t\tif(path){\r\n\t\t\t\tset(path, get(path), true);\t\r\n\t\t\t} \r\n\t\t}\r\n\r\n\r\n\t   /**\r\n\t   * Creates a watcher for all changes.\r\n\t   * @param  {String} path \r\n\t   */\r\n\t\tfunction create(path) { //W.CREATE\r\n\r\n\t\t\tvar is = false;\r\n\t\t\tvar callback;\r\n\r\n\t\t\tif (langx.isString(path)) {\r\n\t\t\t\tif (proxy[path]) {\r\n\t\t\t\t\treturn proxy[path];\r\n\t\t\t\t}\r\n\t\t\t\tis = true;\r\n\t\t\t\tcallback = function(key) {\r\n\r\n\t\t\t\t\tvar p = path + (key ? '.' + key : '');\r\n\t\t\t\t\tif (skipproxy === p) {\r\n\t\t\t\t\t\tskipproxy = '';\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\tif (skipproxy === p) {\r\n\t\t\t\t\t\t\tskipproxy = '';\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tnotify(p);  // NOTIFY\r\n\t\t\t\t\t\t\treset(p);   // REEST\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, MD.delaybinder);\r\n\t\t\t\t};\r\n\r\n\t\t\t} else {\r\n\t\t\t\tcallback = path;\r\n\t\t\t}\r\n\r\n\t\t\tvar blocked = false;\r\n\t\t\tvar obj = path ? (get(path) || {}) : {}; // GET\r\n\t\t\tvar handler = {\r\n\t\t\t\tget: function(target, property, receiver) {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\treturn new Proxy(target[property], handler);\r\n\t\t\t\t\t} catch (err) {\r\n\t\t\t\t\t\treturn Reflect.get(target, property, receiver);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tdefineProperty: function(target, property, descriptor) {\r\n\t\t\t\t\t!blocked && callback(property, descriptor);\r\n\t\t\t\t\treturn Reflect.defineProperty(target, property, descriptor);\r\n\t\t\t\t},\r\n\t\t\t\tdeleteProperty: function(target, property) {\r\n\t\t\t\t\t!blocked && callback(property);\r\n\t\t\t\t\treturn Reflect.deleteProperty(target, property);\r\n\t\t\t\t},\r\n\t\t\t\tapply: function(target, thisArg, argumentsList) {\r\n\t\t\t\t\tif (BLACKLIST[target.name]) {\r\n\t\t\t\t\t\tblocked = true;\r\n\t\t\t\t\t\tvar result = Reflect.apply(target, thisArg, argumentsList);\r\n\t\t\t\t\t\tcallback('', argumentsList[0]);\r\n\t\t\t\t\t\tblocked = false;\r\n\t\t\t\t\t\treturn result;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn Reflect.apply(target, thisArg, argumentsList);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tvar o = new Proxy(obj, handler);\r\n\r\n\t\t\tif (is) {\r\n\t\t\t\tskipproxy = path;\r\n\t\t\t\tget(path) == null && setx(path, obj, true);  // GET SET\r\n\t\t\t\treturn proxy[path] = o;\r\n\t\t\t} else\r\n\t\t\t\treturn o;\r\n\t\t}\r\n\r\n\r\n\t \t//cache\r\n\t\tfunction cachePath(path, expire, rebind) { // W.CACHEPATH = \r\n\t\t\tvar key = '$jcpath';\r\n\t\t\tWATCH(path, function(p, value) {\r\n\t\t\t\tvar obj = storage(key); // cachestorage(key);\r\n\t\t\t\tif (obj) {\r\n\t\t\t\t\tobj[path] = value;\r\n\t\t\t\t}else {\r\n\t\t\t\t\tobj = {};\r\n\t\t\t\t\tobj[path] = value;\r\n\t\t\t\t}\r\n\t\t\t\tstorage(key, obj, expire); // cachestorage(key, obj, expire);\r\n\t\t\t});\r\n\r\n\t\t\tif (rebind === undefined || rebind) {\r\n\t\t\t\tvar cache = storage(key); // cachestorage(key);\r\n\t\t\t\tif (cache && cache[path] !== undefined && cache[path] !== get(path)){\r\n\t\t\t\t\tsetx(path, cache[path], true);\t\r\n\t\t\t\t} \r\n\t\t\t}\r\n\t\t\treturn this; //W \r\n\t\t};\r\n\r\n\r\n\t   /**\r\n\t   * Evaluates a global formatter.\r\n\t   * @param  {String} path \r\n\t   * @param  {Object} value\r\n\t   * @param  {String} type \r\n\t   * @returns {Boolean}   \r\n\t   * OR\r\n\t   * Registers a global formatter.\r\n\t   * @param  {Function} value \r\n\t   * @param  {Boolean} path \r\n\t   */\r\n\t\tfunction format(value, path, type) {  // W.FORMATTER = M.formatter =\r\n\r\n\t\t\tif (langx.isFunction(value)) {\r\n\t\t\t\t// Prepend\r\n\t\t\t\tif (path === true) {\r\n\t\t\t\t\t$formatter.unshift(value);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t$formatter.push(value);\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn this;  //M\r\n\t\t\t}\r\n\r\n\t\t\tvar a = $formatter;\r\n\t\t\tif (a && a.length) {\r\n\t\t\t\tfor (var i = 0, length = a.length; i < length; i++) {\r\n\t\t\t\t\tvar val = a[i].call(M, path, value, type);\r\n\t\t\t\t\tif (val !== undefined)\r\n\t\t\t\t\t\tvalue = val;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn value;\r\n\t\t};\r\n\r\n\t\t//get... \r\n\r\n\t\tfunction get(path, scope) {\r\n\r\n\t\t\tif (path == null) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar code = path.charCodeAt(0);\r\n\t\t\tif (code === 37)　{  // % \r\n\t\t\t\tpath = 'jctmp.' + path.substring(1);\r\n\t\t\t}\r\n\r\n\t\t\tvar key = '=' + path;\r\n\t\t\tif (paths[key]) {\r\n\t\t\t\treturn paths[key](scope || store.data);\r\n\t\t\t}\r\n\r\n\t\t\tif (path.indexOf('?') !== -1) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar arr = parsepath(path);\r\n\t\t\tvar builder = [];\r\n\r\n\t\t\tfor (var i = 0, length = arr.length - 1; i < length; i++) {\r\n\t\t\t\tvar item = arr[i];\r\n\t\t\t\tif (item.substring(0, 1) !== '[') {\r\n\t\t\t\t\titem = '.' + item;\r\n\t\t\t\t}\r\n\t\t\t\tbuilder.push('if(!w' + item + ')return');\r\n\t\t\t}\r\n\r\n\t\t\tvar v = arr[arr.length - 1];\r\n\t\t\tif (v.substring(0, 1) !== '['){\r\n\t\t\t\tv = '.' + v;\r\n\t\t\t}\r\n\r\n\t\t\tvar fn = (new Function('w', builder.join(';') + ';return w' + v));\r\n\t\t\tpaths[key] = fn;\r\n\t\t\treturn fn(scope || store.data);  // MD.scope\r\n\t\t}\r\n\r\n\t\t// set...\r\n\t\tfunction set(path, value, is) {\r\n\r\n\t\t\tif (path == null) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar key = '+' + path;\r\n\r\n\t\t\tif (paths[key]) {\r\n\t\t\t\treturn paths[key](store.data, value, path, binding.binders, binding.binderbind, is); // MD.scope\r\n\t\t\t}\r\n\r\n\t\t\tif (path.indexOf('?') !== -1) {\r\n\t\t\t\tpath = '';\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar arr = parsepath(path);\r\n\t\t\tvar builder = [];\r\n\t\t\tvar binder = [];\r\n\r\n\t\t\tfor (var i = 0; i < arr.length - 1; i++) {\r\n\t\t\t\tvar item = arr[i];\r\n\t\t\t\tvar type = arr[i + 1] ? (REGISARR.test(arr[i + 1]) ? '[]' : '{}') : '{}';\r\n\t\t\t\tvar p = 'w' + (item.substring(0, 1) === '[' ? '' : '.') + item;\r\n\t\t\t\tbuilder.push('if(typeof(' + p + ')!==\\'object\\'||' + p + '==null)' + p + '=' + type);\r\n\t\t\t}\r\n\r\n\t\t\tfor (var i = 0; i < arr.length - 1; i++) {\r\n\t\t\t\tvar item = arr[i];\r\n\t\t\t\tbinder.push('binders[\\'' + item + '\\']&&binderbind(\\'' + item + '\\',\\'' + path + '\\',$ticks)');\r\n\t\t\t}\r\n\r\n\t\t\tvar v = arr[arr.length - 1];\r\n\t\t\tbinder.push('binders[\\'' + v + '\\']&&binderbind(\\'' + v + '\\',\\'' + path + '\\',$ticks)');\r\n\t\t\tbinder.push('binders[\\'!' + v + '\\']&&binderbind(\\'!' + v + '\\',\\'' + path + '\\',$ticks)');\r\n\r\n\t\t\tif (v.substring(0, 1) !== '['){\r\n\t\t\t\tv = '.' + v;\r\n\t\t\t}\r\n\r\n\t\t\tvar fn = (new Function('w', 'a', 'b', 'binders', 'binderbind', 'nobind', 'var $ticks=Math.random().toString().substring(2,8);if(!nobind){' + builder.join(';') + ';var v=typeof(a)==\\'function\\'?a(MAIN.compiler.get(b)):a;w' + v + '=v}' + binder.join(';') + ';return a'));\r\n\t\t\tpaths[key] = fn;\r\n\t\t\tfn(store.data, value, path, binding.binders, binding.binderbind, is); // MD.scope\r\n\r\n\t\t\treturn this; //C\r\n\t\t}\r\n\r\n\t\tfunction set2(scope, path, value) {\r\n\r\n\t\t\tif (path == null) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar key = '++' + path;\r\n\r\n\t\t\tif (paths[key]) {\r\n\t\t\t\treturn paths[key](scope, value, path);\r\n\t\t\t}\r\n\r\n\t\t\tvar arr = parsepath(path);\r\n\r\n\t\t\tvar builder = [];\r\n\r\n\t\t\tfor (var i = 0; i < arr.length - 1; i++) {\r\n\t\t\t\tvar item = arr[i];\r\n\t\t\t\tvar type = arr[i + 1] ? (REGISARR.test(arr[i + 1]) ? '[]' : '{}') : '{}';\r\n\t\t\t\tvar p = 'w' + (item.substring(0, 1) === '[' ? '' : '.') + item;\r\n\t\t\t\tbuilder.push('if(typeof(' + p + ')!==\\'object\\'||' + p + '==null)' + p + '=' + type);\r\n\t\t\t}\r\n\r\n\t\t\tvar v = arr[arr.length - 1];\r\n\r\n\t\t\tif (v.substring(0, 1) !== '[') {\r\n\t\t\t\tv = '.' + v;\r\n\t\t\t}\r\n\r\n\t\t\tvar fn = (new Function('w', 'a', 'b', builder.join(';') + ';w' + v + '=a;return a'));\r\n\t\t\tpaths[key] = fn;\r\n\t\t\tfn(scope, value, path);\r\n\t\t\treturn scope;\r\n\t\t}\r\n\r\n\t\t// 1 === manually\r\n\t\t// 2 === by input\r\n\t\t// 3 === default\r\n\t\tfunction setx(path, value, type) {  // M.set\r\n\r\n\t\t\tif (path instanceof Array) {\r\n\t\t\t\tfor (var i = 0; i < path.length; i++) \r\n\t\t\t\t\tsetx(path[i], value, type);\r\n\t\t\t\treturn this; // M\r\n\t\t\t}\r\n\r\n\t\t\tpath = pathmaker(path);\r\n\r\n\t\t\tif (!path) {\r\n\t\t\t\treturn this; // M\r\n\t\t\t}\r\n\r\n\t\t\tvar is = path.charCodeAt(0) === 33; // !\r\n\t\t\tif (is) {\r\n\t\t\t\tpath = path.substring(1);\r\n\t\t\t}\r\n\r\n\t\t\tif (path.charCodeAt(0) === 43) { // +\r\n\t\t\t\tpath = path.substring(1);\r\n\t\t\t\treturn push(path, value, type);\r\n\t\t\t}\r\n\r\n\t\t\tif (!path) {\r\n\t\t\t\treturn this; // M\r\n\t\t\t}\r\n\r\n\t\t\tvar isUpdate = (typeof(value) === 'object' && !(value instanceof Array) && value != null);\r\n\t\t\tvar reset = type === true;\r\n\t\t\tif (reset) {\r\n\t\t\t\ttype = 1;\r\n\t\t\t}\r\n\r\n\t\t\tskipproxy = path;\r\n\t\t\tset(path, value);\r\n\r\n\t\t\tif (isUpdate) {\r\n\t\t\t\treturn update(path, reset, type, true);\r\n\t\t\t}\r\n\r\n\t\t\tvar result = get(path);\r\n\t\t\tvar state = [];\r\n\r\n\t\t\tif (type === undefined) {\r\n\t\t\t\ttype = 1;\r\n\t\t\t}\r\n\r\n\t\t\tvar all = view.componenter.components;//M.components;\r\n\r\n\t\t\tfor (var i = 0, length = all.length; i < length; i++) {\r\n\t\t\t\tvar com = all[i];\r\n\r\n\t\t\t\tif (!com || com.disabled || com.$removed || !com.$loaded || !com.path || !com.$compare(path))\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\tif (com.setter) {\r\n\t\t\t\t\tif (com.path === path) {\r\n\t\t\t\t\t\tif (com.setter) {\r\n\t\t\t\t\t\t\tcom.setterX(result, path, type);\r\n\t\t\t\t\t\t\tcom.$interaction(type);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (com.setter) {\r\n\t\t\t\t\t\t\tcom.setterX(get(com.path), path, type);\r\n\t\t\t\t\t\t\tcom.$interaction(type);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!com.$ready) {\r\n\t\t\t\t\tcom.$ready = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttype !== 3 && com.state && state.push(com);\r\n\r\n\t\t\t\tif (reset) {\r\n\t\t\t\t\tif (!com.$dirty_disabled)\r\n\t\t\t\t\t\tcom.$dirty = true;\r\n\t\t\t\t\tif (!com.$valid_disabled) {\r\n\t\t\t\t\t\tcom.$valid = true;\r\n\t\t\t\t\t\tcom.$validate = false;\r\n\t\t\t\t\t\tif (com.validate) {\r\n\t\t\t\t\t\t\tcom.$valid = com.validate(result);\r\n\t\t\t\t\t\t\tcom.$interaction(102);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfindControl2(com);\r\n\r\n\t\t\t\t} else if (com.validate && !com.$valid_disabled) {\r\n\t\t\t\t\tcom.valid(com.validate(result), true);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (reset) {\r\n\t\t\t\tcache.clear('dirty', 'valid');\r\n\t\t\t}\r\n\r\n\t\t\tfor (var i = 0, length = state.length; i < length; i++) {\r\n\t\t\t\tstate[i].stateX(type, 5);\r\n\t\t\t}\r\n\r\n\t\t\teventer.emitwatch(path, result, type);\r\n\t\t\treturn this; // M;\r\n\t\t}\r\n\r\n\t\tfunction defaultValue(path, timeout, onlyComponent, reset) { //M.default = \r\n\r\n\t\t\tif (timeout > 0) {\r\n\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\tdefaultValue(path, 0, onlyComponent, reset);\r\n\t\t\t\t}, timeout);\r\n\t\t\t\treturn this;\r\n\t\t\t}\r\n\r\n\t\t\tif (typeof(onlyComponent) === 'boolean') {\r\n\t\t\t\treset = onlyComponent;\r\n\t\t\t\tonlyComponent = null;\r\n\t\t\t}\r\n\r\n\t\t\tif (reset === undefined) {\r\n\t\t\t\treset = true;\r\n\t\t\t}\r\n\r\n\t\t\tpath = pathmaker(path.replaceWildcard()); //pathmaker(path.replace(REGWILDCARD, ''));\r\n\r\n\t\t\t// Reset scope\r\n\t\t\tvar key = path.replace(/\\.\\*$/, '');\r\n\t\t\tvar fn = defaults['#' + langx.hashCode(key)]; // HASH\r\n\t\t\tvar tmp;\r\n\r\n\t\t\tif (fn) {\r\n\t\t\t\ttmp = fn();\r\n\t\t\t\tset(key, tmp);\r\n\t\t\t}\r\n\r\n\t\t\tvar arr = [];\r\n\t\t\tvar all = view.componenter.components;//M.components;\r\n\r\n\t\t\tfor (var i = 0, length = all.length; i < length; i++) {\r\n\t\t\t\tvar com = all[i];\r\n\r\n\t\t\t\tif (!com || com.$removed || com.disabled || !com.$loaded || !com.path || !com.$compare(path)) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (com.state) {\r\n\t\t\t\t\tarr.push(com);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (onlyComponent && onlyComponent._id !== com._id) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (com.$default) {\r\n\t\t\t\t com.set(com.$default(), 3);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!reset) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfindControl2(com);\r\n\r\n\t\t\t\tif (!com.$dirty_disabled) {\r\n\t\t\t\t\tcom.$dirty = true;\r\n\t\t\t\t}\r\n\t\t\t\tif (!com.$valid_disabled) {\r\n\t\t\t\t\tcom.$valid = true;\r\n\t\t\t\t\tcom.$validate = false;\r\n\t\t\t\t\tif (com.validate) {\r\n\t\t\t\t\t\tcom.$valid = com.validate(com.get());\r\n\t\t\t\t\t\tcom.$interaction(102);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (reset) {\r\n\t\t\t\tcache.clearPageData('valid', 'dirty');\r\n\t\t\t\tlangx.state(arr, 3, 3);\r\n\t\t\t}\r\n\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\r\n\t\t// 1 === manually\r\n\t\t// 2 === by input\r\n\t\tfunction update(path, reset, type, wasset) { // M.update =  // immUpdate\r\n\t\t\tif (path instanceof Array) {\r\n\t\t\t\tfor (var i = 0; i < path.length; i++) {\r\n\t\t\t\t\tupdate(store, path[i], reset, type);\r\n\t\t\t\t}\r\n\t\t\t\treturn this;  // M\r\n\t\t\t}\r\n\r\n\t\t\tpath = pathmaker(path);\r\n\t\t\tif (!path) {\r\n\t\t\t\treturn this;  // M\r\n\t\t\t}\r\n\r\n\t\t\tvar is = path.charCodeAt(0) === 33; // !\r\n\t\t\tif (is) {\r\n\t\t\t\tpath = path.substring(1);\r\n\t\t\t}\r\n\r\n\t\t\tpath = path.replaceWildcard();\r\n\t\t\tif (!path) {\r\n\t\t\t\treturn this;  // M\r\n\t\t\t}\r\n\r\n\t\t\tif (!wasset) {\r\n\t\t\t\tget(path, get(path), true);\r\n\t\t\t}\r\n\r\n\t\t\tvar state = [];\r\n\r\n\t\t\tif (type === undefined) {\r\n\t\t\t\ttype = 1; // manually\r\n\t\t\t}\r\n\r\n\t\t\tskipproxy = path;\r\n\r\n\t\t\tvar all = view.componenter.components;//M.components;\r\n\t\t\tfor (var i = 0, length = all.length; i < length; i++) {\r\n\t\t\t\tvar com = all[i];\r\n\r\n\t\t\t\tif (!com || com.disabled || com.$removed || !com.$loaded || !com.path || !com.$compare(path))\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\tvar result = com.get();\r\n\t\t\t\tif (com.setter) {\r\n\t\t\t\t\tcom.$skip = false;\r\n\t\t\t\t\tcom.setterX(result, path, type);\r\n\t\t\t\t\tcom.$interaction(type);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!com.$ready) {\r\n\t\t\t\t\tcom.$ready = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (reset === true) {\r\n\r\n\t\t\t\t\tif (!com.$dirty_disabled) {\r\n\t\t\t\t\t\tcom.$dirty = true;\r\n\t\t\t\t\t\tcom.$interaction(101);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (!com.$valid_disabled) {\r\n\t\t\t\t\t\tcom.$valid = true;\r\n\t\t\t\t\t\tcom.$validate = false;\r\n\t\t\t\t\t\tif (com.validate) {\r\n\t\t\t\t\t\t\tcom.$valid = com.validate(result);\r\n\t\t\t\t\t\t\tcom.$interaction(102);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfindControl2(com);\r\n\r\n\t\t\t\t} else if (com.validate && !com.$valid_disabled) {\r\n\t\t\t\t\tcom.valid(com.validate(result), true);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (com.state) {\r\n\t\t\t\t\tstate.push(com);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (reset) {\r\n\t\t\t\tcache.clear('dirty', 'valid');\r\n\t\t\t}\r\n\r\n\t\t\tfor (var i = 0, length = state.length; i < length; i++) {\r\n\t\t\t\tstate[i].stateX(1, 4);\r\n\t\t\t}\r\n\r\n\t\t\teventer.emitwatch(path, get(path), type);\r\n\r\n\t\t\treturn this; // M\r\n\t\t}\r\n\t\t\r\n\t   /**\r\n\t   * Evaluate String expression as JavaScript code.\r\n\t   * @param  {String/Object} path Can be object if \"path_is_real_value\" is \"true\"\r\n\t   * @param  {String} expression A condition.\r\n\t   * @param  {Boolean} path_is_real_value Optional, default: false\r\n\t   * @returns {Boolean}   \r\n\t   */\r\n\t\tfunction evaluate(path, expression, nopath) { //W.EVALUATE = \r\n\r\n\t\t\tvar key = 'eval' + expression;\r\n\t\t\tvar exp = temp[key];\r\n\t\t\tvar val = null;\r\n\r\n\t\t\tif (nopath) {\r\n\t\t\t\tval = path;\r\n\t\t\t} else {\r\n\t\t\t\tval = get(path);\r\n\t\t\t}\r\n\r\n\t\t\tif (exp) {\r\n\t\t\t\treturn exp.call(val, val, path);\r\n\t\t\t}\r\n\r\n\t\t\tif (expression.indexOf('return') === -1) {\r\n\t\t\t\texpression = 'return ' + expression;\r\n\t\t\t}\r\n\r\n\t\t\texp = new Function('value', 'path', expression);\r\n\t\t\ttemp[key] = exp;\r\n\t\t\treturn exp.call(val, val, path);\r\n\t\t}\r\n\r\n\t\t// inc.. \r\n\t\tfunction inc(path, value, type) {  // M.inc\r\n\r\n\t\t\tif (path instanceof Array) {\r\n\t\t\t\tfor (var i = 0; i < path.length; i++)\r\n\t\t\t\t\tinc(path[i], value, type);\r\n\t\t\t\treturn this; // M\r\n\t\t\t}\r\n\r\n\t\t\t//path = pathmaker(path); ---\r\n\r\n\t\t\tif (!path) {\r\n\t\t\t\treturn this; // M\r\n\t\t\t}\r\n\r\n\t\t\tvar current = get(path);\r\n\t\t\tif (!current) {\r\n\t\t\t\tcurrent = 0;\r\n\t\t\t} else if (!langx.isNumber(current)) {\r\n\t\t\t\tcurrent = parseFloat(current);\r\n\t\t\t\tif (isNaN(current))\r\n\t\t\t\t\tcurrent = 0;\r\n\t\t\t}\r\n\r\n\t\t\tcurrent += value;\r\n\t\t\tsetx(path, current, type);\r\n\t\t\treturn this; // M\r\n\t\t}\r\n\r\n\r\n\t\t// extend...\r\n\t\tfunction extend(path, value, type) { // M.extend\r\n\t\t\tpath = pathmaker(path);\r\n\t\t\tif (path) {\r\n\t\t\t\tvar val = get(path);\r\n\t\t\t\tif (val == null) {\r\n\t\t\t\t\tval = {};\r\n\t\t\t\t}\r\n\t\t\t\tsetx(path, langx.extend(val, value), type);\r\n\t\t\t}\r\n\t\t\treturn this; // M\r\n\t\t}\r\n\r\n\r\n\t\tfunction push(path, value, type) { // M.push\r\n\r\n\t\t\tif (path instanceof Array) {\r\n\t\t\t\tfor (var i = 0; i < path.length; i++) {\r\n\t\t\t\t\tpush(path[i], value, type);\r\n\t\t\t\t}\r\n\t\t\t\treturn this; // M\r\n\t\t\t}\r\n\r\n\t\t\tvar arr = get(path);\r\n\t\t\tvar n = false;\r\n\r\n\t\t\tif (!(arr instanceof Array)) {\r\n\t\t\t\tarr = [];\r\n\t\t\t\tn = true;\r\n\t\t\t}\r\n\r\n\t\t\tvar is = true;\r\n\t\t\tskipproxy = path;\r\n\r\n\t\t\tif (value instanceof Array) {\r\n\t\t\t\tif (value.length)\r\n\t\t\t\t\tarr.push.apply(arr, value);\r\n\t\t\t\telse {\r\n\t\t\t\t\tis = false;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tarr.push(value);\r\n\t\t\t}\r\n\r\n\t\t\tif (n) {\r\n\t\t\t\tsetx(path, arr, type);\r\n\t\t\t} else if (is) {\r\n\t\t\t\tupdate(path, undefined, type);\r\n\t\t\t}\r\n\r\n\t\t\treturn this; // M\r\n\t\t}\r\n\r\n\t   /**\r\n\t   * Creates an object on the path and notifies all components\r\n\t   * @param  {String} path \r\n\t   * @param  {Function} fn \r\n\t   * @param  {Boolean} update Optional Optional, default \"true\"\r\n\t   */\r\n\t\tfunction make(obj, fn, needsUpdate) { // W.MAKE\r\n\r\n\t\t\tswitch (typeof(obj)) {\r\n\t\t\t\tcase 'function':\r\n\t\t\t\t\tfn = obj;\r\n\t\t\t\t\tobj = {};\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'string':\r\n\t\t\t\t\tvar p = obj;\r\n\t\t\t\t\tvar is = true;\r\n\t\t\t\t\tobj = get(p);\r\n\t\t\t\t\tif (obj == null) {\r\n\t\t\t\t\t\tis = false;\r\n\t\t\t\t\t\tobj = {};\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfn.call(obj, obj, p, function(path, value) {\r\n\t\t\t\t\t\tsetx(obj, path, value);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif (is && (needsUpdate === undefined || needsUpdate === true))\r\n\t\t\t\t\t\tupdate(p, true);\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tif (view.ready) {\r\n\t\t\t\t\t\t\tset(p, obj);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tsetx(p, obj, true);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn obj;\r\n\t\t\t}\r\n\r\n\t\t\tfn.call(obj, obj, '');\r\n\t\t\treturn obj;\r\n\t\t}\r\n\r\n\t   /**\r\n\t   * Reads a state, it works with dirty state.\r\n\t   * @param  {String} path \r\n\t   * @return {Boolean} \r\n\t   */\r\n\t\tfunction changed(path) {\r\n\t\t\treturn !view.componenter.com_dirty(path);\r\n\t\t};\r\n\r\n\r\n\t   /**\r\n\t   * Set a change for the path or can read the state, it works with dirty state.\r\n\t   * @param  {String} path \r\n\t   * @param  {Boolean} value Optional\r\n\t   * @return {Boolean} \r\n\t   */\r\n\t\tfunction change(path, value) {\r\n\t\t\tif (value == null) {\r\n\t\t\t\tvalue = true;\r\n\t\t\t}\r\n\t\t\treturn !view.componenter.com_dirty(path, !value);\r\n\t\t};\r\n\r\n\r\n\t\t/*\r\n\t\t * This method is same like EXEC() method but it returns a function.\r\n\t\t * It must be used as a callback. All callback arguments will be used for the targeted method.\r\n\t\t */\r\n\t\tfunction exec2(path, tmp) { //W.EXEC2 = \r\n\t\t\tvar is = path === true;\r\n\t\t\treturn function(a, b, c, d) {\r\n\t\t\t\tif (is) {\r\n\t\t\t\t\texec(tmp, path, a, b, c, d);\r\n\t\t\t\t} else {\r\n\t\t\t\t\texec(path, a, b, c, d);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t};\r\n\r\n\t  /**\r\n\t   * Executes a method according to the path. It wont't throw any exception if the method not exist.\r\n\t   * @param  {Boolean} wait Optional enables a waiter for the method instance (if method doesn't exist) \r\n\t   * @param  {String} path \r\n\t   * @param  {Object} a - Optional, additional argument\r\n\t   * @param  {Object} b - Optional, additional argument\r\n\t   * @param  {Object} c - Optional, additional argument\r\n\t   */\r\n\t\tfunction exec(path) {   // W.EXEC = \r\n\r\n\t\t\tvar arg = [];\r\n\t\t\tvar f = 1;\r\n\t\t\tvar wait = false;\r\n\t\t\tvar p;\r\n\t\t\tvar ctx = this;\r\n\r\n\t\t\tif (path === true) {\r\n\t\t\t\twait = true;\r\n\t\t\t\tpath = arguments[1];\r\n\t\t\t\tf = 2;\r\n\t\t\t}\r\n\r\n\t\t\tpath = path.env();\r\n\r\n\t\t\tfor (var i = f; i < arguments.length; i++) {\r\n\t\t\t\targ.push(arguments[i]);\r\n\t\t\t}\r\n\r\n\t\t\tvar c = path.charCodeAt(0);\r\n\r\n\t\t\t// Event\r\n\t\t\tif (c === 35) { // # , ex: EXEC('#submit', true); --> EMIT('submit', true);\r\n\t\t\t\tp = path.substring(1);\r\n\t\t\t\tif (wait) {\r\n\t\t\t\t\t!events[p] && exechelper(ctx, path, arg);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tEMIT.call(ctx, p, arg[0], arg[1], arg[2], arg[3], arg[4]);\r\n\t\t\t\t}\r\n\t\t\t\treturn EXEC;\r\n\t\t\t}\r\n\r\n\t\t\tvar ok = 0;\r\n\r\n\t\t\t// PLUGINS\r\n\t\t\tif (c === 64) { // @ , ex: EXEC('@PLUGIN.method_name');\r\n\t\t\t\tvar index = path.indexOf('.');\r\n\t\t\t\tp = path.substring(1, index);\r\n\t\t\t\tvar ctrl = plugins.find(p); //W.PLUGINS[p];\r\n\t\t\t\tif (ctrl) {\r\n\t\t\t\t\tvar fn = ctrl[path.substring(index + 1)];\r\n\t\t\t\t\tif (langx.isFunction(fn) ) { // if (typeof(fn) === TYPE_FN) {\r\n\t\t\t\t\t\tfn.apply(ctx === Window ? ctrl : ctx, arg);\r\n\t\t\t\t\t\tok = 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (wait && !ok) {\r\n\t\t\t\t exechelper(ctx, path, arg);\r\n\t\t\t\t}\r\n\t\t\t\treturn EXEC;\r\n\t\t\t}\r\n\r\n\t\t\t// PLUGINS\r\n\t\t\tvar index = path.indexOf('/'); // ex : EXEC('PLUGIN/method_name');\r\n\t\t\tif (index !== -1) {\r\n\t\t\t\tp = path.substring(0, index);\r\n\t\t\t\tvar ctrl = plugins.find(p); //W.PLUGINS[p];\r\n\t\t\t\tvar fn = path.substring(index + 1);\r\n\t\t\t\tif (ctrl && langx.isFunction(ctrl[fn])) {\r\n\t\t\t\t\tctrl[fn].apply(ctx === W ? ctrl : ctx, arg);\r\n\t\t\t\t\tok = 1;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (wait && !ok) {\r\n\t\t\t\t exechelper(ctx, path, arg);\r\n\t\t\t\t}\r\n\t\t\t\treturn EXEC;\r\n\t\t\t}\r\n\r\n\t\t\tvar fn = get(path);\r\n\r\n\t\t\tif (langx.isFunction(fn)) {\r\n\t\t\t\tfn.apply(ctx, arg);\r\n\t\t\t\tok = 1;\r\n\t\t\t}\r\n\r\n\t\t\tif (wait && !ok) {\r\n\t\t\t\texechelper(ctx, path, arg);\r\n\t\t\t}\r\n\t\t\treturn exec;\r\n\t\t};\r\n\r\n\r\n\r\n\t   /**\r\n\t   * Checks dirty and valid paths for all declared components on the path. \r\n\t   * If the method return true then the components are validated and \r\n\t   * some component has been changed by user (otherwise: false).\r\n\t   * @param  {String} path \r\n\t   * @param  {String|Array} except  With absolute paths for skipping\r\n\t   * @returns {Boolean}   \r\n\t   */\r\n\t\tfunction can(path, except) { // W.CAN = \r\n\t\t\tpath = pathmaker(path);\r\n\t\t\treturn !view.componenter.com_dirty(path, except) && view.componenter.com_valid(path, except);\r\n\t\t}\r\n\r\n\t   /**\r\n\t   * Checks dirty and valid paths for all declared components on the path. \r\n\t   * If the method return false then the components are validated and \r\n\t   * some component has been changed by user (otherwise: true).\r\n\t   * @param  {String} path \r\n\t   * @param  {String|Array} except  With absolute paths for skipping\r\n\t   * @returns {Boolean}   \r\n\t   */\r\n\t\tfunction disabled(path, except) { // W.DISABLED = \r\n\t\t\tpath = pathmaker(path);\r\n\t\t\treturn view.componenter.com_dirty(path, except) || !view.componenter.com_valid(path, except);\r\n\t\t}\r\n\r\n\t   /**\r\n\t   * Highlights all components on the path as invalid. \r\n\t   * @param  {String} path \r\n\t   * @param  {String|Array} except  With absolute paths for skipping\r\n\t   * @returns {Boolean}   \r\n\t   */\r\n\t\tfunction invalid(path, onlyComponent) {  // W.INVALID = \r\n\t\t\tpath = pathmaker(path);\r\n\t\t\tif (path) {\r\n\t\t\t\tview.componenter.com_dirty(path, false, onlyComponent, true);\r\n\t\t\t\tview.componenter.com_valid(path, false, onlyComponent);\r\n\t\t\t}\r\n\t\t\treturn W;\r\n\t\t};\r\n\r\n\t   /**\r\n\t   * Resets dirty and valid state in all components on the path.\r\n\t   * @param  {String} path \r\n\t   * @param  {Number} delay  Optional, in milliseconds (default: 0)\r\n\t   */\r\n\t\tfunction reset(path, timeout, onlyComponent) { //W.RESET = M.reset\r\n\r\n\t\t\tif (timeout > 0) {\r\n\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\treset(path);\r\n\t\t\t\t}, timeout);\r\n\t\t\t\treturn this;\r\n\t\t\t}\r\n\r\n\t\t\tpath = pathmaker(path).replaceWildcard();\r\n\r\n\t\t\tvar arr = [];\r\n\t\t\tvar all = view.componenter.components;//M.components;\r\n\r\n\t\t\tfor (var i = 0, length = all.length; i < length; i++) {\r\n\t\t\t\tvar com = all[i];\r\n\t\t\t\tif (!com || com.$removed || com.disabled || !com.$loaded || !com.path || !com.$compare(path)) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcom.state && arr.push(com);\r\n\r\n\t\t\t\tif (onlyComponent && onlyComponent._id !== com._id) {\t\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfindControl2(com);\r\n\r\n\t\t\t\tif (!com.$dirty_disabled) {\r\n\t\t\t\t\tcom.$dirty = true;\r\n\t\t\t\t\tcom.$interaction(101);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!com.$valid_disabled) {\r\n\t\t\t\t\tcom.$valid = true;\r\n\t\t\t\t\tcom.$validate = false;\r\n\t\t\t\t\tif (com.validate) {\r\n\t\t\t\t\t\tcom.$valid = com.validate(com.get());\r\n\t\t\t\t\t\tcom.$interaction(102);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tcache.clear('valid', 'dirty');\r\n\t\t\tstate(arr, 1, 3);\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\tfunction used(path) {   //M.used\r\n\t\t\teach(function(obj) {\r\n\t\t\t\t!obj.disabled && obj.used();\r\n\t\t\t}, path);\r\n\t\t\treturn this;\r\n\t\t};\r\n\r\n\t   /**\r\n\t   * Performs SET() and CHANGE() together.\r\n\t   * @param  {String} path \r\n\t   * @param  {Object|Array} value.\r\n\t   * @param  {String/Number} timeout  Optional, \"value > 10\" will be used as delay\r\n\t   * @param {Boolean} reset Optional\r\n\t   */\r\n\t\tfunction modify (path, value, timeout) { // W.MODIFY =\r\n\t\t\tif (path && typeof(path) === 'object') {\r\n\t\t\t\tObject.keys(path).forEach(function(k) {\r\n\t\t\t\t\tmodify(k, path[k], value);\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tif (langx.isFunction(value)) {\r\n\t\t\t\t\tvalue = value(get(path));\r\n\t\t\t\t}\r\n\t\t\t\tsetx(path, value, timeout); \r\n\t\t\t\tif (timeout) {\r\n\t\t\t\t\tlangx.setTimeout(change, timeout + 5, path);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tchange(path);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn this;\r\n\t\t};\r\n\r\n\t   /**\r\n\t   * Returns all modified components by user on the path.\r\n\t   * @param  {String} path \r\n\t   * @returns {Array<String>}   \r\n\t   */\r\n\t\tfunction modified(path) { //W.MODIFIED = \r\n\t\t\tvar output = [];\r\n\t\t\teach(function(obj) {\r\n\t\t\t\tif (!(obj.disabled || obj.$dirty_disabled)) {\r\n\t\t\t\t\tobj.$dirty === false && output.push(obj.path);\r\n\t\t\t\t}\r\n\t\t\t}, pathmaker(path));\r\n\t\t\treturn output;\r\n\t\t}\r\n\r\n\r\n\t   /**\r\n\t   * Checks whether the value has not been modified on the path.\r\n\t   * @param  {String} path \r\n\t   * @param {Object} value  Optional\r\n\t   * @param {Array<String>} fields  Optional, field names\r\n\t   * @returns {Booean}   \r\n\t   */\r\n\t\tfunction notmodified(path, value, fields) { // W.NOTMODIFIED = \r\n\r\n\t\t\tif (value === undefined) {\r\n\t\t\t\tvalue = get(path);\r\n\t\t\t}\r\n\r\n\t\t\tif (value === undefined) {\r\n\t\t\t\tvalue = null;\r\n\t\t\t}\r\n\r\n\t\t\tif (fields) {\r\n\t\t\t\tpath = path.concat('#', fields);\r\n\t\t\t}\r\n\r\n\t\t\tvar s = langx.stringify(value, false, fields); // STRINGIFY\r\n\t\t\tvar hash = langx.hashCode(s); // HASH\r\n\t\t\tvar key =  path; // 'notmodified.' + path\r\n\r\n\t\t\tif (nmCache[key] === hash) { // cache\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t\tnmCache[key] = hash; //cache \r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tfunction errors(path, except, highlight) { //W.ERRORS = \r\n\r\n\t\t\tif (path instanceof Array) {\r\n\t\t\t\texcept = path;\r\n\t\t\t\tpath = undefined;\r\n\t\t\t}\r\n\r\n\t\t\tif (except === true) {\r\n\t\t\t\texcept = highlight instanceof Array ? highlight : null;\r\n\t\t\t\thighlight = true;\r\n\t\t\t}\r\n\r\n\t\t\tvar arr = [];\r\n\r\n\t\t\teach(function(obj) { // M.each\r\n\t\t\t\tif (!obj.disabled && (!except || !obj.$except(except)) && obj.$valid === false && !obj.$valid_disabled)\r\n\t\t\t\t\tarr.push(obj);\r\n\t\t\t}, pathmaker(path));\r\n\r\n\t\t\thighlight && langx.state(arr, 1, 1);\r\n\t\t\treturn arr;\r\n\t\t}\r\n\r\n\r\n\t\tfunction rewrite(path, value, type) { // W.REWRITE = \r\n\t\t\tpath = pathmaker(path);\r\n\t\t\tif (path) {\r\n\t\t\t\tskipproxy = path;\r\n\t\t\t\tset(path, value);\r\n\t\t\t\teventer.emitwatch(path, value, type);\r\n\t\t\t}\r\n\t\t\treturn this; // W\r\n\t\t}\r\n\r\n\t\t// ===============================================================\r\n\t\t// MAIN FUNCTIONS\r\n\t\t// ===============================================================\r\n\r\n\t   /**\r\n\t   * Evaluates a global parser.\r\n\t   * @param  {String} path \r\n\t   * @param  {Object} value\r\n\t   * @param  {String} type \r\n\t   * @returns {Boolean}   \r\n\t   * OR\r\n\t   * Registers a global parser.\r\n\t   * @param  {Function} value \r\n\t   */\r\n\t\tfunction parser(value, path, type) { //W.PARSER = M.parser =  \r\n\r\n\t\t\tif (langx.isFunction(value)) {\r\n\r\n\t\t\t\t// Prepend\r\n\t\t\t\tif (path === true) {\r\n\t\t\t\t\t$parser.unshift(value);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t$parser.push(value);\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn this;\r\n\t\t\t}\r\n\r\n\t\t\tvar a = $parser;\r\n\t\t\tif (a && a.length) {\r\n\t\t\t\tfor (var i = 0, length = a.length; i < length; i++) {\r\n\t\t\t\t\tvalue = a[i].call(this, path, value, type);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn value;\r\n\t\t}\r\n\r\n\t\tparser(function(path, value, type) {\r\n\r\n\t\t\tswitch (type) {\r\n\t\t\t\tcase 'number':\r\n\t\t\t\tcase 'currency':\r\n\t\t\t\tcase 'float':\r\n\t\t\t\t\tvar v = +(langx.isString(value) ? value.trimAll().replace(REGCOMMA, '.') : value);\r\n\t\t\t\t\treturn isNaN(v) ? null : v;\r\n\r\n\t\t\t\tcase 'date':\r\n\t\t\t\tcase 'datetime':\r\n\r\n\t\t\t\t\tif (!value) {\r\n\t\t\t\t\t\treturn null;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (value instanceof Date) {\r\n\t\t\t\t\t\treturn value;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvalue = value.parseDate();\r\n\t\t\t\t\treturn value && value.getTime() ? value : null;\r\n\t\t\t}\r\n\r\n\t\t\treturn value;\r\n\t\t});\r\n\r\n\t   /**\r\n\t   * skips component.setter for future update. It's incremental.\r\n\t   * @param  {String} pathA Absolute path according to the component \"data-jc-path\"  \r\n\t   * @param  {String} pathB Absolute path according to the component \"data-jc-path\"  \r\n\t   * @param  {String} pathN Absolute path according to the component \"data-jc-path\"  \r\n\t   */\r\n\t\tfunction skipInc() { // W.SKIP = \r\n\t\t\tfor (var j = 0; j < arguments.length; j++) {\r\n\t\t\t\tvar arr = arguments[j].split(',');\r\n\t\t\t\tfor (var i = 0, length = arr.length; i < length; i++) {\r\n\t\t\t\t\tvar p = arr[i].trim();\r\n\t\t\t\t\tif (skips[p]) {\r\n\t\t\t\t\t\tskips[p]++;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tskips[p] = 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction skipDec(p) { // \r\n\t\t\tif (skips[p]) {\r\n\t\t\t\tvar s = --skips[p];\r\n\t\t\t\tif (s <= 0) {\r\n\t\t\t\t\tdelete skips[p];\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn true\r\n\t\t}\r\n\r\n\r\n\t\tfunction clean() {\r\n\t\t\ttemp = {};\r\n\t\t\tpaths = {};\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\t\"bind\"  : bind,\r\n\t\t\t\"cachePath\" : cachePath,\r\n\t\t\t\"can\" : can,\r\n\t\t\t\"change\" : change,\r\n\t\t\t\"changed\" : changed,\r\n\t\t\t\"create\" : create,\r\n\t\t\t\"default\" : defaultValue,\r\n\t\t\t\"disabled\" : disabled,\r\n\t\t\t\"errors\" : errors,\r\n\t\t\t\"evaluate\" : evaluate,\r\n\t\t\t\"exec\" : exec,\r\n\t\t\t\"exec2\" : exec2,\r\n\t\t\t\"extend\" : extend,\r\n\t\t\t\"format\" : format,\r\n\t\t\t\"get\"  : get,\r\n\t\t\t\"inc\"  : inc,\r\n\t\t\t\"invalid\" : invalid,\r\n\t\t\t\"make\" : make,\r\n\t\t\t\"modify\" : modify,\r\n\t\t\t\"modified\" : modified,\r\n\t\t\t\"parser\" : parser,\r\n\t\t\t\"paths\" : paths,\r\n\t\t\t\"push\" : push,\r\n\t\t\t\"reset\" : reset,\r\n\t\t\t\"rewrite\" : rewrite,\r\n\t\t\t\"set\"  : set,\r\n\t\t\t\"set2\" : set2,\r\n \t\t\t\"setx\" : setx,\r\n \t\t\t\"skipInc\" : skipInc,\r\n \t\t\t\"skipDec\" : skipDec,\r\n \t\t\t\"update\" : update,\r\n \t\t\t\"used\" : used\r\n\t\t};\r\n\t}\r\n\r\n\treturn storing;\r\n});"]}