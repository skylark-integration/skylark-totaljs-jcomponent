{"version":3,"sources":["views/storing.js"],"names":["define","langx","pathmaker","SELINPUT","BLACKLIST","sort","reverse","splice","slice","pop","unshift","shift","push","MULTIPLE","knockknockcounter","$","components","M","setInterval","now","c","i","length","knockknock","EMIT","temp","paths","store","view","events","emitwatch","path","value","type","watches","self","fn","call","context","format","index","lastIndexOf","substring","val","get","j","jl","$path","each","keys","Object","key","arr","parsepath","split","builder","all","p","indexOf","join","a","data","binders","defaults","$formatter","skips","binderbind","absolutePath","ticks","item","exec","getx","wildcard","replace","com","$loaded","$removed","$compare","this","com_dirty","onlyComponent","skipEmitState","isExcept","Array","except","undefined","cache","dirty","flags","is","remove","$except","visible","hidden","enabled","find","disabled","$dirty_disabled","state","_id","$dirty","$interaction","clearPageData","setPageData","com_valid","valid","$valid_disabled","$valid","expire","rebind","WATCH","obj","storages","put","setx","scope","charCodeAt","stores","root","v","Function","MD","set","binder","REGISARR","test","isUpdate","reset","skipproxy","update","result","setter","setterX","$ready","$validate","validate","findcontrol2","caches","clear","stateX","wasset","replaceWildcard","$skip","n","apply","change","arg","f","wait","ctx","arguments","env","exechelper","EXEC","ok","ctrl","plugins","isFunction","Window","TYPE_FN","W","timeout","setTimeout","$parser","nmCache","on","name","init","trim","owner","current_owner","current_com","tmp","findFormat","s","b","C","ready","off","lang","cleararr","forEach","emit","e","args","window","watch","topic","unwatch","can","changed","create","callback","isString","proxy","$ticks","Math","random","toString","notify","delaybinder","blocked","get2","handler","target","property","receiver","Proxy","err","Reflect","defineProperty","descriptor","deleteProperty","thisArg","argumentsList","o","default","defaultValue","HASH","$default","errors","highlight","evaluate","expression","nopath","exp","exec2","d","extend","inc","current","isNumber","parseFloat","isNaN","invalid","make","modify","k","modified","output","parser","rewrite","set2","skip","used"],"mappings":"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","file":"../../views/storing.js","sourcesContent":["define([\r\n\t\"../langx\",\r\n\t\"../binding/pathmaker\"\r\n],function(langx,pathmaker){\r\n\tvar\tSELINPUT = 'input,textarea,select';\r\n\tvar BLACKLIST = { sort: 1, reverse: 1, splice: 1, slice: 1, pop: 1, unshift: 1, shift: 1, push: 1 };\r\n\t\r\n\tvar MULTIPLE = ' + ';\r\n\r\n\tvar knockknockcounter = 0;\r\n\t\t$.components = M;\r\n\r\n\t\tsetInterval(function() {\r\n\t\t\t//W.DATETIME = W.NOW = new Date();\r\n\t\t\tlangx.now(true);\r\n\t\t\tvar c = M.components;\r\n\t\t\tfor (var i = 0, length = c.length; i < length; i++)\r\n\t\t\t\tc[i].knockknock && c[i].knockknock(knockknockcounter);\r\n\t\t\tEMIT('knockknock', knockknockcounter++);\r\n\t\t}, 60000);\r\n\r\n\tsetInterval(function() {\r\n\t\ttemp = {};\r\n\t\tpaths = {};\r\n//\t\tcleaner();\r\n\t}, (1000 * 60) * 5);\t\r\n\r\n    /*\r\n    for (var i = 0, length = all.length; i < length; i++) { // M.components.length\r\n        var m = all[i]; // M.components[i];\r\n        if (!m.$removed || name === m.name){\r\n            config && m.reconfigure(config, undefined, true);\r\n            declaration.call(m, m, m.config);\r\n        }\r\n    }\r\n\r\n    RECOMPILE();\r\n    */\r\n\r\n   /**\r\n   * Reconfigures all components according to the selector.\r\n   * @param  {String} selector \r\n   * @param  {String/Object} config A default configuration\r\n   */\r\n\tfunction reconfigure(selector, value) { // W.RECONFIGURE = \r\n\t\tsetter(true, selector, 'reconfigure', value);\r\n\t\treturn RECONFIGURE;\r\n\t};\r\n\r\n   /**\r\n   * Set a new value to the specific method in components.\r\n   * @param  {Boolean} wait Optional, can it wait for non-exist components? \r\n   * @param  {String} selector  \r\n   * @param  {String} name Property or Method name (can't be nested) \r\n   * @param  {Object} argA Optional, additional argument\r\n   * @param  {Object} argB Optional, additional argument\r\n   * @param  {Object} argN Optional, additional argument\r\n   */\r\n\tfunction setter(selector, name) { // W.SETTER\r\n\r\n\t\tvar arg = [];\r\n\t\tvar beg = selector === true ? 3 : 2;\r\n\r\n\t\tfor (var i = beg; i < arguments.length; i++) {\r\n\t\t\targ.push(arguments[i]);\r\n\t\t}\r\n\r\n\t\tif (beg === 3) {\r\n\r\n\t\t\tselector = name;\r\n\r\n\t\t\tif (lazycom[selector] && lazycom[selector].state !== 3) {\r\n\r\n\t\t\t\tif (lazycom[selector].state === 1) {\r\n\t\t\t\t\tlazycom[selector].state = 2;\r\n\t\t\t\t\tEMIT('lazy', selector, true);\r\n\t\t\t\t\twarn('Lazy load: ' + selector);\r\n\t\t\t\t\tcompile();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tsetTimeout(function(arg) {\r\n\t\t\t\t\targ[0] = true;\r\n\t\t\t\t\tW.SETTER.apply(W, arg);\r\n\t\t\t\t}, 555, arguments);\r\n\r\n\t\t\t\treturn SETTER;\r\n\t\t\t}\r\n\r\n\t\t\tname = arguments[2];\r\n\r\n\t\t\tfind(selector, true, function(arr) {\r\n\t\t\t\tfor (var i = 0, length = arr.length; i < length; i++) {\r\n\t\t\t\t\tvar o = arr[i];\r\n\t\t\t\t\tif (typeof(o[name]) === TYPE_FN)\r\n\t\t\t\t\t\to[name].apply(o, arg);\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\to[name] = arg[0];\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} else {\r\n\r\n\t\t\tif (lazycom[selector] && lazycom[selector].state !== 3) {\r\n\r\n\t\t\t\tif (lazycom[selector].state === 1) {\r\n\t\t\t\t\tlazycom[selector].state = 2;\r\n\t\t\t\t\tEMIT('lazy', selector, true);\r\n\t\t\t\t\twarn('Lazy load: ' + selector);\r\n\t\t\t\t\tcompile();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tsetTimeout(function(arg) {\r\n\t\t\t\t\tW.SETTER.apply(W, arg);\r\n\t\t\t\t}, 555, arguments);\r\n\r\n\t\t\t\treturn SETTER;\r\n\t\t\t}\r\n\r\n\t\t\tvar arr = find(selector, true);\r\n\t\t\tfor (var i = 0, length = arr.length; i < length; i++) {\r\n\t\t\t\tvar o = arr[i];\r\n\t\t\t\tif (typeof(o[name]) === TYPE_FN)\r\n\t\t\t\t\to[name].apply(o, arg);\r\n\t\t\t\telse\r\n\t\t\t\t\to[name] = arg[0];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn SETTER;\r\n\t};\r\n\r\n\tfunction prepare(obj) {\r\n\r\n\t\tif (!obj) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar el = obj.element;\r\n\r\n\t\textensions[obj.name] && extensions[obj.name].forEach(function(item) {\r\n\t\t\titem.config && obj.reconfigure(item.config, NOOP);\r\n\t\t\titem.fn.call(obj, obj, obj.config);\r\n\t\t});\r\n\r\n\t\tvar value = obj.get();\r\n\t\tvar tmp;\r\n\r\n\t\tobj.configure && obj.reconfigure(obj.config, undefined, true);\r\n\t\tobj.$loaded = true;\r\n\r\n\t\tif (obj.setter) {\r\n\t\t\tif (!obj.$prepared) {\r\n\r\n\t\t\t\tobj.$prepared = true;\r\n\t\t\t\tobj.$ready = true;\r\n\r\n\t\t\t\ttmp = attrcom(obj, 'value');\r\n\r\n\t\t\t\tif (tmp) {\r\n\t\t\t\t\tif (!defaults[tmp])\r\n\t\t\t\t\t\tdefaults[tmp] = new Function('return ' + tmp);\r\n\t\t\t\t\tobj.$default = defaults[tmp];\r\n\t\t\t\t\tif (value === undefined) {\r\n\t\t\t\t\t\tvalue = obj.$default();\r\n\t\t\t\t\t\tset(obj.path, value);\r\n\t\t\t\t\t\temitwatch(obj.path, value, 0);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (obj.$binded)\r\n\t\t\t\t\tobj.$interaction(0);\r\n\t\t\t\telse {\r\n\t\t\t\t\tobj.$binded = true;\r\n\t\t\t\t\tobj.setterX(value, obj.path, 0);\r\n\t\t\t\t\tobj.$interaction(0);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tobj.$binded = true;\r\n\t\t}\r\n\r\n\t\tif (obj.validate && !obj.$valid_disabled) {\r\n\t\t\tobj.$valid = obj.validate(obj.get(), true);\r\n\t\t}\r\n\r\n\t\tobj.done && setTimeout(obj.done, 20);\r\n\t\tobj.state && obj.stateX(0, 3);\r\n\r\n\t\tobj.$init && setTimeout(function() {\r\n\t\t\tvar fn = get(obj.$init);\r\n\t\t\tif (langx.isFunction(fn)) {\r\n\t\t\t\tfn.call(obj, obj);\t\r\n\t\t\t} \r\n\t\t\tobj.$init = undefined;\r\n\t\t}, 5);\r\n\r\n\t\tvar n = 'component';\r\n\t\tel.trigger(n);\r\n\t\tel.off(n);\r\n\r\n\t\tvar cls = attrcom(el, 'class');\r\n\t\tcls && (function(cls) {\r\n\t\t\tsetTimeout(function() {\r\n\t\t\t\tcls = cls.split(' ');\r\n\t\t\t\tvar tmp = el[0].$jclass || {};\r\n\t\t\t\tfor (var i = 0, length = cls.length; i < length; i++) {\r\n\t\t\t\t\tif (!tmp[cls[i]]) {\r\n\t\t\t\t\t\tel.tclass(cls[i]);\r\n\t\t\t\t\t\ttmp[cls[i]] = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tel[0].$jclass = tmp;\r\n\t\t\t}, 5);\r\n\t\t})(cls);\r\n\r\n\t\tobj.id && EMIT('#' + obj.id, obj);\r\n\t\tEMIT('@' + obj.name, obj);\r\n\t\tEMIT(n, obj);\r\n\t\tclear('find.');\r\n\t\tif (obj.$lazy) {\r\n\t\t\tobj.$lazy.state = 3;\r\n\t\t\tdelete obj.$lazy;\r\n\t\t\tEMIT('lazy', obj.$name, false);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction usage(name, expire, path, callback) { //W.LASTMODIFICATION = W.USAGE = M.usage = \r\n\r\n\t\tvar type = typeof(expire);\r\n\t\tif (type === TYPE_S) {\r\n\t\t\t//var dt = W.NOW = W.DATETIME = new Date();\r\n\t\t\tvar dt = langx.now(true);\r\n\t\t\texpire = dt.add('-' + expire.env()).getTime();\r\n\t\t} else if (type === TYPE_N)\r\n\t\t\texpire = Date.now() - expire;\r\n\r\n\t\tif (typeof(path) === TYPE_FN) {\r\n\t\t\tcallback = path;\r\n\t\t\tpath = undefined;\r\n\t\t}\r\n\r\n\t\tvar arr = [];\r\n\t\tvar a = null;\r\n\r\n\t\tif (path) {\r\n\t\t\ta = find('.' + path, true);\r\n\t\t} else {\r\n\t\t\ta = components;//M.components;\r\n\t\t}\r\n\r\n\t\tfor (var i = 0; i < a.length; i++) {\r\n\t\t\tvar c = a[i];\r\n\t\t\tif (c.usage[name] >= expire) {\r\n\t\t\t\tif (callback)\r\n\t\t\t\t\tcallback(c);\r\n\t\t\t\telse\r\n\t\t\t\t\tarr.push(c);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn callback ? M : arr;\r\n\t}\r\n\t\t\r\n\tvar cache = {}; // lwf\r\n\r\n\t/*\r\n\t * Finds all component according to the selector.\r\n\t */\r\n\tfunction find(value, many, noCache, callback) { //W.FIND = \r\n\r\n\t\tvar isWaiting = false;\r\n\r\n\t\tif (langx.isFunction(many)) {\r\n\t\t\tisWaiting = true;\r\n\t\t\tcallback = many;\r\n\t\t\tmany = undefined;\r\n\t\t\t// noCache = undefined;\r\n\t\t\t// noCache can be timeout\r\n\t\t} else if (langx.isFunction(noCache)) {\r\n\t\t\tvar tmp = callback;\r\n\t\t\tisWaiting = true;\r\n\t\t\tcallback = noCache;\r\n\t\t\tnoCache = tmp;\r\n\t\t\t// noCache can be timeout\r\n\t\t}\r\n\r\n\t\tif (isWaiting) {\r\n\t\t\tlangx.isWaiting(function() {  // WAIT\r\n\t\t\t\tvar val = find(value, many, noCache);\r\n\t\t\t\tif (lazycom[value] && lazycom[value].state === 1) {\r\n\t\t\t\t\tlazycom[value].state = 2;\r\n\t\t\t\t\ttopic.emit('lazy', value, true); // EMIT\r\n\t\t\t\t\twarn('Lazy load: ' + value);\r\n\t\t\t\t\tcompile();\r\n\t\t\t\t}\r\n\t\t\t\treturn val instanceof Array ? val.length > 0 : !!val;\r\n\t\t\t}, function(err) {\r\n\t\t\t\t// timeout\r\n\t\t\t\tif (!err) {\r\n\t\t\t\t\tvar val = find(value, many);\r\n\t\t\t\t\tcallback.call(val ? val : W, val);\r\n\t\t\t\t}\r\n\t\t\t}, 500, noCache);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Element\r\n\t\tif (typeof(value) === 'object') {\r\n\t\t\tif (!(value instanceof jQuery)) {\r\n\t\t\t\tvalue = $(value);\r\n\t\t\t}\r\n\t\t\tvar output = findcomponent(value, '');\r\n\t\t\treturn many ? output : output[0];\r\n\t\t}\r\n\r\n\t\tvar key, output;\r\n\r\n\t\tif (!noCache) {\r\n\t\t\tkey = 'find.' + value + '.' + (many ? 0 : 1);\r\n\t\t\toutput = cache[key];\r\n\t\t\tif (output) {\r\n\t\t\t\treturn output;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar r = findcomponent(null, value);\r\n\t\tif (!many) {\r\n\t\t\tr = r[0];\r\n\t\t}\r\n\t\toutput = r;\r\n\t\tif (!noCache) {\r\n\t\t\tcache[key] = output;\r\n\t\t}\r\n\t\treturn output;\r\n\t};\r\n\t\t\r\n\tfunction storing (store,view) {\r\n\r\n\t\tvar events = {};\r\n\r\n\t\tfunction emitwatch(path, value, type) {\r\n\t\t\tfor (var i = 0, length = watches.length; i < length; i++) {\r\n\t\t\t\tvar self = watches[i];\r\n\t\t\t\tif (self.path === '*') {\r\n\t\t\t\t\tself.fn.call(self.context, path, self.format ? self.format(value, path, type) : value, type);\r\n\t\t\t\t} else if (path.length > self.path.length) {\r\n\t\t\t\t\tvar index = path.lastIndexOf('.', self.path.length);\r\n\t\t\t\t\tif (index === -1 ? false : self.path === path.substring(0, index)) {\r\n\t\t\t\t\t\tvar val = view.get(self.path); // GET\r\n\t\t\t\t\t\tself.fn.call(self.context, path, self.format ? self.format(val, path, type) : val, type);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfor (var j = 0, jl = self.$path.length; j < jl; j++) {\r\n\t\t\t\t\t\tif (self.$path[j] === path) {\r\n\t\t\t\t\t\t\tvar val = view.get(self.path); // get2\r\n\t\t\t\t\t\t\tself.fn.call(self.context, path, self.format ? self.format(val, path, type) : val, type);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// ===============================================================\r\n\t\t// Eventer\r\n\t\t// ===============================================================\r\n\r\n\r\n\t\tfunction on(name, path, fn, init, context) {\r\n\r\n\t\t\tif (name.indexOf(MULTIPLE) !== -1) {\r\n\t\t\t\t//ex: ON('name1 + name2 + name3', function() {});\r\n\t\t\t\tvar arr = name.split(MULTIPLE).trim();\r\n\t\t\t\tfor (var i = 0; i < arr.length; i++) {\r\n\t\t\t\t\ton(arr[i], path, fn, init, context);\r\n\t\t\t\t}\r\n\t\t\t\treturn this; //W;\r\n\t\t\t}\r\n\r\n\t\t\tvar push = true;\r\n\r\n\t\t\tif (name.substring(0, 1) === '^') {\r\n\t\t\t\tpush = false;\r\n\t\t\t\tname = name.substring(1);\r\n\t\t\t}\r\n\r\n\t\t\tvar owner = null;\r\n\t\t\tvar index = name.indexOf('#');\r\n\r\n\t\t\tif (index) {\r\n\t\t\t\towner = name.substring(0, index).trim();\r\n\t\t\t\tname = name.substring(index + 1).trim();\r\n\t\t\t}\r\n\r\n\t\t\tif (langx.isFunction(path)) {\r\n\t\t\t\tfn = path;\r\n\t\t\t\tpath = name === 'watch' ? '*' : '';\r\n\t\t\t} else {\r\n\t\t\t\tpath = path.replace('.*', '');\r\n\t\t\t}\r\n\r\n\t\t\tvar obj = { name: name, fn: fn, owner: owner || current_owner, context: context || (current_com == null ? undefined : current_com) };\r\n\r\n\t\t\tif (name === 'watch') {\r\n\t\t\t\tvar arr = [];\r\n\r\n\t\t\t\tvar tmp = findFormat(path);\r\n\t\t\t\tif (tmp) {\r\n\t\t\t\t\tpath = tmp.path;\r\n\t\t\t\t\tobj.format = tmp.fn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (path.substring(path.length - 1) === '.') {\r\n\t\t\t\t\tpath = path.substring(0, path.length - 1);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Temporary\r\n\t\t\t\tif (path.charCodeAt(0) === 37) { // %\r\n\t\t\t\t\tpath = 'jctmp.' + path.substring(1);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tpath = path.env();\r\n\r\n\t\t\t\t// !path = fixed path\r\n\t\t\t\tif (path.charCodeAt(0) === 33) { // !\r\n\t\t\t\t\tpath = path.substring(1);\r\n\t\t\t\t\tarr.push(path);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar p = path.split('.');\r\n\t\t\t\t\tvar s = [];\r\n\t\t\t\t\tfor (var j = 0; j < p.length; j++) {\r\n\t\t\t\t\t\tvar b = p[j].lastIndexOf('[');\r\n\t\t\t\t\t\tif (b !== -1) {\r\n\t\t\t\t\t\t\tvar c = s.join('.');\r\n\t\t\t\t\t\t\tarr.push(c + (c ? '.' : '') + p[j].substring(0, b));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ts.push(p[j]);\r\n\t\t\t\t\t\tarr.push(s.join('.'));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tobj.path = path;\r\n\t\t\t\tobj.$path = arr;\r\n\r\n\t\t\t\tif (push) {\r\n\t\t\t\t\twatches.push(obj);\r\n\t\t\t\t} else {\r\n\t\t\t\t\twatches.unshift(obj);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tinit && fn.call(context || M, path, obj.format ? obj.format(get(path), path, 0) : get(path), 0);\r\n\t\t\t} else {\r\n\t\t\t\tif (events[name]) {\r\n\t\t\t\t\tif (push) {\r\n\t\t\t\t\t\tevents[name].push(obj);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tevents[name].unshift(obj);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tevents[name] = [obj];\r\n\t\t\t\t}\r\n\t\t\t\t(!C.ready && (name === 'ready' || name === 'init')) && fn();\r\n\t\t\t}\r\n\t\t\treturn this; //W;\r\n\t\t}\r\n\r\n\t\tfunction off(name, path, fn) {\r\n\r\n\t\t\tif (name.indexOf('+') !== -1) {\r\n\t\t\t\tvar arr = name.split('+').trim();\r\n\t\t\t\tfor (var i = 0; i < arr.length; i++) {\r\n\t\t\t\t\toff(arr[i], path, fn); //W.OFF\r\n\t\t\t\t}\r\n\t\t\t\treturn this; //W;\r\n\t\t\t}\r\n\r\n\t\t\tif (lang.isFunction(path)) {\r\n\t\t\t\tfn = path;\r\n\t\t\t\tpath = '';\r\n\t\t\t}\r\n\r\n\t\t\tif (path === undefined) {\r\n\t\t\t\tpath = '';\r\n\t\t\t}\r\n\r\n\t\t\tvar owner = null;\r\n\t\t\tvar index = name.indexOf('#');\r\n\t\t\tif (index) {\r\n\t\t\t\towner = name.substring(0, index).trim();\r\n\t\t\t\tname = name.substring(index + 1).trim();\r\n\t\t\t}\r\n\r\n\t\t\tif (path) {\r\n\t\t\t\tpath = path.replace('.*', '').trim();\r\n\t\t\t\tvar tmp = findFormat(path);\r\n\t\t\t\tif (tmp) {\r\n\t\t\t\t\tpath = tmp.path;\r\n\t\t\t\t}\r\n\t\t\t\tif (path.substring(path.length - 1) === '.') {\r\n\t\t\t\t\tpath = path.substring(0, path.length - 1);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar type = 0;\r\n\r\n\t\t\tif (owner && !path && !fn && !name)\r\n\t\t\t\ttype = 1;\r\n\t\t\telse if (owner && name && !fn && !path)\r\n\t\t\t\ttype = 2;\r\n\t\t\telse if (owner && name && path)\r\n\t\t\t\ttype = 3;\r\n\t\t\telse if (owner && name && path && fn)\r\n\t\t\t\ttype = 4;\r\n\t\t\telse if (name && path && fn)\r\n\t\t\t\ttype = 5;\r\n\t\t\telse if (name && path)\r\n\t\t\t\ttype = 7;\r\n\t\t\telse if (fn)\r\n\t\t\t\ttype = 6;\r\n\r\n\t\t\tvar cleararr = function(arr, key) {\r\n\t\t\t\treturn arr.remove(function(item) {\r\n\t\t\t\t\tif (type > 2 && type < 5) {\r\n\t\t\t\t\t\tif (item.path !== path)\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar v = false;\r\n\t\t\t\t\tif (type === 1)\r\n\t\t\t\t\t\tv = item.owner === owner;\r\n\t\t\t\t\telse if (type === 2)\r\n\t\t\t\t\t\tv = key === name && item.owner === owner;\r\n\t\t\t\t\telse if (type === 3)\r\n\t\t\t\t\t\tv = key === name && item.owner === owner;\r\n\t\t\t\t\telse if (type === 4)\r\n\t\t\t\t\t\tv = key === name && item.owner === owner && item.fn === fn;\r\n\t\t\t\t\telse if (type === 5 || type === 6)\r\n\t\t\t\t\t\tv = key === name && item.fn === fn;\r\n\t\t\t\t\telse if (type === 6)\r\n\t\t\t\t\t\tv = item.fn === fn;\r\n\t\t\t\t\telse if (type === 7)\r\n\t\t\t\t\t\tv = key === name && item.path === path;\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tv = key === name;\r\n\t\t\t\t\treturn v;\r\n\t\t\t\t});\r\n\t\t\t};\r\n\r\n\t\t\tObject.keys(events).forEach(function(p) {\r\n\t\t\t\tevents[p] = cleararr(events[p], p);\r\n\t\t\t\tif (!events[p].length) {\r\n\t\t\t\t\tdelete events[p];\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\twatches = cleararr(watches, 'watch');\r\n\t\t\treturn this; //W;\r\n\t\t}\r\n\r\n\t\tfunction emit(name) {\r\n\r\n\t\t\tvar e = events[name];\r\n\t\t\tif (!e) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tvar args = [];\r\n\r\n\t\t\tfor (var i = 1, length = arguments.length; i < length; i++) {\r\n\t\t\t\targs.push(arguments[i]);\r\n\t\t\t}\r\n\r\n\t\t\tfor (var i = 0, length = e.length; i < length; i++) {\r\n\t\t\t\tvar context = e[i].context;\r\n\t\t\t\tif (context !== undefined && (context === null || context.$removed)) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\te[i].fn.apply(context || window, args);\r\n\t\t\t}\r\n\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tfunction each(fn) {\r\n\r\n\t\t\tvar keys = Object.keys(events);\r\n\t\t\tvar length = keys.length;\r\n\r\n\t\t\tfor (var i = 0; i < length; i++) {\r\n\t\t\t\tvar key = keys[i];\r\n\t\t\t\tarr = events[key];\r\n\t\t\t\tfn(key,arr);\r\n\r\n\t\t\t\tif (!arr.length) {\r\n\t\t\t\t\tdelete events[key];\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar watches = [];\r\n\r\n\t\tfunction unwatch(path, fn) { //W.UNWATCH \r\n\r\n\t\t\tif (path.indexOf(MULTIPLE) !== -1) {\r\n\t\t\t\tvar arr = path.split(MULTIPLE).trim();\r\n\t\t\t\tfor (var i = 0; i < arr.length; i++)\r\n\t\t\t\t\tunwatch(arr[i], fn);\r\n\t\t\t\treturn this; //W;\r\n\t\t\t}\r\n\r\n\t\t\treturn topic.off('watch', path, fn); //OFF\r\n\t\t};\r\n\r\n\t\tfunction watch(path, fn, init) { // W.WATCH\r\n\r\n\t\t\tif (path.indexOf(MULTIPLE) !== -1) {\r\n\t\t\t\tvar arr = path.split(MULTIPLE).trim();\r\n\t\t\t\tfor (var i = 0; i < arr.length; i++)\r\n\t\t\t\t\twatch(arr[i], fn, init);\r\n\t\t\t\treturn this; //W;\r\n\t\t\t}\r\n\r\n\t\t\tif (langx.isFunction(path)) { //if (typeof(path) === TYPE_FN) {\r\n\t\t\t\tinit = fn;\r\n\t\t\t\tfn = path;\r\n\t\t\t\tpath = '*';\r\n\t\t\t}\r\n\r\n\t\t\tvar push = '';\r\n\r\n\t\t\tif (path.substring(0, 1) === '^') {\r\n\t\t\t\tpath = path.substring(1);\r\n\t\t\t\tpush = '^';\r\n\t\t\t}\r\n\r\n\t\t\tpath = pathmaker(path, true);\r\n\t\t\ttopic.on(push + 'watch', path, fn, init);  // ON\r\n\t\t\treturn this; //W;\r\n\t\t}\r\n\r\n\t\tvar data = store.data;\r\n\r\n\t\tfunction parsepath(path) {\r\n\t\t\tvar arr = path.split('.');\r\n\t\t\tvar builder = [];\r\n\t\t\tvar all = [];\r\n\r\n\t\t\tfor (var i = 0; i < arr.length; i++) {\r\n\t\t\t\tvar p = arr[i];\r\n\t\t\t\tvar index = p.indexOf('[');\r\n\t\t\t\tif (index === -1) {\r\n\t\t\t\t\tif (p.indexOf('-') === -1) {\r\n\t\t\t\t\t\tall.push(p);\r\n\t\t\t\t\t\tbuilder.push(all.join('.'));\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvar a = all.splice(all.length - 1);\r\n\t\t\t\t\t\tall.push(a + '[\\'' + p + '\\']');\r\n\t\t\t\t\t\tbuilder.push(all.join('.'));\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (p.indexOf('-') === -1) {\r\n\t\t\t\t\t\tall.push(p.substring(0, index));\r\n\t\t\t\t\t\tbuilder.push(all.join('.'));\r\n\t\t\t\t\t\tall.splice(all.length - 1);\r\n\t\t\t\t\t\tall.push(p);\r\n\t\t\t\t\t\tbuilder.push(all.join('.'));\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tall.push('[\\'' + p.substring(0, index) + '\\']');\r\n\t\t\t\t\t\tbuilder.push(all.join(''));\r\n\t\t\t\t\t\tall.push(p.substring(index));\r\n\t\t\t\t\t\tbuilder.push(all.join(''));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn builder;\r\n\t\t}\r\n\r\n\r\n\t\tvar binders = {},\r\n\t\t\tpaths = {},\r\n\t\t\tdefaults = {},\r\n\t\t\t$formatter = [],\r\n\t\t\tskips = {};\r\n\t\t\t$parser = [],\r\n\t\t\tnmCache = {},  // notmodified cache \r\n\t\t\ttemp = {};\r\n\r\n\t\tfunction binderbind(path, absolutePath, ticks) {\r\n\t\t\tvar arr = binders[path];\r\n\t\t\tfor (var i = 0; i < arr.length; i++) {\r\n\t\t\t\tvar item = arr[i];\r\n\t\t\t\tif (item.ticks !== ticks) {\r\n\t\t\t\t\titem.ticks = ticks;\r\n\t\t\t\t\titem.exec(getx(item.path), absolutePath);  //GET no pathmake\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\tfunction each(fn, path) {   // M.each\r\n\t\t\tvar wildcard = path ? path.lastIndexOf('*') !== -1 : false;\r\n\t\t\tif (wildcard)\r\n\t\t\t\tpath = path.replace('.*', '');\r\n\t\t\tvar all = components;//M.components;\r\n\t\t\tvar index = 0;\r\n\t\t\tfor (var i = 0, length = all.length; i < length; i++) {\r\n\t\t\t\tvar com = all[i];\r\n\t\t\t\tif (!com || !com.$loaded || com.$removed || (path && (!com.path || !com.$compare(path))))\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\tvar stop = fn(com, index++, wildcard);\r\n\t\t\t\tif (stop === true)\r\n\t\t\t\t\treturn this;\r\n\t\t\t}\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\r\n\t\tfunction com_dirty(path, value, onlyComponent, skipEmitState) {\r\n\r\n\t\t\tvar isExcept = value instanceof Array;\r\n\t\t\tvar key = 'dirty' + path + (isExcept ? '>' + value.join('|') : '');\r\n\t\t\tvar except = null;\r\n\r\n\t\t\tif (isExcept) {\r\n\t\t\t\texcept = value;\r\n\t\t\t\tvalue = undefined;\r\n\t\t\t}\r\n\r\n\t\t\tif (typeof(value) !== 'boolean' && cache[key] !== undefined)\r\n\t\t\t\treturn cache[key];\r\n\r\n\t\t\tvar dirty = true;\r\n\t\t\tvar arr = value !== undefined ? [] : null;\r\n\t\t\tvar flags = null;\r\n\r\n\t\t\tif (isExcept) {\r\n\t\t\t\tvar is = false;\r\n\t\t\t\tflags = {};\r\n\t\t\t\texcept = except.remove(function(item) {\r\n\t\t\t\t\tif (item.substring(0, 1) === '@') {\r\n\t\t\t\t\t\tflags[item.substring(1)] = true;\r\n\t\t\t\t\t\tis = true;\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t});\r\n\t\t\t\t!is && (flags = null);\r\n\t\t\t\tisExcept = except.length > 0;\r\n\t\t\t}\r\n\r\n\t\t\tvar index = path.lastIndexOf('.*');\r\n\t\t\tvar wildcard = index !== -1;\r\n\t\t\tif (index !== -1)\r\n\t\t\t\tpath = path.substring(0, index);\r\n\r\n\t\t\tpath = pathmaker(path);\r\n\r\n\t\t\tvar all = view.components;//M.components;\r\n\t\t\tfor (var i = 0, length = all.length; i < length; i++) {\r\n\t\t\t\tvar com = all[i];\r\n\r\n\t\t\t\tif (!com || com.$removed || !com.$loaded || !com.path || !com.$compare(path) || (isExcept && com.$except(except)))\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\tif (flags && ((flags.visible && !com.visible()) || (flags.hidden && !com.hidden()) || (flags.enabled && com.find(SELINPUT).is(':disabled')) || (flags.disabled && com.find(SELINPUT).is(':enabled'))))\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\tif (com.disabled || com.$dirty_disabled) {\r\n\t\t\t\t\tarr && com.state && arr.push(com);\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (value === undefined) {\r\n\t\t\t\t\tif (com.$dirty === false)\r\n\t\t\t\t\t\tdirty = false;\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcom.state && arr.push(com);\r\n\r\n\t\t\t\tif (!onlyComponent) {\r\n\t\t\t\t\tif (wildcard || com.path === path) {\r\n\t\t\t\t\t\tcom.$dirty = value;\r\n\t\t\t\t\t\tcom.$interaction(101);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (onlyComponent._id === com._id) {\r\n\t\t\t\t\tcom.$dirty = value;\r\n\t\t\t\t\tcom.$interaction(101);\r\n\t\t\t\t}\r\n\t\t\t\tif (com.$dirty === false)\r\n\t\t\t\t\tdirty = false;\r\n\t\t\t}\r\n\r\n\t\t\tcache.clearPageData('dirty');\r\n\t\t\tcache.setPageData(key,dirty);\r\n\r\n\t\t\t// For double hitting component.state() --> look into COM.invalid()\r\n\t\t\t!skipEmitState && state(arr, 1, 2);\r\n\t\t\treturn dirty;\r\n\t\t}\r\n\r\n\t\tfunction com_valid(path, value, onlyComponent) {\r\n\r\n\t\t\tvar isExcept = value instanceof Array;\r\n\t\t\tvar key = 'valid' + path + (isExcept ? '>' + value.join('|') : '');\r\n\t\t\tvar except = null;\r\n\r\n\t\t\tif (isExcept) {\r\n\t\t\t\texcept = value;\r\n\t\t\t\tvalue = undefined;\r\n\t\t\t}\r\n\r\n\t\t\tif (typeof(value) !== 'boolean' && cache[key] !== undefined)\r\n\t\t\t\treturn cache[key];\r\n\r\n\t\t\tvar flags = null;\r\n\r\n\t\t\tif (isExcept) {\r\n\t\t\t\tvar is = false;\r\n\t\t\t\tflags = {};\r\n\t\t\t\texcept = except.remove(function(item) {\r\n\t\t\t\t\tif (item.substring(0, 1) === '@') {\r\n\t\t\t\t\t\tflags[item.substring(1)] = true;\r\n\t\t\t\t\t\tis = true;\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t});\r\n\t\t\t\t!is && (flags = null);\r\n\t\t\t\tisExcept = except.length > 0;\r\n\t\t\t}\r\n\r\n\t\t\tvar valid = true;\r\n\t\t\tvar arr = value !== undefined ? [] : null;\r\n\r\n\t\t\tvar index = path.lastIndexOf('.*');\r\n\t\t\tvar wildcard = index !== -1;\r\n\t\t\tif (index !== -1) {\r\n\t\t\t\tpath = path.substring(0, index);\r\n\t\t\t}\r\n\r\n\t\t\tpath = pathmaker(path);\r\n\r\n\t\t\tvar all = view.components;//M.components;\r\n\t\t\tfor (var i = 0, length = all.length; i < length; i++) {\r\n\t\t\t\tvar com = all[i];\r\n\r\n\t\t\t\tif (!com || com.$removed || !com.$loaded || !com.path || !com.$compare(path) || (isExcept && com.$except(except)))\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\tif (flags && ((flags.visible && !com.visible()) || (flags.hidden && !com.hidden()) || (flags.enabled && com.find(SELINPUT).is(':disabled')) || (flags.disabled && com.find(SELINPUT).is(':enabled'))))\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\tif (com.disabled || com.$valid_disabled) {\r\n\t\t\t\t\tarr && com.state && arr.push(com);\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (value === undefined) {\r\n\t\t\t\t\tif (com.$valid === false)\r\n\t\t\t\t\t\tvalid = false;\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcom.state && arr.push(com);\r\n\r\n\t\t\t\tif (!onlyComponent) {\r\n\t\t\t\t\tif (wildcard || com.path === path) {\r\n\t\t\t\t\t\tcom.$valid = value;\r\n\t\t\t\t\t\tcom.$interaction(102);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (onlyComponent._id === com._id) {\r\n\t\t\t\t\tcom.$valid = value;\r\n\t\t\t\t\tcom.$interaction(102);\r\n\t\t\t\t}\r\n\t\t\t\tif (com.$valid === false)\r\n\t\t\t\t\tvalid = false;\r\n\t\t\t}\r\n\r\n\t\t\tcache.clearPageData('valid');\r\n\t\t\tcache.setPageData(key, valid);  // cache[key] = valid\r\n\t\t\tlangx.state(arr, 1, 1);\r\n\t\t\treturn valid;\r\n\t\t}\r\n\r\n\t   /**\r\n\t   * Creates a watcher for all changes.\r\n\t   * @param  {String} path \r\n\t   */\r\n\t\tfunction create(path) { //W.CREATE\r\n\r\n\t\t\tvar is = false;\r\n\t\t\tvar callback;\r\n\r\n\t\t\tif (langx.isString(path)) {\r\n\t\t\t\tif (proxy[path]) {\r\n\t\t\t\t\treturn proxy[path];\r\n\t\t\t\t}\r\n\t\t\t\tis = true;\r\n\t\t\t\tcallback = function(key) {\r\n\r\n\t\t\t\t\tvar p = path + (key ? '.' + key : '');\r\n\t\t\t\t\tif (M.skipproxy === p) {\r\n\t\t\t\t\t\tM.skipproxy = '';\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\tif (M.skipproxy === p) {\r\n\t\t\t\t\t\t\tM.skipproxy = '';\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tnotify(p);  // NOTIFY\r\n\t\t\t\t\t\t\treset(p);   // REEST\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, MD.delaybinder);\r\n\t\t\t\t};\r\n\r\n\t\t\t} else {\r\n\t\t\t\tcallback = path;\r\n\t\t\t}\r\n\r\n\t\t\tvar blocked = false;\r\n\t\t\tvar obj = path ? (get2(path) || {}) : {};\r\n\t\t\tvar handler = {\r\n\t\t\t\tget: function(target, property, receiver) {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\treturn new Proxy(target[property], handler);\r\n\t\t\t\t\t} catch (err) {\r\n\t\t\t\t\t\treturn Reflect.get(target, property, receiver);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tdefineProperty: function(target, property, descriptor) {\r\n\t\t\t\t\t!blocked && callback(property, descriptor);\r\n\t\t\t\t\treturn Reflect.defineProperty(target, property, descriptor);\r\n\t\t\t\t},\r\n\t\t\t\tdeleteProperty: function(target, property) {\r\n\t\t\t\t\t!blocked && callback(property);\r\n\t\t\t\t\treturn Reflect.deleteProperty(target, property);\r\n\t\t\t\t},\r\n\t\t\t\tapply: function(target, thisArg, argumentsList) {\r\n\t\t\t\t\tif (BLACKLIST[target.name]) {\r\n\t\t\t\t\t\tblocked = true;\r\n\t\t\t\t\t\tvar result = Reflect.apply(target, thisArg, argumentsList);\r\n\t\t\t\t\t\tcallback('', argumentsList[0]);\r\n\t\t\t\t\t\tblocked = false;\r\n\t\t\t\t\t\treturn result;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn Reflect.apply(target, thisArg, argumentsList);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tvar o = new Proxy(obj, handler);\r\n\r\n\t\t\tif (is) {\r\n\t\t\t\tM.skipproxy = path;\r\n\t\t\t\tgetx(path) == null && setx(path, obj, true);  // GET SET\r\n\t\t\t\treturn proxy[path] = o;\r\n\t\t\t} else\r\n\t\t\t\treturn o;\r\n\t\t}\r\n\r\n\t  /**\r\n\t   * Notifies a setter in all components on the path.\r\n\t   * @param  {String} path \r\n\t   */\r\n\t\tfunction notify() { // W.NOTIFY\r\n\r\n\t\t\tvar arg = arguments;\r\n\t\t\tvar all = view.components;//M.components;\r\n\r\n\t\t\tvar $ticks = Math.random().toString().substring(2, 8);\r\n\t\t\tfor (var j = 0; j < arg.length; j++) {\r\n\t\t\t\tvar p = arg[j];\r\n\t\t\t\tbinders[p] && binderbind(p, p, $ticks);\r\n\t\t\t}\r\n\r\n\t\t\tfor (var i = 0, length = all.length; i < length; i++) {\r\n\t\t\t\tvar com = all[i];\r\n\t\t\t\tif (!com || com.$removed || com.disabled || !com.$loaded || !com.path)\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\tvar is = 0;\r\n\t\t\t\tfor (var j = 0; j < arg.length; j++) {\r\n\t\t\t\t\tif (com.path === arg[j]) {\r\n\t\t\t\t\t\tis = 1;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (is) {\r\n\t\t\t\t\tvar val = com.get();\r\n\t\t\t\t\tcom.setter && com.setterX(val, com.path, 1);\r\n\t\t\t\t\tcom.state && com.stateX(1, 6);\r\n\t\t\t\t\tcom.$interaction(1);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfor (var j = 0; j < arg.length; j++) {\r\n\t\t\t\temitwatch(arg[j], getx(arg[j]), 1);  // GET\r\n\t\t\t}\r\n\r\n\t\t\treturn this;  // W\r\n\t\t}\r\n\r\n\r\n\t \t//cache\r\n\t\tfunction cache(path, expire, rebind) { // W.CACHEPATH = \r\n\t\t\tvar key = '$jcpath';\r\n\t\t\tWATCH(path, function(p, value) {\r\n\t\t\t\tvar obj = storages.get(key); // cachestorage(key);\r\n\t\t\t\tif (obj) {\r\n\t\t\t\t\tobj[path] = value;\r\n\t\t\t\t}else {\r\n\t\t\t\t\tobj = {};\r\n\t\t\t\t\tobj[path] = value;\r\n\t\t\t\t}\r\n\t\t\t\tstorages.put(key, obj, expire); // cachestorage(key, obj, expire);\r\n\t\t\t});\r\n\r\n\t\t\tif (rebind === undefined || rebind) {\r\n\t\t\t\tvar cache = storages.get(key); // cachestorage(key);\r\n\t\t\t\tif (cache && cache[path] !== undefined && cache[path] !== get(path)){\r\n\t\t\t\t\tsetx(path, cache[path], true);\t\r\n\t\t\t\t} \r\n\t\t\t}\r\n\t\t\treturn this; //W \r\n\t\t};\r\n\r\n\t\tfunction validate(path, except) { //W.VALIDATE =\r\n\r\n\t\t\tvar arr = [];\r\n\t\t\tvar valid = true;\r\n\r\n\t\t\tpath = pathmaker(path.replaceWildcard()); //pathmaker(path.replace(REGWILDCARD, ''));\r\n\r\n\t\t\tvar flags = null;\r\n\t\t\tif (except) {\r\n\t\t\t\tvar is = false;\r\n\t\t\t\tflags = {};\r\n\t\t\t\texcept = except.remove(function(item) {\r\n\t\t\t\t\tif (item.substring(0, 1) === '@') {\r\n\t\t\t\t\t\tflags[item.substring(1)] = true;\r\n\t\t\t\t\t\tis = true;\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t});\r\n\t\t\t\t!is && (flags = null);\r\n\t\t\t\t!except.length && (except = null);\r\n\t\t\t}\r\n\r\n\t\t\tvar all = M.components.all;//M.components;\r\n\t\t\tfor (var i = 0, length = all.length; i < length; i++) {\r\n\t\t\t\tvar com = all[i];\r\n\t\t\t\tif (!com || com.$removed || com.disabled || !com.$loaded || !com.path || !com.$compare(path))\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\tif (flags && ((flags.visible && !com.visible()) || (flags.hidden && !com.hidden()) || (flags.enabled && com.find(SELINPUT).is(':disabled')) || (flags.disabled && com.find(SELINPUT).is(':enabled'))))\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\tcom.state && arr.push(com);\r\n\r\n\t\t\t\tif (com.$valid_disabled)\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\tcom.$validate = true;\r\n\t\t\t\tif (com.validate) {\r\n\t\t\t\t\tcom.$valid = com.validate(get(com.path));\r\n\t\t\t\t\tcom.$interaction(102);\r\n\t\t\t\t\tif (!com.$valid)\r\n\t\t\t\t\t\tvalid = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tclear('valid');\r\n\t\t\tstate(arr, 1, 1);\r\n\t\t\treturn valid;\r\n\t\t}\r\n\r\n\t   /**\r\n\t   * Evaluates a global formatter.\r\n\t   * @param  {String} path \r\n\t   * @param  {Object} value\r\n\t   * @param  {String} type \r\n\t   * @returns {Boolean}   \r\n\t   * OR\r\n\t   * Registers a global formatter.\r\n\t   * @param  {Function} value \r\n\t   * @param  {Boolean} path \r\n\t   */\r\n\t\tfunction format(value, path, type) {  // W.FORMATTER = M.formatter =\r\n\r\n\t\t\tif (langx.isFunction(value)) {\r\n\t\t\t\t// Prepend\r\n\t\t\t\tif (path === true) {\r\n\t\t\t\t\t$formatter.unshift(value);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t$formatter.push(value);\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn M;\r\n\t\t\t}\r\n\r\n\t\t\tvar a = $formatter;\r\n\t\t\tif (a && a.length) {\r\n\t\t\t\tfor (var i = 0, length = a.length; i < length; i++) {\r\n\t\t\t\t\tvar val = a[i].call(M, path, value, type);\r\n\t\t\t\t\tif (val !== undefined)\r\n\t\t\t\t\t\tvalue = val;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn value;\r\n\t\t};\r\n\r\n\t\t//get... \r\n\r\n\t\tfunction get(path, scope) {\r\n\r\n\t\t\tif (path == null) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar code = path.charCodeAt(0);\r\n\t\t\tif (code === 37){  // % \r\n\t\t\t\tpath = 'jctmp.' + path.substring(1);\r\n\t\t\t}\r\n\r\n\t\t\tvar key = '=' + path;\r\n\t\t\tif (paths[key]) {\r\n\t\t\t\treturn paths[key](scope || stores.root);\r\n\t\t\t}\r\n\r\n\t\t\tif (path.indexOf('?') !== -1) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar arr = parsepath(path);\r\n\t\t\tvar builder = [];\r\n\r\n\t\t\tfor (var i = 0, length = arr.length - 1; i < length; i++) {\r\n\t\t\t\tvar item = arr[i];\r\n\t\t\t\tif (item.substring(0, 1) !== '[') {\r\n\t\t\t\t\titem = '.' + item;\r\n\t\t\t\t}\r\n\t\t\t\tbuilder.push('if(!w' + item + ')return');\r\n\t\t\t}\r\n\r\n\t\t\tvar v = arr[arr.length - 1];\r\n\t\t\tif (v.substring(0, 1) !== '['){\r\n\t\t\t\tv = '.' + v;\r\n\t\t\t}\r\n\r\n\t\t\tvar fn = (new Function('w', builder.join(';') + ';return w' + v));\r\n\t\t\tpaths[key] = fn;\r\n\t\t\treturn fn(scope || MD.scope);\r\n\t\t}\r\n\r\n\t\t// set...\r\n\t\tfunction set(path, value, is) {\r\n\r\n\t\t\tif (path == null) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar key = '+' + path;\r\n\r\n\t\t\tif (paths[key]) {\r\n\t\t\t\treturn paths[key](store.data, value, path, binders, binderbind, is); // MD.scope\r\n\t\t\t}\r\n\r\n\t\t\tif (path.indexOf('?') !== -1) {\r\n\t\t\t\tpath = '';\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar arr = parsepath(path);\r\n\t\t\tvar builder = [];\r\n\t\t\tvar binder = [];\r\n\r\n\t\t\tfor (var i = 0; i < arr.length - 1; i++) {\r\n\t\t\t\tvar item = arr[i];\r\n\t\t\t\tvar type = arr[i + 1] ? (REGISARR.test(arr[i + 1]) ? '[]' : '{}') : '{}';\r\n\t\t\t\tvar p = 'w' + (item.substring(0, 1) === '[' ? '' : '.') + item;\r\n\t\t\t\tbuilder.push('if(typeof(' + p + ')!==\\'object\\'||' + p + '==null)' + p + '=' + type);\r\n\t\t\t}\r\n\r\n\t\t\tfor (var i = 0; i < arr.length - 1; i++) {\r\n\t\t\t\tvar item = arr[i];\r\n\t\t\t\tbinder.push('binders[\\'' + item + '\\']&&binderbind(\\'' + item + '\\',\\'' + path + '\\',$ticks)');\r\n\t\t\t}\r\n\r\n\t\t\tvar v = arr[arr.length - 1];\r\n\t\t\tbinder.push('binders[\\'' + v + '\\']&&binderbind(\\'' + v + '\\',\\'' + path + '\\',$ticks)');\r\n\t\t\tbinder.push('binders[\\'!' + v + '\\']&&binderbind(\\'!' + v + '\\',\\'' + path + '\\',$ticks)');\r\n\r\n\t\t\tif (v.substring(0, 1) !== '['){\r\n\t\t\t\tv = '.' + v;\r\n\t\t\t}\r\n\r\n\t\t\tvar fn = (new Function('w', 'a', 'b', 'binders', 'binderbind', 'nobind', 'var $ticks=Math.random().toString().substring(2,8);if(!nobind){' + builder.join(';') + ';var v=typeof(a)==\\'function\\'?a(MAIN.compiler.get(b)):a;w' + v + '=v}' + binder.join(';') + ';return a'));\r\n\t\t\tpaths[key] = fn;\r\n\t\t\tfn(store.data, value, path, binders, binderbind, is); // MD.scope\r\n\r\n\t\t\treturn this; //C\r\n\t\t}\r\n\r\n\t\tfunction set2(scope, path, value) {\r\n\r\n\t\t\tif (path == null) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar key = '++' + path;\r\n\r\n\t\t\tif (paths[key]) {\r\n\t\t\t\treturn paths[key](scope, value, path);\r\n\t\t\t}\r\n\r\n\t\t\tvar arr = parsepath(path);\r\n\r\n\t\t\tvar builder = [];\r\n\r\n\t\t\tfor (var i = 0; i < arr.length - 1; i++) {\r\n\t\t\t\tvar item = arr[i];\r\n\t\t\t\tvar type = arr[i + 1] ? (REGISARR.test(arr[i + 1]) ? '[]' : '{}') : '{}';\r\n\t\t\t\tvar p = 'w' + (item.substring(0, 1) === '[' ? '' : '.') + item;\r\n\t\t\t\tbuilder.push('if(typeof(' + p + ')!==\\'object\\'||' + p + '==null)' + p + '=' + type);\r\n\t\t\t}\r\n\r\n\t\t\tvar v = arr[arr.length - 1];\r\n\r\n\t\t\tif (v.substring(0, 1) !== '[') {\r\n\t\t\t\tv = '.' + v;\r\n\t\t\t}\r\n\r\n\t\t\tvar fn = (new Function('w', 'a', 'b', builder.join(';') + ';w' + v + '=a;return a'));\r\n\t\t\tpaths[key] = fn;\r\n\t\t\tfn(scope, value, path);\r\n\t\t\treturn scope;\r\n\t\t}\r\n\r\n\t\t// 1 === manually\r\n\t\t// 2 === by input\r\n\t\t// 3 === default\r\n\t\tfunction setx(path, value, type) {  // M.set\r\n\r\n\t\t\tif (path instanceof Array) {\r\n\t\t\t\tfor (var i = 0; i < path.length; i++) \r\n\t\t\t\t\tsetx(path[i], value, type);\r\n\t\t\t\treturn M;\r\n\t\t\t}\r\n\r\n\t\t\tpath = pathmaker(path);\r\n\r\n\t\t\tif (!path) {\r\n\t\t\t\treturn M;\r\n\t\t\t}\r\n\r\n\t\t\tvar is = path.charCodeAt(0) === 33; // !\r\n\t\t\tif (is) {\r\n\t\t\t\tpath = path.substring(1);\r\n\t\t\t}\r\n\r\n\t\t\tif (path.charCodeAt(0) === 43) { // +\r\n\t\t\t\tpath = path.substring(1);\r\n\t\t\t\treturn push(path, value, type);\r\n\t\t\t}\r\n\r\n\t\t\tif (!path) {\r\n\t\t\t\treturn M;\r\n\t\t\t}\r\n\r\n\t\t\tvar isUpdate = (typeof(value) === 'object' && !(value instanceof Array) && value != null);\r\n\t\t\tvar reset = type === true;\r\n\t\t\tif (reset) {\r\n\t\t\t\ttype = 1;\r\n\t\t\t}\r\n\r\n\t\t\tM.skipproxy = path;\r\n\t\t\tset(path, value);\r\n\r\n\t\t\tif (isUpdate) {\r\n\t\t\t\treturn update(path, reset, type, true);\r\n\t\t\t}\r\n\r\n\t\t\tvar result = get(path);\r\n\t\t\tvar state = [];\r\n\r\n\t\t\tif (type === undefined) {\r\n\t\t\t\ttype = 1;\r\n\t\t\t}\r\n\r\n\t\t\tvar all = view.components;//M.components;\r\n\r\n\t\t\tfor (var i = 0, length = all.length; i < length; i++) {\r\n\t\t\t\tvar com = all[i];\r\n\r\n\t\t\t\tif (!com || com.disabled || com.$removed || !com.$loaded || !com.path || !com.$compare(path))\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\tif (com.setter) {\r\n\t\t\t\t\tif (com.path === path) {\r\n\t\t\t\t\t\tif (com.setter) {\r\n\t\t\t\t\t\t\tcom.setterX(result, path, type);\r\n\t\t\t\t\t\t\tcom.$interaction(type);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (com.setter) {\r\n\t\t\t\t\t\t\tcom.setterX(get(com.path), path, type);\r\n\t\t\t\t\t\t\tcom.$interaction(type);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!com.$ready) {\r\n\t\t\t\t\tcom.$ready = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttype !== 3 && com.state && state.push(com);\r\n\r\n\t\t\t\tif (reset) {\r\n\t\t\t\t\tif (!com.$dirty_disabled)\r\n\t\t\t\t\t\tcom.$dirty = true;\r\n\t\t\t\t\tif (!com.$valid_disabled) {\r\n\t\t\t\t\t\tcom.$valid = true;\r\n\t\t\t\t\t\tcom.$validate = false;\r\n\t\t\t\t\t\tif (com.validate) {\r\n\t\t\t\t\t\t\tcom.$valid = com.validate(result);\r\n\t\t\t\t\t\t\tcom.$interaction(102);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfindcontrol2(com);\r\n\r\n\t\t\t\t} else if (com.validate && !com.$valid_disabled) {\r\n\t\t\t\t\tcom.valid(com.validate(result), true);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (reset) {\r\n\t\t\t\tcaches.clear('dirty', 'valid');\r\n\t\t\t}\r\n\r\n\t\t\tfor (var i = 0, length = state.length; i < length; i++) {\r\n\t\t\t\tstate[i].stateX(type, 5);\r\n\t\t\t}\r\n\r\n\t\t\temitwatch(path, result, type);\r\n\t\t\treturn M;\r\n\t\t}\r\n\r\n\t\tfunction defaultValue(path, timeout, onlyComponent, reset) { //M.default = \r\n\r\n\t\t\tif (timeout > 0) {\r\n\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\tdefaultValue(path, 0, onlyComponent, reset);\r\n\t\t\t\t}, timeout);\r\n\t\t\t\treturn this;\r\n\t\t\t}\r\n\r\n\t\t\tif (typeof(onlyComponent) === 'boolean') {\r\n\t\t\t\treset = onlyComponent;\r\n\t\t\t\tonlyComponent = null;\r\n\t\t\t}\r\n\r\n\t\t\tif (reset === undefined) {\r\n\t\t\t\treset = true;\r\n\t\t\t}\r\n\r\n\t\t\tpath = pathmaker(path.replaceWildcard()); //pathmaker(path.replace(REGWILDCARD, ''));\r\n\r\n\t\t\t// Reset scope\r\n\t\t\tvar key = path.replace(/\\.\\*$/, '');\r\n\t\t\tvar fn = defaults['#' + HASH(key)];\r\n\t\t\tvar tmp;\r\n\r\n\t\t\tif (fn) {\r\n\t\t\t\ttmp = fn();\r\n\t\t\t\tset(key, tmp);\r\n\t\t\t}\r\n\r\n\t\t\tvar arr = [];\r\n\t\t\tvar all = view.components;//M.components;\r\n\r\n\t\t\tfor (var i = 0, length = all.length; i < length; i++) {\r\n\t\t\t\tvar com = all[i];\r\n\r\n\t\t\t\tif (!com || com.$removed || com.disabled || !com.$loaded || !com.path || !com.$compare(path)) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (com.state) {\r\n\t\t\t\t\tarr.push(com);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (onlyComponent && onlyComponent._id !== com._id) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (com.$default) {\r\n\t\t\t\t com.set(com.$default(), 3);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!reset) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfindcontrol2(com);\r\n\r\n\t\t\t\tif (!com.$dirty_disabled) {\r\n\t\t\t\t\tcom.$dirty = true;\r\n\t\t\t\t}\r\n\t\t\t\tif (!com.$valid_disabled) {\r\n\t\t\t\t\tcom.$valid = true;\r\n\t\t\t\t\tcom.$validate = false;\r\n\t\t\t\t\tif (com.validate) {\r\n\t\t\t\t\t\tcom.$valid = com.validate(com.get());\r\n\t\t\t\t\t\tcom.$interaction(102);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (reset) {\r\n\t\t\t\tcache.clearPageData('valid', 'dirty');\r\n\t\t\t\tlangx.state(arr, 3, 3);\r\n\t\t\t}\r\n\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\r\n\t\t// 1 === manually\r\n\t\t// 2 === by input\r\n\t\tfunction update(path, reset, type, wasset) { // M.update =  // immUpdate\r\n\t\t\tif (path instanceof Array) {\r\n\t\t\t\tfor (var i = 0; i < path.length; i++) {\r\n\t\t\t\t\tupdate(store, path[i], reset, type);\r\n\t\t\t\t}\r\n\t\t\t\treturn this;  // M\r\n\t\t\t}\r\n\r\n\t\t\tpath = pathmaker(path);\r\n\t\t\tif (!path) {\r\n\t\t\t\treturn this;  // M\r\n\t\t\t}\r\n\r\n\t\t\tvar is = path.charCodeAt(0) === 33; // !\r\n\t\t\tif (is) {\r\n\t\t\t\tpath = path.substring(1);\r\n\t\t\t}\r\n\r\n\t\t\tpath = path.replaceWildcard();\r\n\t\t\tif (!path) {\r\n\t\t\t\treturn this;  // M\r\n\t\t\t}\r\n\r\n\t\t\tif (!wasset) {\r\n\t\t\t\tget(path, get(path), true);\r\n\t\t\t}\r\n\r\n\t\t\tvar state = [];\r\n\r\n\t\t\tif (type === undefined) {\r\n\t\t\t\ttype = 1; // manually\r\n\t\t\t}\r\n\r\n\t\t\tM.skipproxy = path;\r\n\r\n\t\t\tvar all = view.components;//M.components;\r\n\t\t\tfor (var i = 0, length = all.length; i < length; i++) {\r\n\t\t\t\tvar com = all[i];\r\n\r\n\t\t\t\tif (!com || com.disabled || com.$removed || !com.$loaded || !com.path || !com.$compare(path))\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\tvar result = com.get();\r\n\t\t\t\tif (com.setter) {\r\n\t\t\t\t\tcom.$skip = false;\r\n\t\t\t\t\tcom.setterX(result, path, type);\r\n\t\t\t\t\tcom.$interaction(type);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!com.$ready) {\r\n\t\t\t\t\tcom.$ready = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (reset === true) {\r\n\r\n\t\t\t\t\tif (!com.$dirty_disabled) {\r\n\t\t\t\t\t\tcom.$dirty = true;\r\n\t\t\t\t\t\tcom.$interaction(101);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (!com.$valid_disabled) {\r\n\t\t\t\t\t\tcom.$valid = true;\r\n\t\t\t\t\t\tcom.$validate = false;\r\n\t\t\t\t\t\tif (com.validate) {\r\n\t\t\t\t\t\t\tcom.$valid = com.validate(result);\r\n\t\t\t\t\t\t\tcom.$interaction(102);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfindcontrol2(com);\r\n\r\n\t\t\t\t} else if (com.validate && !com.$valid_disabled) {\r\n\t\t\t\t\tcom.valid(com.validate(result), true);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (com.state) {\r\n\t\t\t\t\tstate.push(com);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (reset) {\r\n\t\t\t\tclear('dirty', 'valid');\r\n\t\t\t}\r\n\r\n\t\t\tfor (var i = 0, length = state.length; i < length; i++) {\r\n\t\t\t\tstate[i].stateX(1, 4);\r\n\t\t\t}\r\n\r\n\t\t\temitwatch(path, get(path), type);\r\n\r\n\t\t\treturn this; // M\r\n\t\t}\r\n\t\t\r\n\t   /**\r\n\t   * Evaluate String expression as JavaScript code.\r\n\t   * @param  {String/Object} path Can be object if \"path_is_real_value\" is \"true\"\r\n\t   * @param  {String} expression A condition.\r\n\t   * @param  {Boolean} path_is_real_value Optional, default: false\r\n\t   * @returns {Boolean}   \r\n\t   */\r\n\t\tfunction evaluate(path, expression, nopath) { //W.EVALUATE = \r\n\r\n\t\t\tvar key = 'eval' + expression;\r\n\t\t\tvar exp = temp[key];\r\n\t\t\tvar val = null;\r\n\r\n\t\t\tif (nopath) {\r\n\t\t\t\tval = path;\r\n\t\t\t} else {\r\n\t\t\t\tval = get(path);\r\n\t\t\t}\r\n\r\n\t\t\tif (exp) {\r\n\t\t\t\treturn exp.call(val, val, path);\r\n\t\t\t}\r\n\r\n\t\t\tif (expression.indexOf('return') === -1) {\r\n\t\t\t\texpression = 'return ' + expression;\r\n\t\t\t}\r\n\r\n\t\t\texp = new Function('value', 'path', expression);\r\n\t\t\ttemp[key] = exp;\r\n\t\t\treturn exp.call(val, val, path);\r\n\t\t}\r\n\r\n\t\t// inc.. \r\n\t\tfunction inc(path, value, type) {  // M.inc\r\n\r\n\t\t\tif (path instanceof Array) {\r\n\t\t\t\tfor (var i = 0; i < path.length; i++)\r\n\t\t\t\t\tinc(path[i], value, type);\r\n\t\t\t\treturn this; // M\r\n\t\t\t}\r\n\r\n\t\t\t//path = pathmaker(path); ---\r\n\r\n\t\t\tif (!path) {\r\n\t\t\t\treturn this; // M\r\n\t\t\t}\r\n\r\n\t\t\tvar current = get(path);\r\n\t\t\tif (!current) {\r\n\t\t\t\tcurrent = 0;\r\n\t\t\t} else if (!langx.isNumber(current)) {\r\n\t\t\t\tcurrent = parseFloat(current);\r\n\t\t\t\tif (isNaN(current))\r\n\t\t\t\t\tcurrent = 0;\r\n\t\t\t}\r\n\r\n\t\t\tcurrent += value;\r\n\t\t\tsetx(path, current, type);\r\n\t\t\treturn this; // M\r\n\t\t}\r\n\r\n\r\n\t\t// extend...\r\n\t\tfunction extend(path, value, type) { // M.extend\r\n\t\t\tpath = pathmaker(path);\r\n\t\t\tif (path) {\r\n\t\t\t\tvar val = get(path);\r\n\t\t\t\tif (val == null) {\r\n\t\t\t\t\tval = {};\r\n\t\t\t\t}\r\n\t\t\t\tsetx(path, langx.extend(val, value), type);\r\n\t\t\t}\r\n\t\t\treturn this; // M\r\n\t\t}\r\n\r\n\r\n\t\tfunction push(path, value, type) { // M.push\r\n\r\n\t\t\tif (path instanceof Array) {\r\n\t\t\t\tfor (var i = 0; i < path.length; i++) {\r\n\t\t\t\t\tpush(path[i], value, type);\r\n\t\t\t\t}\r\n\t\t\t\treturn this; // M\r\n\t\t\t}\r\n\r\n\t\t\tvar arr = get(path);\r\n\t\t\tvar n = false;\r\n\r\n\t\t\tif (!(arr instanceof Array)) {\r\n\t\t\t\tarr = [];\r\n\t\t\t\tn = true;\r\n\t\t\t}\r\n\r\n\t\t\tvar is = true;\r\n\t\t\tM.skipproxy = path;\r\n\r\n\t\t\tif (value instanceof Array) {\r\n\t\t\t\tif (value.length)\r\n\t\t\t\t\tarr.push.apply(arr, value);\r\n\t\t\t\telse {\r\n\t\t\t\t\tis = false;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tarr.push(value);\r\n\t\t\t}\r\n\r\n\t\t\tif (n) {\r\n\t\t\t\tsetx(path, arr, type);\r\n\t\t\t} else if (is) {\r\n\t\t\t\tupdate(path, undefined, type);\r\n\t\t\t}\r\n\r\n\t\t\treturn this; // M\r\n\t\t}\r\n\r\n\t   /**\r\n\t   * Creates an object on the path and notifies all components\r\n\t   * @param  {String} path \r\n\t   * @param  {Function} fn \r\n\t   * @param  {Boolean} update Optional Optional, default \"true\"\r\n\t   */\r\n\t\tfunction make(obj, fn, update) { // W.MAKE\r\n\r\n\t\t\tswitch (typeof(obj)) {\r\n\t\t\t\tcase 'function':\r\n\t\t\t\t\tfn = obj;\r\n\t\t\t\t\tobj = {};\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'string':\r\n\t\t\t\t\tvar p = obj;\r\n\t\t\t\t\tvar is = true;\r\n\t\t\t\t\tobj = get(p);\r\n\t\t\t\t\tif (obj == null) {\r\n\t\t\t\t\t\tis = false;\r\n\t\t\t\t\t\tobj = {};\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfn.call(obj, obj, p, function(path, value) {\r\n\t\t\t\t\t\tsetx(obj, path, value);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif (is && (update === undefined || update === true))\r\n\t\t\t\t\t\tupdate(p, true);\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tif (C.ready) {\r\n\t\t\t\t\t\t\tset(p, obj);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tsetx(p, obj, true);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn obj;\r\n\t\t\t}\r\n\r\n\t\t\tfn.call(obj, obj, '');\r\n\t\t\treturn obj;\r\n\t\t}\r\n\r\n\t   /**\r\n\t   * Reads a state, it works with dirty state.\r\n\t   * @param  {String} path \r\n\t   * @return {Boolean} \r\n\t   */\r\n\t\tfunction changed(path) {\r\n\t\t\treturn !com_dirty(path);\r\n\t\t};\r\n\r\n\r\n\t   /**\r\n\t   * Set a change for the path or can read the state, it works with dirty state.\r\n\t   * @param  {String} path \r\n\t   * @param  {Boolean} value Optional\r\n\t   * @return {Boolean} \r\n\t   */\r\n\t\tfunction change(path, value) {\r\n\t\t\tif (value == null) {\r\n\t\t\t\tvalue = true;\r\n\t\t\t}\r\n\t\t\treturn !com_dirty(path, !value);\r\n\t\t};\r\n\r\n\r\n\t\t/*\r\n\t\t * This method is same like EXEC() method but it returns a function.\r\n\t\t * It must be used as a callback. All callback arguments will be used for the targeted method.\r\n\t\t */\r\n\t\tfunction exec2(path, tmp) { //W.EXEC2 = \r\n\t\t\tvar is = path === true;\r\n\t\t\treturn function(a, b, c, d) {\r\n\t\t\t\tif (is) {\r\n\t\t\t\t\texec(tmp, path, a, b, c, d);\r\n\t\t\t\t} else {\r\n\t\t\t\t\texec(path, a, b, c, d);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t};\r\n\r\n\t  /**\r\n\t   * Executes a method according to the path. It wont't throw any exception if the method not exist.\r\n\t   * @param  {Boolean} wait Optional enables a waiter for the method instance (if method doesn't exist) \r\n\t   * @param  {String} path \r\n\t   * @param  {Object} a - Optional, additional argument\r\n\t   * @param  {Object} b - Optional, additional argument\r\n\t   * @param  {Object} c - Optional, additional argument\r\n\t   */\r\n\t\tfunction exec(path) {   // W.EXEC = \r\n\r\n\t\t\tvar arg = [];\r\n\t\t\tvar f = 1;\r\n\t\t\tvar wait = false;\r\n\t\t\tvar p;\r\n\t\t\tvar ctx = this;\r\n\r\n\t\t\tif (path === true) {\r\n\t\t\t\twait = true;\r\n\t\t\t\tpath = arguments[1];\r\n\t\t\t\tf = 2;\r\n\t\t\t}\r\n\r\n\t\t\tpath = path.env();\r\n\r\n\t\t\tfor (var i = f; i < arguments.length; i++) {\r\n\t\t\t\targ.push(arguments[i]);\r\n\t\t\t}\r\n\r\n\t\t\tvar c = path.charCodeAt(0);\r\n\r\n\t\t\t// Event\r\n\t\t\tif (c === 35) { // # , ex: EXEC('#submit', true); --> EMIT('submit', true);\r\n\t\t\t\tp = path.substring(1);\r\n\t\t\t\tif (wait) {\r\n\t\t\t\t\t!events[p] && exechelper(ctx, path, arg);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tEMIT.call(ctx, p, arg[0], arg[1], arg[2], arg[3], arg[4]);\r\n\t\t\t\t}\r\n\t\t\t\treturn EXEC;\r\n\t\t\t}\r\n\r\n\t\t\tvar ok = 0;\r\n\r\n\t\t\t// PLUGINS\r\n\t\t\tif (c === 64) { // @ , ex: EXEC('@PLUGIN.method_name');\r\n\t\t\t\tvar index = path.indexOf('.');\r\n\t\t\t\tp = path.substring(1, index);\r\n\t\t\t\tvar ctrl = plugins.find(p); //W.PLUGINS[p];\r\n\t\t\t\tif (ctrl) {\r\n\t\t\t\t\tvar fn = ctrl[path.substring(index + 1)];\r\n\t\t\t\t\tif (langx.isFunction(fn) ) { // if (typeof(fn) === TYPE_FN) {\r\n\t\t\t\t\t\tfn.apply(ctx === Window ? ctrl : ctx, arg);\r\n\t\t\t\t\t\tok = 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (wait && !ok) {\r\n\t\t\t\t exechelper(ctx, path, arg);\r\n\t\t\t\t}\r\n\t\t\t\treturn EXEC;\r\n\t\t\t}\r\n\r\n\t\t\t// PLUGINS\r\n\t\t\tvar index = path.indexOf('/'); // ex : EXEC('PLUGIN/method_name');\r\n\t\t\tif (index !== -1) {\r\n\t\t\t\tp = path.substring(0, index);\r\n\t\t\t\tvar ctrl = plugins.find(p); //W.PLUGINS[p];\r\n\t\t\t\tvar fn = path.substring(index + 1);\r\n\t\t\t\tif (ctrl && typeof(ctrl[fn]) === TYPE_FN) {\r\n\t\t\t\t\tctrl[fn].apply(ctx === W ? ctrl : ctx, arg);\r\n\t\t\t\t\tok = 1;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (wait && !ok) {\r\n\t\t\t\t exechelper(ctx, path, arg);\r\n\t\t\t\t}\r\n\t\t\t\treturn EXEC;\r\n\t\t\t}\r\n\r\n\t\t\tvar fn = paths.get(path);\r\n\r\n\t\t\tif (langx.isFunction(fn)) {\r\n\t\t\t\tfn.apply(ctx, arg);\r\n\t\t\t\tok = 1;\r\n\t\t\t}\r\n\r\n\t\t\tif (wait && !ok) {\r\n\t\t\t\texechelper(ctx, path, arg);\r\n\t\t\t}\r\n\t\t\treturn exec;\r\n\t\t};\r\n\r\n\r\n\r\n\t   /**\r\n\t   * Checks dirty and valid paths for all declared components on the path. \r\n\t   * If the method return true then the components are validated and \r\n\t   * some component has been changed by user (otherwise: false).\r\n\t   * @param  {String} path \r\n\t   * @param  {String|Array} except  With absolute paths for skipping\r\n\t   * @returns {Boolean}   \r\n\t   */\r\n\t\tfunction can(path, except) { // W.CAN = \r\n\t\t\tpath = pathmaker(path);\r\n\t\t\treturn !com_dirty(path, except) && com_valid(path, except);\r\n\t\t}\r\n\r\n\t   /**\r\n\t   * Checks dirty and valid paths for all declared components on the path. \r\n\t   * If the method return false then the components are validated and \r\n\t   * some component has been changed by user (otherwise: true).\r\n\t   * @param  {String} path \r\n\t   * @param  {String|Array} except  With absolute paths for skipping\r\n\t   * @returns {Boolean}   \r\n\t   */\r\n\t\tfunction disabled(path, except) { // W.DISABLED = \r\n\t\t\tpath = pathmaker(path);\r\n\t\t\treturn com_dirty(path, except) || !com_valid(path, except);\r\n\t\t}\r\n\r\n\t   /**\r\n\t   * Highlights all components on the path as invalid. \r\n\t   * @param  {String} path \r\n\t   * @param  {String|Array} except  With absolute paths for skipping\r\n\t   * @returns {Boolean}   \r\n\t   */\r\n\t\tfunction invalid(path, onlyComponent) {  // W.INVALID = \r\n\t\t\tpath = pathmaker(path);\r\n\t\t\tif (path) {\r\n\t\t\t\tcom_dirty(path, false, onlyComponent, true);\r\n\t\t\t\tcom_valid(path, false, onlyComponent);\r\n\t\t\t}\r\n\t\t\treturn W;\r\n\t\t};\r\n\r\n\t   /**\r\n\t   * Resets dirty and valid state in all components on the path.\r\n\t   * @param  {String} path \r\n\t   * @param  {Number} delay  Optional, in milliseconds (default: 0)\r\n\t   */\r\n\t\tfunction reset(path, timeout, onlyComponent) { //W.RESET = M.reset\r\n\r\n\t\t\tif (timeout > 0) {\r\n\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\treset(path);\r\n\t\t\t\t}, timeout);\r\n\t\t\t\treturn this;\r\n\t\t\t}\r\n\r\n\t\t\tpath = pathmaker(path).replaceWildcard();\r\n\r\n\t\t\tvar arr = [];\r\n\t\t\tvar all = view.components;//M.components;\r\n\r\n\t\t\tfor (var i = 0, length = all.length; i < length; i++) {\r\n\t\t\t\tvar com = all[i];\r\n\t\t\t\tif (!com || com.$removed || com.disabled || !com.$loaded || !com.path || !com.$compare(path)) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcom.state && arr.push(com);\r\n\r\n\t\t\t\tif (onlyComponent && onlyComponent._id !== com._id) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfindcontrol2(com);\r\n\r\n\t\t\t\tif (!com.$dirty_disabled) {\r\n\t\t\t\t\tcom.$dirty = true;\r\n\t\t\t\t\tcom.$interaction(101);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!com.$valid_disabled) {\r\n\t\t\t\t\tcom.$valid = true;\r\n\t\t\t\t\tcom.$validate = false;\r\n\t\t\t\t\tif (com.validate) {\r\n\t\t\t\t\t\tcom.$valid = com.validate(com.get());\r\n\t\t\t\t\t\tcom.$interaction(102);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tclear('valid', 'dirty');\r\n\t\t\tstate(arr, 1, 3);\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\tfunction used(path) {   //M.used\r\n\t\t\teach(function(obj) {\r\n\t\t\t\t!obj.disabled && obj.used();\r\n\t\t\t}, path);\r\n\t\t\treturn this;\r\n\t\t};\r\n\r\n\t   /**\r\n\t   * Performs SET() and CHANGE() together.\r\n\t   * @param  {String} path \r\n\t   * @param  {Object|Array} value.\r\n\t   * @param  {String/Number} timeout  Optional, \"value > 10\" will be used as delay\r\n\t   * @param {Boolean} reset Optional\r\n\t   */\r\n\t\tfunction modify (path, value, timeout) { // W.MODIFY =\r\n\t\t\tif (path && typeof(path) === 'object') {\r\n\t\t\t\tObject.keys(path).forEach(function(k) {\r\n\t\t\t\t\tmodify(k, path[k], value);\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tif (langx.isFunction(value)) {\r\n\t\t\t\t\tvalue = value(get(path));\r\n\t\t\t\t}\r\n\t\t\t\tsetx(path, value, timeout); \r\n\t\t\t\tif (timeout) {\r\n\t\t\t\t\tlangx.setTimeout(change, timeout + 5, path);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tchange(path);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn this;\r\n\t\t};\r\n\r\n\t   /**\r\n\t   * Returns all modified components by user on the path.\r\n\t   * @param  {String} path \r\n\t   * @returns {Array<String>}   \r\n\t   */\r\n\t\tfunction modified(path) { //W.MODIFIED = \r\n\t\t\tvar output = [];\r\n\t\t\teach(function(obj) {\r\n\t\t\t\tif (!(obj.disabled || obj.$dirty_disabled)) {\r\n\t\t\t\t\tobj.$dirty === false && output.push(obj.path);\r\n\t\t\t\t}\r\n\t\t\t}, pathmaker(path));\r\n\t\t\treturn output;\r\n\t\t}\r\n\r\n\r\n\t   /**\r\n\t   * Checks whether the value has not been modified on the path.\r\n\t   * @param  {String} path \r\n\t   * @param {Object} value  Optional\r\n\t   * @param {Array<String>} fields  Optional, field names\r\n\t   * @returns {Booean}   \r\n\t   */\r\n\t\tfunction notmodified(path, value, fields) { // W.NOTMODIFIED = \r\n\r\n\t\t\tif (value === undefined) {\r\n\t\t\t\tvalue = get(path);\r\n\t\t\t}\r\n\r\n\t\t\tif (value === undefined) {\r\n\t\t\t\tvalue = null;\r\n\t\t\t}\r\n\r\n\t\t\tif (fields) {\r\n\t\t\t\tpath = path.concat('#', fields);\r\n\t\t\t}\r\n\r\n\t\t\tvar s = langx.stringify(value, false, fields); // STRINGIFY\r\n\t\t\tvar hash = langx.hashCode(s); // HASH\r\n\t\t\tvar key =  path; // 'notmodified.' + path\r\n\r\n\t\t\tif (nmCache[key] === hash) { // cache\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t\tnmCache[key] = hash; //cache \r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tfunction errors(path, except, highlight) { //W.ERRORS = \r\n\r\n\t\t\tif (path instanceof Array) {\r\n\t\t\t\texcept = path;\r\n\t\t\t\tpath = undefined;\r\n\t\t\t}\r\n\r\n\t\t\tif (except === true) {\r\n\t\t\t\texcept = highlight instanceof Array ? highlight : null;\r\n\t\t\t\thighlight = true;\r\n\t\t\t}\r\n\r\n\t\t\tvar arr = [];\r\n\r\n\t\t\teach(function(obj) { // M.each\r\n\t\t\t\tif (!obj.disabled && (!except || !obj.$except(except)) && obj.$valid === false && !obj.$valid_disabled)\r\n\t\t\t\t\tarr.push(obj);\r\n\t\t\t}, pathmaker(path));\r\n\r\n\t\t\thighlight && langx.state(arr, 1, 1);\r\n\t\t\treturn arr;\r\n\t\t}\r\n\r\n\r\n\t\tfunction rewrite(path, value, type) { // W.REWRITE = \r\n\t\t\tpath = pathmaker(path);\r\n\t\t\tif (path) {\r\n\t\t\t\tM.skipproxy = path;\r\n\t\t\t\tset(path, value);\r\n\t\t\t\temitwatch(path, value, type);\r\n\t\t\t}\r\n\t\t\treturn this; // W\r\n\t\t}\r\n\r\n\t\t// ===============================================================\r\n\t\t// MAIN FUNCTIONS\r\n\t\t// ===============================================================\r\n\r\n\t   /**\r\n\t   * Evaluates a global parser.\r\n\t   * @param  {String} path \r\n\t   * @param  {Object} value\r\n\t   * @param  {String} type \r\n\t   * @returns {Boolean}   \r\n\t   * OR\r\n\t   * Registers a global parser.\r\n\t   * @param  {Function} value \r\n\t   */\r\n\t\tfunction parser(value, path, type) { //W.PARSER = M.parser =  \r\n\r\n\t\t\tif (langx.isFunction(value)) {\r\n\r\n\t\t\t\t// Prepend\r\n\t\t\t\tif (path === true) {\r\n\t\t\t\t\t$parser.unshift(value);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t$parser.push(value);\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn this;\r\n\t\t\t}\r\n\r\n\t\t\tvar a = $parser;\r\n\t\t\tif (a && a.length) {\r\n\t\t\t\tfor (var i = 0, length = a.length; i < length; i++) {\r\n\t\t\t\t\tvalue = a[i].call(this, path, value, type);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn value;\r\n\t\t}\r\n\r\n\t   /**\r\n\t   * skips component.setter for future update. It's incremental.\r\n\t   * @param  {String} pathA Absolute path according to the component \"data-jc-path\"  \r\n\t   * @param  {String} pathB Absolute path according to the component \"data-jc-path\"  \r\n\t   * @param  {String} pathN Absolute path according to the component \"data-jc-path\"  \r\n\t   */\r\n\t\tfunction skip() { // W.SKIP = \r\n\t\t\tfor (var j = 0; j < arguments.length; j++) {\r\n\t\t\t\tvar arr = arguments[j].split(',');\r\n\t\t\t\tfor (var i = 0, length = arr.length; i < length; i++) {\r\n\t\t\t\t\tvar p = arr[i].trim();\r\n\t\t\t\t\tif (skips[p]) {\r\n\t\t\t\t\t\tskips[p]++;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tskips[p] = 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\treturn {\r\n\t\t\t\"on\" : on,\r\n\t\t\t\"off\" : off,\r\n\t\t\t\"emit\" : emit,\r\n\t\t\t\"watch\" : watch,\r\n\t\t\t\"unwatch\" : unwatch,\r\n\t\t\t\"emitwatch\" : emitwatch,\t\t\t\r\n\t\t\t\"cache\" : cache,\r\n\t\t\t\"can\" : can,\r\n\t\t\t\"change\" : change,\r\n\t\t\t\"changed\" : changed,\r\n\t\t\t\"create\" : create,\r\n\t\t\t\"default\" : defaultValue,\r\n\t\t\t\"disabled\" : disabled,\r\n\t\t\t\"errors\" : errors,\r\n\t\t\t\"evaluate\" : evaluate,\r\n\t\t\t\"exec\" : exec,\r\n\t\t\t\"exec2\" : exec2,\r\n\t\t\t\"extend\" : extend,\r\n\t\t\t\"format\" : format,\r\n\t\t\t\"get\"  : get,\r\n\t\t\t\"inc\"  : inc,\r\n\t\t\t\"invalid\" : invalid,\r\n\t\t\t\"make\" : make,\r\n\t\t\t\"modify\" : modify,\r\n\t\t\t\"modified\" : modified,\r\n\t\t\t\"parser\" : parser,\r\n\t\t\t\"push\" : push,\r\n\t\t\t\"reset\" : reset,\r\n\t\t\t\"rewrite\" : rewrite,\r\n\t\t\t\"set\"  : set,\r\n\t\t\t\"set2\" : set2,\r\n \t\t\t\"setx\" : setx,\r\n \t\t\t\"skip\" : skip,\r\n \t\t\t\"update\" : update,\r\n \t\t\t\"used\" : used,\r\n \t\t\t\"validate\" : validate\r\n\t\t};\r\n\t}\r\n\r\n\treturn storing;\r\n});"]}