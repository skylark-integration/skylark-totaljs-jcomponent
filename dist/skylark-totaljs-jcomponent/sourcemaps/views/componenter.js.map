{"version":3,"sources":["views/componenter.js"],"names":["define","langx","domx","logs","extensions","registry","warn","view","helper","eventer","compiler","storing","components","lazycom","cache","dirty","valid","find","clear","key1","key2","key3","i","arguments","length","this","get","category","key","set","value","defaults","knockknockcounter","many","noCache","callback","isWaiting","isFunction","undefined","tmp","jQuery","$","output","findComponent","r","wait","val","state","emit","compile","Array","err","call","window","setter","selector","name","arg","beg","push","setTimeout","apply","SETTER","arr","o","TYPE_FN","setInterval","now","c","knockknock","autofill","checkLazy","lo","namea","substring","indexOf","clean","all","index","component","element","$removed","inDOM","$parser","$formatter","statics","destroy","ID","remove","nodeName","off","$main","$data","dom","path","setter2","getter","getter2","make","splice","is","com_valid","onlyComponent","isExcept","join","except","flags","item","lastIndexOf","wildcard","pathmaker","com","$loaded","$compare","$except","visible","hidden","enabled","SELINPUT","disabled","$valid_disabled","_id","$valid","$interaction","com_validate2","$validate","validate","com_dirty","skipEmitState","$dirty_disabled","$dirty","each","fn","replace","notify","$ticks","Math","random","toString","j","p","binders","binderbind","setterX","stateX","emitwatch","getx","prepare","obj","el","forEach","config","reconfigure","empties","configure","$prepared","$ready","attrcom","Function","$default","$binded","done","$init","n","trigger","cls","split","$jclass","tclass","id","$lazy","$name","usage","expire","isString","add","env","getTime","isNumber","Date","a","M","replaceWildcard"],"mappings":"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","file":"../../views/componenter.js","sourcesContent":["define([\r\n\t\"../langx\",\r\n\t\"../utils/domx\",\r\n\t\"../utils/logs\",\r\n\t\"../components/extensions\",\r\n\t\"../components/registry\"\r\n],function(langx, domx, logs,extensions, registry){\r\n\tvar warn = logs.warn;\r\n\r\n\tfunction componenter(view) {\r\n\t\tvar helper = view.helper,\r\n\t\t\teventer = view.eventer,\r\n\t\t\tstoring = view.storing,\r\n\t\t\tcompiler = view.compiler,\r\n\t\t\tcomponents = [],\r\n\t\t\tlazycom = {},\r\n\t\t\tautofill = [],\r\n\t\t\tcache = {\r\n\t\t\t\tdirty : {},\r\n\t\t\t\tvalid : {},\r\n\t\t\t\tfind : {},\r\n\t\t\t\tclear : function(key1,key2,key3) {\r\n\t\t\t\t\tfor (var i = 1; i<arguments.length;i++) {\r\n\t\t\t\t\t\tvar key = arguments[i];\r\n\t\t\t\t\t\tthis[key] = {};\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\r\n\t\t\t\tget : function(category,key) {\r\n\t\t\t\t\tthis[category][key];\r\n\t\t\t\t},\r\n\r\n\t\t\t\tset : function(category,key,value) {\r\n\t\t\t\t\tthis[category][key] = value;\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\r\n\t\t\tdefaults = {};\r\n\r\n\t\tvar knockknockcounter = 0;\r\n\r\n\r\n\r\n\t\tsetInterval(function() {\r\n\t\t\t//W.DATETIME = W.NOW = new Date();\r\n\t\t\tlangx.now(true);\r\n\t\t\tvar c = components;\r\n\t\t\tfor (var i = 0, length = c.length; i < length; i++)\r\n\t\t\t\tc[i].knockknock && c[i].knockknock(knockknockcounter);\r\n\t\t\teventer.emit('knockknock', knockknockcounter++);  // EMIT\r\n\t\t}, 60000);\r\n\r\n\t\tfunction checkLazy(name) {\r\n\t\t\tvar lo = lazycom[name];\r\n\r\n\t\t\tif (!lo) {\r\n\t\t\t\tvar namea = name.substring(0, name.indexOf('@'));\r\n\t\t\t\tif (namea && name !== namea) {\r\n\t\t\t\t\tlo = lazycom[name] = lazycom[namea] = { state: 1 };\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlo = lazycom[name] = { state: 1 };\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn lo;\t\t\t\r\n\t\t}\r\n\r\n\t\tfunction each(fn, path) {   // M.each\r\n\t\t\tvar wildcard = path ? path.lastIndexOf('*') !== -1 : false;\r\n\t\t\tif (wildcard) {\r\n\t\t\t\tpath = path.replace('.*', '');\r\n\t\t\t}\r\n\t\t\tvar all = components;//M.components;\r\n\t\t\tvar index = 0;\r\n\t\t\tfor (var i = 0, length = all.length; i < length; i++) {\r\n\t\t\t\tvar com = all[i];\r\n\t\t\t\tif (!com || !com.$loaded || com.$removed || (path && (!com.path || !com.$compare(path)))) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tvar stop = fn(com, index++, wildcard);\r\n\t\t\t\tif (stop === true) {\r\n\t\t\t\t\treturn this;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\tfunction com_validate2(com) {\r\n\r\n\t\t\tvar valid = true;\r\n\r\n\t\t\tif (com.disabled) {\r\n\t\t\t\treturn valid;\r\n\t\t\t}\r\n\r\n\t\t\tif (com.$valid_disabled) {\r\n\t\t\t\treturn valid;\r\n\t\t\t}\r\n\r\n\t\t\tvar arr = [];\r\n\t\t\tcom.state && arr.push(com);\r\n\t\t\tcom.$validate = true;\r\n\r\n\t\t\tif (com.validate) {\r\n\t\t\t\tcom.$valid = com.validate(get(com.path));\r\n\t\t\t\tcom.$interaction(102);\r\n\t\t\t\tif (!com.$valid)\r\n\t\t\t\t\tvalid = false;\r\n\t\t\t}\r\n\r\n\t\t\tcache.clear('valid');\r\n\t\t\tlangx.state(arr, 1, 1);\r\n\t\t\treturn valid;\r\n\t\t}\r\n\r\n\t\tfunction com_dirty(path, value, onlyComponent, skipEmitState) {\r\n\t\t\tvar isExcept = value instanceof Array;\r\n\t\t\tvar key = path + (isExcept ? '>' + value.join('|') : '');  // 'dirty' + \r\n\t\t\tvar except = null;\r\n\r\n\t\t\tif (isExcept) {\r\n\t\t\t\texcept = value;\r\n\t\t\t\tvalue = undefined;\r\n\t\t\t}\r\n\r\n\t\t\tvar dirty = cache.get(\"dirty\",key);\r\n\t\t\tif (typeof(value) !== 'boolean' && dirty !== undefined) {\r\n\t\t\t\treturn dirty;\r\n\t\t\t}\r\n\r\n\t\t\tdirty = true;\r\n\t\t\tvar arr = value !== undefined ? [] : null;\r\n\t\t\tvar flags = null;\r\n\r\n\t\t\tif (isExcept) {\r\n\t\t\t\tvar is = false;\r\n\t\t\t\tflags = {};\r\n\t\t\t\texcept = except.remove(function(item) {\r\n\t\t\t\t\tif (item.substring(0, 1) === '@') {\r\n\t\t\t\t\t\tflags[item.substring(1)] = true;\r\n\t\t\t\t\t\tis = true;\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t});\r\n\t\t\t\t!is && (flags = null);\r\n\t\t\t\tisExcept = except.length > 0;\r\n\t\t\t}\r\n\r\n\t\t\tvar index = path.lastIndexOf('.*');\r\n\t\t\tvar wildcard = index !== -1;\r\n\t\t\tif (index !== -1) {\r\n\t\t\t\tpath = path.substring(0, index);\r\n\t\t\t}\r\n\r\n\t\t\tpath = pathmaker(path);\r\n\r\n\t\t\tvar all = components;//M.components;\r\n\t\t\tfor (var i = 0, length = all.length; i < length; i++) {\r\n\t\t\t\tvar com = all[i];\r\n\r\n\t\t\t\tif (!com || com.$removed || !com.$loaded || !com.path || !com.$compare(path) || (isExcept && com.$except(except)))\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\tif (flags && ((flags.visible && !com.visible()) || (flags.hidden && !com.hidden()) || (flags.enabled && com.find(SELINPUT).is(':disabled')) || (flags.disabled && com.find(SELINPUT).is(':enabled'))))\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\tif (com.disabled || com.$dirty_disabled) {\r\n\t\t\t\t\tarr && com.state && arr.push(com);\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (value === undefined) {\r\n\t\t\t\t\tif (com.$dirty === false)\r\n\t\t\t\t\t\tdirty = false;\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcom.state && arr.push(com);\r\n\r\n\t\t\t\tif (!onlyComponent) {\r\n\t\t\t\t\tif (wildcard || com.path === path) {\r\n\t\t\t\t\t\tcom.$dirty = value;\r\n\t\t\t\t\t\tcom.$interaction(101);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (onlyComponent._id === com._id) {\r\n\t\t\t\t\tcom.$dirty = value;\r\n\t\t\t\t\tcom.$interaction(101);\r\n\t\t\t\t}\r\n\t\t\t\tif (com.$dirty === false)\r\n\t\t\t\t\tdirty = false;\r\n\t\t\t}\r\n\r\n\t\t\tcache.clear('dirty');\r\n\t\t\tcache.set('dirty',key,dirty);\r\n\r\n\t\t\t// For double hitting component.state() --> look into COM.invalid()\r\n\t\t\t!skipEmitState && state(arr, 1, 2);\r\n\t\t\treturn dirty;\r\n\t\t}\r\n\r\n\t\tfunction com_valid(path, value, onlyComponent) {\r\n\r\n\t\t\tvar isExcept = value instanceof Array;\r\n\t\t\tvar key =  path + (isExcept ? '>' + value.join('|') : ''); // 'valid' +\r\n\t\t\tvar except = null;\r\n\r\n\t\t\tif (isExcept) {\r\n\t\t\t\texcept = value;\r\n\t\t\t\tvalue = undefined;\r\n\t\t\t}\r\n\r\n\t\t\tvar valid = cache.get(\"valid\",key);\r\n\r\n\t\t\tif (typeof(value) !== 'boolean' && valid !== undefined) {\r\n\t\t\t\treturn valid; //cache[key];\r\n\t\t\t}\r\n\r\n\t\t\tvar flags = null;\r\n\r\n\t\t\tif (isExcept) {\r\n\t\t\t\tvar is = false;\r\n\t\t\t\tflags = {};\r\n\t\t\t\texcept = except.remove(function(item) {\r\n\t\t\t\t\tif (item.substring(0, 1) === '@') {\r\n\t\t\t\t\t\tflags[item.substring(1)] = true;\r\n\t\t\t\t\t\tis = true;\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t});\r\n\t\t\t\t!is && (flags = null);\r\n\t\t\t\tisExcept = except.length > 0;\r\n\t\t\t}\r\n\r\n\t\t\tvalid = true;\r\n\t\t\tvar arr = value !== undefined ? [] : null;\r\n\r\n\t\t\tvar index = path.lastIndexOf('.*');\r\n\t\t\tvar wildcard = index !== -1;\r\n\t\t\tif (index !== -1) {\r\n\t\t\t\tpath = path.substring(0, index);\r\n\t\t\t}\r\n\r\n\t\t\tpath = pathmaker(path);\r\n\r\n\t\t\tvar all = components;//M.components;\r\n\t\t\tfor (var i = 0, length = all.length; i < length; i++) {\r\n\t\t\t\tvar com = all[i];\r\n\r\n\t\t\t\tif (!com || com.$removed || !com.$loaded || !com.path || !com.$compare(path) || (isExcept && com.$except(except)))\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\tif (flags && ((flags.visible && !com.visible()) || (flags.hidden && !com.hidden()) || (flags.enabled && com.find(SELINPUT).is(':disabled')) || (flags.disabled && com.find(SELINPUT).is(':enabled'))))\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\tif (com.disabled || com.$valid_disabled) {\r\n\t\t\t\t\tarr && com.state && arr.push(com);\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (value === undefined) {\r\n\t\t\t\t\tif (com.$valid === false)\r\n\t\t\t\t\t\tvalid = false;\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcom.state && arr.push(com);\r\n\r\n\t\t\t\tif (!onlyComponent) {\r\n\t\t\t\t\tif (wildcard || com.path === path) {\r\n\t\t\t\t\t\tcom.$valid = value;\r\n\t\t\t\t\t\tcom.$interaction(102);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (onlyComponent._id === com._id) {\r\n\t\t\t\t\tcom.$valid = value;\r\n\t\t\t\t\tcom.$interaction(102);\r\n\t\t\t\t}\r\n\t\t\t\tif (com.$valid === false) {\r\n\t\t\t\t\tvalid = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tcache.clear('valid');\r\n\t\t\tcache.set('valid',key, valid) ;\r\n\t\t\tlangx.state(arr, 1, 1);\r\n\t\t\treturn valid;\r\n\t\t}\r\n\r\n\t  /**\r\n\t   * Notifies a setter in all components on the path.\r\n\t   * @param  {String} path \r\n\t   */\r\n\t\tfunction notify() { // W.NOTIFY\r\n\r\n\t\t\tvar arg = arguments;\r\n\t\t\tvar all = components;//M.components;\r\n\r\n\t\t\tvar $ticks = Math.random().toString().substring(2, 8);\r\n\t\t\tfor (var j = 0; j < arg.length; j++) {\r\n\t\t\t\tvar p = arg[j];\r\n\t\t\t\tbinders[p] && binderbind(p, p, $ticks);\r\n\t\t\t}\r\n\r\n\t\t\tfor (var i = 0, length = all.length; i < length; i++) {\r\n\t\t\t\tvar com = all[i];\r\n\t\t\t\tif (!com || com.$removed || com.disabled || !com.$loaded || !com.path)\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\tvar is = 0;\r\n\t\t\t\tfor (var j = 0; j < arg.length; j++) {\r\n\t\t\t\t\tif (com.path === arg[j]) {\r\n\t\t\t\t\t\tis = 1;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (is) {\r\n\t\t\t\t\tvar val = com.get();\r\n\t\t\t\t\tcom.setter && com.setterX(val, com.path, 1);\r\n\t\t\t\t\tcom.state && com.stateX(1, 6);\r\n\t\t\t\t\tcom.$interaction(1);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfor (var j = 0; j < arg.length; j++) {\r\n\t\t\t\teventer.emitwatch(arg[j], getx(arg[j]), 1);  // GET\r\n\t\t\t}\r\n\r\n\t\t\treturn this;  // W\r\n\t\t}\r\n\r\n\t\tfunction validate(path, except) { //W.VALIDATE =\r\n\r\n\t\t\tvar arr = [];\r\n\t\t\tvar valid = true;\r\n\r\n\t\t\tpath = pathmaker(path.replaceWildcard()); //pathmaker(path.replace(REGWILDCARD, ''));\r\n\r\n\t\t\tvar flags = null;\r\n\t\t\tif (except) {\r\n\t\t\t\tvar is = false;\r\n\t\t\t\tflags = {};\r\n\t\t\t\texcept = except.remove(function(item) {\r\n\t\t\t\t\tif (item.substring(0, 1) === '@') {\r\n\t\t\t\t\t\tflags[item.substring(1)] = true;\r\n\t\t\t\t\t\tis = true;\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t});\r\n\t\t\t\t!is && (flags = null);\r\n\t\t\t\t!except.length && (except = null);\r\n\t\t\t}\r\n\r\n\t\t\tvar all = components;//M.components;\r\n\t\t\tfor (var i = 0, length = all.length; i < length; i++) {\r\n\t\t\t\tvar com = all[i];\r\n\t\t\t\tif (!com || com.$removed || com.disabled || !com.$loaded || !com.path || !com.$compare(path))\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\tif (flags && ((flags.visible && !com.visible()) || (flags.hidden && !com.hidden()) || (flags.enabled && com.find(SELINPUT).is(':disabled')) || (flags.disabled && com.find(SELINPUT).is(':enabled'))))\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\tcom.state && arr.push(com);\r\n\r\n\t\t\t\tif (com.$valid_disabled)\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\tcom.$validate = true;\r\n\t\t\t\tif (com.validate) {\r\n\t\t\t\t\tcom.$valid = com.validate(get(com.path));\r\n\t\t\t\t\tcom.$interaction(102);\r\n\t\t\t\t\tif (!com.$valid)\r\n\t\t\t\t\t\tvalid = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tcache.clear('valid');\r\n\t\t\tstate(arr, 1, 1);\r\n\t\t\treturn valid;\r\n\t\t}\r\n\r\n\t\tfunction prepare(obj) {\r\n\r\n\t\t\tif (!obj) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar el = obj.element;\r\n\r\n\t\t\tif(extensions[obj.name]) {\r\n\t\t\t\textensions[obj.name].forEach(function(item) {\r\n\t\t\t\t\tif (item.config) {\r\n\t\t\t\t\t\tobj.reconfigure(item.config, langx.empties.fn);\r\n\t\t\t\t\t}\r\n\t\t\t\t\titem.fn.call(obj, obj, obj.config);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tvar value = obj.get();\r\n\t\t\tvar tmp;\r\n\r\n\t\t\tif (obj.configure) {\r\n\t\t\t\tobj.reconfigure(obj.config, undefined, true);\r\n\t\t\t}\r\n\r\n\t\t\tobj.$loaded = true;\r\n\r\n\t\t\tif (obj.setter) {\r\n\t\t\t\tif (!obj.$prepared) {\r\n\r\n\t\t\t\t\tobj.$prepared = true;\r\n\t\t\t\t\tobj.$ready = true;\r\n\r\n\t\t\t\t\ttmp = helper.attrcom(obj, 'value');\r\n\r\n\t\t\t\t\tif (tmp) {\r\n\t\t\t\t\t\tif (!defaults[tmp]) {\r\n\t\t\t\t\t\t\tdefaults[tmp] = new Function('return ' + tmp);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tobj.$default = defaults[tmp];\r\n\t\t\t\t\t\tif (value === undefined) {\r\n\t\t\t\t\t\t\tvalue = obj.$default();\r\n\t\t\t\t\t\t\tview.storing.set(obj.path, value);\r\n\t\t\t\t\t\t\teventer.emitwatch(obj.path, value, 0);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (obj.$binded)\r\n\t\t\t\t\t\tobj.$interaction(0);\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tobj.$binded = true;\r\n\t\t\t\t\t\tobj.setterX(value, obj.path, 0);\r\n\t\t\t\t\t\tobj.$interaction(0);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tobj.$binded = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (obj.validate && !obj.$valid_disabled) {\r\n\t\t\t\tobj.$valid = obj.validate(obj.get(), true);\r\n\t\t\t}\r\n\r\n\t\t\tif (obj.done) {\r\n\t\t\t\tsetTimeout(obj.done, 20);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (obj.state) {\r\n\t\t\t\tobj.stateX(0, 3);\r\n\t\t\t}\r\n\r\n\t\t\tif (obj.$init) {\r\n\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\tvar fn = get(obj.$init);\r\n\t\t\t\t\tif (langx.isFunction(fn)) {\r\n\t\t\t\t\t\tfn.call(obj, obj);\t\r\n\t\t\t\t\t} \r\n\t\t\t\t\tobj.$init = undefined;\r\n\t\t\t\t}, 5);\r\n\t\t\t}\r\n\r\n\t\t\tvar n = 'component';\r\n\t\t\tel.trigger(n);\r\n\t\t\tel.off(n);\r\n\r\n\t\t\tvar cls = helper.attrcom(el, 'class');\r\n\t\t\tcls && (function(cls) {\r\n\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\tcls = cls.split(' ');\r\n\t\t\t\t\tvar tmp = el[0].$jclass || {};\r\n\t\t\t\t\tfor (var i = 0, length = cls.length; i < length; i++) {\r\n\t\t\t\t\t\tif (!tmp[cls[i]]) {\r\n\t\t\t\t\t\t\tel.tclass(cls[i]);\r\n\t\t\t\t\t\t\ttmp[cls[i]] = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tel[0].$jclass = tmp;\r\n\t\t\t\t}, 5);\r\n\t\t\t})(cls);\r\n\r\n\t\t\tif (obj.id) {\r\n\t\t\t\teventer.emit('#' + obj.id, obj);  // EMIT\r\n\t\t\t}\r\n\t\t\teventer.emit('@' + obj.name, obj); // EMIT\r\n\t\t\teventer.emit(n, obj);  // EMIT\r\n\t\t\tcache.clear('find');\r\n\t\t\tif (obj.$lazy) {\r\n\t\t\t\tobj.$lazy.state = 3;\r\n\t\t\t\tdelete obj.$lazy;\r\n\t\t\t\teventer.emit('lazy', obj.$name, false); // EMIT\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\t/*\r\n\t\t * Finds all component according to the selector.\r\n\t\t *   find(selector,callback) -> wait\r\n\t\t *   find(selector,many,callback,timeout) -> wait\r\n\t\t *   find(selector,manay,nocache,callback) -> no wait\r\n\t\t *   find(selector,manay,timeout) --> no wait\r\n\t\t * @value {String} selector\r\n         * @many {Boolean} Optional, output will be Array\r\n         * @nocache {Boolean} Optional\r\n         * @callback {Function(response)} Optional and the method will be wait for non-exist components\r\n         * @timeout {Number} Optional, in milliseconds (default: 0)\r\n         * returns {Component} or {Array Component}\r\n\t\t */\r\n\t\tfunction find(value, many, noCache, callback) { //W.FIND\r\n\r\n\t\t\tvar isWaiting = false;\r\n\r\n\t\t\tif (langx.isFunction(many)) {\r\n\t\t\t\tisWaiting = true;\r\n\t\t\t\tcallback = many;\r\n\t\t\t\tmany = undefined;\r\n\t\t\t\t// noCache = undefined;\r\n\t\t\t\t// noCache can be timeout\r\n\t\t\t} else if (langx.isFunction(noCache)) {\r\n\t\t\t\tvar tmp = callback;\r\n\t\t\t\tisWaiting = true;\r\n\t\t\t\tcallback = noCache;\r\n\t\t\t\tnoCache = tmp;\r\n\t\t\t\t// noCache can be timeout\r\n\t\t\t}\r\n\r\n\t\t\tif (isWaiting) {\r\n\t\t\t\tlangx.wait(function() {  // WAIT\r\n\t\t\t\t\tvar val = find(value, many, noCache);\r\n\t\t\t\t\tif (lazycom[value] && lazycom[value].state === 1) {\r\n\t\t\t\t\t\tlazycom[value].state = 2;\r\n\t\t\t\t\t\teventer.emit('lazy', value, true); // EMIT\r\n\t\t\t\t\t\twarn('Lazy load: ' + value);\r\n\t\t\t\t\t\tcompiler.compile();\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn val instanceof Array ? val.length > 0 : !!val;\r\n\t\t\t\t}, function(err) {\r\n\t\t\t\t\t// timeout\r\n\t\t\t\t\tif (!err) {\r\n\t\t\t\t\t\tvar val = find(value, many);\r\n\t\t\t\t\t\tcallback.call(val ? val : window, val);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, 500, noCache);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// Element\r\n\t\t\tif (typeof(value) === 'object') {\r\n\t\t\t\tif (!(value instanceof jQuery)) {\r\n\t\t\t\t\tvalue = $(value);\r\n\t\t\t\t}\r\n\t\t\t\tvar output = helper.findComponent(value, '');\r\n\t\t\t\treturn many ? output : output[0];\r\n\t\t\t}\r\n\r\n\t\t\tvar key, output;\r\n\r\n\t\t\tif (!noCache) {\r\n\t\t\t\tkey = value + '.' + (many ? 0 : 1);  // 'find.' + \r\n\t\t\t\toutput = cache.get(\"find\",key);//output = cache[key];\r\n\t\t\t\tif (output) {\r\n\t\t\t\t\treturn output;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar r = helper.findComponent(null, value);\r\n\t\t\tif (!many) {\r\n\t\t\t\tr = r[0];\r\n\t\t\t}\r\n\t\t\toutput = r;\r\n\t\t\tif (!noCache) {\r\n\t\t\t\tcache.set(\"find\",key,output);//cache[key] = output;\r\n\t\t\t}\r\n\t\t\treturn output;\r\n\t\t}\r\n\r\n\t   /**\r\n\t   * Reconfigures all components according to the selector.\r\n\t   * @param  {String} selector \r\n\t   * @param  {String/Object} config A default configuration\r\n\t   */\r\n\t\tfunction reconfigure(selector, value) { // W.RECONFIGURE = \r\n\t\t\tsetter(true, selector, 'reconfigure', value);\r\n\t\t\treturn this; // RECONFIGURE\r\n\t\t};\r\n\r\n\t   /**\r\n\t   * Set a new value to the specific method in components.\r\n\t   * @param  {Boolean} wait Optional, can it wait for non-exist components? \r\n\t   * @param  {String} selector  \r\n\t   * @param  {String} name Property or Method name (can't be nested) \r\n\t   * @param  {Object} argA Optional, additional argument\r\n\t   * @param  {Object} argB Optional, additional argument\r\n\t   * @param  {Object} argN Optional, additional argument\r\n\t   */\r\n\t\tfunction setter(selector, name) { // W.SETTER\r\n\r\n\t\t\tvar arg = [];\r\n\t\t\tvar beg = selector === true ? 3 : 2;\r\n\r\n\t\t\tfor (var i = beg; i < arguments.length; i++) {\r\n\t\t\t\targ.push(arguments[i]);\r\n\t\t\t}\r\n\r\n\t\t\tif (beg === 3) {\r\n\r\n\t\t\t\tselector = name;\r\n\r\n\t\t\t\tif (lazycom[selector] && lazycom[selector].state !== 3) {\r\n\r\n\t\t\t\t\tif (lazycom[selector].state === 1) {\r\n\t\t\t\t\t\tlazycom[selector].state = 2;\r\n\t\t\t\t\t\teventer.emit('lazy', selector, true); // EMIT\r\n\t\t\t\t\t\twarn('Lazy load: ' + selector);\r\n\t\t\t\t\t\tcompiler.compile();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tsetTimeout(function(arg) {\r\n\t\t\t\t\t\targ[0] = true;\r\n\t\t\t\t\t\tsetter.apply(window, arg);\r\n\t\t\t\t\t}, 555, arguments);\r\n\r\n\t\t\t\t\treturn SETTER;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tname = arguments[2];\r\n\r\n\t\t\t\tfind(selector, true, function(arr) {\r\n\t\t\t\t\tfor (var i = 0, length = arr.length; i < length; i++) {\r\n\t\t\t\t\t\tvar o = arr[i];\r\n\t\t\t\t\t\tif (typeof(o[name]) === TYPE_FN)\r\n\t\t\t\t\t\t\to[name].apply(o, arg);\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\to[name] = arg[0];\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\r\n\t\t\t\tif (lazycom[selector] && lazycom[selector].state !== 3) {\r\n\r\n\t\t\t\t\tif (lazycom[selector].state === 1) {\r\n\t\t\t\t\t\tlazycom[selector].state = 2;\r\n\t\t\t\t\t\teventer.emit('lazy', selector, true);  // EMIT\r\n\t\t\t\t\t\twarn('Lazy load: ' + selector);\r\n\t\t\t\t\t\tcompiler.compile();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tsetTimeout(function(arg) {\r\n\t\t\t\t\t\tsetter.apply(window, arg);\r\n\t\t\t\t\t}, 555, arguments);\r\n\r\n\t\t\t\t\treturn SETTER;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar arr = helper.find(selector, true);\r\n\t\t\t\tfor (var i = 0, length = arr.length; i < length; i++) {\r\n\t\t\t\t\tvar o = arr[i];\r\n\t\t\t\t\tif (typeof(o[name]) === TYPE_FN)\r\n\t\t\t\t\t\to[name].apply(o, arg);\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\to[name] = arg[0];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn this; // SETTER\r\n\t\t};\r\n\r\n\r\n\t\t// @type {String} Can be \"init\", \"manually\", \"input\" or \"custom\"\r\n\t\t// @expire {String/Number}, for example \"5 minutes\"\r\n\t\t// @path {String} Optional, for example \"users.form.name\"\r\n\t\t// returns {Array Component} or {jComponent}\r\n\t\tfunction usage(name, expire, path, callback) { //W.LASTMODIFICATION = W.USAGE = M.usage = \r\n\r\n\t\t\tvar type = typeof(expire);\r\n\t\t\tif (langx.isString(expire)) {\r\n\t\t\t\t//var dt = W.NOW = W.DATETIME = new Date();\r\n\t\t\t\tvar dt = langx.now(true);\r\n\t\t\t\texpire = dt.add('-' + expire.env()).getTime();\r\n\t\t\t} else if (langx.isNumber(expire))\r\n\t\t\t\texpire = Date.now() - expire;\r\n\r\n\t\t\tif (langx.isFunction(path)) {\r\n\t\t\t\tcallback = path;\r\n\t\t\t\tpath = undefined;\r\n\t\t\t}\r\n\r\n\t\t\tvar arr = [];\r\n\t\t\tvar a = null;\r\n\r\n\t\t\tif (path) {\r\n\t\t\t\ta = find('.' + path, true);\r\n\t\t\t} else {\r\n\t\t\t\ta = components;//M.components;\r\n\t\t\t}\r\n\r\n\t\t\tfor (var i = 0; i < a.length; i++) {\r\n\t\t\t\tvar c = a[i];\r\n\t\t\t\tif (c.usage[name] >= expire) {\r\n\t\t\t\t\tif (callback) {\r\n\t\t\t\t\t\tcallback(c);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tarr.push(c);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn callback ? M : arr;\r\n\t\t}\r\n\r\n\r\n\t\tfunction clean() {\r\n\t\t\tvar all =  components,\r\n\t \t\t\tindex = 0;\r\n\t\t\t\tlength = all.length;\r\n\r\n\t\t\twhile (index < length) {\r\n\r\n\t\t\t\tvar component = all[index++];\r\n\r\n\t\t\t\tif (!component) {\r\n\t\t\t\t\tindex--;\r\n\t\t\t\t\tall.splice(index, 1);\r\n\t\t\t\t\tlength = all.length;\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar c = component.element;\r\n\t\t\t\tif (!component.$removed && c && domx.inDOM(c[0])) {\r\n\t\t\t\t\t//if (!component.attr(ATTRDEL)) {  // TODO\r\n\t\t\t\t\t\tif (component.$parser && !component.$parser.length)\r\n\t\t\t\t\t\t\tcomponent.$parser = undefined;\r\n\t\t\t\t\t\tif (component.$formatter && !component.$formatter.length)\r\n\t\t\t\t\t\t\tcomponent.$formatter = undefined;\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t//}\r\n\t\t\t\t}\r\n\r\n\t\t\t\teventer.emit('destroy', component.name, component);\r\n\t\t\t\teventer.emit('component.destroy', component.name, component);\r\n\r\n\t\t\t\tdelete statics['$ST_' + component.name];\r\n\t\t\t\tcomponent.destroy && component.destroy();\r\n\t\t\t\t$('#css' + component.ID).remove();\r\n\r\n\t\t\t\tif (c[0].nodeName !== 'BODY') {\r\n\t\t\t\t\tc.off();\r\n\t\t\t\t\tc.find('*').off();\r\n\t\t\t\t\tc.remove();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcomponent.$main = undefined;\r\n\t\t\t\tcomponent.$data = null;\r\n\t\t\t\tcomponent.dom = null;\r\n\t\t\t\tcomponent.$removed = 2;\r\n\t\t\t\tcomponent.path = null;\r\n\t\t\t\tcomponent.setter = null;\r\n\t\t\t\tcomponent.setter2 = null;\r\n\t\t\t\tcomponent.getter = null;\r\n\t\t\t\tcomponent.getter2 = null;\r\n\t\t\t\tcomponent.make = null;\r\n\r\n\t\t\t\tindex--;\r\n\t\t\t\tall.splice(index, 1);\r\n\t\t\t\tlength = all.length; // M.components.length\r\n\t\t\t\tis = true;\r\n\t\t\t}\r\n\r\n\t\t\tcache.clear(\"dirty\",\"valid\",\"find\");\r\n\t\t}\r\n\r\n\r\n\t\treturn {\r\n\t\t\t\"autofill\"  : autofill,\r\n\t\t\t\"cache\" : cache,\r\n\t\t\t\"checkLazy\" : checkLazy,\r\n\t\t\t\"clean\" : clean,\r\n\t\t\t\"components\" : components,\r\n\t\t\t\"com_valid\" : com_valid,\r\n\t\t\t\"com_validate2\" : com_validate2,\r\n\t\t\t\"com_dirty\" : com_dirty,\r\n\t\t\t\"each\" : each,\r\n\t\t\t\"find\"  : find,\r\n\t\t\t\"notify\" : notify,\r\n\t\t\t\"prepare\" : prepare,\r\n\t\t\t\"reconfigure\" : reconfigure,\r\n\t\t\t\"setter\" : setter,\r\n\t\t\t\"usage\" : usage,\r\n\t\t\t\"validate\" : validate\r\n\t\t}\r\n\t}\r\n\t\r\n\r\n\treturn componenter;\r\n});"]}