{"version":3,"sources":["views/componenter.js"],"names":["define","langx","domx","logs","extensions","registry","warn","view","helper","eventer","components","storing","lazycom","cache","dirty","valid","find","clear","key1","key2","key3","i","arguments","length","this","get","category","key","set","value","defaults","knockknockcounter","state","arr","type","what","setTimeout","stateX","many","noCache","callback","isWaiting","isFunction","undefined","tmp","jQuery","$","output","findComponent","r","wait","val","emit","compiler","compile","Array","err","call","window","setter","selector","name","arg","beg","push","apply","SETTER","o","setInterval","now","c","knockknock","autofill","checkLazy","lo","namea","substring","indexOf","clean","all","index","component","element","$removed","inDOM","$parser","$formatter","statics","destroy","ID","remove","nodeName","off","$main","$data","dom","path","setter2","getter","getter2","make","splice","is","com_valid","onlyComponent","isExcept","join","except","flags","item","lastIndexOf","wildcard","binding","pathmaker","com","$loaded","$compare","$except","visible","hidden","enabled","SELINPUT","disabled","$valid_disabled","_id","$valid","$interaction","com_validate2","$validate","validate","com_dirty","skipEmitState","$dirty_disabled","$dirty","each","fn","replace","notify","$ticks","Math","random","toString","j","p","binders","binderbind","setterX","emitwatch","getx","prepare","obj","el","forEach","config","reconfigure","empties","configure","$prepared","$ready","attrcom","Function","$default","$binded","done","$init","n","trigger","cls","split","$jclass","tclass","id","$lazy","$name","usage","expire","isString","add","env","getTime","isNumber","Date","a","M","replaceWildcard"],"mappings":"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","file":"../../views/componenter.js","sourcesContent":["define([\r\n\t\"../langx\",\r\n\t\"../utils/domx\",\r\n\t\"../utils/logs\",\r\n\t\"../components/extensions\",\r\n\t\"../components/registry\"\r\n],function(langx, domx, logs,extensions, registry){\r\n\tvar warn = logs.warn;\r\n\r\n\tfunction componenter(view) {\r\n\t\tvar helper = view.helper,\r\n\t\t\teventer = view.eventer,\r\n\t\t\tstoring = view.storing,\r\n\t\t\tcomponents = [],\r\n\t\t\tlazycom = {},\r\n\t\t\tautofill = [],\r\n\t\t\tcache = {\r\n\t\t\t\tdirty : {},\r\n\t\t\t\tvalid : {},\r\n\t\t\t\tfind : {},\r\n\t\t\t\tclear : function(key1,key2,key3) {\r\n\t\t\t\t\tfor (var i = 1; i<arguments.length;i++) {\r\n\t\t\t\t\t\tvar key = arguments[i];\r\n\t\t\t\t\t\tthis[key] = {};\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\r\n\t\t\t\tget : function(category,key) {\r\n\t\t\t\t\tthis[category][key];\r\n\t\t\t\t},\r\n\r\n\t\t\t\tset : function(category,key,value) {\r\n\t\t\t\t\tthis[category][key] = value;\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\r\n\t\t\tdefaults = {};\r\n\r\n\t\tvar knockknockcounter = 0;\r\n\r\n\r\n\r\n\t\tsetInterval(function() {\r\n\t\t\t//W.DATETIME = W.NOW = new Date();\r\n\t\t\tlangx.now(true);\r\n\t\t\tvar c = components;\r\n\t\t\tfor (var i = 0, length = c.length; i < length; i++)\r\n\t\t\t\tc[i].knockknock && c[i].knockknock(knockknockcounter);\r\n\t\t\teventer.emit('knockknock', knockknockcounter++);  // EMIT\r\n\t\t}, 60000);\r\n\r\n\t\tfunction checkLazy(name) {\r\n\t\t\tvar lo = lazycom[name];\r\n\r\n\t\t\tif (!lo) {\r\n\t\t\t\tvar namea = name.substring(0, name.indexOf('@'));\r\n\t\t\t\tif (namea && name !== namea) {\r\n\t\t\t\t\tlo = lazycom[name] = lazycom[namea] = { state: 1 };\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlo = lazycom[name] = { state: 1 };\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn lo;\t\t\t\r\n\t\t}\r\n\r\n\t\tfunction each(fn, path) {   // M.each\r\n\t\t\tvar wildcard = path ? path.lastIndexOf('*') !== -1 : false;\r\n\t\t\tif (wildcard) {\r\n\t\t\t\tpath = path.replace('.*', '');\r\n\t\t\t}\r\n\t\t\tvar all = components;//M.components;\r\n\t\t\tvar index = 0;\r\n\t\t\tfor (var i = 0, length = all.length; i < length; i++) {\r\n\t\t\t\tvar com = all[i];\r\n\t\t\t\tif (!com || !com.$loaded || com.$removed || (path && (!com.path || !com.$compare(path)))) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tvar stop = fn(com, index++, wildcard);\r\n\t\t\t\tif (stop === true) {\r\n\t\t\t\t\treturn this;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\tfunction com_validate2(com) {\r\n\r\n\t\t\tvar valid = true;\r\n\r\n\t\t\tif (com.disabled) {\r\n\t\t\t\treturn valid;\r\n\t\t\t}\r\n\r\n\t\t\tif (com.$valid_disabled) {\r\n\t\t\t\treturn valid;\r\n\t\t\t}\r\n\r\n\t\t\tvar arr = [];\r\n\t\t\tcom.state && arr.push(com);\r\n\t\t\tcom.$validate = true;\r\n\r\n\t\t\tif (com.validate) {\r\n\t\t\t\tcom.$valid = com.validate(get(com.path));\r\n\t\t\t\tcom.$interaction(102);\r\n\t\t\t\tif (!com.$valid)\r\n\t\t\t\t\tvalid = false;\r\n\t\t\t}\r\n\r\n\t\t\tcache.clear('valid');\r\n\t\t\tstate(arr, 1, 1);\r\n\t\t\treturn valid;\r\n\t\t}\r\n\r\n\t\tfunction com_dirty(path, value, onlyComponent, skipEmitState) {\r\n\t\t\tvar isExcept = value instanceof Array;\r\n\t\t\tvar key = path + (isExcept ? '>' + value.join('|') : '');  // 'dirty' + \r\n\t\t\tvar except = null;\r\n\r\n\t\t\tif (isExcept) {\r\n\t\t\t\texcept = value;\r\n\t\t\t\tvalue = undefined;\r\n\t\t\t}\r\n\r\n\t\t\tvar dirty = cache.get(\"dirty\",key);\r\n\t\t\tif (typeof(value) !== 'boolean' && dirty !== undefined) {\r\n\t\t\t\treturn dirty;\r\n\t\t\t}\r\n\r\n\t\t\tdirty = true;\r\n\t\t\tvar arr = value !== undefined ? [] : null;\r\n\t\t\tvar flags = null;\r\n\r\n\t\t\tif (isExcept) {\r\n\t\t\t\tvar is = false;\r\n\t\t\t\tflags = {};\r\n\t\t\t\texcept = except.remove(function(item) {\r\n\t\t\t\t\tif (item.substring(0, 1) === '@') {\r\n\t\t\t\t\t\tflags[item.substring(1)] = true;\r\n\t\t\t\t\t\tis = true;\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t});\r\n\t\t\t\t!is && (flags = null);\r\n\t\t\t\tisExcept = except.length > 0;\r\n\t\t\t}\r\n\r\n\t\t\tvar index = path.lastIndexOf('.*');\r\n\t\t\tvar wildcard = index !== -1;\r\n\t\t\tif (index !== -1) {\r\n\t\t\t\tpath = path.substring(0, index);\r\n\t\t\t}\r\n\r\n\t\t\tpath = view.binding.pathmaker(path);\r\n\r\n\t\t\tvar all = components;//M.components;\r\n\t\t\tfor (var i = 0, length = all.length; i < length; i++) {\r\n\t\t\t\tvar com = all[i];\r\n\r\n\t\t\t\tif (!com || com.$removed || !com.$loaded || !com.path || !com.$compare(path) || (isExcept && com.$except(except)))\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\tif (flags && ((flags.visible && !com.visible()) || (flags.hidden && !com.hidden()) || (flags.enabled && com.find(SELINPUT).is(':disabled')) || (flags.disabled && com.find(SELINPUT).is(':enabled'))))\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\tif (com.disabled || com.$dirty_disabled) {\r\n\t\t\t\t\tarr && com.state && arr.push(com);\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (value === undefined) {\r\n\t\t\t\t\tif (com.$dirty === false)\r\n\t\t\t\t\t\tdirty = false;\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcom.state && arr.push(com);\r\n\r\n\t\t\t\tif (!onlyComponent) {\r\n\t\t\t\t\tif (wildcard || com.path === path) {\r\n\t\t\t\t\t\tcom.$dirty = value;\r\n\t\t\t\t\t\tcom.$interaction(101);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (onlyComponent._id === com._id) {\r\n\t\t\t\t\tcom.$dirty = value;\r\n\t\t\t\t\tcom.$interaction(101);\r\n\t\t\t\t}\r\n\t\t\t\tif (com.$dirty === false)\r\n\t\t\t\t\tdirty = false;\r\n\t\t\t}\r\n\r\n\t\t\tcache.clear('dirty');\r\n\t\t\tcache.set('dirty',key,dirty);\r\n\r\n\t\t\t// For double hitting component.state() --> look into COM.invalid()\r\n\t\t\t!skipEmitState && state(arr, 1, 2);\r\n\t\t\treturn dirty;\r\n\t\t}\r\n\r\n\t\tfunction com_valid(path, value, onlyComponent) {\r\n\r\n\t\t\tvar isExcept = value instanceof Array;\r\n\t\t\tvar key =  path + (isExcept ? '>' + value.join('|') : ''); // 'valid' +\r\n\t\t\tvar except = null;\r\n\r\n\t\t\tif (isExcept) {\r\n\t\t\t\texcept = value;\r\n\t\t\t\tvalue = undefined;\r\n\t\t\t}\r\n\r\n\t\t\tvar valid = cache.get(\"valid\",key);\r\n\r\n\t\t\tif (typeof(value) !== 'boolean' && valid !== undefined) {\r\n\t\t\t\treturn valid; //cache[key];\r\n\t\t\t}\r\n\r\n\t\t\tvar flags = null;\r\n\r\n\t\t\tif (isExcept) {\r\n\t\t\t\tvar is = false;\r\n\t\t\t\tflags = {};\r\n\t\t\t\texcept = except.remove(function(item) {\r\n\t\t\t\t\tif (item.substring(0, 1) === '@') {\r\n\t\t\t\t\t\tflags[item.substring(1)] = true;\r\n\t\t\t\t\t\tis = true;\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t});\r\n\t\t\t\t!is && (flags = null);\r\n\t\t\t\tisExcept = except.length > 0;\r\n\t\t\t}\r\n\r\n\t\t\tvalid = true;\r\n\t\t\tvar arr = value !== undefined ? [] : null;\r\n\r\n\t\t\tvar index = path.lastIndexOf('.*');\r\n\t\t\tvar wildcard = index !== -1;\r\n\t\t\tif (index !== -1) {\r\n\t\t\t\tpath = path.substring(0, index);\r\n\t\t\t}\r\n\r\n\t\t\tpath = view.binding.pathmaker(path);\r\n\r\n\t\t\tvar all = components;//M.components;\r\n\t\t\tfor (var i = 0, length = all.length; i < length; i++) {\r\n\t\t\t\tvar com = all[i];\r\n\r\n\t\t\t\tif (!com || com.$removed || !com.$loaded || !com.path || !com.$compare(path) || (isExcept && com.$except(except)))\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\tif (flags && ((flags.visible && !com.visible()) || (flags.hidden && !com.hidden()) || (flags.enabled && com.find(SELINPUT).is(':disabled')) || (flags.disabled && com.find(SELINPUT).is(':enabled'))))\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\tif (com.disabled || com.$valid_disabled) {\r\n\t\t\t\t\tarr && com.state && arr.push(com);\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (value === undefined) {\r\n\t\t\t\t\tif (com.$valid === false)\r\n\t\t\t\t\t\tvalid = false;\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcom.state && arr.push(com);\r\n\r\n\t\t\t\tif (!onlyComponent) {\r\n\t\t\t\t\tif (wildcard || com.path === path) {\r\n\t\t\t\t\t\tcom.$valid = value;\r\n\t\t\t\t\t\tcom.$interaction(102);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (onlyComponent._id === com._id) {\r\n\t\t\t\t\tcom.$valid = value;\r\n\t\t\t\t\tcom.$interaction(102);\r\n\t\t\t\t}\r\n\t\t\t\tif (com.$valid === false) {\r\n\t\t\t\t\tvalid = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tcache.clear('valid');\r\n\t\t\tcache.set('valid',key, valid) ;\r\n\t\t\tstate(arr, 1, 1);\r\n\t\t\treturn valid;\r\n\t\t}\r\n\r\n\t  /**\r\n\t   * Notifies a setter in all components on the path.\r\n\t   * @param  {String} path \r\n\t   */\r\n\t\tfunction notify() { // W.NOTIFY\r\n\r\n\t\t\tvar arg = arguments;\r\n\t\t\tvar all = components;//M.components;\r\n\r\n\t\t\tvar $ticks = Math.random().toString().substring(2, 8);\r\n\t\t\tfor (var j = 0; j < arg.length; j++) {\r\n\t\t\t\tvar p = arg[j];\r\n\t\t\t\tbinders[p] && binderbind(p, p, $ticks);\r\n\t\t\t}\r\n\r\n\t\t\tfor (var i = 0, length = all.length; i < length; i++) {\r\n\t\t\t\tvar com = all[i];\r\n\t\t\t\tif (!com || com.$removed || com.disabled || !com.$loaded || !com.path)\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\tvar is = 0;\r\n\t\t\t\tfor (var j = 0; j < arg.length; j++) {\r\n\t\t\t\t\tif (com.path === arg[j]) {\r\n\t\t\t\t\t\tis = 1;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (is) {\r\n\t\t\t\t\tvar val = com.get();\r\n\t\t\t\t\tcom.setter && com.setterX(val, com.path, 1);\r\n\t\t\t\t\tcom.state && com.stateX(1, 6);\r\n\t\t\t\t\tcom.$interaction(1);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfor (var j = 0; j < arg.length; j++) {\r\n\t\t\t\teventer.emitwatch(arg[j], getx(arg[j]), 1);  // GET\r\n\t\t\t}\r\n\r\n\t\t\treturn this;  // W\r\n\t\t}\r\n\r\n\t\t// what:\r\n\t\t// 1. valid\r\n\t\t// 2. dirty\r\n\t\t// 3. reset\r\n\t\t// 4. update\r\n\t\t// 5. set\r\n\t\tfunction state(arr, type, what) {\r\n\t\t\tif (arr && arr.length) {\r\n\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\tfor (var i = 0, length = arr.length; i < length; i++) {\r\n\t\t\t\t\t\tarr[i].stateX(type, what);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, 2, arr);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction validate(path, except) { //W.VALIDATE =\r\n\r\n\t\t\tvar arr = [];\r\n\t\t\tvar valid = true;\r\n\r\n\t\t\tpath = view.binding.pathmaker(path.replaceWildcard()); //pathmaker(path.replace(REGWILDCARD, ''));\r\n\r\n\t\t\tvar flags = null;\r\n\t\t\tif (except) {\r\n\t\t\t\tvar is = false;\r\n\t\t\t\tflags = {};\r\n\t\t\t\texcept = except.remove(function(item) {\r\n\t\t\t\t\tif (item.substring(0, 1) === '@') {\r\n\t\t\t\t\t\tflags[item.substring(1)] = true;\r\n\t\t\t\t\t\tis = true;\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t});\r\n\t\t\t\t!is && (flags = null);\r\n\t\t\t\t!except.length && (except = null);\r\n\t\t\t}\r\n\r\n\t\t\tvar all = components;//M.components;\r\n\t\t\tfor (var i = 0, length = all.length; i < length; i++) {\r\n\t\t\t\tvar com = all[i];\r\n\t\t\t\tif (!com || com.$removed || com.disabled || !com.$loaded || !com.path || !com.$compare(path))\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\tif (flags && ((flags.visible && !com.visible()) || (flags.hidden && !com.hidden()) || (flags.enabled && com.find(SELINPUT).is(':disabled')) || (flags.disabled && com.find(SELINPUT).is(':enabled'))))\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\tcom.state && arr.push(com);\r\n\r\n\t\t\t\tif (com.$valid_disabled)\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\tcom.$validate = true;\r\n\t\t\t\tif (com.validate) {\r\n\t\t\t\t\tcom.$valid = com.validate(get(com.path));\r\n\t\t\t\t\tcom.$interaction(102);\r\n\t\t\t\t\tif (!com.$valid)\r\n\t\t\t\t\t\tvalid = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tcache.clear('valid');\r\n\t\t\tstate(arr, 1, 1);\r\n\t\t\treturn valid;\r\n\t\t}\r\n\r\n\t\tfunction prepare(obj) {\r\n\r\n\t\t\tif (!obj) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar el = obj.element;\r\n\r\n\t\t\tif(extensions[obj.name]) {\r\n\t\t\t\textensions[obj.name].forEach(function(item) {\r\n\t\t\t\t\tif (item.config) {\r\n\t\t\t\t\t\tobj.reconfigure(item.config, langx.empties.fn);\r\n\t\t\t\t\t}\r\n\t\t\t\t\titem.fn.call(obj, obj, obj.config);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tvar value = obj.get();\r\n\t\t\tvar tmp;\r\n\r\n\t\t\tif (obj.configure) {\r\n\t\t\t\tobj.reconfigure(obj.config, undefined, true);\r\n\t\t\t}\r\n\r\n\t\t\tobj.$loaded = true;\r\n\r\n\t\t\tif (obj.setter) {\r\n\t\t\t\tif (!obj.$prepared) {\r\n\r\n\t\t\t\t\tobj.$prepared = true;\r\n\t\t\t\t\tobj.$ready = true;\r\n\r\n\t\t\t\t\ttmp = helper.attrcom(obj, 'value');\r\n\r\n\t\t\t\t\tif (tmp) {\r\n\t\t\t\t\t\tif (!defaults[tmp]) {\r\n\t\t\t\t\t\t\tdefaults[tmp] = new Function('return ' + tmp);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tobj.$default = defaults[tmp];\r\n\t\t\t\t\t\tif (value === undefined) {\r\n\t\t\t\t\t\t\tvalue = obj.$default();\r\n\t\t\t\t\t\t\tview.storing.set(obj.path, value);\r\n\t\t\t\t\t\t\teventer.emitwatch(obj.path, value, 0);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (obj.$binded)\r\n\t\t\t\t\t\tobj.$interaction(0);\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tobj.$binded = true;\r\n\t\t\t\t\t\tobj.setterX(value, obj.path, 0);\r\n\t\t\t\t\t\tobj.$interaction(0);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tobj.$binded = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (obj.validate && !obj.$valid_disabled) {\r\n\t\t\t\tobj.$valid = obj.validate(obj.get(), true);\r\n\t\t\t}\r\n\r\n\t\t\tif (obj.done) {\r\n\t\t\t\tsetTimeout(obj.done, 20);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (obj.state) {\r\n\t\t\t\tobj.stateX(0, 3);\r\n\t\t\t}\r\n\r\n\t\t\tif (obj.$init) {\r\n\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\tvar fn = get(obj.$init);\r\n\t\t\t\t\tif (langx.isFunction(fn)) {\r\n\t\t\t\t\t\tfn.call(obj, obj);\t\r\n\t\t\t\t\t} \r\n\t\t\t\t\tobj.$init = undefined;\r\n\t\t\t\t}, 5);\r\n\t\t\t}\r\n\r\n\t\t\tvar n = 'component';\r\n\t\t\tel.trigger(n);\r\n\t\t\tel.off(n);\r\n\r\n\t\t\tvar cls = helper.attrcom(el, 'class');\r\n\t\t\tcls && (function(cls) {\r\n\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\tcls = cls.split(' ');\r\n\t\t\t\t\tvar tmp = el[0].$jclass || {};\r\n\t\t\t\t\tfor (var i = 0, length = cls.length; i < length; i++) {\r\n\t\t\t\t\t\tif (!tmp[cls[i]]) {\r\n\t\t\t\t\t\t\tel.tclass(cls[i]);\r\n\t\t\t\t\t\t\ttmp[cls[i]] = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tel[0].$jclass = tmp;\r\n\t\t\t\t}, 5);\r\n\t\t\t})(cls);\r\n\r\n\t\t\tif (obj.id) {\r\n\t\t\t\teventer.emit('#' + obj.id, obj);  // EMIT\r\n\t\t\t}\r\n\t\t\teventer.emit('@' + obj.name, obj); // EMIT\r\n\t\t\teventer.emit(n, obj);  // EMIT\r\n\t\t\tcache.clear('find');\r\n\t\t\tif (obj.$lazy) {\r\n\t\t\t\tobj.$lazy.state = 3;\r\n\t\t\t\tdelete obj.$lazy;\r\n\t\t\t\teventer.emit('lazy', obj.$name, false); // EMIT\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\t/*\r\n\t\t * Finds all component according to the selector.\r\n\t\t *   find(selector,callback) -> wait\r\n\t\t *   find(selector,many,callback,timeout) -> wait\r\n\t\t *   find(selector,manay,nocache,callback) -> no wait\r\n\t\t *   find(selector,manay,timeout) --> no wait\r\n\t\t * @value {String} selector\r\n         * @many {Boolean} Optional, output will be Array\r\n         * @nocache {Boolean} Optional\r\n         * @callback {Function(response)} Optional and the method will be wait for non-exist components\r\n         * @timeout {Number} Optional, in milliseconds (default: 0)\r\n         * returns {Component} or {Array Component}\r\n\t\t */\r\n\t\tfunction find(value, many, noCache, callback) { //W.FIND\r\n\r\n\t\t\tvar isWaiting = false;\r\n\r\n\t\t\tif (langx.isFunction(many)) {\r\n\t\t\t\tisWaiting = true;\r\n\t\t\t\tcallback = many;\r\n\t\t\t\tmany = undefined;\r\n\t\t\t\t// noCache = undefined;\r\n\t\t\t\t// noCache can be timeout\r\n\t\t\t} else if (langx.isFunction(noCache)) {\r\n\t\t\t\tvar tmp = callback;\r\n\t\t\t\tisWaiting = true;\r\n\t\t\t\tcallback = noCache;\r\n\t\t\t\tnoCache = tmp;\r\n\t\t\t\t// noCache can be timeout\r\n\t\t\t}\r\n\r\n\t\t\tif (isWaiting) {\r\n\t\t\t\tview.storing.wait(function() {  // WAIT\r\n\t\t\t\t\tvar val = find(value, many, noCache);\r\n\t\t\t\t\tif (lazycom[value] && lazycom[value].state === 1) {\r\n\t\t\t\t\t\tlazycom[value].state = 2;\r\n\t\t\t\t\t\teventer.emit('lazy', value, true); // EMIT\r\n\t\t\t\t\t\twarn('Lazy load: ' + value);\r\n\t\t\t\t\t\tview.compiler.compile();\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn val instanceof Array ? val.length > 0 : !!val;\r\n\t\t\t\t}, function(err) {\r\n\t\t\t\t\t// timeout\r\n\t\t\t\t\tif (!err) {\r\n\t\t\t\t\t\tvar val = find(value, many);\r\n\t\t\t\t\t\tcallback.call(val ? val : window, val);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, 500, noCache);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// Element\r\n\t\t\tif (typeof(value) === 'object') {\r\n\t\t\t\tif (!(value instanceof jQuery)) {\r\n\t\t\t\t\tvalue = $(value);\r\n\t\t\t\t}\r\n\t\t\t\tvar output = helper.findComponent(value, '');\r\n\t\t\t\treturn many ? output : output[0];\r\n\t\t\t}\r\n\r\n\t\t\tvar key, output;\r\n\r\n\t\t\tif (!noCache) {\r\n\t\t\t\tkey = value + '.' + (many ? 0 : 1);  // 'find.' + \r\n\t\t\t\toutput = cache.get(\"find\",key);//output = cache[key];\r\n\t\t\t\tif (output) {\r\n\t\t\t\t\treturn output;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar r = helper.findComponent(null, value);\r\n\t\t\tif (!many) {\r\n\t\t\t\tr = r[0];\r\n\t\t\t}\r\n\t\t\toutput = r;\r\n\t\t\tif (!noCache) {\r\n\t\t\t\tcache.set(\"find\",key,output);//cache[key] = output;\r\n\t\t\t}\r\n\t\t\treturn output;\r\n\t\t}\r\n\r\n\t   /**\r\n\t   * Reconfigures all components according to the selector.\r\n\t   * @param  {String} selector \r\n\t   * @param  {String/Object} config A default configuration\r\n\t   */\r\n\t\tfunction reconfigure(selector, value) { // W.RECONFIGURE = \r\n\t\t\tsetter(true, selector, 'reconfigure', value);\r\n\t\t\treturn this; // RECONFIGURE\r\n\t\t};\r\n\r\n\t   /**\r\n\t   * Set a new value to the specific method in components.\r\n\t   * @param  {Boolean} wait Optional, can it wait for non-exist components? \r\n\t   * @param  {String} selector  \r\n\t   * @param  {String} name Property or Method name (can't be nested) \r\n\t   * @param  {Object} argA Optional, additional argument\r\n\t   * @param  {Object} argB Optional, additional argument\r\n\t   * @param  {Object} argN Optional, additional argument\r\n\t   */\r\n\t\tfunction setter(selector, name) { // W.SETTER\r\n\r\n\t\t\tvar arg = [];\r\n\t\t\tvar beg = selector === true ? 3 : 2;\r\n\r\n\t\t\tfor (var i = beg; i < arguments.length; i++) {\r\n\t\t\t\targ.push(arguments[i]);\r\n\t\t\t}\r\n\r\n\t\t\tif (beg === 3) {\r\n\r\n\t\t\t\tselector = name;\r\n\r\n\t\t\t\tif (lazycom[selector] && lazycom[selector].state !== 3) {\r\n\r\n\t\t\t\t\tif (lazycom[selector].state === 1) {\r\n\t\t\t\t\t\tlazycom[selector].state = 2;\r\n\t\t\t\t\t\teventer.emit('lazy', selector, true); // EMIT\r\n\t\t\t\t\t\twarn('Lazy load: ' + selector);\r\n\t\t\t\t\t\tview.compiler.compile();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tsetTimeout(function(arg) {\r\n\t\t\t\t\t\targ[0] = true;\r\n\t\t\t\t\t\tsetter.apply(window, arg);\r\n\t\t\t\t\t}, 555, arguments);\r\n\r\n\t\t\t\t\treturn SETTER;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tname = arguments[2];\r\n\r\n\t\t\t\tfind(selector, true, function(arr) {\r\n\t\t\t\t\tfor (var i = 0, length = arr.length; i < length; i++) {\r\n\t\t\t\t\t\tvar o = arr[i];\r\n\t\t\t\t\t\tif (langx.isFunction(o[name]))\r\n\t\t\t\t\t\t\to[name].apply(o, arg);\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\to[name] = arg[0];\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\r\n\t\t\t\tif (lazycom[selector] && lazycom[selector].state !== 3) {\r\n\r\n\t\t\t\t\tif (lazycom[selector].state === 1) {\r\n\t\t\t\t\t\tlazycom[selector].state = 2;\r\n\t\t\t\t\t\teventer.emit('lazy', selector, true);  // EMIT\r\n\t\t\t\t\t\twarn('Lazy load: ' + selector);\r\n\t\t\t\t\t\tview.compiler.compile();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tsetTimeout(function(arg) {\r\n\t\t\t\t\t\tsetter.apply(window, arg);\r\n\t\t\t\t\t}, 555, arguments);\r\n\r\n\t\t\t\t\treturn SETTER;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar arr = find(selector, true);\r\n\t\t\t\tfor (var i = 0, length = arr.length; i < length; i++) {\r\n\t\t\t\t\tvar o = arr[i];\r\n\t\t\t\t\tif (langx.isFunction(o[name]) )\r\n\t\t\t\t\t\to[name].apply(o, arg);\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\to[name] = arg[0];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn this; // SETTER\r\n\t\t};\r\n\r\n\r\n\t\t// @type {String} Can be \"init\", \"manually\", \"input\" or \"custom\"\r\n\t\t// @expire {String/Number}, for example \"5 minutes\"\r\n\t\t// @path {String} Optional, for example \"users.form.name\"\r\n\t\t// returns {Array Component} or {jComponent}\r\n\t\tfunction usage(name, expire, path, callback) { //W.LASTMODIFICATION = W.USAGE = M.usage = \r\n\r\n\t\t\tvar type = typeof(expire);\r\n\t\t\tif (langx.isString(expire)) {\r\n\t\t\t\t//var dt = W.NOW = W.DATETIME = new Date();\r\n\t\t\t\tvar dt = langx.now(true);\r\n\t\t\t\texpire = dt.add('-' + expire.env()).getTime();\r\n\t\t\t} else if (langx.isNumber(expire))\r\n\t\t\t\texpire = Date.now() - expire;\r\n\r\n\t\t\tif (langx.isFunction(path)) {\r\n\t\t\t\tcallback = path;\r\n\t\t\t\tpath = undefined;\r\n\t\t\t}\r\n\r\n\t\t\tvar arr = [];\r\n\t\t\tvar a = null;\r\n\r\n\t\t\tif (path) {\r\n\t\t\t\ta = find('.' + path, true);\r\n\t\t\t} else {\r\n\t\t\t\ta = components;//M.components;\r\n\t\t\t}\r\n\r\n\t\t\tfor (var i = 0; i < a.length; i++) {\r\n\t\t\t\tvar c = a[i];\r\n\t\t\t\tif (c.usage[name] >= expire) {\r\n\t\t\t\t\tif (callback) {\r\n\t\t\t\t\t\tcallback(c);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tarr.push(c);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn callback ? M : arr;\r\n\t\t}\r\n\r\n\r\n\t\tfunction clean() {\r\n\t\t\tvar all =  components,\r\n\t \t\t\tindex = 0;\r\n\t\t\t\tlength = all.length;\r\n\r\n\t\t\twhile (index < length) {\r\n\r\n\t\t\t\tvar component = all[index++];\r\n\r\n\t\t\t\tif (!component) {\r\n\t\t\t\t\tindex--;\r\n\t\t\t\t\tall.splice(index, 1);\r\n\t\t\t\t\tlength = all.length;\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar c = component.element;\r\n\t\t\t\tif (!component.$removed && c && domx.inDOM(c[0])) {\r\n\t\t\t\t\t//if (!component.attr(ATTRDEL)) {  // TODO\r\n\t\t\t\t\t\tif (component.$parser && !component.$parser.length)\r\n\t\t\t\t\t\t\tcomponent.$parser = undefined;\r\n\t\t\t\t\t\tif (component.$formatter && !component.$formatter.length)\r\n\t\t\t\t\t\t\tcomponent.$formatter = undefined;\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t//}\r\n\t\t\t\t}\r\n\r\n\t\t\t\teventer.emit('destroy', component.name, component);\r\n\t\t\t\teventer.emit('component.destroy', component.name, component);\r\n\r\n\t\t\t\tdelete statics['$ST_' + component.name];\r\n\t\t\t\tcomponent.destroy && component.destroy();\r\n\t\t\t\t$('#css' + component.ID).remove();\r\n\r\n\t\t\t\tif (c[0].nodeName !== 'BODY') {\r\n\t\t\t\t\tc.off();\r\n\t\t\t\t\tc.find('*').off();\r\n\t\t\t\t\tc.remove();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcomponent.$main = undefined;\r\n\t\t\t\tcomponent.$data = null;\r\n\t\t\t\tcomponent.dom = null;\r\n\t\t\t\tcomponent.$removed = 2;\r\n\t\t\t\tcomponent.path = null;\r\n\t\t\t\tcomponent.setter = null;\r\n\t\t\t\tcomponent.setter2 = null;\r\n\t\t\t\tcomponent.getter = null;\r\n\t\t\t\tcomponent.getter2 = null;\r\n\t\t\t\tcomponent.make = null;\r\n\r\n\t\t\t\tindex--;\r\n\t\t\t\tall.splice(index, 1);\r\n\t\t\t\tlength = all.length; // M.components.length\r\n\t\t\t\tis = true;\r\n\t\t\t}\r\n\r\n\t\t\tcache.clear(\"dirty\",\"valid\",\"find\");\r\n\t\t}\r\n\r\n\r\n\t\treturn {\r\n\t\t\t\"autofill\"  : autofill,\r\n\t\t\t\"cache\" : cache,\r\n\t\t\t\"checkLazy\" : checkLazy,\r\n\t\t\t\"clean\" : clean,\r\n\t\t\t\"components\" : components,\r\n\t\t\t\"com_valid\" : com_valid,\r\n\t\t\t\"com_validate2\" : com_validate2,\r\n\t\t\t\"com_dirty\" : com_dirty,\r\n\t\t\t\"each\" : each,\r\n\t\t\t\"find\"  : find,\r\n\t\t\t\"notify\" : notify,\r\n\t\t\t\"prepare\" : prepare,\r\n\t\t\t\"reconfigure\" : reconfigure,\r\n\t\t\t\"setter\" : setter,\r\n\t\t\t\"state\" : state,\r\n\t\t\t\"usage\" : usage,\r\n\t\t\t\"validate\" : validate\r\n\t\t}\r\n\t}\r\n\t\r\n\r\n\treturn componenter;\r\n});"]}