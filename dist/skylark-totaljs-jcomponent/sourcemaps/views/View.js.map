{"version":3,"sources":["views/View.js"],"names":["define","langx","domx","$","binding","cache","componenter","eventer","compiler","helper","scoper","storing","Plugin","inherit","options","elmAttrNames","scope","bind","store","com","base","url","removed","released","compile","_construct","elm","prototype","apply","this","arguments","ready","add","value","element","COM","Scope","Array","i","length","ADD","document","body","append","format","setTimeout2","COMPILE","container","immediate","refresh","self","components","sort","a","b","$removed","path","al","bl","localCompare","start","startView","end"],"mappings":";;;;;;;AAAAA,QACC,WACA,gBACA,iBACA,YACA,UACA,gBACA,YACA,aACA,WACA,WACA,aACC,SAASC,EAAOC,EAAMC,EAAEC,EAASC,EAAOC,EAAaC,EAAQC,EAAUC,EAAOC,EAAOC,GAyFtF,OA9EWT,EAAKU,OAAOC,SACnBC,SACEC,cACEC,MAAU,aACVC,KAAU,YACVC,MAAU,aACXC,KACEC,KAAW,WACXC,IAAW,gBACXC,QAAW,mBACXC,SAAW,qBAEZC,QAAU,iBAIjBC,WAAa,SAASC,EAAIZ,GACzBZ,EAAKU,OAAOe,UAAUF,WAAWG,MAAMC,KAAKC,WAE5CD,KAAKxB,MAAQA,EAAMwB,MACnBA,KAAKpB,OAASA,EAAOoB,MACrBA,KAAKtB,QAAUA,EAAQsB,MACvBA,KAAKnB,OAASA,EAAOmB,MACrBA,KAAKzB,QAAUA,EAAQyB,MACvBA,KAAKlB,QAAUA,EAAQkB,MACvBA,KAAKvB,YAAcA,EAAYuB,MAC/BA,KAAKrB,SAAWA,EAASqB,MAEzBA,KAAKE,UAQNC,IAAM,SAAUC,EAAOC,GAItB,IAHIA,aAAmBC,KAAOD,aAAmBE,OAASF,aAAmBtB,UAC5EsB,EAAUA,EAAQA,SAEfD,aAAiBI,MACpB,IAAK,IAAIC,EAAI,EAAGA,EAAIL,EAAMM,OAAQD,IACjCE,IAAIP,EAAMK,GAAIJ,QAEf/B,EAAE+B,GAAWO,SAASC,MAAMC,OAAO,4BAA4BC,OAAOX,IACtEY,YAAY,MAAOC,QAAS,KAI9BtB,QAAU,SAAUuB,EAAUC,KAI9BC,QAAU,WACT,IAAIC,EAAOrB,KACXgB,YAAY,WAAY,WACvBK,EAAK5C,YAAY6C,WAAWC,KAAK,SAASC,EAAGC,GAC5C,GAAID,EAAEE,WAAaF,EAAEG,KACpB,OAAO,EACR,GAAIF,EAAEC,WAAaD,EAAEE,KACpB,OAAQ,EACT,IAAIC,EAAKJ,EAAEG,KAAKjB,OACZmB,EAAKJ,EAAEE,KAAKjB,OAChB,OAAOkB,EAAKC,GAAO,EAAID,IAAOC,EAAKzD,EAAM0D,aAAaN,EAAEG,KAAMF,EAAEE,MAAQ,KAEvE,MAGJI,MAAQ,WACP/B,KAAKpB,OAAOoD,aAGbC,IAAM","file":"../../views/View.js","sourcesContent":["define([\r\n\t\"../langx\",\r\n\t\"../utils/domx\",\r\n\t\"../utils/query\",\r\n\t\"./binding\",\r\n\t\"./cache\",\r\n\t\"./componenter\",\r\n\t\"./eventer\",\r\n\t\"./compiler\",\r\n\t\"./helper\",\r\n\t\"./scoper\",\r\n\t\"./storing\",\r\n],function(langx, domx, $,binding, cache, componenter, eventer,compiler, helper,scoper,storing){\r\n\r\n\r\n\r\n\t// data-scope    \r\n\t// data-compile \r\n\t// data-released \r\n\t// data-vendor\r\n\t// data-store\r\n\t// data-com\r\n\t// data-bind\r\n\tvar View = domx.Plugin.inherit({\r\n\t    options : {\r\n\t      elmAttrNames: {\r\n\t        scope   : \"data-scope\",             // data-jc-scope\r\n\t        bind    : \"data-bind\",              // data-bind\r\n\t        store   : \"data-store\",\r\n\t      \tcom  : {\r\n\t\t        base     : \"data-com\",          // data-jc\r\n\t\t        url      : \"data-comp-url\",     // data-jc-url\r\n\t\t        removed  : \"data-com-removed\",  //data-jc-removed\r\n\t\t        released : \"data-com-released\", //data-jc-released\r\n\t      \t},\r\n\t        compile : \"data-compile\"            // data-jc-comile\r\n\t      }\r\n\t    },\r\n\r\n\t\t_construct : function(elm,options) {\r\n\t\t\tdomx.Plugin.prototype._construct.apply(this,arguments);\r\n\r\n\t\t\tthis.cache = cache(this);\r\n\t\t\tthis.helper = helper(this);\r\n\t\t\tthis.eventer = eventer(this);\r\n\t\t\tthis.scoper = scoper(this);\r\n\t\t\tthis.binding = binding(this);\r\n\t\t\tthis.storing = storing(this);\r\n\t\t\tthis.componenter = componenter(this);\r\n\t\t\tthis.compiler = compiler(this);\r\n\t\t\t\r\n\t\t\tthis.ready = [];\r\n\t\t},\r\n\r\n\t   /**\r\n\t   * Create new components dynamically.\r\n\t   * @param  {String|Array<String>} declaration \r\n\t   * @param  {jQuery Element/Component/Scope/Plugin} element optional,a parent element (default: \"document.body\")\r\n\t   */\r\n\t\tadd : function (value, element) { // W.ADD =\r\n\t\t\tif (element instanceof COM || element instanceof Scope || element instanceof Plugin) {\r\n\t\t\t\telement = element.element;\r\n\t\t\t}\r\n\t\t\tif (value instanceof Array) {\r\n\t\t\t\tfor (var i = 0; i < value.length; i++)\r\n\t\t\t\t\tADD(value[i], element);\r\n\t\t\t} else {\r\n\t\t\t\t$(element || document.body).append('<div data-jc=\"{0}\"></div>'.format(value));\r\n\t\t\t\tsetTimeout2('ADD', COMPILE, 10);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tcompile : function (container,immediate) {\r\n\r\n\t\t},\r\n\r\n\t\trefresh : function () {\r\n\t\t\tvar self = this;\r\n\t\t\tsetTimeout2('$refresh', function() {\r\n\t\t\t\tself.componenter.components.sort(function(a, b) {  // M.components.sort\r\n\t\t\t\t\tif (a.$removed || !a.path)\r\n\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\tif (b.$removed || !b.path)\r\n\t\t\t\t\t\treturn -1;\r\n\t\t\t\t\tvar al = a.path.length;\r\n\t\t\t\t\tvar bl = b.path.length;\r\n\t\t\t\t\treturn al > bl ? - 1 : al === bl ? langx.localCompare(a.path, b.path) : 1;\r\n\t\t\t\t});\r\n\t\t\t}, 200);\r\n\t\t},\r\n\r\n\t\tstart : function() {\r\n\t\t\tthis.helper.startView();\r\n\t\t},\r\n\r\n\t\tend : function() {\r\n\r\n\t\t}\r\n\r\n\t});\r\n\r\n\treturn View;\r\n});"]}