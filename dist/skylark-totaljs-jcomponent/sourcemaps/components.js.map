{"version":3,"sources":["components.js"],"names":["define","langx","domx","$","jc","Usage","cache","Component","M","components","versions","SELINPUT","exechelper","ctx","path","arg","setTimeout","EXEC","call","com_dirty","value","onlyComponent","skipEmitState","isExcept","Array","key","join","except","undefined","dirty","arr","flags","is","remove","item","substring","length","index","lastIndexOf","wildcard","pathmaker","all","i","com","$removed","$loaded","$compare","$except","visible","hidden","enabled","find","disabled","$dirty_disabled","state","push","_id","$dirty","$interaction","clearPageData","setPageData","findcomponent","container","selector","callback","s","split","EMPTYARRAY","name","id","version","indexOf","trim","stop","each","this","$com","$name","$version","$pp","pathscope","findcontrol2","input","$inputcontrol","findcontrol","onElement","level","childNodes","sub","inputable","el","tagName","getAttribute","element","setter","beg","arguments","lazycom","EMIT","warn","compile","W","SETTER","apply","FIND","o","TYPE_FN","exec","p","f","wait","env","c","charCodeAt","events","ok","ctrl","plugins","fn","isFunction","Window","paths","get","many","timeout","self","output","WAIT","val","err","RECONFIGURE","$formatter","FORMATTER","formatter","type","unshift","a","component","findInstance","helper","nested","forEach","$ready","mixin","add","COM","Scope","Plugin","ADD","document","body","append","format","setTimeout2","COMPILE","attrcom","exec2","tmp","b","d","views","changed","change","cleaner","cleaner2","default2","reset","replaceWildcard","replace","defaults","HASH","set","$default","$valid_disabled","$valid","$validate","validate","noCache","isWaiting","jQuery","r","topic","emit","refresh","usage","expire","TYPE_S","now","getTime","TYPE_N","Date","j","keys","extend","extend2","inc","inc2","push2","update","update2"],"mappings":"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","file":"../components.js","sourcesContent":["define([\r\n\t\"./langx\",\r\n\t\"../utils/domx\",\r\n\t\"../utils/query\",\r\n\t\"./jc\",\r\n\t\"./components/Usage\",\r\n\t\"./utils/cache\",\r\n\t\"./components/Component\"\r\n],function(langx, domx, $, jc, Usage, cache, Component){\r\n\tvar M = jc;\r\n\r\n\tvar components = Component.components = [];\r\n\tvar versions = {};\r\n\r\n//\tvar components = {};\r\n\r\n//\tM.$components = {};\r\n//\tM.components = [];\r\n\r\n\r\n\t// ===============================================================\r\n\t// PRIVATE FUNCTIONS\r\n\t// ===============================================================\r\n\r\n\r\n\tvar\tSELINPUT = 'input,textarea,select';\r\n\r\n\tfunction exechelper(ctx, path, arg) {\r\n\t\tsetTimeout(function() {\r\n\t\t\tEXEC.call(ctx, true, path, arg[0], arg[1], arg[2], arg[3], arg[4], arg[5], arg[6]);\r\n\t\t}, 200);\r\n\t}\r\n\r\n\tfunction com_dirty(path, value, onlyComponent, skipEmitState) {\r\n\r\n\t\tvar isExcept = value instanceof Array;\r\n\t\tvar key = 'dirty' + path + (isExcept ? '>' + value.join('|') : '');\r\n\t\tvar except = null;\r\n\r\n\t\tif (isExcept) {\r\n\t\t\texcept = value;\r\n\t\t\tvalue = undefined;\r\n\t\t}\r\n\r\n\t\tif (typeof(value) !== 'boolean' && cache[key] !== undefined)\r\n\t\t\treturn cache[key];\r\n\r\n\t\tvar dirty = true;\r\n\t\tvar arr = value !== undefined ? [] : null;\r\n\t\tvar flags = null;\r\n\r\n\t\tif (isExcept) {\r\n\t\t\tvar is = false;\r\n\t\t\tflags = {};\r\n\t\t\texcept = except.remove(function(item) {\r\n\t\t\t\tif (item.substring(0, 1) === '@') {\r\n\t\t\t\t\tflags[item.substring(1)] = true;\r\n\t\t\t\t\tis = true;\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t});\r\n\t\t\t!is && (flags = null);\r\n\t\t\tisExcept = except.length > 0;\r\n\t\t}\r\n\r\n\t\tvar index = path.lastIndexOf('.*');\r\n\t\tvar wildcard = index !== -1;\r\n\t\tif (index !== -1)\r\n\t\t\tpath = path.substring(0, index);\r\n\r\n\t\tpath = pathmaker(path);\r\n\r\n\t\tvar all = components;//M.components;\r\n\t\tfor (var i = 0, length = all.length; i < length; i++) {\r\n\t\t\tvar com = all[i];\r\n\r\n\t\t\tif (!com || com.$removed || !com.$loaded || !com.path || !com.$compare(path) || (isExcept && com.$except(except)))\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tif (flags && ((flags.visible && !com.visible()) || (flags.hidden && !com.hidden()) || (flags.enabled && com.find(SELINPUT).is(':disabled')) || (flags.disabled && com.find(SELINPUT).is(':enabled'))))\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tif (com.disabled || com.$dirty_disabled) {\r\n\t\t\t\tarr && com.state && arr.push(com);\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tif (value === undefined) {\r\n\t\t\t\tif (com.$dirty === false)\r\n\t\t\t\t\tdirty = false;\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tcom.state && arr.push(com);\r\n\r\n\t\t\tif (!onlyComponent) {\r\n\t\t\t\tif (wildcard || com.path === path) {\r\n\t\t\t\t\tcom.$dirty = value;\r\n\t\t\t\t\tcom.$interaction(101);\r\n\t\t\t\t}\r\n\t\t\t} else if (onlyComponent._id === com._id) {\r\n\t\t\t\tcom.$dirty = value;\r\n\t\t\t\tcom.$interaction(101);\r\n\t\t\t}\r\n\t\t\tif (com.$dirty === false)\r\n\t\t\t\tdirty = false;\r\n\t\t}\r\n\r\n\t\tcache.clearPageData('dirty');\r\n\t\tcache.setPageData(key,dirty);\r\n\r\n\t\t// For double hitting component.state() --> look into COM.invalid()\r\n\t\t!skipEmitState && state(arr, 1, 2);\r\n\t\treturn dirty;\r\n\t}\r\n\r\n\tfunction findcomponent(container, selector, callback) {\r\n\r\n\t\tvar s = (selector ? selector.split(' ') : EMPTYARRAY);\r\n\t\tvar path = '';\r\n\t\tvar name = '';\r\n\t\tvar id = '';\r\n\t\tvar version = '';\r\n\t\tvar index;\r\n\r\n\t\tfor (var i = 0, length = s.length; i < length; i++) {\r\n\t\t\tswitch (s[i].substring(0, 1)) {\r\n\t\t\t\tcase '*':\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase '.':\r\n\t\t\t\t\t// path\r\n\t\t\t\t\tpath = s[i].substring(1);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase '#':\r\n\t\t\t\t\t// id;\r\n\t\t\t\t\tid = s[i].substring(1);\r\n\t\t\t\t\tindex = id.indexOf('[');\r\n\t\t\t\t\tif (index !== -1) {\r\n\t\t\t\t\t\tpath = id.substring(index + 1, id.length - 1).trim();\r\n\t\t\t\t\t\tid = id.substring(0, index);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\t// name\r\n\t\t\t\t\tname = s[i];\r\n\t\t\t\t\tindex = name.indexOf('[');\r\n\r\n\t\t\t\t\tif (index !== -1) {\r\n\t\t\t\t\t\tpath = name.substring(index + 1, name.length - 1).trim();\r\n\t\t\t\t\t\tname = name.substring(0, index);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tindex = name.lastIndexOf('@');\r\n\r\n\t\t\t\t\tif (index !== -1) {\r\n\t\t\t\t\t\tversion = name.substring(index + 1);\r\n\t\t\t\t\t\tname = name.substring(0, index);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar arr = callback ? undefined : [];\r\n\t\tif (container) {\r\n\t\t\tvar stop = false;\r\n\t\t\tcontainer.find('[data-jc]').each(function() {\r\n\t\t\t\tvar com = this.$com;\r\n\r\n\t\t\t\tif (stop || !com || !com.$loaded || com.$removed || (id && com.id !== id) || (name && com.$name !== name) || (version && com.$version !== version) || (path && (com.$pp || (com.path !== path && (!com.pathscope || ((com.pathscope + '.' + path) !== com.path))))))\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tif (callback) {\r\n\t\t\t\t\tif (callback(com) === false)\r\n\t\t\t\t\t\tstop = true;\r\n\t\t\t\t} else\r\n\t\t\t\t\tarr.push(com);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tfor (var i = 0, length = components.length; i < length; i++) { // M.components.length\r\n\t\t\t\tvar com = components[i]; // M.components[i]\r\n\t\t\t\tif (!com || !com.$loaded || com.$removed || (id && com.id !== id) || (name && com.$name !== name) || (version && com.$version !== version) || ((path && (com.$pp || (com.path !== path && (!com.pathscope || ((com.pathscope + '.' + path) !== com.path)))))))\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\tif (callback) {\r\n\t\t\t\t\tif (callback(com) === false) {\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tarr.push(com);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn arr;\r\n\t}\r\n\r\n\tfunction findcontrol2(com, input) {\r\n\r\n\t\tif (com.$inputcontrol) {\r\n\t\t\tif (com.$inputcontrol % 2 !== 0) {\r\n\t\t\t\tcom.$inputcontrol++;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar target = input ? input : com.element;\r\n\t\tfindcontrol(target[0], function(el) {\r\n\t\t\tif (!el.$com || el.$com !== com) {\r\n\t\t\t\tel.$com = com;\r\n\t\t\t\tcom.$inputcontrol = 1;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tfunction findcontrol(container, onElement, level) {\r\n\r\n\t\tvar arr = container.childNodes;\r\n\t\tvar sub = [];\r\n\r\n\t\tdomx.inputable(container) && onElement(container);\r\n\r\n\t\tif (level == null) {\r\n\t\t\tlevel = 0;\r\n\t\t} else {\r\n\t\t\tlevel++;\r\n\t\t}\r\n\r\n\t\tfor (var i = 0, length = arr.length; i < length; i++) {\r\n\t\t\tvar el = arr[i];\r\n\t\t\tif (el && el.tagName) {\r\n\t\t\t\tel.childNodes.length && el.tagName !== 'SCRIPT' && el.getAttribute('data-jc') == null && sub.push(el);\r\n\t\t\t\tif (domx.inputable(el) && el.getAttribute('data-jc-bind') != null && onElement(el) === false)\r\n\t\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor (var i = 0, length = sub.length; i < length; i++) {\r\n\t\t\tel = sub[i];\r\n\t\t\tif (el && findcontrol(el, onElement, level) === false) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction com_valid(path, value, onlyComponent) {\r\n\r\n\t\tvar isExcept = value instanceof Array;\r\n\t\tvar key = 'valid' + path + (isExcept ? '>' + value.join('|') : '');\r\n\t\tvar except = null;\r\n\r\n\t\tif (isExcept) {\r\n\t\t\texcept = value;\r\n\t\t\tvalue = undefined;\r\n\t\t}\r\n\r\n\t\tif (typeof(value) !== 'boolean' && cache[key] !== undefined)\r\n\t\t\treturn cache[key];\r\n\r\n\t\tvar flags = null;\r\n\r\n\t\tif (isExcept) {\r\n\t\t\tvar is = false;\r\n\t\t\tflags = {};\r\n\t\t\texcept = except.remove(function(item) {\r\n\t\t\t\tif (item.substring(0, 1) === '@') {\r\n\t\t\t\t\tflags[item.substring(1)] = true;\r\n\t\t\t\t\tis = true;\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t});\r\n\t\t\t!is && (flags = null);\r\n\t\t\tisExcept = except.length > 0;\r\n\t\t}\r\n\r\n\t\tvar valid = true;\r\n\t\tvar arr = value !== undefined ? [] : null;\r\n\r\n\t\tvar index = path.lastIndexOf('.*');\r\n\t\tvar wildcard = index !== -1;\r\n\t\tif (index !== -1) {\r\n\t\t\tpath = path.substring(0, index);\r\n\t\t}\r\n\r\n\t\tpath = pathmaker(path);\r\n\r\n\t\tvar all = components;//M.components;\r\n\t\tfor (var i = 0, length = all.length; i < length; i++) {\r\n\t\t\tvar com = all[i];\r\n\r\n\t\t\tif (!com || com.$removed || !com.$loaded || !com.path || !com.$compare(path) || (isExcept && com.$except(except)))\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tif (flags && ((flags.visible && !com.visible()) || (flags.hidden && !com.hidden()) || (flags.enabled && com.find(SELINPUT).is(':disabled')) || (flags.disabled && com.find(SELINPUT).is(':enabled'))))\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tif (com.disabled || com.$valid_disabled) {\r\n\t\t\t\tarr && com.state && arr.push(com);\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tif (value === undefined) {\r\n\t\t\t\tif (com.$valid === false)\r\n\t\t\t\t\tvalid = false;\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tcom.state && arr.push(com);\r\n\r\n\t\t\tif (!onlyComponent) {\r\n\t\t\t\tif (wildcard || com.path === path) {\r\n\t\t\t\t\tcom.$valid = value;\r\n\t\t\t\t\tcom.$interaction(102);\r\n\t\t\t\t}\r\n\t\t\t} else if (onlyComponent._id === com._id) {\r\n\t\t\t\tcom.$valid = value;\r\n\t\t\t\tcom.$interaction(102);\r\n\t\t\t}\r\n\t\t\tif (com.$valid === false)\r\n\t\t\t\tvalid = false;\r\n\t\t}\r\n\r\n\t\tcache.clearPageData('valid');\r\n\t\tcache.setPageData(key, valid);  // cache[key] = valid\r\n\t\tlangx.state(arr, 1, 1);\r\n\t\treturn valid;\r\n\t}\r\n\r\n\r\n   /**\r\n   * sets a version for specific components.\r\n   * ex : version('textbox@1', 'dropdown@1');\r\n   */\r\n\tfunction version() { // W.VERSION = \r\n\t\tfor (var j = 0; j < arguments.length; j++) {\r\n\t\t\tvar keys = arguments[j].split(',');\r\n\t\t\tfor (var i = 0; i < keys.length; i++) {\r\n\t\t\t\tvar key = keys[i].trim();\r\n\t\t\t\tvar tmp = key.indexOf('@');\r\n\t\t\t\tif (tmp === -1) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tvar version = key.substring(tmp + 1);\r\n\t\t\t\tkey = key.substring(0, tmp);\r\n\t\t\t\tif (version) {\r\n\t\t\t\t\tversions[key] = version;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\r\n\t$.fn.FIND = function(selector, many, callback, timeout) {\r\n\r\n\t\tif ( langx.isFunction(many) ) {\r\n\t\t\ttimeout = callback;\r\n\t\t\tcallback = many;\r\n\t\t\tmany = undefined;\r\n\t\t}\r\n\r\n\t\tvar self = this;\r\n\t\tvar output = findcomponent(self, selector);\r\n\t\tif (langx.isFunction(callback)) {\r\n\r\n\t\t\tif (output.length) {\r\n\t\t\t\tcallback.call(output, output);\r\n\t\t\t\treturn self;\r\n\t\t\t}\r\n\r\n\t\t\tWAIT(function() {\r\n\t\t\t\tvar val = self.FIND(selector, many);\r\n\t\t\t\treturn val instanceof Array ? val.length > 0 : !!val;\r\n\t\t\t}, function(err) {\r\n\t\t\t\t// timeout\r\n\t\t\t\tif (!err) {\r\n\t\t\t\t\tvar val = self.FIND(selector, many);\r\n\t\t\t\t\tcallback.call(val ? val : W, val);\r\n\t\t\t\t}\r\n\t\t\t}, 500, timeout);\r\n\r\n\t\t\treturn self;\r\n\t\t}\r\n\r\n\t\treturn many ? output : output[0];\r\n\t};\r\n\r\n\t$.fn.SETTER = function(selector, name) {\r\n\r\n\t\tvar self = this;\r\n\t\tvar arg = [];\r\n\t\tvar beg = selector === true ? 3 : 2;\r\n\r\n\t\tfor (var i = beg; i < arguments.length; i++)\r\n\t\t\targ.push(arguments[i]);\r\n\r\n\t\tif (beg === 3) {\r\n\t\t\tselector = name;\r\n\t\t\tname = arguments[2];\r\n\r\n\t\t\tif (lazycom[selector] && lazycom[selector].state !== 3) {\r\n\r\n\t\t\t\tif (lazycom[selector].state === 1) {\r\n\t\t\t\t\tlazycom[selector].state = 2;\r\n\t\t\t\t\tEMIT('lazy', selector, true);\r\n\t\t\t\t\twarn('Lazy load: ' + selector);\r\n\t\t\t\t\tcompile();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tsetTimeout(function(arg) {\r\n\t\t\t\t\t$.fn.SETTER.apply(self, arg);\r\n\t\t\t\t}, 555, arguments);\r\n\r\n\t\t\t\treturn self;\r\n\t\t\t}\r\n\r\n\t\t\tself.FIND(selector, true, function(arr) {\r\n\t\t\t\tfor (var i = 0, length = arr.length; i < length; i++) {\r\n\t\t\t\t\tvar o = arr[i];\r\n\t\t\t\t\tif (typeof(o[name]) === TYPE_FN)\r\n\t\t\t\t\t\to[name].apply(o, arg);\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\to[name] = arg[0];\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t} else {\r\n\r\n\t\t\tif (lazycom[selector] && lazycom[selector].state !== 3) {\r\n\r\n\t\t\t\tif (lazycom[selector].state === 1) {\r\n\t\t\t\t\tlazycom[selector].state = 2;\r\n\t\t\t\t\tEMIT('lazy', selector, true);\r\n\t\t\t\t\twarn('Lazy load: ' + selector);\r\n\t\t\t\t\tcompile();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tsetTimeout(function(arg) {\r\n\t\t\t\t\t$.fn.SETTER.apply(self, arg);\r\n\t\t\t\t}, 555, arguments);\r\n\r\n\t\t\t\treturn self;\r\n\t\t\t}\r\n\r\n\t\t\tvar arr = self.FIND(selector, true);\r\n\t\t\tfor (var i = 0, length = arr.length; i < length; i++) {\r\n\t\t\t\tvar o = arr[i];\r\n\t\t\t\tif (typeof(o[name]) === TYPE_FN)\r\n\t\t\t\t\to[name].apply(o, arg);\r\n\t\t\t\telse\r\n\t\t\t\t\to[name] = arg[0];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn self;\r\n\t};\r\n\r\n\t$.fn.RECONFIGURE = function(selector, value) {\r\n\t\treturn this.SETTER(selector, 'reconfigure', value);\r\n\t};\r\n\r\n\r\n\tM.$formatter = [];\r\n\r\n\r\n   /**\r\n   * Evaluates a global formatter.\r\n   * @param  {String} path \r\n   * @param  {Object} value\r\n   * @param  {String} type \r\n   * @returns {Boolean}   \r\n   * OR\r\n   * Registers a global formatter.\r\n   * @param  {Function} value \r\n   * @param  {Boolean} path \r\n   */\r\n\tW.FORMATTER = M.formatter = function(value, path, type) {\r\n\r\n\t\tif (langx.isFunction(value)) {\r\n\t\t\t!M.$formatter && (M.$formatter = []);\r\n\r\n\t\t\t// Prepend\r\n\t\t\tif (path === true) {\r\n\t\t\t\tM.$formatter.unshift(value);\r\n\t\t\t} else {\r\n\t\t\t\tM.$formatter.push(value);\r\n\t\t\t}\r\n\r\n\t\t\treturn M;\r\n\t\t}\r\n\r\n\t\tvar a = M.$formatter;\r\n\t\tif (a && a.length) {\r\n\t\t\tfor (var i = 0, length = a.length; i < length; i++) {\r\n\t\t\t\tvar val = a[i].call(M, path, value, type);\r\n\t\t\t\tif (val !== undefined)\r\n\t\t\t\t\tvalue = val;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn value;\r\n\t};\r\n\r\n\r\n   /**\r\n   * Reconfigures all components according to the selector.\r\n   * @param  {String} selector \r\n   * @param  {String/Object} config A default configuration\r\n   */\r\n\tfunction reconfigure(selector, value) { // W.RECONFIGURE = \r\n\t\tsetter(true, selector, 'reconfigure', value);\r\n\t\treturn RECONFIGURE;\r\n\t};\r\n\r\n   /**\r\n   * Set a new value to the specific method in components.\r\n   * @param  {Boolean} wait Optional, can it wait for non-exist components? \r\n   * @param  {String} selector  \r\n   * @param  {String} name Property or Method name (can't be nested) \r\n   * @param  {Object} argA Optional, additional argument\r\n   * @param  {Object} argB Optional, additional argument\r\n   * @param  {Object} argN Optional, additional argument\r\n   */\r\n\tfunction setter(selector, name) { // W.SETTER\r\n\r\n\t\tvar arg = [];\r\n\t\tvar beg = selector === true ? 3 : 2;\r\n\r\n\t\tfor (var i = beg; i < arguments.length; i++) {\r\n\t\t\targ.push(arguments[i]);\r\n\t\t}\r\n\r\n\t\tif (beg === 3) {\r\n\r\n\t\t\tselector = name;\r\n\r\n\t\t\tif (lazycom[selector] && lazycom[selector].state !== 3) {\r\n\r\n\t\t\t\tif (lazycom[selector].state === 1) {\r\n\t\t\t\t\tlazycom[selector].state = 2;\r\n\t\t\t\t\tEMIT('lazy', selector, true);\r\n\t\t\t\t\twarn('Lazy load: ' + selector);\r\n\t\t\t\t\tcompile();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tsetTimeout(function(arg) {\r\n\t\t\t\t\targ[0] = true;\r\n\t\t\t\t\tW.SETTER.apply(W, arg);\r\n\t\t\t\t}, 555, arguments);\r\n\r\n\t\t\t\treturn SETTER;\r\n\t\t\t}\r\n\r\n\t\t\tname = arguments[2];\r\n\r\n\t\t\tFIND(selector, true, function(arr) {\r\n\t\t\t\tfor (var i = 0, length = arr.length; i < length; i++) {\r\n\t\t\t\t\tvar o = arr[i];\r\n\t\t\t\t\tif (typeof(o[name]) === TYPE_FN)\r\n\t\t\t\t\t\to[name].apply(o, arg);\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\to[name] = arg[0];\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} else {\r\n\r\n\t\t\tif (lazycom[selector] && lazycom[selector].state !== 3) {\r\n\r\n\t\t\t\tif (lazycom[selector].state === 1) {\r\n\t\t\t\t\tlazycom[selector].state = 2;\r\n\t\t\t\t\tEMIT('lazy', selector, true);\r\n\t\t\t\t\twarn('Lazy load: ' + selector);\r\n\t\t\t\t\tcompile();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tsetTimeout(function(arg) {\r\n\t\t\t\t\tW.SETTER.apply(W, arg);\r\n\t\t\t\t}, 555, arguments);\r\n\r\n\t\t\t\treturn SETTER;\r\n\t\t\t}\r\n\r\n\t\t\tvar arr = FIND(selector, true);\r\n\t\t\tfor (var i = 0, length = arr.length; i < length; i++) {\r\n\t\t\t\tvar o = arr[i];\r\n\t\t\t\tif (typeof(o[name]) === TYPE_FN)\r\n\t\t\t\t\to[name].apply(o, arg);\r\n\t\t\t\telse\r\n\t\t\t\t\to[name] = arg[0];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn SETTER;\r\n\t};\r\n\r\n\r\n\r\n\r\n   /**\r\n   * Reads a state, it works with dirty state.\r\n   * @param  {String} path \r\n   * @return {Boolean} \r\n   */\r\n\tfunction changed(path) {\r\n\t\treturn !com_dirty(path);\r\n\t};\r\n\r\n\r\n   /**\r\n   * Set a change for the path or can read the state, it works with dirty state.\r\n   * @param  {String} path \r\n   * @param  {Boolean} value Optional\r\n   * @return {Boolean} \r\n   */\r\n\tfunction change(path, value) {\r\n\t\tif (value == null) {\r\n\t\t\tvalue = true;\r\n\t\t}\r\n\t\treturn !com_dirty(path, !value);\r\n\t};\r\n\r\n\r\n\t/*\r\n\t * This method is same like EXEC() method but it returns a function.\r\n\t * It must be used as a callback. All callback arguments will be used for the targeted method.\r\n\t */\r\n\tfunction exec2(path, tmp) { //W.EXEC2 = \r\n\t\tvar is = path === true;\r\n\t\treturn function(a, b, c, d) {\r\n\t\t\tif (is) {\r\n\t\t\t\texec(tmp, path, a, b, c, d);\r\n\t\t\t} else {\r\n\t\t\t\texec(path, a, b, c, d);\r\n\t\t\t}\r\n\t\t};\r\n\t};\r\n\r\n  /**\r\n   * Executes a method according to the path. It wont't throw any exception if the method not exist.\r\n   * @param  {Boolean} wait Optional enables a waiter for the method instance (if method doesn't exist) \r\n   * @param  {String} path \r\n   * @param  {Object} a - Optional, additional argument\r\n   * @param  {Object} b - Optional, additional argument\r\n   * @param  {Object} c - Optional, additional argument\r\n   */\r\n\tfunction exec(path) {   // W.EXEC = \r\n\r\n\t\tvar arg = [];\r\n\t\tvar f = 1;\r\n\t\tvar wait = false;\r\n\t\tvar p;\r\n\t\tvar ctx = this;\r\n\r\n\t\tif (path === true) {\r\n\t\t\twait = true;\r\n\t\t\tpath = arguments[1];\r\n\t\t\tf = 2;\r\n\t\t}\r\n\r\n\t\tpath = path.env();\r\n\r\n\t\tfor (var i = f; i < arguments.length; i++) {\r\n\t\t\targ.push(arguments[i]);\r\n\t\t}\r\n\r\n\t\tvar c = path.charCodeAt(0);\r\n\r\n\t\t// Event\r\n\t\tif (c === 35) { // # , ex: EXEC('#submit', true); --> EMIT('submit', true);\r\n\t\t\tp = path.substring(1);\r\n\t\t\tif (wait) {\r\n\t\t\t\t!events[p] && exechelper(ctx, path, arg);\r\n\t\t\t} else {\r\n\t\t\t\tEMIT.call(ctx, p, arg[0], arg[1], arg[2], arg[3], arg[4]);\r\n\t\t\t}\r\n\t\t\treturn EXEC;\r\n\t\t}\r\n\r\n\t\tvar ok = 0;\r\n\r\n\t\t// PLUGINS\r\n\t\tif (c === 64) { // @ , ex: EXEC('@PLUGIN.method_name');\r\n\t\t\tvar index = path.indexOf('.');\r\n\t\t\tp = path.substring(1, index);\r\n\t\t\tvar ctrl = plugins.find(p); //W.PLUGINS[p];\r\n\t\t\tif (ctrl) {\r\n\t\t\t\tvar fn = ctrl[path.substring(index + 1)];\r\n\t\t\t\tif (langx.isFunction(fn) ) { // if (typeof(fn) === TYPE_FN) {\r\n\t\t\t\t\tfn.apply(ctx === Window ? ctrl : ctx, arg);\r\n\t\t\t\t\tok = 1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (wait && !ok) {\r\n\t\t\t exechelper(ctx, path, arg);\r\n\t\t\t}\r\n\t\t\treturn EXEC;\r\n\t\t}\r\n\r\n\t\t// PLUGINS\r\n\t\tvar index = path.indexOf('/'); // ex : EXEC('PLUGIN/method_name');\r\n\t\tif (index !== -1) {\r\n\t\t\tp = path.substring(0, index);\r\n\t\t\tvar ctrl = plugins.find(p); //W.PLUGINS[p];\r\n\t\t\tvar fn = path.substring(index + 1);\r\n\t\t\tif (ctrl && typeof(ctrl[fn]) === TYPE_FN) {\r\n\t\t\t\tctrl[fn].apply(ctx === W ? ctrl : ctx, arg);\r\n\t\t\t\tok = 1;\r\n\t\t\t}\r\n\r\n\t\t\tif (wait && !ok) {\r\n\t\t\t exechelper(ctx, path, arg);\r\n\t\t\t}\r\n\t\t\treturn EXEC;\r\n\t\t}\r\n\r\n\t\tvar fn = paths.get(path);\r\n\r\n\t\tif (langx.isFunction(fn)) {\r\n\t\t\tfn.apply(ctx, arg);\r\n\t\t\tok = 1;\r\n\t\t}\r\n\r\n\t\tif (wait && !ok) {\r\n\t\t\texechelper(ctx, path, arg);\r\n\t\t}\r\n\t\treturn exec;\r\n\t};\r\n\r\n\r\n\r\n   /**\r\n   * Checks dirty and valid paths for all declared components on the path. \r\n   * If the method return true then the components are validated and \r\n   * some component has been changed by user (otherwise: false).\r\n   * @param  {String} path \r\n   * @param  {String|Array} except  With absolute paths for skipping\r\n   * @returns {Boolean}   \r\n   */\r\n\tfunction can(path, except) { // W.CAN = \r\n\t\tpath = pathmaker(path);\r\n\t\treturn !com_dirty(path, except) && com_valid(path, except);\r\n\t}\r\n\r\n   /**\r\n   * Checks dirty and valid paths for all declared components on the path. \r\n   * If the method return false then the components are validated and \r\n   * some component has been changed by user (otherwise: true).\r\n   * @param  {String} path \r\n   * @param  {String|Array} except  With absolute paths for skipping\r\n   * @returns {Boolean}   \r\n   */\r\n\tfunction disabled(path, except) { // W.DISABLED = \r\n\t\tpath = pathmaker(path);\r\n\t\treturn com_dirty(path, except) || !com_valid(path, except);\r\n\t}\r\n\r\n   /**\r\n   * Highlights all components on the path as invalid. \r\n   * @param  {String} path \r\n   * @param  {String|Array} except  With absolute paths for skipping\r\n   * @returns {Boolean}   \r\n   */\r\n\tfunction invalid(path, onlyComponent) {  // W.INVALID = \r\n\t\tpath = pathmaker(path);\r\n\t\tif (path) {\r\n\t\t\tcom_dirty(path, false, onlyComponent, true);\r\n\t\t\tcom_valid(path, false, onlyComponent);\r\n\t\t}\r\n\t\treturn W;\r\n\t};\r\n\r\n\r\n\t// ===============================================================\r\n\t// Query Extendtion\r\n\t// ===============================================================\r\n\r\n\r\n\t$.fn.component = function() {\r\n\t\treturn domx.findInstance(this, '$com');\r\n\t};\r\n\r\n\t$.fn.components = function(fn) {\r\n\t\t//var all = this.find(ATTRCOM);\r\n\t\tvar all = helper.nested(this);\r\n\t\tvar output = null;\r\n\t\t//all.each(function(index) {\r\n\t\tall.forEach(function(com){\r\n\t\t\t//var com = this.$com;\r\n\t\t\t//if (com) {\r\n\t\t\t\tvar isarr = com instanceof Array;\r\n\t\t\t\tif (isarr) {\r\n\t\t\t\t\tcom.forEach(function(o) {\r\n\t\t\t\t\t\tif (o && o.$ready && !o.$removed) {\r\n\t\t\t\t\t\t\tif (fn)\r\n\t\t\t\t\t\t\t\treturn fn.call(o, index);\r\n\t\t\t\t\t\t\tif (!output)\r\n\t\t\t\t\t\t\t\toutput = [];\r\n\t\t\t\t\t\t\toutput.push(o);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t} else if (com && com.$ready && !com.$removed) {\r\n\t\t\t\t\tif (fn)\r\n\t\t\t\t\t\treturn fn.call(com, index);\r\n\t\t\t\t\tif (!output)\r\n\t\t\t\t\t\toutput = [];\r\n\t\t\t\t\toutput.push(com);\r\n\t\t\t\t}\r\n\t\t\t//}\r\n\t\t});\r\n\t\treturn fn ? all : output;\r\n\t};\r\n\r\n\r\n   /**\r\n   * Create new components dynamically.\r\n   * @param  {String|Array<String>} declaration \r\n   * @param  {jQuery Element/Component/Scope/Plugin} element optional,a parent element (default: \"document.body\")\r\n   */\r\n\tfunction add(value, element) { // W.ADD =\r\n\t\tif (element instanceof COM || element instanceof Scope || element instanceof Plugin) {\r\n\t\t\telement = element.element;\r\n\t\t}\r\n\t\tif (value instanceof Array) {\r\n\t\t\tfor (var i = 0; i < value.length; i++)\r\n\t\t\t\tADD(value[i], element);\r\n\t\t} else {\r\n\t\t\t$(element || document.body).append('<div data-jc=\"{0}\"></div>'.format(value));\r\n\t\t\tsetTimeout2('ADD', COMPILE, 10);\r\n\t\t}\r\n\t};\r\n\r\n\tlangx.mixin(components,{\r\n\t\tadd,\r\n\r\n\t\tattrcom, // \r\n\t\texec,\r\n\t\texec2,\r\n\t});\r\n\r\n\tvar cache = {}; // lwf\r\n\r\n\t/*\r\n\t * Finds all component according to the selector.\r\n\t */\r\n\tfunction find(value, many, noCache, callback) { //W.FIND = \r\n\r\n\t\tvar isWaiting = false;\r\n\r\n\t\tif (langx.isFunction(many)) {\r\n\t\t\tisWaiting = true;\r\n\t\t\tcallback = many;\r\n\t\t\tmany = undefined;\r\n\t\t\t// noCache = undefined;\r\n\t\t\t// noCache can be timeout\r\n\t\t} else if (langx.isFunction(noCache)) {\r\n\t\t\tvar tmp = callback;\r\n\t\t\tisWaiting = true;\r\n\t\t\tcallback = noCache;\r\n\t\t\tnoCache = tmp;\r\n\t\t\t// noCache can be timeout\r\n\t\t}\r\n\r\n\t\tif (isWaiting) {\r\n\t\t\tlangx.isWaiting(function() {  // WAIT\r\n\t\t\t\tvar val = FIND(value, many, noCache);\r\n\t\t\t\tif (lazycom[value] && lazycom[value].state === 1) {\r\n\t\t\t\t\tlazycom[value].state = 2;\r\n\t\t\t\t\ttopic.emit('lazy', value, true); // EMIT\r\n\t\t\t\t\twarn('Lazy load: ' + value);\r\n\t\t\t\t\tcompile();\r\n\t\t\t\t}\r\n\t\t\t\treturn val instanceof Array ? val.length > 0 : !!val;\r\n\t\t\t}, function(err) {\r\n\t\t\t\t// timeout\r\n\t\t\t\tif (!err) {\r\n\t\t\t\t\tvar val = FIND(value, many);\r\n\t\t\t\t\tcallback.call(val ? val : W, val);\r\n\t\t\t\t}\r\n\t\t\t}, 500, noCache);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Element\r\n\t\tif (typeof(value) === 'object') {\r\n\t\t\tif (!(value instanceof jQuery)) {\r\n\t\t\t\tvalue = $(value);\r\n\t\t\t}\r\n\t\t\tvar output = findcomponent(value, '');\r\n\t\t\treturn many ? output : output[0];\r\n\t\t}\r\n\r\n\t\tvar key, output;\r\n\r\n\t\tif (!noCache) {\r\n\t\t\tkey = 'find.' + value + '.' + (many ? 0 : 1);\r\n\t\t\toutput = cache[key];\r\n\t\t\tif (output) {\r\n\t\t\t\treturn output;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar r = findcomponent(null, value);\r\n\t\tif (!many) {\r\n\t\t\tr = r[0];\r\n\t\t}\r\n\t\toutput = r;\r\n\t\tif (!noCache) {\r\n\t\t\tcache[key] = output;\r\n\t\t}\r\n\t\treturn output;\r\n\t};\r\n\r\n\tfunction usage(name, expire, path, callback) { //W.LASTMODIFICATION = W.USAGE = M.usage = \r\n\r\n\t\tvar type = typeof(expire);\r\n\t\tif (type === TYPE_S) {\r\n\t\t\t//var dt = W.NOW = W.DATETIME = new Date();\r\n\t\t\tvar dt = langx.now(true);\r\n\t\t\texpire = dt.add('-' + expire.env()).getTime();\r\n\t\t} else if (type === TYPE_N)\r\n\t\t\texpire = Date.now() - expire;\r\n\r\n\t\tif (typeof(path) === TYPE_FN) {\r\n\t\t\tcallback = path;\r\n\t\t\tpath = undefined;\r\n\t\t}\r\n\r\n\t\tvar arr = [];\r\n\t\tvar a = null;\r\n\r\n\t\tif (path) {\r\n\t\t\ta = FIND('.' + path, true);\r\n\t\t} else {\r\n\t\t\ta = components;//M.components;\r\n\t\t}\r\n\r\n\t\tfor (var i = 0; i < a.length; i++) {\r\n\t\t\tvar c = a[i];\r\n\t\t\tif (c.usage[name] >= expire) {\r\n\t\t\t\tif (callback)\r\n\t\t\t\t\tcallback(c);\r\n\t\t\t\telse\r\n\t\t\t\t\tarr.push(c);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn callback ? M : arr;\r\n\t}\r\n\r\n\tfunction default2(path, timeout, onlyComponent, reset) { //M.default = \r\n\r\n\t\tif (timeout > 0) {\r\n\t\t\tsetTimeout(function() {\r\n\t\t\t\tdefault2(path, 0, onlyComponent, reset);\r\n\t\t\t}, timeout);\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\tif (typeof(onlyComponent) === 'boolean') {\r\n\t\t\treset = onlyComponent;\r\n\t\t\tonlyComponent = null;\r\n\t\t}\r\n\r\n\t\tif (reset === undefined) {\r\n\t\t\treset = true;\r\n\t\t}\r\n\r\n\t\tpath = paths.pathmaker(path.replaceWildcard()); //pathmaker(path.replace(REGWILDCARD, ''));\r\n\r\n\t\t// Reset scope\r\n\t\tvar key = path.replace(/\\.\\*$/, '');\r\n\t\tvar fn = defaults['#' + HASH(key)];\r\n\t\tvar tmp;\r\n\r\n\t\tif (fn) {\r\n\t\t\ttmp = fn();\r\n\t\t\tset(key, tmp);\r\n\t\t}\r\n\r\n\t\tvar arr = [];\r\n\t\tvar all = components;//M.components;\r\n\r\n\t\tfor (var i = 0, length = all.length; i < length; i++) {\r\n\t\t\tvar com = all[i];\r\n\r\n\t\t\tif (!com || com.$removed || com.disabled || !com.$loaded || !com.path || !com.$compare(path)) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tif (com.state) {\r\n\t\t\t\tarr.push(com);\r\n\t\t\t}\r\n\r\n\t\t\tif (onlyComponent && onlyComponent._id !== com._id) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tif (com.$default) {\r\n\t\t\t com.set(com.$default(), 3);\r\n\t\t\t}\r\n\r\n\t\t\tif (!reset) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tfindcontrol2(com);\r\n\r\n\t\t\tif (!com.$dirty_disabled) {\r\n\t\t\t\tcom.$dirty = true;\r\n\t\t\t}\r\n\t\t\tif (!com.$valid_disabled) {\r\n\t\t\t\tcom.$valid = true;\r\n\t\t\t\tcom.$validate = false;\r\n\t\t\t\tif (com.validate) {\r\n\t\t\t\t\tcom.$valid = com.validate(com.get());\r\n\t\t\t\t\tcom.$interaction(102);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (reset) {\r\n\t\t\tcache.clearPageData('valid', 'dirty');\r\n\t\t\tlangx.state(arr, 3, 3);\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t}\r\n\r\n\r\n\r\n\r\n\treturn jc.views = {\r\n\t\tcomponents,\r\n\t\tchanged : changed,\r\n\t\tchange : change,\r\n\t\tcleaner,\r\n\t\tcleaner2,\r\n\t\tdefault2,\r\n\t\teach,\r\n\t\tfind,\r\n\t\trefresh,\r\n\t\treset,\r\n\t\tsetter,\r\n\t\tusage,\r\n\t\tversion,\r\n\r\n\t\textend,\r\n\t\textend2,\r\n\t\tinc,\r\n\t\tinc2,\r\n\t\tpush,\r\n\t\tpush2,\r\n\t\tupdate,\r\n\t\tupdate2\r\n\r\n\t};\r\n\r\n});"]}