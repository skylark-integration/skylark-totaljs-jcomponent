{"version":3,"sources":["runtime.js"],"names":["define","keypressdelay","self","com","$com","$jctimeout","dirty","getter","value","$","document","ready","$ready","clearTimeout","load","Window","on","mediaquery","this","$removed","$jckeypress","$jcevent","undefined","tmp","attrcom","config","$realtime","$binding","MD","keypress","$jcdelay","$delay","delay","$jconly","$keypress","setTimeout","e","type","$jcskip","$skip","setter","get","path","tagName","sel","selectedIndex","checked","setterX","compile","$domready"],"mappings":"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","file":"../runtime.js","sourcesContent":["define([],function(){\r\n\r\n\tfunction keypressdelay(self) {\r\n\t\tvar com = self.$com;\r\n\t\t// Reset timeout\r\n\t\tself.$jctimeout = 0;\r\n\t\t// It's not dirty\r\n\t\tcom.dirty(false, true);\r\n\t\t// Binds a value\r\n\t\tcom.getter(self.value, true);\r\n\t}\r\n\r\n\r\n\tfunction emitwatch(path, value, type) {\r\n\t\tfor (var i = 0, length = watches.length; i < length; i++) {\r\n\t\t\tvar self = watches[i];\r\n\t\t\tif (self.path === '*') {\r\n\t\t\t\tself.fn.call(self.context, path, self.format ? self.format(value, path, type) : value, type);\r\n\t\t\t} else if (path.length > self.path.length) {\r\n\t\t\t\tvar index = path.lastIndexOf('.', self.path.length);\r\n\t\t\t\tif (index === -1 ? false : self.path === path.substring(0, index)) {\r\n\t\t\t\t\tvar val = getx(self.path); // GET\r\n\t\t\t\t\tself.fn.call(self.context, path, self.format ? self.format(val, path, type) : val, type);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tfor (var j = 0, jl = self.$path.length; j < jl; j++) {\r\n\t\t\t\t\tif (self.$path[j] === path) {\r\n\t\t\t\t\t\tvar val = get2(self.path);\r\n\t\t\t\t\t\tself.fn.call(self.context, path, self.format ? self.format(val, path, type) : val, type);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\r\n\t$(document).ready(function() {\r\n\r\n\t\tif ($ready) {\r\n\t\t\tclearTimeout($ready);\r\n\t\t\tload();\r\n\t\t}\r\n\r\n\t\t$(Window).on('orientationchange', mediaquery);\r\n\r\n\t\t$(document).on('input', 'input[data-jc-bind],textarea[data-jc-bind]', function() {\r\n\r\n\t\t\t// realtime binding\r\n\t\t\tvar self = this;\r\n\t\t\tvar com = self.$com;\r\n\r\n\t\t\tif (!com || com.$removed || !com.getter || self.$jckeypress === false) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tself.$jcevent = 2;\r\n\r\n\t\t\tif (self.$jckeypress === undefined) {\r\n\t\t\t\tvar tmp = attrcom(self, 'keypress');\r\n\t\t\t\tif (tmp)\r\n\t\t\t\t\tself.$jckeypress = tmp === 'true';\r\n\t\t\t\telse if (com.config.$realtime != null)\r\n\t\t\t\t\tself.$jckeypress = com.config.$realtime === true;\r\n\t\t\t\telse if (com.config.$binding)\r\n\t\t\t\t\tself.$jckeypress = com.config.$binding === 1;\r\n\t\t\t\telse\r\n\t\t\t\t\tself.$jckeypress = MD.keypress;\r\n\t\t\t\tif (self.$jckeypress === false)\r\n\t\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (self.$jcdelay === undefined) {\r\n\t\t\t\tself.$jcdelay = +(attrcom(self, 'keypress-delay') || com.config.$delay || MD.delay);\r\n\t\t\t}\r\n\r\n\t\t\tif (self.$jconly === undefined) {\r\n\t\t\t\tself.$jconly = attrcom(self, 'keypress-only') === 'true' || com.config.$keypress === true || com.config.$binding === 2;\r\n\t\t\t}\r\n\r\n\t\t\tif (self.$jctimeout) {\r\n\t\t\t\tclearTimeout(self.$jctimeout);\t\r\n\t\t\t} \r\n\t\t\tself.$jctimeout = setTimeout(keypressdelay, self.$jcdelay, self);\r\n\t\t});\r\n\r\n\t\t$(document).on('focus blur', 'input[data-jc-bind],textarea[data-jc-bind],select[data-jc-bind]', function(e) {\r\n\r\n\t\t\tvar self = this;\r\n\t\t\tvar com = self.$com;\r\n\r\n\t\t\tif (!com || com.$removed || !com.getter)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tif (e.type === 'focusin')\r\n\t\t\t\tself.$jcevent = 1;\r\n\t\t\telse if (self.$jcevent === 1) {\r\n\t\t\t\tcom.dirty(false, true);\r\n\t\t\t\tcom.getter(self.value, 3);\r\n\t\t\t} else if (self.$jcskip) {\r\n\t\t\t\tself.$jcskip = false;\r\n\t\t\t} else {\r\n\t\t\t\t// formatter\r\n\t\t\t\tvar tmp = com.$skip;\r\n\t\t\t\tif (tmp)\r\n\t\t\t\t\tcom.$skip = false;\r\n\t\t\t\tcom.setter(com.get(), com.path, 2);\r\n\t\t\t\tif (tmp) {\r\n\t\t\t\t\tcom.$skip = tmp;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t$(document).on('change', 'input[data-jc-bind],textarea[data-jc-bind],select[data-jc-bind]', function() {\r\n\r\n\t\t\tvar self = this;\r\n\t\t\tvar com = self.$com;\r\n\r\n\t\t\tif (self.$jconly || !com || com.$removed || !com.getter)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tif (self.$jckeypress === false) {\r\n\t\t\t\t// bind + validate\r\n\t\t\t\tself.$jcskip = true;\r\n\t\t\t\tcom.getter(self.value, false);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tswitch (self.tagName) {\r\n\t\t\t\tcase 'SELECT':\r\n\t\t\t\t\tvar sel = self[self.selectedIndex];\r\n\t\t\t\t\tself.$jcevent = 2;\r\n\t\t\t\t\tcom.dirty(false, true);\r\n\t\t\t\t\tcom.getter(sel.value, false);\r\n\t\t\t\t\treturn;\r\n\t\t\t\tcase 'INPUT':\r\n\t\t\t\t\tif (self.type === 'checkbox' || self.type === 'radio') {\r\n\t\t\t\t\t\tself.$jcevent = 2;\r\n\t\t\t\t\t\tcom.dirty(false, true);\r\n\t\t\t\t\t\tcom.getter(self.checked, false);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\tif (self.$jctimeout) {\r\n\t\t\t\tcom.dirty(false, true);\r\n\t\t\t\tcom.getter(self.value, true);\r\n\t\t\t\tclearTimeout(self.$jctimeout);\r\n\t\t\t\tself.$jctimeout = 0;\r\n\t\t\t} else {\r\n\t\t\t\tself.$jcskip = true;\r\n\t\t\t\tcom.setter && com.setterX(com.get(), self.path, 2);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tsetTimeout(compile, 2);\r\n\t\t$domready = true;\r\n\t});\r\n\t\r\n});"]}