{"version":3,"sources":["binding/VirtualBinder.js"],"names":["define","langx","$","parsebinder","ATTRBIND","VBinder","html","t","this","e","element","binders","fn","el","b","attrd","attr","$jcbind","empties","array","filter","each","find","VBP","prototype","on","apply","arguments","remove","off","set","path","model","i","length","val","result","exec"],"mappings":";;;;;;;AAAAA,QACC,WACA,iBACA,WACC,SAASC,EAAOC,EAAGC,GACpB,IAAIC,EAAW,kCAEf,SAASC,EAAQC,GAChB,IAAIC,EAAIC,KACJC,EAAIF,EAAEG,QAAUR,EAAEI,GACtBC,EAAEI,WACF,IAAIC,EAAK,WACR,IACIC,EAAKX,EADCM,MAENM,EAAID,EAAGE,MAAM,SAAWF,EAAGG,KAAK,SAAWH,EAAGE,MAAM,SAF9CP,KAGNS,QAAUd,EAHJK,KAGqBM,EAAGb,EAAMiB,QAAQC,MAAMZ,EAAEI,UAKzDF,EAAEW,OAAOhB,GAAUiB,KAAKT,GACxBH,EAAEa,KAAKlB,GAAUiB,KAAKT,GAGvB,IAAIW,EAAMlB,EAAQmB,UAuClB,OArCAD,EAAIE,GAAK,WACR,IAAIlB,EAAIC,KAER,OADAD,EAAEG,QAAQe,GAAGC,MAAMnB,EAAEG,QAASiB,WACvBpB,GAGRgB,EAAIK,OAAS,WACZ,IAAIrB,EAAIC,KACJC,EAAIF,EAAEG,QAMV,OALAD,EAAEa,KAAK,KAAKO,MACZpB,EAAEoB,MAAMD,SACRrB,EAAEG,QAAU,KACZH,EAAEI,QAAU,KACZJ,EAAI,MAILgB,EAAIO,IAAM,SAASC,EAAMC,GAExB,IAAIzB,EAAIC,KAEK,MAATwB,IACHA,EAAQD,EACRA,EAAO,IAGR,IAAK,IAAIE,EAAI,EAAGA,EAAI1B,EAAEI,QAAQuB,OAAQD,IAAK,CAC1C,IAAInB,EAAIP,EAAEI,QAAQsB,GAClB,IAAKF,GAAQA,IAASjB,EAAEiB,KAAM,CAC7B,IAAII,EAAMJ,IAASjB,EAAEiB,KAAOC,EAAQ/B,EAAMmC,OAAOJ,EAAMlB,EAAEiB,MACzDxB,EAAEI,QAAQsB,GAAGI,KAAKF,EAAKrB,EAAEiB,OAI3B,OAAOxB,GAGDF","file":"../../binding/VirtualBinder.js","sourcesContent":["define([\r\n\t\"../langx\",\r\n\t\"../utils/query\",\r\n\t\"./parse\"\r\n],function(langx, $, parsebinder){\r\n\tvar ATTRBIND = '[data-bind],[bind],[data-vbind]';\r\n\t\r\n\tfunction VBinder(html) {\r\n\t\tvar t = this;\r\n\t\tvar e = t.element = $(html);\r\n\t\tt.binders = [];\r\n\t\tvar fn = function() {\r\n\t\t\tvar dom = this;\r\n\t\t\tvar el = $(dom);\r\n\t\t\tvar b = el.attrd('bind') || el.attr('bind') || el.attrd('vbind');\r\n\t\t\tdom.$jcbind = parsebinder(dom, b, langx.empties.array,t.binders); //EMPTYARRAY);\r\n\t\t\t//if(dom.$jcbind) {\r\n\t\t\t//   t.binders.push(dom.$jcbind);\r\n\t\t\t//}\r\n\t\t};\r\n\t\te.filter(ATTRBIND).each(fn);\r\n\t\te.find(ATTRBIND).each(fn);\r\n\t}\r\n\r\n\tvar VBP = VBinder.prototype;\r\n\r\n\tVBP.on = function() {\r\n\t\tvar t = this;\r\n\t\tt.element.on.apply(t.element, arguments);\r\n\t\treturn t;\r\n\t};\r\n\r\n\tVBP.remove = function() {\r\n\t\tvar t = this;\r\n\t\tvar e = t.element;\r\n\t\te.find('*').off();\r\n\t\te.off().remove();\r\n\t\tt.element = null;\r\n\t\tt.binders = null;\r\n\t\tt = null;\r\n\t\treturn t;\r\n\t};\r\n\r\n\tVBP.set = function(path, model) {\r\n\r\n\t\tvar t = this;\r\n\r\n\t\tif (model == null) {\r\n\t\t\tmodel = path;\r\n\t\t\tpath = '';\r\n\t\t}\r\n\r\n\t\tfor (var i = 0; i < t.binders.length; i++) {\r\n\t\t\tvar b = t.binders[i];\r\n\t\t\tif (!path || path === b.path) {\r\n\t\t\t\tvar val = path || !b.path ? model : langx.result(model,b.path); // get(b.path, model)\r\n\t\t\t\tt.binders[i].exec(val, b.path);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn t;\r\n\t};\r\n\r\n\treturn VBinder;\r\n\r\n});\r\n\r\n"]}