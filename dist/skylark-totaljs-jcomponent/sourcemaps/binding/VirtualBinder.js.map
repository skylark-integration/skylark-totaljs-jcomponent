{"version":3,"sources":["binding/VirtualBinder.js"],"names":["define","langx","$","parsebinder","ATTRBIND","VBinder","html","t","this","e","element","binders","fn","el","b","attrd","attr","$jcbind","empties","array","push","filter","each","find","VBP","prototype","on","apply","arguments","remove","off","set","path","model","i","length","val","$get","exec"],"mappings":";;;;;;;AAAAA,QACC,WACA,iBACA,iBACC,SAASC,EAAOC,EAAGC,GACpB,IAAIC,EAAW,kCAEf,SAASC,EAAQC,GAChB,IAAIC,EAAIC,KACJC,EAAIF,EAAEG,QAAUR,EAAEI,GACtBC,EAAEI,WACF,IAAIC,EAAK,WACR,IACIC,EAAKX,EADCM,MAENM,EAAID,EAAGE,MAAM,SAAWF,EAAGG,KAAK,SAAWH,EAAGE,MAAM,SAF9CP,KAGNS,QAAUd,EAHJK,KAGqBM,EAAGb,EAAMiB,QAAQC,OAHtCX,KAIHS,SACJV,EAAEI,QAAQS,KALHZ,KAKYS,UAGvBR,EAAEY,OAAOjB,GAAUkB,KAAKV,GACxBH,EAAEc,KAAKnB,GAAUkB,KAAKV,GAGvB,IAAIY,EAAMnB,EAAQoB,UAuClB,OArCAD,EAAIE,GAAK,WACR,IAAInB,EAAIC,KAER,OADAD,EAAEG,QAAQgB,GAAGC,MAAMpB,EAAEG,QAASkB,WACvBrB,GAGRiB,EAAIK,OAAS,WACZ,IAAItB,EAAIC,KACJC,EAAIF,EAAEG,QAMV,OALAD,EAAEc,KAAK,KAAKO,MACZrB,EAAEqB,MAAMD,SACRtB,EAAEG,QAAU,KACZH,EAAEI,QAAU,KACZJ,EAAI,MAILiB,EAAIO,IAAM,SAASC,EAAMC,GAExB,IAAI1B,EAAIC,KAEK,MAATyB,IACHA,EAAQD,EACRA,EAAO,IAGR,IAAK,IAAIE,EAAI,EAAGA,EAAI3B,EAAEI,QAAQwB,OAAQD,IAAK,CAC1C,IAAIpB,EAAIP,EAAEI,QAAQuB,GAClB,IAAKF,GAAQA,IAASlB,EAAEkB,KAAM,CAC7B,IAAII,EAAMJ,IAASlB,EAAEkB,KAAOC,EAAQI,KAAKvB,EAAEkB,KAAMC,GACjD1B,EAAEI,QAAQuB,GAAGI,KAAKF,EAAKtB,EAAEkB,OAI3B,OAAOzB,GAGDF","file":"../../binding/VirtualBinder.js","sourcesContent":["define([\r\n\t\"../langx\",\r\n\t\"../utils/query\",\r\n\t\"./parsebinder\"\r\n],function(langx, $, parsebinder){\r\n\tvar ATTRBIND = '[data-bind],[bind],[data-vbind]';\r\n\t\r\n\tfunction VBinder(html) {\r\n\t\tvar t = this;\r\n\t\tvar e = t.element = $(html);\r\n\t\tt.binders = [];\r\n\t\tvar fn = function() {\r\n\t\t\tvar dom = this;\r\n\t\t\tvar el = $(dom);\r\n\t\t\tvar b = el.attrd('bind') || el.attr('bind') || el.attrd('vbind');\r\n\t\t\tdom.$jcbind = parsebinder(dom, b, langx.empties.array); //EMPTYARRAY);\r\n\t\t\tif(dom.$jcbind) {\r\n\t\t\t   t.binders.push(dom.$jcbind);\r\n\t\t\t}\r\n\t\t};\r\n\t\te.filter(ATTRBIND).each(fn);\r\n\t\te.find(ATTRBIND).each(fn);\r\n\t}\r\n\r\n\tvar VBP = VBinder.prototype;\r\n\r\n\tVBP.on = function() {\r\n\t\tvar t = this;\r\n\t\tt.element.on.apply(t.element, arguments);\r\n\t\treturn t;\r\n\t};\r\n\r\n\tVBP.remove = function() {\r\n\t\tvar t = this;\r\n\t\tvar e = t.element;\r\n\t\te.find('*').off();\r\n\t\te.off().remove();\r\n\t\tt.element = null;\r\n\t\tt.binders = null;\r\n\t\tt = null;\r\n\t\treturn t;\r\n\t};\r\n\r\n\tVBP.set = function(path, model) {\r\n\r\n\t\tvar t = this;\r\n\r\n\t\tif (model == null) {\r\n\t\t\tmodel = path;\r\n\t\t\tpath = '';\r\n\t\t}\r\n\r\n\t\tfor (var i = 0; i < t.binders.length; i++) {\r\n\t\t\tvar b = t.binders[i];\r\n\t\t\tif (!path || path === b.path) {\r\n\t\t\t\tvar val = path || !b.path ? model : $get(b.path, model);\r\n\t\t\t\tt.binders[i].exec(val, b.path);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn t;\r\n\t};\r\n\r\n\treturn VBinder;\r\n\r\n});\r\n\r\n"]}