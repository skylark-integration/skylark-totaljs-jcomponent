{"version":3,"sources":["binding/parsebinder.js"],"names":["define","langx","$","func","pathmaker","findFormat","jBinder","REGMETA","parsebinderskip","str","a","arguments","i","length","indexOf","parsebinder","el","b","scopes","r","meta","split","tmp","output","m","push","join","path","index","obj","cls","sub","e","item","trim","v","k","substring","rki","fn","rebinddecode","isValue","com","GET","keys","j","s","notvisible","notnull","backup","c","replace","text","$nn","name","isFunction","$nv","test","scr","find","Tangular","compile","html","Function","attr","val","prop","p","pop","call","format","virtual","isCtrl","parent","parentNode","$ctrl","$dataw","watch","value","data","$com","Object","key","child","o","selector","classes","scope","initscopes","arr","$data","items","binders","track","init","bindersnew"],"mappings":"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","file":"../../binding/parsebinder.js","sourcesContent":["define([\r\n\t\"../langx\",\r\n\t\"../utils/query\",\r\n\t\"./func\",\r\n\t\"./pathmaker\",\r\n\t\"./findFormat\",\r\n\t\"./Binder\"\r\n],function(langx, $,func,pathmaker,findFormat,jBinder){\r\n\t\r\n\tvar REGMETA = /_{2,}/;\r\n\t\r\n\tfunction parsebinderskip(str) {\r\n\t\tvar a = arguments;\r\n\t\tfor (var i = 1; i < a.length; i++) {\r\n\t\t\tif (str.indexOf(a[i]) !== -1) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\r\n\t/*\r\n\t * A binder declaration:\r\n\t * <div data-bind=\"path.to.property__command1:exp__command2:exp__commandN:exp\"></div>\r\n\t */\r\n\tfunction parsebinder(el, b, scopes, r) {\r\n\t\tvar meta = b.split(REGMETA);\r\n\t\tif (meta.indexOf('|') !== -1) {\r\n\t\t\t//Multiple watchers (__|__)\r\n\t\t\tif (!r) {\r\n\t\t\t\tvar tmp = [];\r\n\t\t\t\tvar output = [];\r\n\t\t\t\tfor (var i = 0; i < meta.length; i++) {\r\n\t\t\t\t\tvar m = meta[i];\r\n\t\t\t\t\tif (m === '|') {\r\n\t\t\t\t\t\tif (tmp.length) {\r\n\t\t\t\t\t\t\toutput.push(parsebinder(el, tmp.join('__'), scopes));\r\n\t\t\t\t\t\t} \r\n\t\t\t\t\t\ttmp = [];\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (m) {\r\n\t\t\t\t\t\ttmp.push(m);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (tmp.length) {\r\n\t\t\t\t\toutput.push(parsebinder(el, tmp.join('__'), scopes, true));\r\n\t\t\t\t} \r\n\t\t\t}\r\n\t\t\treturn output;\r\n\t\t}\r\n\r\n\t\tvar path = null;\r\n\t\tvar index = null;\r\n\t\tvar obj = new jBinder();\r\n\t\tvar cls = [];\r\n\t\tvar sub = {};\r\n\t\tvar e = obj.el = $(el);\r\n\r\n\t\tfor (var i = 0; i < meta.length; i++) {\r\n\t\t\tvar item = meta[i].trim();\r\n\t\t\tif (item) {\r\n\t\t\t\tif (i) {\r\n\t\t\t\t\t//command\r\n\r\n\t\t\t\t\tvar k, // command \r\n\t\t\t\t\t\tv; // expression\r\n\r\n\t\t\t\t\tif (item !== 'template' && item !== '!template' && item !== 'strict') {\r\n\r\n\t\t\t\t\t\tindex = item.indexOf(':');\r\n\r\n\t\t\t\t\t\tif (index === -1) {\r\n\t\t\t\t\t\t\tindex = item.length;\r\n\t\t\t\t\t\t\titem += ':value';\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tk = item.substring(0, index).trim();\r\n\t\t\t\t\t\tv = item.substring(index + 1).trim();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tk = item;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (k === 'selector') {\r\n\t\t\t\t\t\tobj[k] = v;\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar rki = k.indexOf(' ');\r\n\t\t\t\t\tvar rk = rki === -1 ? k : k.substring(0, rki);\r\n\t\t\t\t\tvar fn;\r\n\r\n\t\t\t\t\tif ( (parsebinderskip(rk, 'setter', 'strict', 'track', 'delay', 'import', 'class', 'template')) && (k.substring(0, 3) !== 'def') ) {\r\n\t\t\t\t\t   if (v.indexOf('=>') !== -1 ) {\r\n\t\t\t\t\t       fn = func( func.rebinddecode(v)); \r\n\t\t\t\t\t   } else {   \r\n\t\t\t\t\t       if (func.isValue(v) ) {\r\n\t\t\t\t\t          fn = func('(value,path,el)=>' + func.rebinddecode(v), true) ;\r\n\t\t\t\t\t       } else { \r\n\t\t\t\t\t          if (v.substring(0, 1) === '@' ) {\r\n\t\t\t\t\t          \t  // binding component method\r\n\t\t\t\t\t              fn = obj.com[v.substring(1)] ;\r\n\t\t\t\t\t          } else {\r\n\t\t\t\t\t          \t  fn = GET(v) ;\r\n\t\t\t\t\t          } \r\n\t\t\t\t\t        }\r\n\t\t\t\t\t    }\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tfn = 1;\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\tif (!fn) {\r\n\t\t\t\t\t\treturn null;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar keys = k.split('+'); // commands to same expression with help of + char with spaces on both sides.\r\n\t\t\t\t\tfor (var j = 0; j < keys.length; j++) {\r\n\r\n\t\t\t\t\t\tk = keys[j].trim();\r\n\r\n\t\t\t\t\t\tvar s = '';\r\n\t\t\t\t\t\tvar notvisible = false;\r\n\t\t\t\t\t\tvar notnull = false;\r\n\t\t\t\t\t\tvar backup = false;\r\n\r\n\t\t\t\t\t\tindex = k.indexOf(' ');\r\n\t\t\t\t\t\tif (index !== -1) {\r\n\t\t\t\t\t\t\ts = k.substring(index + 1); // selector\r\n\t\t\t\t\t\t\tk = k.substring(0, index);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tk = k.replace(/^(~!|!~|!|~)/, function(text) { \r\n\t\t\t\t\t\t\tif (text.indexOf('!') !== -1) {\r\n\t\t\t\t\t\t\t\tnotnull = true; // !command \r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (text.indexOf('~') !== -1) { \r\n\t\t\t\t\t\t\t\tnotvisible = true; // ~command\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn '';\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tvar c = k.substring(0, 1);\r\n\r\n\t\t\t\t\t\tif (k === 'class') {\r\n\t\t\t\t\t\t\tk = 'tclass';\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (c === '.') { // command: .class_name\r\n\t\t\t\t\t\t\tif (notnull) {\r\n\t\t\t\t\t\t\t\tfn.$nn = 1;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tcls.push({ \r\n\t\t\t\t\t\t\t\tname: k.substring(1), \r\n\t\t\t\t\t\t\t\tfn: fn \r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tk = 'class';\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (langx.isFunction(fn)) {\r\n\t\t\t\t\t\t\tif (notnull) {\r\n\t\t\t\t\t\t\t\tfn.$nn = 1;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (notvisible) {\r\n\t\t\t\t\t\t\t\tfn.$nv = 1;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tswitch (k) {\r\n\t\t\t\t\t\t\tcase 'track':\r\n\t\t\t\t\t\t\t\tobj[k] = v.split(',').trim();\r\n\t\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t\tcase 'strict':\r\n\t\t\t\t\t\t\t\tobj[k] = true;\r\n\t\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t\tcase 'hidden':\r\n\t\t\t\t\t\t\t\tk = 'hide';\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase 'exec':\r\n\t\t\t\t\t\t\t\tk = 'change';\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase 'disable':\r\n\t\t\t\t\t\t\t\tk = 'disabled';\r\n\t\t\t\t\t\t\t\tbackup = true;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase 'value':\r\n\t\t\t\t\t\t\t\tk = 'val';\r\n\t\t\t\t\t\t\t\tbackup = true;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase 'default':\r\n\t\t\t\t\t\t\t\tk = 'def';\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase 'delay':\r\n\t\t\t\t\t\t\t\tfn = +v;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase 'href':\r\n\t\t\t\t\t\t\tcase 'src':\r\n\t\t\t\t\t\t\tcase 'val':\r\n\t\t\t\t\t\t\tcase 'title':\r\n\t\t\t\t\t\t\tcase 'html':\r\n\t\t\t\t\t\t\tcase 'text':\r\n\t\t\t\t\t\t\tcase 'disabled':\r\n\t\t\t\t\t\t\tcase 'enabled':\r\n\t\t\t\t\t\t\tcase 'checked':\r\n\t\t\t\t\t\t\t\tbackup = true;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tcase 'setter':\r\n\t\t\t\t\t\t\t\tfn = langx.fn('(value,path,el)=>el.SETTER(' + v + ')');\r\n\t\t\t\t\t\t\t\tif (notnull)\r\n\t\t\t\t\t\t\t\t\tfn.$nn = 1;\r\n\t\t\t\t\t\t\t\tif (notvisible)\r\n\t\t\t\t\t\t\t\t\tfn.$nv =1;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase 'import':\r\n\t\t\t\t\t\t\t\tvar c = v.substring(0, 1);\r\n\t\t\t\t\t\t\t\tif ((/^(https|http):\\/\\//).test(v) || c === '/' || c === '.') {\r\n\t\t\t\t\t\t\t\t\tif (c === '.') {\r\n\t\t\t\t\t\t\t\t\t\tfn = v.substring(1);\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tfn = v;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t\tfn = func(func.rebinddecode(v));\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase 'tclass':\r\n\t\t\t\t\t\t\t\tfn = v;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase 'template':\r\n\t\t\t\t\t\t\t\tvar scr = e.find('script');\r\n\t\t\t\t\t\t\t\tif (!scr.length) {\r\n\t\t\t\t\t\t\t\t\tscr = e;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tfn = Tangular.compile(scr.html());\r\n\t\t\t\t\t\t\t\tif (notnull) {\r\n\t\t\t\t\t\t\t\t\tfn.$nn = 1;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (notvisible) {\r\n\t\t\t\t\t\t\t\t\tfn.$nv = 1;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (k === 'def') {\r\n\t\t\t\t\t\t\tfn = new Function('return ' + v)();\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (backup && notnull) {\r\n\t\t\t\t\t\t\tobj[k + 'bk'] = (k == 'src' || k == 'href' || k == 'title') ? e.attr(k) : (k == 'html' || k == 'text') ? e.html() : k == 'val' ? e.val() : (k == 'disabled' || k == 'checked') ? e.prop(k) : '';\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (s) {\r\n\r\n\t\t\t\t\t\t\tif (!sub[s]) {\r\n\t\t\t\t\t\t\t\tsub[s] = {};\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif (k !== 'class') {\r\n\t\t\t\t\t\t\t\tsub[s][k] = fn;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tvar p = cls.pop();\r\n\t\t\t\t\t\t\t\tif (sub[s].cls) {\r\n\t\t\t\t\t\t\t\t\tsub[s].cls.push(p);\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tsub[s].cls = [p];\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (k !== 'class') {\r\n\t\t\t\t\t\t\t\tobj[k] = fn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// path\r\n\t\t\t\t\tpath = item;\r\n\r\n\t\t\t\t\tvar c = path.substring(0, 1);\r\n\r\n\t\t\t\t\tif (c === '!') {\r\n\t\t\t\t\t\tpath = path.substring(1);\r\n\t\t\t\t\t\tobj.notnull = true;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (meta.length === 1) {\r\n\t\t\t\t\t\tvar fn = GET(path);\r\n\t\t\t\t\t\tfn && fn.call(obj.el, obj.el);\r\n\t\t\t\t\t\treturn fn ? fn : null;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar tmp = findFormat(path);\r\n\t\t\t\t\tif (tmp) {\r\n\t\t\t\t\t\tpath = tmp.path;\r\n\t\t\t\t\t\tobj.format = tmp.fn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Is virtual path?\r\n\t\t\t\t\tif (c === '.') {\r\n\t\t\t\t\t\tobj.virtual = true;\r\n\t\t\t\t\t\tpath = path.substring(1);\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (path.substring(path.length - 1) === '.') {\r\n\t\t\t\t\t\tpath = path.substring(0, path.length - 1);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (path.substring(0, 1) === '@') {\r\n\t\t\t\t\t\t//component scope\r\n\t\t\t\t\t\tpath = path.substring(1);\r\n\r\n\t\t\t\t\t\tvar isCtrl = false;\r\n\t\t\t\t\t\tif (path.substring(0, 1) === '@') {\r\n\t\t\t\t\t\t\tisCtrl = true;\r\n\t\t\t\t\t\t\tpath = path.substring(1);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (!path) {\r\n\t\t\t\t\t\t\tpath = '@';\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar parent = el.parentNode;\r\n\t\t\t\t\t\twhile (parent) {\r\n\t\t\t\t\t\t\tif (isCtrl) {\r\n\t\t\t\t\t\t\t\tif (parent.$ctrl) {\r\n\t\t\t\t\t\t\t\t\tobj.com = parent.$ctrl;\r\n\t\t\t\t\t\t\t\t\tif (path === '@' && !obj.com.$dataw) {\r\n\t\t\t\t\t\t\t\t\t\tobj.com.$dataw = 1;\r\n\t\t\t\t\t\t\t\t\t\tobj.com.watch(function(path, value) {\r\n\t\t\t\t\t\t\t\t\t\t\tobj.com.data('@', value);\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tif (parent.$com) {\r\n\t\t\t\t\t\t\t\t\tobj.com = parent.$com;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tparent = parent.parentNode;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (!obj.com) {\r\n\t\t\t\t\t\t\treturn null;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar keys = Object.keys(sub);\r\n\t\tfor (var i = 0; i < keys.length; i++) {\r\n\t\t\tvar key = keys[i];\r\n\t\t\tif (!obj.child) {\r\n\t\t\t\tobj.child = [];\r\n\t\t\t}\r\n\t\t\tvar o = sub[key];\r\n\t\t\to.selector = key;\r\n\t\t\tobj.child.push(o);\r\n\t\t}\r\n\r\n\t\tif (cls.length) {\r\n\t\t\tobj.classes = cls;\r\n\t\t}\r\n\r\n\t\tif (obj.virtual) {\r\n\t\t\tpath = pathmaker(path);\r\n\t\t} else {\r\n\r\n\t\t\tvar bj = obj.com && path.substring(0, 1) === '@';\r\n\t\t\tpath = bj ? path : pathmaker(path);\r\n\r\n\t\t\tif (path.indexOf('?') !== -1) {\r\n\t\t\t\t// jComponent scopes\r\n\t\t\t\t// You can use data-bind in jComponent scopes, but you need to defined ? (question mark) \r\n\t\t\t\t// on the start of data-bind path. Question mark ? will be replaced for a scope path.\r\n\t\t\t\tvar scope = initscopes(scopes);\r\n\t\t\t\tif (scope) {\r\n\t\t\t\t\tpath = path.replace(/\\?/g, scope.path);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar arr = path.split('.');\r\n\t\t\tvar p = '';\r\n\r\n\t\t\tif (obj.com) {\r\n\t\t\t\t!obj.com.$data[path] && (obj.com.$data[path] = { value: null, items: [] });\r\n\t\t\t\tobj.com.$data[path].items.push(obj);\r\n\t\t\t} else {\r\n\t\t\t\tfor (var i = 0, length = arr.length; i < length; i++) {\r\n\t\t\t\t\tp += (p ? '.' : '') + arr[i];\r\n\t\t\t\t\tvar k = i === length - 1 ? p : '!' + p;\r\n\t\t\t\t\tif (binders[k]) {\r\n\t\t\t\t\t\tbinders[k].push(obj);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tbinders[k] = [obj];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tobj.path = path;\r\n\r\n\t\tif (obj.track) {\r\n\t\t\tfor (var i = 0; i < obj.track.length; i++) {\r\n\t\t\t\tobj.track[i] = path + '.' + obj.track[i];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tobj.init = 0; \r\n\t\tif(!obj.virtual) {\r\n\t\t\tbindersnew.push(obj);\r\n\t\t}\r\n\t\treturn obj;\r\n\t}\r\n\r\n\treturn parsebinder;\r\n});"]}