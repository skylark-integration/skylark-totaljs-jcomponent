{"version":3,"sources":["utils/env.js"],"names":["define","jc","topic","defaults","KEY_ENV","REGENV","environment","SP","env","this","replace","val","ENV","substring","length","$env","index","indexOf","name","value","langx","isObject","Object","keys","forEach","key","EMIT","undefined"],"mappings":";;;;;;;AAAAA,QACC,QACA,WACA,eACC,SAASC,EAAGC,EAAOC,GACpB,IACCC,EAAU,cACVC,EAAS,cAINC,EANKH,EAMYG,eAmCrB,OAdAC,GAAGC,IAAM,WAER,OADWC,KACCC,QAAQL,EAAQ,SAASM,GACpC,OAAOC,IAAID,EAAIE,UAAU,EAAGF,EAAIG,OAAS,KAAOH,KAIlDJ,GAAGQ,KAAO,WACT,IACIC,EAAQP,KAAKQ,QAAQ,KACzB,OAAkB,IAAXD,EAFIP,KAEgBD,MAFhBC,KAE6BI,UAAU,EAAGG,GAAOR,MAFjDC,KAE8DI,UAAUG,IAI7Ef,EAAGO,IAjCV,SAAcU,EAAMC,GAEnB,OAAIC,MAAMC,SAASH,IAClBA,GAAQI,OAAOC,KAAKL,GAAMM,QAAQ,SAASC,GAC1CnB,EAAYmB,GAAOP,EAAKO,GACxBC,KAAKtB,EAASqB,EAAKP,EAAKO,MAElBP,QAGMS,IAAVR,GACHO,KAAKtB,EAASc,EAAMC,GACpBP,IAAIM,GAAQC,EACLA,GAGDb,EAAYY","file":"../../utils/env.js","sourcesContent":["define([\r\n\t\"../jc\",\r\n\t\"../topic\",\r\n\t\"../defaults\"\r\n],function(jc,topic, defaults){\r\n\tvar MD = defaults,\r\n\t\tKEY_ENV = 'environment',\r\n\t\tREGENV = /(\\[.*?\\])/gi;\r\n\r\n\r\n\r\n\tvar environment = MD.environment = {};\r\n\r\n\tfunction env (name, value) { // W.ENV\r\n\r\n\t\tif (langx.isObject(name)) {\r\n\t\t\tname && Object.keys(name).forEach(function(key) {\r\n\t\t\t\tenvironment[key] = name[key];\r\n\t\t\t\tEMIT(KEY_ENV, key, name[key]);\r\n\t\t\t});\r\n\t\t\treturn name;\r\n\t\t}\r\n\r\n\t\tif (value !== undefined) {\r\n\t\t\tEMIT(KEY_ENV, name, value);\r\n\t\t\tENV[name] = value;\r\n\t\t\treturn value;\r\n\t\t}\r\n\r\n\t\treturn environment[name];\r\n\t};\r\n\r\n\tSP.env = function() {\r\n\t\tvar self = this;\r\n\t\treturn self.replace(REGENV, function(val) {\r\n\t\t\treturn ENV[val.substring(1, val.length - 1)] || val;\r\n\t\t});\r\n\t};\r\n\r\n\tSP.$env = function() {\r\n\t\tvar self = this;\r\n\t\tvar index = this.indexOf('?');\r\n\t\treturn index === -1 ? self.env() : self.substring(0, index).env() + self.substring(index);\r\n\t};\r\n\r\n\r\n\treturn jc.env = env;\r\n});"]}