{"version":3,"sources":["utils/domx.js"],"names":["define","langx","$","plugins","$scrollbarWidth","statics","$devices","xs","max","sm","min","md","lg","REGCSS","REGSCRIPT","mediaqueriescounter","mediaqueries","ACTRLS","INPUT","TEXTAREA","SELECT","mediaquery","W","window","length","orientation","Math","abs","$w","w","width","h","height","d","i","mq","cw","ch","element","minW","maxW","minH","maxH","oldW","oldH","type","fn","id","scrollbarWidth","undefined","b","document","body","append","format","el","getElementById","offsetWidth","clientWidth","removeChild","cssnoscrollbar","resize","noscrollbar","t","this","sw","m","offsetParent","parentNode","$noscrollbarwidth","ceil","css","attr","indexOf","aclass","a","addClass","rclass","removeClass","rattr","removeAttr","rattrd","rclass2","arr","split","isReg","cls","test","hclass","hasClass","tclass","v","toggleClass","attrd","asvg","tag","createElementNS","innerHTML","f","createDocumentFragment","firstChild","appendChild","psvg","prepend","rescroll","offset","bottom","each","scrollIntoView","count","scrollTop","off","getBoundingClientRect","scrollHeight","on","devices","findInstance","parentElement","inDOM","nodeName","parent","importscripts","str","scr","beg","output","external","end","code","substring","lastIndexOf","trim","replace","eid","hashCode","push","join","importstyles","builder","text","key","remove","appendTo","inputable","tagName","keyPress","timeout","toString","tkey","setTimeout2","mediaWidth","Plugin","removescripts","index","style","value","Array","watchMedia","query","isNumber","isFunction","toLowerCase","ids","forEach","q","match","obj","num","val","n","parseInt","item"],"mappings":";;;;;;;AAAAA,QACC,WACA,UACA,wBACC,SAASC,EAAOC,EAAGC,GACpB,IAyNIC,EAzNAC,EAAUJ,EAAMI,QAEhBC,GACHC,IAAMC,IAAK,KACXC,IAAMC,IAAK,IAAKF,IAAK,KACrBG,IAAMD,IAAK,IAAKF,IAAK,MACrBI,IAAMF,IAAK,OAGRG,EAAS,mDACTC,EAAY,qGACZC,EAAsB,EAErBC,KAGDC,GAAWC,OAAO,EAAMC,UAAU,EAAMC,QAAQ,GAgCpD,SAASC,IACR,IAAIC,EAAIC,OAER,GAAKP,GAAiBA,EAAaQ,OAWnC,IAPA,IAAIC,EAAcH,EAAEG,YAA0C,KAA5BC,KAAKC,IAAIL,EAAEG,aAAsB,YAAc,WAAa,GAE1FG,EAAK1B,EAAEoB,GACPO,EAAID,EAAGE,QACPC,EAAIH,EAAGI,SACPC,EAAI3B,EAEC4B,EAAI,EAAGV,EAASR,EAAaQ,OAAQU,EAAIV,EAAQU,IAAK,CAC9D,IAAIC,EAAKnB,EAAakB,GAClBE,EAAKP,EACLQ,EAAKN,EAOT,GALII,EAAGG,UACNF,EAAKD,EAAGG,QAAQR,QAChBO,EAAKF,EAAGG,QAAQN,UAGbG,EAAGV,YAAa,CACnB,IAAKA,GAAkC,aAAnBU,EAAGV,YACtB,SACI,GAAIA,IAAgBU,EAAGV,YAC3B,SAGF,KAAIU,EAAGI,MAAQJ,EAAGI,MAAQH,OAGtBD,EAAGK,MAAQL,EAAGK,MAAQJ,MAGtBD,EAAGM,MAAQN,EAAGM,MAAQJ,MAGtBF,EAAGO,MAAQP,EAAGO,MAAQL,KAItBF,EAAGQ,OAASP,GAAMD,EAAGS,OAASP,GAE5BF,EAAGO,MAASP,EAAGM,QAIjBN,EAAGS,OAASP,GAAMF,EAAGQ,OAASP,GAE5BD,EAAGK,MAASL,EAAGI,QAIjBJ,EAAGQ,OAASP,GAAMD,EAAGS,OAASP,IAAlC,CAIA,IAAIQ,EAAO,KAEPT,GAAMH,EAAEtB,GAAGD,KAAO0B,GAAMH,EAAEtB,GAAGH,IAChCqC,EAAO,KACGT,GAAMH,EAAExB,GAAGC,KAAO0B,GAAMH,EAAExB,GAAGD,IACvCqC,EAAO,KACGT,EAAKH,EAAErB,GAAGF,IACpBmC,EAAO,KACGT,GAAMH,EAAE1B,GAAGC,MACrBqC,EAAO,MAGRV,EAAGQ,KAAOP,EACVD,EAAGS,KAAOP,EACVF,EAAGW,GAAGV,EAAIC,EAAIQ,EAAMV,EAAGY,MAgGzB,SAASC,IACR,IAAID,EAAK,mBACT,QAAwBE,IAApB7C,EACH,OAAOA,EAER,IAAI8C,EAAIC,SAASC,KACjBlD,EAAEgD,GAAGG,OAAO,gGAAgGC,OAAOP,EAAI,UAAW,aAClI,IAAIQ,EAAKJ,SAASK,eAAeT,GAGjC,OAFA3C,EAAkBmD,EAAGE,YAAcF,EAAGG,YACtCR,EAAES,YAAYJ,GACPnD,EAsKR,IAAIwD,KAgJH,SAASC,IAIRxC,IAeF,OA/JCnB,EAAE4C,GAAGgB,YAAc,WAClB,IAAIC,EAAIC,KACJC,EAAKjB,IAETY,EAAe,cAAgBK,EAAK,SAAW,OAE/C,IAAK,IAAI/B,EAAI,EAAGA,EAAI6B,EAAEvC,OAAQU,IAAK,CAClC,IAAIgC,EAAIH,EAAE7B,GACV,GAAIgC,GAAKA,EAAEC,aAAc,CACxB,IAAIZ,EAAKrD,EAAEgE,GACPrC,EAAI3B,EAAEqD,EAAG,GAAGa,YAAYtC,QACxBoC,EAAEG,oBAAsBxC,IAC3BqC,EAAEG,kBAAoBxC,EACtB+B,EAAe9B,MAAQJ,KAAK4C,KAAKzC,EAAIoC,GAAM,KAC3CV,EAAGgB,IAAIX,IACmD,KAArDL,EAAGiB,KAAK,UAAY,IAAIC,QAlBb,gBAmBflB,EAAGmB,OAnBY,iBAuBnB,OAAOX,GAIR7D,EAAE4C,GAAG4B,OAAS,SAASC,GACtB,OAAOX,KAAKY,SAASD,IAGtBzE,EAAE4C,GAAG+B,OAAS,SAASF,GACtB,OAAY,MAALA,EAAYX,KAAKc,cAAgBd,KAAKc,YAAYH,IAG1DzE,EAAE4C,GAAGiC,MAAQ,SAASJ,GACrB,OAAOX,KAAKgB,WAAWL,IAGxBzE,EAAE4C,GAAGmC,OAAS,SAASN,GACtB,OAAOX,KAAKgB,WAAW,QAAUL,IAGlCzE,EAAE4C,GAAGoC,QAAU,SAASP,GAMvB,IAJA,IACIQ,GADOnB,KACKQ,KAAK,UAAY,IAAIY,MAAM,KACvCC,EAAsB,iBAAR,EAETnD,EAAI,EAAGV,EAAS2D,EAAI3D,OAAQU,EAAIV,EAAQU,IAAK,CACrD,IAAIoD,EAAMH,EAAIjD,GACVoD,IACCD,EACHV,EAAEY,KAAKD,IARCtB,KAQYa,OAAOS,IAEP,IAApBA,EAAIb,QAAQE,IAVJX,KAUsBa,OAAOS,IAKxC,OAfWtB,MAkBZ9D,EAAE4C,GAAG0C,OAAS,SAASb,GACtB,OAAOX,KAAKyB,SAASd,IAGtBzE,EAAE4C,GAAG4C,OAAS,SAASf,EAAGgB,GACzB,OAAO3B,KAAK4B,YAAYjB,EAAGgB,IAG5BzF,EAAE4C,GAAG+C,MAAQ,SAASlB,EAAGgB,GAExB,OADAhB,EAAI,QAAUA,EACF,MAALgB,EAAY3B,KAAKQ,KAAKG,GAAKX,KAAKQ,KAAKG,EAAGgB,IAIhDzF,EAAE4C,GAAGgD,KAAO,SAASC,GAEpB,IAA0B,IAAtBA,EAAItB,QAAQ,KAAa,CAC5B,IAAIlB,EAAKJ,SAAS6C,gBAAgB,6BAA8BD,GAEhE,OADA/B,KAAKX,OAAOE,GACLrD,EAAEqD,GAGV,IAAItB,EAAIkB,SAAS6C,gBAAgB,+BAAgC,OACjE/D,EAAEgE,UAAY,2CAA6CF,EAAM,SAEjE,IADA,IAAIG,EAAI/C,SAASgD,yBACVlE,EAAEmE,WAAWA,YACnBF,EAAEG,YAAYpE,EAAEmE,WAAWA,YAG5B,OAFAF,EAAIhG,EAAEgG,GACNlC,KAAKX,OAAO6C,GACLA,GAGRhG,EAAE4C,GAAGwD,KAAO,SAASP,GAEpB,IAA0B,IAAtBA,EAAItB,QAAQ,KAAa,CAC5B,IAAIlB,EAAKJ,SAAS6C,gBAAgB,6BAA8BD,GAEhE,OADA/B,KAAKuC,QAAQhD,GACNrD,EAAEqD,GAGV,IAAItB,EAAIkB,SAAS6C,gBAAgB,+BAAgC,OACjE/D,EAAEgE,UAAY,2CAA6CF,EAAM,SAEjE,IADA,IAAIG,EAAI/C,SAASgD,yBACVlE,EAAEmE,WAAWA,YACnBF,EAAEG,YAAYpE,EAAEmE,WAAWA,YAG5B,OAFAF,EAAIhG,EAAEgG,GACNlC,KAAKuC,QAAQL,GACNA,GAGRhG,EAAE4C,GAAG0D,SAAW,SAASC,EAAQC,GA2BhC,OA1BQ1C,KACN2C,KAAK,WACN,IACIpD,EADIS,KAGR,GADAT,EAAGqD,gBAAe,GACdH,EAEH,IADA,IAAII,EAAQ,EACLtD,GAAsB,GAAhBA,EAAGuD,WAAkBD,IAAU,IAE3C,IADAtD,EAAKA,EAAGa,aACEb,EAAGuD,UAAW,CAEvB,IAAIC,EAAMxD,EAAGuD,UAAYL,EAEzB,OAAc,GAAVC,GACCnD,EAAGuD,UAAYvD,EAAGyD,wBAAwBhF,QAAUuB,EAAG0D,kBAC1D1D,EAAGuD,UAAYvD,EAAG0D,mBAKpB1D,EAAGuD,UAAYC,MApBX/C,MAoCTH,IAEA3D,EAAEqB,QAAQ2F,GAAG,SAAUrD,GAGvB3D,EAAEqB,QAAQ2F,GAAG,oBAAqB7F,GAGnCnB,EAAE,YACW,KAIZiH,QAAY7G,EACZ8G,aAthBD,SAAsBrD,EAAGlB,GAExB,IAAKkB,EAAEvC,OACN,OAAO,KAGR,IAAK,IAAIU,EAAI,EAAGA,EAAI6B,EAAEvC,OAAQU,IAC7B,GAAI6B,EAAE7B,GAAGW,GACR,OAAOkB,EAAE7B,GAAGW,GAKd,IADA,IAAIU,EAAKQ,EAAE,GAAGsD,cACA,OAAP9D,GAAa,CACnB,GAAIA,EAAGV,GACN,OAAOU,EAAGV,GAEXU,EAAKA,EAAG8D,cAGT,OAAO,MAmgBPC,MAlbD,SAAe/D,GACd,GAAKA,EAAL,CAEA,GAAoB,SAAhBA,EAAGgE,SACN,OAAO,EAGR,IADA,IAAIC,EAASjE,EAAGa,WACToD,GAAQ,CACd,GAAwB,SAApBA,EAAOD,SACV,OAAO,EACRC,EAASA,EAAOpD,cAyajBqD,cAtZD,SAAuBC,GAOtB,IALA,IAGIC,EAHAC,GAAO,EACPC,EAASH,EACTI,MAMU,KADbF,EAAMF,EAAIjD,QAAQ,UAAWmD,KAFjB,CAMZ,IAAIG,EAAML,EAAIjD,QAAQ,aAAamD,EAAM,GACrCI,EAAON,EAAIO,UAAUL,EAAKG,EAAM,GAKpC,GAJAH,EAAMG,EAAM,EACZA,EAAMC,EAAKvD,QAAQ,OAGW,KAF9BkD,EAAMK,EAAKC,UAAU,EAAGF,IAEhBtD,QAAQ,WAAsD,IAAnCkD,EAAIO,YAAY,iBAIzCF,EAAKC,UAAUF,EAAM,EAAGC,EAAKxG,OAAS,GAAG2G,OACzC,CACTN,EAASA,EAAOO,QAAQJ,EAAM,IAAIG,OAClC,IAAIE,EAAM,WAAapI,EAAMqI,SAASN,GACjC3H,EAAQgI,KACZP,EAASS,KAAKP,GACd3H,EAAQgI,IAAO,IAQlB,OAHIP,EAAStG,QACZtB,EAAE,QAAQmD,OAAOyE,EAASU,KAAK,OAEzBX,GAkXPY,aA/WD,SAAsBf,EAAK3E,GAC1B,IAAI2F,KAEJhB,EAAMA,EAAIU,QAAQvH,EAAQ,SAAS8H,GAGlC,OAFAA,EAAOA,EAAKP,QAAQ,UAAW,2BAC/BM,EAAQH,KAAKI,EAAKV,UAAU,GAAIU,EAAKnH,OAAS,GAAG2G,QAC1C,KAGR,IAAIS,EAAM,OAAS7F,GAAM,IAUzB,OARIA,IACC1C,EAAQuI,GACX1I,EAAE,IAAM0I,GAAKC,SAEbxI,EAAQuI,IAAO,GAGjBF,EAAQlH,QAAUtB,EAAE,UAAY6C,EAAK,QAAU6F,EAAM,IAAM,IAAM,eAAetF,OAAOoF,EAAQF,KAAK,QAAQM,SAAS,QAC9GpB,GA6VPqB,UAjiBD,SAAmBxF,GAClB,IAAIwC,EAAMxC,EAAGyF,SAAWzF,EAExB,OAAOtC,EAAO8E,IA+hBdkD,SAvMD,SAAkBnG,EAAIoG,EAASN,GACzBM,IACJA,EAAU,KAEX,IAAIxB,EAAM5E,EAAGqG,WACTvB,EAAMF,EAAIlG,OAAS,GACnBoG,EAAM,IACTA,EAAM,GAEP,IAAIwB,EAAOR,GAAY3I,EAAMqI,SAASZ,EAAIO,UAAU,EAAG,IAAM,IAAMP,EAAIO,UAAUL,IAAQ,YACzF3H,EAAMoJ,YAAYD,EAAMtG,EAAIoG,IA8L5B7H,WAAeA,EACfiI,WAnUD,SAAoB/F,GACdA,IACJA,EAAKrD,EAAEqB,SAER,IAAIM,EAAI0B,EAAGzB,QACPG,EAAI3B,EACR,OAAOuB,GAAKI,EAAEtB,GAAGD,KAAOmB,GAAKI,EAAEtB,GAAGH,IAAM,KAAOqB,GAAKI,EAAExB,GAAGC,KAAOmB,GAAKI,EAAExB,GAAGD,IAAM,KAAOqB,EAAII,EAAErB,GAAGF,IAAM,KAAOmB,GAAKI,EAAE1B,GAAGC,IAAM,KAAO,IA8TpI+I,OAAWpJ,EAAQoJ,OACnBC,cAraD,SAAuB9B,GACtB,OAAOA,EAAIU,QAAQtH,EAAW,SAAS6H,GACtC,IAAIc,EAAQd,EAAKlE,QAAQ,KACrBkD,EAAMgB,EAAKV,UAAU,EAAGwB,EAAQ,GACpC,MAA+B,WAAxB9B,EAAIM,UAAU,EAAG,IAA4C,YAAxBN,EAAIM,UAAU,EAAG,KAA+C,IAA3BN,EAAIlD,QAAQ,YAAsD,IAAjCkD,EAAIlD,QAAQ,gBAAyB,GAAKkE,KAka7J3F,eAAmBA,EACnB0G,MArND,SAAeC,EAAO5G,GACjBA,GACH7C,EAAE,OAAS6C,GAAI8F,SAEhB3I,EAAE,0BAA4B6C,EAAK,WAAaA,EAAK,IAAM,IAAM,KAAO4G,aAAiBC,MAAQD,EAAMnB,KAAK,IAAMmB,GAAS,YAAYb,SAAS,SAkNhJe,WAxTD,SAASA,EAAWC,EAAOxH,EAASQ,GAEnC,GAAI7C,EAAM8J,SAASD,GAElB,OADA9I,EAAa6H,OAAO,KAAMiB,IACnB,EASR,GANI7J,EAAM+J,WAAW1H,KACpBQ,EAAKR,EACLA,EAAU,OAIiB,KAD5BwH,EAAQA,EAAMG,eACJxF,QAAQ,KAAa,CAC9B,IAAIyF,KAKJ,OAJAJ,EAAM1E,MAAM,KAAK+E,QAAQ,SAASC,IACjCA,EAAIA,EAAEjC,SACD+B,EAAI3B,KAAKsB,EAAWO,EAAG9H,EAASQ,MAE/BoH,EAGR,IAAIjI,EAAI3B,EAEM,OAAVwJ,EACHA,EAAQ,sCAAsCxG,OAAOrB,EAAEtB,GAAGD,IAAKuB,EAAEtB,GAAGH,KAChD,OAAVsJ,EACVA,EAAQ,kBAAkBxG,OAAOrB,EAAErB,GAAGF,KAClB,OAAVoJ,EACVA,EAAQ,kBAAkBxG,OAAOrB,EAAE1B,GAAGC,KAClB,OAAVsJ,IACVA,EAAQ,sCAAsCxG,OAAOrB,EAAExB,GAAGC,IAAKuB,EAAExB,GAAGD,MAGrE,IAAI2E,EAAM2E,EAAMO,MAAM,qIAClBC,KAEAC,EAAM,SAASC,GAClB,IAAIC,EAAIC,SAASF,EAAIH,MAAM,OAAQ,IACnC,OAAOG,EAAIH,MAAM,WAAiB,GAAJI,EAASD,EAAIH,MAAM,WAAkB,WAAJI,GAAoB,EAAIA,GAGxF,GAAItF,EACH,IAAK,IAAIjD,EAAI,EAAGV,EAAS2D,EAAI3D,OAAQU,EAAIV,EAAQU,IAAK,CACrD,IACIuH,GADAkB,EAAOxF,EAAIjD,IACEuC,QAAQ,KACzB,OAAQkG,EAAK1C,UAAU,EAAGwB,GAAOQ,cAAc9B,QAC9C,IAAK,YACL,IAAK,mBACL,IAAK,QACJmC,EAAI/H,KAAOgI,EAAII,GACf,MACD,IAAK,YACL,IAAK,mBACJL,EAAI9H,KAAO+H,EAAII,GACf,MACD,IAAK,aACL,IAAK,oBACL,IAAK,SACJL,EAAI7H,KAAO8H,EAAII,GACf,MACD,IAAK,aACL,IAAK,oBACJL,EAAI5H,KAAO6H,EAAII,IAOnB,GADAxF,EAAM2E,EAAMO,MAAM,0CAEjB,IAASnI,EAAI,EAAGV,EAAS2D,EAAI3D,OAAQU,EAAIV,EAAQU,IAAK,CACrD,IAAIyI,GAC4C,KAD5CA,EAAOxF,EAAIjD,IACN+H,cAAcxF,QAAQ,YAC9B6F,EAAI7I,YAAc,WAElB6I,EAAI7I,YAAc,YAarB,OARA6I,EAAIvH,GAAKhC,IACTuJ,EAAIxH,GAAKA,EAELR,IACHgI,EAAIhI,QAAUA,GAGftB,EAAauH,KAAK+B,GACXA,EAAIvH,IAgOX7C,EAAMA","file":"../../utils/domx.js","sourcesContent":["define([\r\n\t\"../langx\",\r\n\t\"./query\",\r\n\t\"skylark-domx-plugins\"\r\n],function(langx, $, plugins){\r\n\tvar statics = langx.statics;\r\n\t\r\n\tvar $devices = { \r\n\t\txs: { max: 768 }, \r\n\t\tsm: { min: 768, max: 992 }, \r\n\t\tmd: { min: 992, max: 1200 }, \r\n\t\tlg: { min: 1200 }\r\n\t};\r\n\r\n\tvar REGCSS = /<style\\b[^<]*(?:(?!<\\/style>)<[^<]*)*<\\/style>/gi;\r\n\tvar REGSCRIPT = /<script\\b[^<]*(?:(?!<\\/script>)<[^<]*)*<\\/script>|<style\\b[^<]*(?:(?!<\\/style>)<[^<]*)*<\\/style>/gi;\r\n\tvar mediaqueriescounter = 0;\r\n\r\n \tvar mediaqueries = [];\r\n\tvar $domready = false;\r\n\r\n\tvar ACTRLS = { INPUT: true, TEXTAREA: true, SELECT: true };\r\n\r\n\tfunction inputable(el) {\r\n\t\tvar tag = el.tagName || el;\r\n\r\n\t\treturn ACTRLS[tag];\r\n\t}\r\n\t\r\n\r\n\tfunction findInstance(t, type) {\r\n\r\n\t\tif (!t.length) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tfor (var i = 0; i < t.length; i++) {\r\n\t\t\tif (t[i][type]) {\r\n\t\t\t\treturn t[i][type];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar el = t[0].parentElement;\r\n\t\twhile (el !== null) {\r\n\t\t\tif (el[type]) {\r\n\t\t\t\treturn el[type];\r\n\t\t\t}\r\n\t\t\tel = el.parentElement;\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\t}\r\n\t\r\n\tfunction mediaquery() {\r\n\t\tvar W = window;\r\n\r\n\t\tif (!mediaqueries || !mediaqueries.length) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar orientation = W.orientation ? Math.abs(W.orientation) === 90 ? 'landscape' : 'portrait' : '';\r\n\r\n\t\tvar $w = $(W);\r\n\t\tvar w = $w.width();\r\n\t\tvar h = $w.height();\r\n\t\tvar d = $devices;\r\n\r\n\t\tfor (var i = 0, length = mediaqueries.length; i < length; i++) {\r\n\t\t\tvar mq = mediaqueries[i];\r\n\t\t\tvar cw = w;\r\n\t\t\tvar ch = h;\r\n\r\n\t\t\tif (mq.element) {\r\n\t\t\t\tcw = mq.element.width();\r\n\t\t\t\tch = mq.element.height();\r\n\t\t\t}\r\n\r\n\t\t\tif (mq.orientation) {\r\n\t\t\t\tif (!orientation && mq.orientation !== 'portrait')\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\telse if (orientation !== mq.orientation)\r\n\t\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tif (mq.minW && mq.minW >= cw) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tif (mq.maxW && mq.maxW <= cw) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tif (mq.minH && mq.minH >= ch) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tif (mq.maxH && mq.maxH <= ch) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tif (mq.oldW === cw && mq.oldH !== ch) {\r\n\t\t\t\t// changed height\r\n\t\t\t\tif (!mq.maxH && !mq.minH)\r\n\t\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tif (mq.oldH === ch && mq.oldW !== cw) {\r\n\t\t\t\t// changed width\r\n\t\t\t\tif (!mq.maxW && !mq.minW)\r\n\t\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tif (mq.oldW === cw && mq.oldH === ch) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tvar type = null;\r\n\r\n\t\t\tif (cw >= d.md.min && cw <= d.md.max) {\r\n\t\t\t\ttype = 'md';\r\n\t\t\t} else if (cw >= d.sm.min && cw <= d.sm.max) {\r\n\t\t\t\ttype = 'sm';\r\n\t\t\t} else if (cw > d.lg.min) {\r\n\t\t\t\ttype = 'lg';\r\n\t\t\t} else if (cw <= d.xs.max) {\r\n\t\t\t\ttype = 'xs';\r\n\t\t\t}\r\n\r\n\t\t\tmq.oldW = cw;\r\n\t\t\tmq.oldH = ch;\r\n\t\t\tmq.fn(cw, ch, type, mq.id);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction inDOM(el) {\r\n\t\tif (!el)\r\n\t\t\treturn;\r\n\t\tif (el.nodeName === 'BODY') {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tvar parent = el.parentNode;\r\n\t\twhile (parent) {\r\n\t\t\tif (parent.nodeName === 'BODY')\r\n\t\t\t\treturn true;\r\n\t\t\tparent = parent.parentNode;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction remove(el) {\r\n\t\tvar dom = el[0];\r\n\t\tdom.$com = null;\r\n\t\tel.attr(ATTRDEL, true);\r\n\t\tel.remove();\r\n\t}\r\n\r\n\tfunction removescripts(str) {\r\n\t\treturn str.replace(REGSCRIPT, function(text) {\r\n\t\t\tvar index = text.indexOf('>');\r\n\t\t\tvar scr = text.substring(0, index + 1);\r\n\t\t\treturn scr.substring(0, 6) === '<style' || (scr.substring(0, 7) === '<script' && scr.indexOf('type=\"') === -1) || scr.indexOf('/javascript\"') !== -1 ? '' : text;\r\n\t\t});\r\n\t}\r\n\r\n\tfunction importscripts(str) {\r\n\r\n\t\tvar beg = -1;\r\n\t\tvar output = str;\r\n\t\tvar external = [];\r\n\t\tvar scr;\r\n\r\n\t\twhile (true) {\r\n\r\n\t\t\tbeg = str.indexOf('<script', beg);\r\n\t\t\tif (beg === -1) {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tvar end = str.indexOf('</script>', beg + 8);\r\n\t\t\tvar code = str.substring(beg, end + 9);\r\n\t\t\tbeg = end + 9;\r\n\t\t\tend = code.indexOf('>');\r\n\t\t\tscr = code.substring(0, end);\r\n\r\n\t\t\tif (scr.indexOf('type=') !== -1 && scr.lastIndexOf('javascript') === -1) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tvar tmp = code.substring(end + 1, code.length - 9).trim();\r\n\t\t\tif (!tmp) {\r\n\t\t\t\toutput = output.replace(code, '').trim();\r\n\t\t\t\tvar eid = 'external' + langx.hashCode(code);\r\n\t\t\t\tif (!statics[eid]) {\r\n\t\t\t\t\texternal.push(code);\r\n\t\t\t\t\tstatics[eid] = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (external.length) {\r\n\t\t\t$('head').append(external.join('\\n'));\r\n\t\t}\r\n\t\treturn output;\r\n\t}\r\n\r\n\tfunction importstyles(str, id) {\r\n\t\tvar builder = [];\r\n\r\n\t\tstr = str.replace(REGCSS, function(text) {\r\n\t\t\ttext = text.replace('<style>', '<style type=\"text/css\">');\r\n\t\t\tbuilder.push(text.substring(23, text.length - 8).trim());\r\n\t\t\treturn '';\r\n\t\t});\r\n\r\n\t\tvar key = 'css' + (id || '');\r\n\r\n\t\tif (id) {\r\n\t\t\tif (statics[key])\r\n\t\t\t\t$('#' + key).remove();\r\n\t\t\telse\r\n\t\t\t\tstatics[key] = true;\r\n\t\t}\r\n\r\n\t\tbuilder.length && $('<style' + (id ? ' id=\"' + key + '\"' : '') + '>{0}</style>'.format(builder.join('\\n'))).appendTo('head');\r\n\t\treturn str;\r\n\t}\r\n\r\n\tvar $scrollbarWidth;\r\n\tfunction scrollbarWidth() { //W.SCROLLBARWIDTH = \r\n\t\tvar id = 'jcscrollbarwidth';\r\n\t\tif ($scrollbarWidth !== undefined) {\r\n\t\t\treturn $scrollbarWidth;\r\n\t\t}\r\n\t\tvar b = document.body;\r\n\t\t$(b).append('<div id=\"{0}\" style=\"width{1}height{1}overflow:scroll;position:absolute;top{2}left{2}\"></div>'.format(id, ':100px;', ':9999px;'));\r\n\t\tvar el = document.getElementById(id);\r\n\t\t$scrollbarWidth = el.offsetWidth - el.clientWidth;\r\n\t\tb.removeChild(el);\r\n\t\treturn $scrollbarWidth;\r\n\t}\r\n\r\n   /**\r\n   * Returns a current display size of the element. Display size can be:\r\n   * <ul>\r\n   *   <li>xs extra small display (mobile device)</li>\r\n   *   <li>sm small display (tablet)</li>\r\n   *   <li>md medium display (small laptop)</li>\r\n   *   <li>lg large display (desktop computer, laptop)</li>\r\n   * </ul>\r\n   * execute CSS() twice then the previous styles will be removed.\r\n   * @param  {String} value \r\n   * @param  {String} id \r\n   */\r\n\tfunction mediaWidth(el) { //W.WIDTH = \r\n\t\tif (!el) {\r\n\t\t\tel = $(window);\r\n\t\t}\r\n\t\tvar w = el.width();\r\n\t\tvar d = $devices;\r\n\t\treturn w >= d.md.min && w <= d.md.max ? 'md' : w >= d.sm.min && w <= d.sm.max ? 'sm' : w > d.lg.min ? 'lg' : w <= d.xs.max ? 'xs' : '';\r\n\t}\r\n\r\n   /**\r\n   * Registers a listener for specific size of the browser window or element.\r\n   * @param  {String} query media CSS query string \r\n   * @param  {jQuery Element} id \r\n   * @param  {Function(w, h, type, id)} fn \r\n   * @return {Number } an idetificator of MediaQuery\r\n   */\r\n\tfunction watchMedia(query, element, fn) { //W.MEDIAQUERY = \r\n\r\n\t\tif (langx.isNumber(query)) {\r\n\t\t\tmediaqueries.remove('id', query);\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tif (langx.isFunction(element)) {\r\n\t\t\tfn = element;\r\n\t\t\telement = null;\r\n\t\t}\r\n\r\n\t\tquery = query.toLowerCase();\r\n\t\tif (query.indexOf(',') !== -1) {\r\n\t\t\tvar ids = [];\r\n\t\t\tquery.split(',').forEach(function(q) {\r\n\t\t\t\tq = q.trim();\r\n\t\t\t\tq && ids.push(watchMedia(q, element, fn));\r\n\t\t\t});\r\n\t\t\treturn ids;\r\n\t\t}\r\n\r\n\t\tvar d = $devices;\r\n\r\n\t\tif (query === 'md') {\r\n\t\t\tquery = 'min-width:{0}px and max-width:{1}px'.format(d.md.min, d.md.max);\r\n\t\t} else if (query === 'lg') {\r\n\t\t\tquery = 'min-width:{0}px'.format(d.lg.min);\r\n\t\t} else if (query === 'xs') {\r\n\t\t\tquery = 'max-width:{0}px'.format(d.xs.max);\r\n\t\t} else if (query === 'sm') {\r\n\t\t\tquery = 'min-width:{0}px and max-width:{1}px'.format(d.sm.min, d.sm.max);\r\n\t\t}\r\n\r\n\t\tvar arr = query.match(/(max-width|min-width|max-device-width|min-device-width|max-height|min-height|max-device-height|height|width):(\\s)\\d+(px|em|in)?/gi);\r\n\t\tvar obj = {};\r\n\r\n\t\tvar num = function(val) {\r\n\t\t\tvar n = parseInt(val.match(/\\d+/), 10);\r\n\t\t\treturn val.match(/\\d+(em)/) ? n * 16 : val.match(/\\d+(in)/) ? (n * 0.010416667) >> 0 : n;\r\n\t\t};\r\n\r\n\t\tif (arr) {\r\n\t\t\tfor (var i = 0, length = arr.length; i < length; i++) {\r\n\t\t\t\tvar item = arr[i];\r\n\t\t\t\tvar index = item.indexOf(':');\r\n\t\t\t\tswitch (item.substring(0, index).toLowerCase().trim()) {\r\n\t\t\t\t\tcase 'min-width':\r\n\t\t\t\t\tcase 'min-device-width':\r\n\t\t\t\t\tcase 'width':\r\n\t\t\t\t\t\tobj.minW = num(item);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'max-width':\r\n\t\t\t\t\tcase 'max-device-width':\r\n\t\t\t\t\t\tobj.maxW = num(item);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'min-height':\r\n\t\t\t\t\tcase 'min-device-height':\r\n\t\t\t\t\tcase 'height':\r\n\t\t\t\t\t\tobj.minH = num(item);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'max-height':\r\n\t\t\t\t\tcase 'max-device-height':\r\n\t\t\t\t\t\tobj.maxH = num(item);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tarr = query.match(/orientation:(\\s)(landscape|portrait)/gi);\r\n\t\tif (arr) {\r\n\t\t\tfor (var i = 0, length = arr.length; i < length; i++) {\r\n\t\t\t\tvar item = arr[i];\r\n\t\t\t\tif (item.toLowerCase().indexOf('portrait') !== -1) {\r\n\t\t\t\t\tobj.orientation = 'portrait';\r\n\t\t\t\t} else {\r\n\t\t\t\t\tobj.orientation = 'landscape';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tobj.id = mediaqueriescounter++;\r\n\t\tobj.fn = fn;\r\n\r\n\t\tif (element) {\r\n\t\t\tobj.element = element;\r\n\t\t}\r\n\r\n\t\tmediaqueries.push(obj);\r\n\t\treturn obj.id;\r\n\t};\r\n\r\n   /**\r\n   * creates inline CSS registered in the head tag. If you use id and \r\n   * execute CSS() twice then the previous styles will be removed.\r\n   * @param  {String} value \r\n   * @param  {String} id \r\n   */\r\n\tfunction style(value, id) { //W.CSS = W.STYLE = \r\n\t\tif (id) {\r\n\t\t $('#css' + id).remove();\r\n\t\t}\r\n\t\t$('<style type=\"text/css\"' + (id ? ' id=\"css' + id + '\"' : '') + '>' + (value instanceof Array ? value.join('') : value) + '</style>').appendTo('head');\r\n\t};\r\n\r\n\r\n\tfunction keyPress(fn, timeout, key) { // W.KEYPRESS = \r\n\t\tif (!timeout) {\r\n\t\t\ttimeout = 300;\r\n\t\t}\r\n\t\tvar str = fn.toString();\r\n\t\tvar beg = str.length - 20;\r\n\t\tif (beg < 0) {\r\n\t\t\tbeg = 0;\r\n\t\t}\r\n\t\tvar tkey = key ? key : langx.hashCode(str.substring(0, 20) + 'X' + str.substring(beg)) + '_keypress';\r\n\t\tlangx.setTimeout2(tkey, fn, timeout);\r\n\t};\r\n\r\n\r\n\t//-- Waits for jQuery\r\n\t//WAIT(function() {\r\n\t//\treturn !!W.jQuery;\r\n\t//}, function() {\r\n\r\n\t//\tsetInterval(function() {\r\n\t//\t\ttemp = {};\r\n\t//\t\tpaths = {};\r\n\t//\t\tcleaner();\r\n\t//\t}, (1000 * 60) * 5);\r\n\r\n\t\t// scheduler\r\n\r\n\r\n\t// No scrollbar\r\n\tvar cssnoscrollbar = {};\r\n\tvar clsnoscrollbar = 'noscrollbar';\r\n\tvar selnoscrollbar = '.' + clsnoscrollbar;\r\n\r\n\t\t$.fn.noscrollbar = function() {  // from v17.003\r\n\t\t\tvar t = this;\r\n\t\t\tvar sw = scrollbarWidth();\r\n\r\n\t\t\tcssnoscrollbar['overflow-y'] = sw ? 'scroll' : 'auto';\r\n\r\n\t\t\tfor (var i = 0; i < t.length; i++) {\r\n\t\t\t\tvar m = t[i];\r\n\t\t\t\tif (m && m.offsetParent) {\r\n\t\t\t\t\tvar el = $(m);\r\n\t\t\t\t\tvar w = $(el[0].parentNode).width();\r\n\t\t\t\t\tif (m.$noscrollbarwidth !== w) {\r\n\t\t\t\t\t\tm.$noscrollbarwidth = w;\r\n\t\t\t\t\t\tcssnoscrollbar.width = Math.ceil(w + sw) + 'px';\r\n\t\t\t\t\t\tel.css(cssnoscrollbar);\r\n\t\t\t\t\t\tif ((el.attr('class') || '').indexOf(clsnoscrollbar) === -1)\r\n\t\t\t\t\t\t\tel.aclass(clsnoscrollbar);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn t;\r\n\t\t};\r\n\r\n\r\n\t\t$.fn.aclass = function(a) {\r\n\t\t\treturn this.addClass(a);\r\n\t\t};\r\n\r\n\t\t$.fn.rclass = function(a) {\r\n\t\t\treturn a == null ? this.removeClass() : this.removeClass(a);\r\n\t\t};\r\n\r\n\t\t$.fn.rattr = function(a) {\r\n\t\t\treturn this.removeAttr(a);\r\n\t\t};\r\n\r\n\t\t$.fn.rattrd = function(a) {\r\n\t\t\treturn this.removeAttr('data-' + a);\r\n\t\t};\r\n\r\n\t\t$.fn.rclass2 = function(a) {\r\n\r\n\t\t\tvar self = this;\r\n\t\t\tvar arr = (self.attr('class') || '').split(' ');\r\n\t\t\tvar isReg = typeof(a) === 'object';\r\n\r\n\t\t\tfor (var i = 0, length = arr.length; i < length; i++) {\r\n\t\t\t\tvar cls = arr[i];\r\n\t\t\t\tif (cls) {\r\n\t\t\t\t\tif (isReg) {\r\n\t\t\t\t\t\ta.test(cls) && self.rclass(cls);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcls.indexOf(a) !== -1 && self.rclass(cls);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn self;\r\n\t\t};\r\n\r\n\t\t$.fn.hclass = function(a) {\r\n\t\t\treturn this.hasClass(a);\r\n\t\t};\r\n\r\n\t\t$.fn.tclass = function(a, v) {\r\n\t\t\treturn this.toggleClass(a, v);\r\n\t\t};\r\n\r\n\t\t$.fn.attrd = function(a, v) {\r\n\t\t\ta = 'data-' + a;\r\n\t\t\treturn v == null ? this.attr(a) : this.attr(a, v);\r\n\t\t};\r\n\r\n\t\t// Appends an SVG element\r\n\t\t$.fn.asvg = function(tag) {\r\n\r\n\t\t\tif (tag.indexOf('<') === -1) {\r\n\t\t\t\tvar el = document.createElementNS('http://www.w3.org/2000/svg', tag);\r\n\t\t\t\tthis.append(el);\r\n\t\t\t\treturn $(el);\r\n\t\t\t}\r\n\r\n\t\t\tvar d = document.createElementNS('http://www.w3.org/1999/xhtml', 'div');\r\n\t\t\td.innerHTML = '<svg xmlns=\"http://www.w3.org/2000/svg\">' + tag + '</svg>';\r\n\t\t\tvar f = document.createDocumentFragment();\r\n\t\t\twhile (d.firstChild.firstChild)\r\n\t\t\t\tf.appendChild(d.firstChild.firstChild);\r\n\t\t\tf = $(f);\r\n\t\t\tthis.append(f);\r\n\t\t\treturn f;\r\n\t\t};\r\n\r\n\t\t$.fn.psvg = function(tag) {\r\n\r\n\t\t\tif (tag.indexOf('<') === -1) {\r\n\t\t\t\tvar el = document.createElementNS('http://www.w3.org/2000/svg', tag);\r\n\t\t\t\tthis.prepend(el);\r\n\t\t\t\treturn $(el);\r\n\t\t\t}\r\n\r\n\t\t\tvar d = document.createElementNS('http://www.w3.org/1999/xhtml', 'div');\r\n\t\t\td.innerHTML = '<svg xmlns=\"http://www.w3.org/2000/svg\">' + tag + '</svg>';\r\n\t\t\tvar f = document.createDocumentFragment();\r\n\t\t\twhile (d.firstChild.firstChild)\r\n\t\t\t\tf.appendChild(d.firstChild.firstChild);\r\n\t\t\tf = $(f);\r\n\t\t\tthis.prepend(f);\r\n\t\t\treturn f;\r\n\t\t};\r\n\r\n\t\t$.fn.rescroll = function(offset, bottom) {\r\n\t\t\tvar t = this;\r\n\t\t\tt.each(function() {\r\n\t\t\t\tvar e = this;\r\n\t\t\t\tvar el = e;\r\n\t\t\t\tel.scrollIntoView(true);\r\n\t\t\t\tif (offset) {\r\n\t\t\t\t\tvar count = 0;\r\n\t\t\t\t\twhile (el && el.scrollTop == 0 && count++ < 25) {\r\n\t\t\t\t\t\tel = el.parentNode;\r\n\t\t\t\t\t\tif (el && el.scrollTop) {\r\n\r\n\t\t\t\t\t\t\tvar off = el.scrollTop + offset;\r\n\r\n\t\t\t\t\t\t\tif (bottom != false) {\r\n\t\t\t\t\t\t\t\tif (el.scrollTop + el.getBoundingClientRect().height >= el.scrollHeight) {\r\n\t\t\t\t\t\t\t\t\tel.scrollTop = el.scrollHeight;\r\n\t\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tel.scrollTop = off;\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn t;\r\n\t\t};\r\n\r\n\t\tfunction resize() {\r\n\t\t\t//var w = $(window); // TODO\r\n\t\t\t//W.WW = w.width();\r\n\t\t\t//W.WH = w.height(); \r\n\t\t\tmediaquery();\r\n\t\t}\r\n\r\n\t\tresize();\r\n\r\n\t\t$(window).on('resize', resize);\r\n\r\n\r\n\t\t$(window).on('orientationchange', mediaquery);\r\n\t//}, 100);\r\n\r\n\t$(function(){\r\n\t\t$domready = true;\r\n\t});\r\n\r\n\treturn {\r\n\t\t\"devices\" : $devices,\r\n\t\t\"findInstance\" : findInstance,\r\n\t\t\"inDOM\" : inDOM,\r\n\t\t\"importscripts\" : importscripts,\r\n\t\t\"importstyles\" : importstyles,\r\n\t\t\"inputable\" : inputable,\r\n\t\t\"keyPress\" : keyPress,\r\n\t\t\"mediaquery\" : mediaquery,\r\n\t\t\"mediaWidth\" : mediaWidth,\r\n\t\t\"Plugin\" : plugins.Plugin,\r\n\t\t\"removescripts\" : removescripts,\r\n\t\t\"scrollbarWidth\" : scrollbarWidth,\r\n\t\t\"style\" : style,\r\n\t\t\"watchMedia\" : watchMedia,\r\n\t\t\"$\" : $,\r\n\t}\r\n\r\n});"]}