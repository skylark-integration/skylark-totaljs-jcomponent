{"version":3,"sources":["components/Component.js"],"names":["define","langx","findFormat","Usage","temp","counter","com_validate2","com","valid","disabled","$valid_disabled","arr","state","push","$validate","validate","$valid","get","path","$interaction","clear","Component","klass","[object Object]","name","view","self","this","_id","ID","usage","$dirty","$parser","$formatter","$skip","$ready","$path","trim","$released","$bindreleased","$data","version","lastIndexOf","storing","$name","substring","type","id","removed","make","done","prerender","destroy","released","getter","value","realtime","nobind","parser","getter2","set","stateX","what","key","$bindchanges","$state","config","EXEC","call","setterX","setter","$bindexact","indexOf","cache","$bindcache","arguments","length","skips","$format","hash","HASH","$valuehash","$setter","data","setter2","is","bt","clearTimeout","setTimeout","$bindtimeout","a","formatter","findcontrol","element","t","$com","$default","autofill","el","$","val","tmp","toString","toLowerCase","checked","PPC","prototype","i","items","o","parentNode","exec","$ppc","c","components","all","owner","$pp","$except","except","p","b","$compare","fix","index","notmodified","fields","isString","NOTMODIFIED","$waiter","prop","callback","$W","setInterval","v","clearInterval","MD","delaywatcher","keys","Object","k","hidden","offsetParent","visible","width","offsetWidth","height","offsetHeight","import","url","insert","preparator","release","container","undefined","$removed","attrd","helper","nested","forEach","Array","validate2","d","e","replace","remove","C","recompile","n","prev","scope","rattrd","off","dom","siblings","now","Date","init","$binded","manually","input","default","custom","dirty","notify","NOTIFY","update","refresh","tclass","cls","aclass","timeout","hclass","rclass","rclass2","search","classes","add","rem","split","toggle","manual","isNumber","noscope","noScope","$noscope","nocompile","singleton","statics","blind","$$path","bindchanges","bindChanges","enable","bindexact","bindExact","bindvisible","bindVisible","delaybinder","readonly","noDirty","noValid","novalidate","noValidate","nodirty","$dirty_disabled","datasource","ds","$datasource","unwatch","fn","watch","setPath","charCodeAt","env","s","j","join","ready","attr","css","main","$main","parent","closest","rcwatch","reconfigure","isPlainObject","configure","$rcwatch","$config","cfg","$type","$id","$compile","$init","$class","$reconfigure","sel","TNB","number","boolean","html","empty","append","text","$children","m","event","on","apply","arg","find","selector","isInvalid","pathing","isFunction","pathmaker","invalid","noEmit","style","domx","change","used","reset","setDefault","kill","noClear","obj","removewaiter","setTimeout2","cleaner2","prepend","unshift","format","emit","evaluate","expression","nopath","skip","setx","inc","extend","rewrite"],"mappings":"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","file":"../../components/Component.js","sourcesContent":["define([\r\n\t\"../langx\",\r\n\t\"../binding/findFormat\",\r\n\t\"./Usage\"\r\n],function(langx, findFormat, Usage){\r\n\tvar temp = {};\r\n\r\n\tvar counter = 0;\r\n\r\n\tfunction com_validate2(com) {\r\n\r\n\t\tvar valid = true;\r\n\r\n\t\tif (com.disabled) {\r\n\t\t\treturn valid;\r\n\t\t}\r\n\r\n\t\tif (com.$valid_disabled) {\r\n\t\t\treturn valid;\r\n\t\t}\r\n\r\n\t\tvar arr = [];\r\n\t\tcom.state && arr.push(com);\r\n\t\tcom.$validate = true;\r\n\r\n\t\tif (com.validate) {\r\n\t\t\tcom.$valid = com.validate(get(com.path));\r\n\t\t\tcom.$interaction(102);\r\n\t\t\tif (!com.$valid)\r\n\t\t\t\tvalid = false;\r\n\t\t}\r\n\r\n\t\tclear('valid');\r\n\t\tlangx.state(arr, 1, 1);\r\n\t\treturn valid;\r\n\t}\r\n\r\n\t// ===============================================================\r\n\t// COMPONENT DECLARATION\r\n\t// ===============================================================\r\n\r\n\tvar Component = langx.klass({\r\n\t\t_construct(name,view) {\r\n\t\t\tvar self = this;\r\n\t\t\tself._id = self.ID = 'jc' + (counter++);\r\n\t\t\tself.usage = new Usage();\r\n\t\t\tself.$dirty = true;\r\n\t\t\tself.$valid = true;\r\n\t\t\tself.$validate = false;\r\n\t\t\tself.$parser = [];\r\n\t\t\tself.$formatter = [];\r\n\t\t\tself.$skip = false;\r\n\t\t\tself.$ready = false;\r\n\t\t\tself.$path;\r\n\t\t\tself.trim = true;\r\n\t\t\tself.$released = false;\r\n\t\t\tself.$bindreleased = true;\r\n\t\t\tself.$data = {};\r\n\r\n\t\t\tvar version = name.lastIndexOf('@');\r\n\r\n\t\t\tself.view = view;\r\n\t\t\tself.storing = view.storing;\r\n\t\t\t\r\n\t\t\tself.name = name;\r\n\t\t\tself.$name = version === -1 ? name : name.substring(0, version);\r\n\t\t\tself.version = version === -1 ? '' : name.substring(version + 1);\r\n\t\t\tself.path;\r\n\t\t\tself.type;\r\n\t\t\tself.id;\r\n\t\t\tself.disabled = false;\r\n\t\t\tself.removed = false;\r\n\r\n\t\t\tself.make;\r\n\t\t\tself.done;\r\n\t\t\tself.prerender;\r\n\t\t\tself.destroy;\r\n\t\t\tself.state;\r\n\t\t\tself.validate;\r\n\t\t\tself.released;\r\n\r\n\t\t\tself.getter = function(value, realtime, nobind) {\r\n\r\n\t\t\t\tvar self = this;\r\n\r\n\t\t\t\tvalue = self.parser(value);\r\n\t\t\t\tself.getter2 && self.getter2(value, realtime);\r\n\r\n\t\t\t\tif (realtime) {\r\n\t\t\t\t\tself.$skip = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Binds a value\r\n\t\t\t\tif (nobind) {\r\n\t\t\t\t\tcom_validate2(self);\r\n\t\t\t\t} else if (value !== self.get()) {\r\n\t\t\t\t\tself.set(value, 2);\r\n\t\t\t\t} else if (realtime === 3) {\r\n\t\t\t\t\t// A validation for same values, \"realtime=3\" is in \"blur\" event\r\n\t\t\t\t\t// Because we need to validate the input if the user leaves from the control\r\n\t\t\t\t\tcom_validate2(self);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tself.stateX = function(type, what) {\r\n\t\t\t\tvar key = type + 'x' + what;\r\n\t\t\t\tif (!self.$bindchanges || self.$state !== key) {\r\n\t\t\t\t\tself.$state = key;\r\n\t\t\t\t\tself.config.$state && EXEC.call(self, self.config.$state, type, what);\r\n\t\t\t\t\tself.state(type, what);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tself.setterX = function(value, path, type) {\r\n\r\n\t\t\t\tif (!self.setter || (self.$bindexact && self.path !== path && self.path.indexOf(path + '.') === -1 && type))\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tvar cache = self.$bindcache;\r\n\t\t\t\tif (arguments.length) {\r\n\r\n\t\t\t\t\tif (skips[self.path]) {\r\n\t\t\t\t\t\tvar s = --skips[self.path];\r\n\t\t\t\t\t\tif (s <= 0) {\r\n\t\t\t\t\t\t\tdelete skips[self.path];\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (self.$format) {\r\n\t\t\t\t\t\tvalue = self.$format(value, path, type);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (self.$bindreleased) {\r\n\r\n\t\t\t\t\t\tif (self.$bindchanges) {\r\n\t\t\t\t\t\t\tvar hash = HASH(value);\r\n\t\t\t\t\t\t\tif (hash === self.$valuehash)\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\tself.$valuehash = hash;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// Binds value directly\r\n\t\t\t\t\t\tself.config.$setter && EXEC.call(self, self.config.$setter, value, path, type);\r\n\t\t\t\t\t\tself.data('', value);\r\n\t\t\t\t\t\tself.setter(value, path, type);\r\n\t\t\t\t\t\tself.setter2 && self.setter2(value, path, type);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (self.$released) {\r\n\t\t\t\t\t\t\tcache.is = true;\r\n\t\t\t\t\t\t\tcache.value = value;\r\n\t\t\t\t\t\t\tcache.path = path;\r\n\t\t\t\t\t\t\tcache.type = type;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tcache.value = value;\r\n\t\t\t\t\t\t\tcache.path = path;\r\n\t\t\t\t\t\t\tcache.type = type;\r\n\t\t\t\t\t\t\tif (!cache.bt) {\r\n\t\t\t\t\t\t\t\tcache.is = true;\r\n\t\t\t\t\t\t\t\tself.setterX();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else if (!self.$released && cache && cache.is) {\r\n\t\t\t\t\tcache.is = false;\r\n\t\t\t\t\tcache.bt && clearTimeout(cache.bt);\r\n\t\t\t\t\tcache.bt = setTimeout(function(self) {\r\n\t\t\t\t\t\tvar cache = self.$bindcache;\r\n\t\t\t\t\t\tcache.bt = 0; // reset timer id\r\n\r\n\t\t\t\t\t\tif (self.$bindchanges) {\r\n\t\t\t\t\t\t\tvar hash = HASH(value);\r\n\t\t\t\t\t\t\tif (hash === self.$valuehash)\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\tself.$valuehash = hash;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tself.config.$setter && EXEC.call(self, self.config.$setter, cache.value, cache.path, cache.type);\r\n\t\t\t\t\t\tself.data('', cache.value);\r\n\t\t\t\t\t\tself.setter(cache.value, cache.path, cache.type);\r\n\t\t\t\t\t\tself.setter2 && self.setter2(cache.value, cache.path, cache.type);\r\n\t\t\t\t\t}, self.$bindtimeout, self);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tself.setter = function(value, path, type) {\r\n\r\n\t\t\t\tvar self = this;\r\n\r\n\t\t\t\tif (type === 2) {\r\n\t\t\t\t\tif (self.$skip) {\r\n\t\t\t\t\t\tself.$skip = false;\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar a = 'select-one';\r\n\t\t\t\tvalue = self.formatter(value);\r\n\r\n\t\t\t\tfindcontrol(self.element[0], function(t) {\r\n\r\n\t\t\t\t\tif (t.$com !== self)\r\n\t\t\t\t\t\tt.$com = self;\r\n\r\n\t\t\t\t\tvar path = t.$com.path;\r\n\t\t\t\t\tif (path && path.length && path !== self.path)\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\tif (t.type === 'checkbox') {\r\n\t\t\t\t\t\tvar tmp = value != null ? value.toString().toLowerCase() : '';\r\n\t\t\t\t\t\ttmp = tmp === 'true' || tmp === '1' || tmp === 'on';\r\n\t\t\t\t\t\ttmp !== t.checked && (t.checked = tmp);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (value == null)\r\n\t\t\t\t\t\tvalue = '';\r\n\r\n\t\t\t\t\tif (!type && t.type !== a && t.type !== 'range' && !self.$default && !value)\r\n\t\t\t\t\t\tautofill.push(t.$com);\r\n\r\n\t\t\t\t\tif (t.type === a || t.type === 'select') {\r\n\t\t\t\t\t\tvar el = $(t);\r\n\t\t\t\t\t\tel.val() !== value && el.val(value);\r\n\t\t\t\t\t} else if (t.value !== value)\r\n\t\t\t\t\t\tt.value = value;\r\n\t\t\t\t});\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t});\r\n\r\n\r\n\tvar PPC = Component.prototype;\r\n\r\n\t/*\r\n\t * Set or get data from internal component repository. \r\n\t * Data can be used for data-bind=\"\" attribute and nested j-Components. \r\n\t */\r\n\tPPC.data = function(key, value) {\r\n\r\n\t\tif (!key) {\r\n\t\t\tkey = '@';\r\n\t\t}\r\n\r\n\t\tvar self = this;\r\n\t\tvar data = self.$data[key];\r\n\r\n\t\tif (arguments.length === 1) {\r\n\t\t\treturn data ? data.value : null;\r\n\t\t}\r\n\r\n\t\tif (data) {\r\n\t\t\tdata.value = value;\r\n\t\t\tfor (var i = 0; i < data.items.length; i++) {\r\n\t\t\t\tvar o = data.items[i];\r\n\t\t\t\to.el[0].parentNode && o.exec(value, key);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tself.$data[key] = { \r\n\t\t\t\tvalue: value, \r\n\t\t\t\titems: [] \r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tif (self.$ppc) {\r\n\t\t\tvar c = self.view.components.all; //M.components;\r\n\t\t\tfor (var i = 0; i < c.length; i++) {\r\n\t\t\t\tvar com = c[i];\r\n\t\t\t\tif (com.owner === self && com.$pp && key === com.path)\r\n\t\t\t\t\tcom.setterX(value, value, 2);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn value;\r\n\t};\r\n\r\n\t/*\r\n\t * \r\n\t */\r\n\tPPC.$except = function(except) {\r\n\t\tvar p = self.$path;\r\n\t\tfor (var a = 0; a < except.length; a++) {\r\n\t\t\tfor (var b = 0; b < p.length; b++) {\r\n\t\t\t\tif (except[a] === p[b]) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t};\r\n\r\n\t/*\r\n\t * \r\n\t */\r\n\tPPC.$compare = function(path, fix) {\r\n\t\tvar self = this;\r\n\r\n\t\tif (fix)\r\n\t\t\treturn self.path === path;\r\n\r\n\t\tif (path.length > self.path.length) {\r\n\t\t\tvar index = path.lastIndexOf('.', self.path.length);\r\n\t\t\treturn index === -1 ? false : self.path === path.substring(0, index);\r\n\t\t}\r\n\r\n\t\tfor (var i = 0, length = self.$path.length; i < length; i++) {\r\n\t\t\tif (self.$path[i] === path) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t/*\r\n\t * Removes waiter.\r\n\t */\r\n\tfunction removewaiter(obj) {\r\n\t\tif (obj.$W) {\r\n\t\t\tvar keys = Object.keys(obj.$W);\r\n\t\t\tfor (var i = 0, length = keys.length; i < length; i++) {\r\n\t\t\t\tvar v = obj.$W[keys[i]];\r\n\t\t\t\tif (v.id) {\r\n\t\t\t\t\tclearInterval(v.id);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/*\r\n\t * \r\n\t */\r\n\tPPC.notmodified = function(fields) {\r\n\t\tvar t = this;\r\n\t\tif (langx.isString(fields)) {\r\n\t\t\tfields = [fields];\r\n\t\t}\r\n\t\treturn NOTMODIFIED(t._id, t.get(), fields);\r\n\t};\r\n\r\n\t/*\r\n\t * \r\n\t */\r\n\tPPC.$waiter = function(prop, callback) {\r\n\r\n\t\tvar t = this;\r\n\r\n\t\tif (prop === true) {\r\n\t\t\tif (t.$W) {\r\n\t\t\t\tvar keys = Object.keys(t.$W);\r\n\t\t\t\tfor (var i = 0; i < keys.length; i++) {\r\n\t\t\t\t\tvar k = keys[i];\r\n\t\t\t\t\tvar o = t.$W[k];\r\n\t\t\t\t\to.id = setInterval(function(t, prop) {\r\n\t\t\t\t\t\tvar o = t.$W[prop];\r\n\t\t\t\t\t\tvar v = t[prop]();\r\n\t\t\t\t\t\tif (v) {\r\n\t\t\t\t\t\t\tclearInterval(o.id);\r\n\t\t\t\t\t\t\tfor (var i = 0; i < o.callback.length; i++)\r\n\t\t\t\t\t\t\t\to.callback[i].call(t, v);\r\n\t\t\t\t\t\t\tdelete t.$W[prop];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, MD.delaywatcher, t, k);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t} else if (prop === false) {\r\n\t\t\tif (t.$W) {\r\n\t\t\t\tvar keys = Object.keys(t.$W);\r\n\t\t\t\tfor (var i = 0; i < keys.length; i++) {\r\n\t\t\t\t\tvar a = t.$W[keys[i]];\r\n\t\t\t\t\ta && clearInterval(a.id);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t!t.$W && (t.$W = {});\r\n\r\n\t\tif (t.$W[prop]) {\r\n\t\t\t// Checks if same callback exists\r\n\t\t\tfor (var i = 0; i < t.$W[prop].length; i++) {\r\n\t\t\t\tif (t.$W[prop][i] === callback)\r\n\t\t\t\t\treturn t;\r\n\t\t\t}\r\n\t\t\tt.$W[prop].callback.push(callback);\r\n\t\t\treturn t;\r\n\t\t} else\r\n\t\t\tt.$W[prop] = { callback: [callback] };\r\n\r\n\t\tif (!t.$released) {\r\n\t\t\tt.$W[prop].id = setInterval(function(t, prop) {\r\n\t\t\t\tvar o = t.$W[prop];\r\n\t\t\t\tvar v = t[prop]();\r\n\t\t\t\tif (v) {\r\n\t\t\t\t\tclearInterval(o.id);\r\n\t\t\t\t\tfor (var i = 0; i < o.callback.length; i++) {\r\n\t\t\t\t\t\to.callback[i].call(t, v);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdelete t.$W[prop];\r\n\t\t\t\t}\r\n\t\t\t}, MD.delaywatcher, t, prop);\r\n\t\t}\r\n\t\treturn t;\r\n\t};\r\n\r\n\t/*\r\n\t * .\r\n\t */\r\n\tPPC.hidden = function(callback) {\r\n\t\tvar t = this;\r\n\t\tvar v = t.element ? t.element[0].offsetParent : null;\r\n\t\tv = v === null;\r\n\t\tif (callback) {\r\n\t\t\tif (v) {\r\n\t\t\t\tcallback.call(t);\r\n\t\t\t} else {\r\n\t\t\t\tt.$waiter('hidden', callback);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn v;\r\n\t};\r\n\r\n\t/*\r\n\t * \r\n\t */\r\n\tPPC.visible = function(callback) {\r\n\t\tvar t = this;\r\n\t\tvar v = t.element ? t.element[0].offsetParent : null;\r\n\t\tv = v !== null;\r\n\t\tif (callback) {\r\n\t\t\tif (v) {\r\n\t\t\t\tcallback.call(t);\r\n\t\t\t} else {\r\n\t\t\t\tt.$waiter('visible', callback);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn v;\r\n\t};\r\n\r\n\t/*\r\n\t * \r\n\t */\r\n\tPPC.width = function(callback) {\r\n\t\tvar t = this;\r\n\t\tvar v = t.element ? t.element[0].offsetWidth : 0;\r\n\t\tif (callback) {\r\n\t\t\tif (v) {\r\n\t\t\t\tcallback.call(t, v);\r\n\t\t\t} else {\r\n\t\t\t\tt.$waiter('width', callback);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn v;\r\n\t};\r\n\r\n\t/*\r\n\t * \r\n\t */\r\n\tPPC.height = function(callback) {\r\n\t\tvar t = this;\r\n\t\tvar v = t.element ? t.element[0].offsetHeight : 0;\r\n\t\tif (callback) {\r\n\t\t\tif (v) {\r\n\t\t\t\tcallback.call(t, v);\r\n\t\t\t} else {\r\n\t\t\t\tt.$waiter('height', callback);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn v;\r\n\t};\r\n\r\n\t/*\r\n\t * Import some content from external source to this element.\r\n\t */\r\n\tPPC.import = function(url, callback, insert, preparator) {\r\n\t\tvar self = this;\r\n\t\tthis.view.import(url, self.element, callback, insert, preparator);\r\n\t\treturn self;\r\n\t};\r\n\r\n\t/*\r\n\t * Performs release state for all nested components.\r\n\t */\r\n\tPPC.release = function(value, container) {\r\n\r\n\t\tvar self = this;\r\n\t\tif (value === undefined || self.$removed) {\r\n\t\t\treturn self.$released;\r\n\t\t}\r\n\r\n\t\tself.attrd('jc-released', value);\r\n\r\n\t\t//(container || self.element).find(consts.ATTRCOM).each(function() {\r\n\t\thelper.nested(container || self.element).forEach(function(){ \r\n\t\t\tvar el = $(this);\r\n\t\t\tel.attrd('jc-released', value ? 'true' : 'false');\r\n\t\t\tvar com = el[0].$com;\r\n\t\t\tif (com instanceof Object) {\r\n\t\t\t\tif (com instanceof Array) {\r\n\t\t\t\t\tfor (var i = 0, length = com.length; i < length; i++) {\r\n\t\t\t\t\t\tvar o = com[i];\r\n\t\t\t\t\t\tif (!o.$removed && o.$released !== value) {\r\n\t\t\t\t\t\t\to.$released = value;\r\n\t\t\t\t\t\t\to.released && o.released(value, self);\r\n\t\t\t\t\t\t\to.$waiter(!value);\r\n\t\t\t\t\t\t\t!value && o.setterX();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (!com.$removed && com.$released !== value) {\r\n\t\t\t\t\tcom.$released = value;\r\n\t\t\t\t\tcom.released && com.released(value, self);\r\n\t\t\t\t\tcom.$waiter(!value);\r\n\t\t\t\t\t!value && com.setterX();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif (!container && self.$released !== value) {\r\n\t\t\tself.$released = value;\r\n\t\t\tself.released && self.released(value, self);\r\n\t\t\tself.$waiter(!value);\r\n\t\t\t!value && self.setterX();\r\n\t\t}\r\n\r\n\t\treturn value;\r\n\t};\r\n\r\n\t/*\r\n\t * Performs validation with refreshing state of component\r\n\t */\r\n\tPPC.validate2 = function() {\r\n\t\treturn com_validate2(this);\r\n\t};\r\n\r\n\t/*\r\n\t * Returns all nested components.\r\n\t */\r\n\tPPC.exec = function(name, a, b, c, d, e) {\r\n\t\tvar self = this;\r\n\t\t/*\r\n\t\tself.find(consts.ATTRCOM).each(function() {\r\n\t\t\tvar t = this;\r\n\t\t\tif (t.$com) {\r\n\t\t\t\tt.$com.caller = self;\r\n\t\t\t\tt.$com[name] && this.$com[name](a, b, c, d, e);\r\n\t\t\t}\r\n\t\t});\r\n\t\t*/\r\n\r\n\t\treturn self;\r\n\t};\r\n\r\n\t/*\r\n\t * Returns all nested components.\r\n\t */\r\n\tPPC.replace = function(el, remove) {\r\n\t\tvar self = this;\r\n\r\n\t\tif (C.is) {\r\n\t\t\tC.recompile = true;\r\n\t\t}\r\n\r\n\t\tvar n = 'jc-scope';\r\n\t\tvar prev = self.element;\r\n\t\tvar scope = prev.attrd(n);\r\n\r\n\t\tself.element.rattrd('jc');\r\n\t\tself.element[0].$com = null;\r\n\t\tscope && self.element.rattrd(n);\r\n\r\n\t\tif (remove) {\r\n\t\t\tprev.off().remove();\r\n\t\t} else {\r\n\t\t\tself.attrd('jc-replaced', 'true');\r\n\t\t}\r\n\r\n\t\tself.element = $(el);\r\n\t\tself.dom = self.element[0];\r\n\t\tself.dom.$com = self;\r\n\t\tself.attrd('jc', self.name);\r\n\t\tif (scope) {\r\n\t\t\tself.attrd(n, scope);\r\n\t\t}\r\n\t\tself.siblings = false;\r\n\t\treturn self;\r\n\t};\r\n\r\n\t//PPC.compile \r\n\r\n\t/*\r\n\t * Returns all nested components.\r\n\t */\r\n\tPPC.nested = function() {\r\n\t\treturn helper.nested(this.element);\r\n\r\n\t\t/*\r\n\t\tvar arr = [];\r\n\t\tthis.find(ATTRCOM).each(function() {\r\n\t\t\tvar el = $(this);\r\n\t\t\tvar com = el[0].$com;\r\n\t\t\tif (com && !el.attr(ATTRDEL)) {\r\n\t\t\t\tif (com instanceof Array)\r\n\t\t\t\t\tarr.push.apply(arr, com);\r\n\t\t\t\telse\r\n\t\t\t\t\tarr.push(com);\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn arr;\r\n\t\t*/\r\n\t};\r\n\r\n\t/*\r\n\t * Sets the last interaction time,time will be stored in self.usage.\r\n\t */\r\n\tPPC.$interaction = function(type) {\r\n\r\n\t\t// type === 0 : init\r\n\t\t// type === 1 : manually\r\n\t\t// type === 2 : by input\r\n\t\t// type === 3 : by default\r\n\t\t// type === 100 : custom\r\n\t\t// type === 101 : dirty\r\n\t\t// type === 102 : valid\r\n\r\n\t\tvar now = Date.now();\r\n\t\tvar t = this;\r\n\r\n\t\tswitch (type) {\r\n\t\t\tcase 0:\r\n\t\t\t\tt.usage.init = now;\r\n\t\t\t\tt.$binded = true;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 1:\r\n\t\t\t\tt.usage.manually = now;\r\n\t\t\t\tt.$binded = true;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 2:\r\n\t\t\t\tt.usage.input = now;\r\n\t\t\t\tt.$binded = true;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 3:\r\n\t\t\t\tt.usage.default = now;\r\n\t\t\t\tt.$binded = true;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 100:\r\n\t\t\t\tt.usage.custom = now;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 101:\r\n\t\t\t\tt.usage.dirty = now;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 102:\r\n\t\t\t\tt.usage.valid = now;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\treturn t;\r\n\t};\r\n\r\n\t/*\r\n\t * Notifies a setter in all components according to the component.path.\r\n\t */\r\n\tPPC.notify = function() {\r\n\t\tNOTIFY(this.path);\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/*\r\n\t * Executes the component.setter with a refreshed value according to the component.path.\r\n\t */\r\n\tPPC.update = PPC.refresh = function(notify, type) {\r\n\t\tvar self = this;\r\n\t\tif (self.$binded) {\r\n\r\n\t\t\tif (langx.isString(notify)) {\r\n\t\t\t\ttype = notify;\r\n\t\t\t\tnotify = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (notify) {\r\n\t\t\t\tself.set(self.get(), type);\r\n\t\t\t} else {\r\n\t\t\t\tif (self.setter) {\r\n\t\t\t\t self.setterX(self.get(), self.path, 1);\r\n\t\t\t\t}\r\n\t\t\t\tself.$interaction(1);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn self;\r\n\t};\r\n\r\n\t/*\r\n\t * Toggles class, it's alias for self.element.toggleClass().\r\n\t */\r\n\tPPC.tclass = function(cls, v) {\r\n\t\tvar self = this;\r\n\t\tself.element.tclass(cls, v);\r\n\t\treturn self;\r\n\t};\r\n\r\n\t/*\r\n\t * Adds CSS class into the element classes., it's alias for self.element.addClass().\r\n\t */\r\n\tPPC.aclass = function(cls, timeout) {\r\n\t\tvar self = this;\r\n\t\tif (timeout) {\r\n\t\t\tsetTimeout(function() { self.element.aclass(cls); }, timeout);\r\n\t\t} else {\r\n\t\t\tself.element.aclass(cls);\r\n\t\t}\r\n\t\treturn self;\r\n\t};\r\n\r\n\t/*\r\n\t * Determines class, it's alias for self.element.hasClass().\r\n\t */\r\n\tPPC.hclass = function(cls) {\r\n\t\treturn this.element.hclass(cls);\r\n\t};\r\n\r\n\t/*\r\n\t * Removes class, it's alias for self.element.removeClass().\r\n\t */\r\n\tPPC.rclass = function(cls, timeout) {\r\n\t\tvar self = this;\r\n\t\tvar e = self.element;\r\n\t\tif (timeout)\r\n\t\t\tsetTimeout(function() { e.rclass(cls); }, timeout);\r\n\t\telse {\r\n\t\t\tif (cls) {\r\n\t\t\t\te.rclass(cls);\r\n\t\t\t} else {\r\n\t\t\t\te.rclass();\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn self;\r\n\t};\r\n\r\n\t/*\r\n\t *  Removes classes according to the text to search.\r\n\t */\r\n\tPPC.rclass2 = function(search) {\r\n\t\tthis.element.rclass2(search);\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/*\r\n\t * Add or remove CSS classes.\r\n\t */\r\n\tPPC.classes = function(cls) {\r\n\r\n\t\tvar key = 'cls.' + cls;\r\n\t\tvar tmp = temp[key]; // caches.temp[key];\r\n\t\tvar t = this;\r\n\t\tvar e = t.element;\r\n\r\n\t\tif (tmp) {\r\n\t\t\ttmp.add && e.aclass(tmp.add);\r\n\t\t\ttmp.rem && e.rclass(tmp.rem);\r\n\t\t\treturn t;\r\n\t\t}\r\n\r\n\t\tvar arr = cls instanceof Array ? cls : cls.split(' ');\r\n\t\tvar add = '';\r\n\t\tvar rem = '';\r\n\r\n\t\tfor (var i = 0, length = arr.length; i < length; i++) {\r\n\t\t\tvar c = arr[i].substring(0, 1);\r\n\t\t\tif (c === '-')\r\n\t\t\t\trem += (rem ? ' ' : '') + arr[i].substring(1);\r\n\t\t\telse\r\n\t\t\t\tadd += (add ? ' ' : '') + (c === '+' ? arr[i].substring(1) : arr[i]);\r\n\t\t}\r\n\r\n\t\tif (add) {\r\n\t\t\te.aclass(add);\r\n\t\t}\r\n\t\tif (rem) {\r\n\t\t\te.rclass(rem);\r\n\t\t}\r\n\r\n\t\tif (cls instanceof Array) {\r\n\t\t\treturn t;\r\n\t\t}\r\n\r\n\t\ttemp[key] = { add: add, rem: rem };  // caches.temp[key] = { add: add, rem: rem }; \r\n\t\treturn t;\r\n\t};\r\n\r\n\t/*\r\n\t * Returns a parent component instance if exists (otherwise: null).\r\n\t */\r\n\tPPC.toggle = function(cls, visible, timeout) {\r\n\r\n\t\tvar manual = false;\r\n\t\tvar self = this;\r\n\r\n\t\tif (!langx.isString(cls)) {\r\n\t\t\ttimeout = visible;\r\n\t\t\tvisible = cls;\r\n\t\t\tcls = 'hidden';\r\n\t\t\tmanual = true;\r\n\t\t}\r\n\r\n\t\tif (langx.isNumber(visible)) {\r\n\t\t\ttimeout = visible;\r\n\t\t\tvisible = undefined;\r\n\t\t} else if (manual && visible !== undefined) {\r\n\t\t\tvisible = !visible;\r\n\t\t}\r\n\r\n\t\tvar el = self.element;\r\n\t\tif (!timeout) {\r\n\t\t\tel.tclass(cls, visible);\r\n\t\t\treturn self;\r\n\t\t}\r\n\r\n\t\tsetTimeout(function() {\r\n\t\t\tel.tclass(cls, visible);\r\n\t\t}, timeout);\r\n\t\treturn self;\r\n\t};\r\n\r\n\t/*\r\n\t * Disables scopes according to the data-jc-scope attribute.\r\n\t */\r\n\tPPC.noscope = PPC.noScope = function(value) {\r\n\t\tvar self = this;\r\n\t\tself.$noscope = value === undefined ? true : value === true;\r\n\t\treturn self;\r\n\t};\r\n\r\n\t/*\r\n\t * Returns a parent component instance if exists (otherwise: null).\r\n\t */\r\n\tPPC.nocompile = function() {\r\n\t\tvar self = this;\r\n\t\tself.element.attrd('jc-compile', '0');\r\n\t\treturn self;\r\n\t};\r\n\r\n\t/*\r\n\t * Creates a single instance of the component. \r\n\t * So if the component will be declared multiple times then jComponent creates the only one instance and \r\n\t * another declarations will be skipped.\r\n\t */\r\n\tPPC.singleton = function() {\r\n\t\tvar self = this;\r\n\t\tstatics['$ST_' + self.name] = true;\r\n\t\treturn self;\r\n\t};\r\n\r\n\t/*\r\n\t * Sets the component as blind.\r\n\t * Component will be skipped when jComponent performs data-binding. \r\n\t * If your component won't work with data-binding then this option can increase a performance of your web app.\r\n\t */\r\n\tPPC.blind = function() {\r\n\t\tvar self = this;\r\n\t\tself.path = null;\r\n\t\tself.$path = null;\r\n\t\tself.$$path = null;\r\n\t\treturn self;\r\n\t};\r\n\r\n\t/*\r\n\t * Binds changes only. \r\n\t * If setter will get the same value as a previous value then skips binding.\r\n\t */\r\n\tPPC.bindchanges = PPC.bindChanges = function(enable) {\r\n\t\tthis.$bindchanges = enable == null || enable === true;\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/*\r\n\t * Sets binding of values when the the modification path is same as the component path or the path is part of parent path.\r\n\t */\r\n\tPPC.bindexact = PPC.bindExact = function(enable) {\r\n\t\tthis.$bindexact = enable == null || enable === true;\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/*\r\n\t * Sets binding of values only when the component is not released.\r\n\t * it depends on releasing of the parent component.\r\n\t */\r\n\tPPC.bindvisible = PPC.bindVisible = function(timeout) {\r\n\t\tvar self = this;\r\n\t\tself.$bindreleased = false;\r\n\t\tself.$bindtimeout = timeout || MD.delaybinder;\r\n\t\tself.$bindcache = {};\r\n\t\treturn self;\r\n\t};\r\n\r\n\t/*\r\n\t * Enables readonly mode for the component.\r\n\t * It disables dirty and valid states, getter, setter, parsers and formatters. \r\n\t * This option can improve performance.\r\n\t */\r\n\tPPC.readonly = function() {\r\n\t\tvar self = this;\r\n\t\tself.noDirty();\r\n\t\tself.noValid();\r\n\t\tself.getter = null;\r\n\t\tself.setter = null;\r\n\t\tself.$parser = null;\r\n\t\tself.$formatter = null;\r\n\t\treturn self;\r\n\t};\r\n\r\n\t/*\r\n\t * Returns a parent component instance if exists (otherwise: null).\r\n\t */\r\n\tPPC.novalidate = PPC.noValid = PPC.noValidate = function(val) {\r\n\t\tif (val === undefined) {\r\n\t\t\tval = true;\r\n\t\t}\r\n\t\tvar self = this;\r\n\t\tself.$valid_disabled = val;\r\n\t\tself.$valid = val;\r\n\t\treturn self;\r\n\t};\r\n\r\n\t/*\r\n\t * Returns a parent component instance if exists (otherwise: null).\r\n\t */\r\n\tPPC.nodirty = PPC.noDirty = function(val) {\r\n\t\tif (val === undefined) {\r\n\t\t\tval = true;\r\n\t\t}\r\n\t\tvar self = this;\r\n\t\tself.$dirty_disabled = val;\r\n\t\tself.$dirty = !val;\r\n\t\treturn self;\r\n\t};\r\n\r\n\t/*\r\n\t * Watch some additional data-source.\r\n\t * Each next declaration of self.datasource() cancels previous declaration.\r\n\t */\r\n\tPPC.datasource = function(path, callback, init) {\r\n\t\tvar self = this;\r\n\t\tvar ds = self.$datasource;\r\n\r\n\t\tds && self.unwatch(ds.path, ds.fn);\r\n\r\n\t\tif (path) {\r\n\t\t\tself.$datasource = { path: path, fn: callback };\r\n\t\t\tself.watch(path, callback, init !== false);\r\n\t\t} else\r\n\t\t\tself.$datasource = null;\r\n\r\n\t\treturn self;\r\n\t};\r\n\r\n\t/*\r\n\t * Rewrites component.path.\r\n\t */\r\n\tPPC.setPath = function(path, type) {\r\n\r\n\t\t// type 1: init\r\n\t\t// type 2: scope\r\n\r\n\t\tvar self = this;\r\n\t\tvar tmp = findFormat(path);\r\n\r\n\t\tif (tmp) {\r\n\t\t\tpath = tmp.path;\r\n\t\t\tself.$format = tmp.fn;\r\n\t\t} else if (!type) {\r\n\t\t\tself.$format = null;\r\n\t\t}\r\n\r\n\t\tvar arr = [];\r\n\r\n\t\tif (path.substring(0, 1) === '@') {\r\n\t\t\tpath = path.substring(1);\r\n\t\t\tself.$pp = true;\r\n\t\t\tself.owner.$ppc = true;\r\n\t\t} else {\r\n\t\t\tself.$pp = false;\r\n\t\t}\r\n\r\n\t\t// Temporary\r\n\t\tif (path.charCodeAt(0) === 37) { // %\r\n\t\t\tpath = 'jctmp.' + path.substring(1);\r\n\t\t}\r\n\r\n\t\tpath = path.env();\r\n\r\n\t\t// !path = fixed path\r\n\t\tif (path.charCodeAt(0) === 33) { // !\r\n\t\t\tpath = path.substring(1);\r\n\t\t\tarr.push(path);\r\n\t\t} else {\r\n\t\t\tvar p = path.split('.');\r\n\t\t\tvar s = [];\r\n\t\t\tfor (var j = 0; j < p.length; j++) {\r\n\t\t\t\tvar b = p[j].lastIndexOf('[');\r\n\t\t\t\tif (b !== -1) {\r\n\t\t\t\t\tvar c = s.join('.');\r\n\t\t\t\t\tarr.push(c + (c ? '.' : '') + p[j].substring(0, b));\r\n\t\t\t\t}\r\n\t\t\t\ts.push(p[j]);\r\n\t\t\t\tarr.push(s.join('.'));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tself.path = path;\r\n\t\tself.$path = arr;\r\n\t\t\r\n\t\tif (type !== 1 && C.ready) {\r\n\t\t\trefresh(); // TODO\r\n\t\t}\r\n\t\treturn self;\r\n\t};\r\n\r\n\t/*\r\n\t * Get/set a value into the element attribute, it's alias for self.element.attr(name, [value]).\r\n\t */\r\n//\tPPC.attr = SCP.attr = function(name, value) {\r\n\tPPC.attr = function(name, value) {\r\n\t\tvar el = this.element;\r\n\t\tif (value === undefined) {\r\n\t\t\treturn el.attr(name);\r\n\t\t}\r\n\t\tel.attr(name, value);\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/*\r\n\t * Get/set a value into the element attribute with data- prefix for name of attribute.\r\n\t * it's alias for self.element.attr(name, [value]).\r\n\t */\r\n//\tPPC.attrd = SCP.attrd = function(name, value) {\r\n\tPPC.attrd = function(name, value) {\r\n\t\tname = 'data-' + name;\r\n\t\tvar el = this.element;\r\n\t\tif (value === undefined) {\r\n\t\t\treturn el.attr(name);\r\n\t\t}\r\n\t\tel.attr(name, value);\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/*\r\n\t * Sets css or get, it's alias for self.element.css(name, [value]).\r\n\t */\r\n//\tPPC.css = SCP.css = function(name, value) {\r\n\tPPC.css = function(name, value) {\r\n\t\tvar el = this.element;\r\n\t\tif (value === undefined) {\r\n\t\t\treturn el.css(name);\r\n\t\t}\r\n\t\tel.css(name, value);\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/*\r\n\t * Returns a parent component instance if exists (otherwise: null).\r\n\t */\r\n//\tPPC.main = SCP.main = function() {\r\n\tPPC.main = function() {\r\n\t\tvar self = this;\r\n\t\tif (self.$main === undefined) {\r\n\t\t\tvar tmp = self.parent().closest('[data-jc]')[0];\r\n\t\t\tself.$main = tmp ? tmp.$com : null;\r\n\t\t}\r\n\t\treturn self.$main;\r\n\t};\r\n\r\n\tPPC.rcwatch = function(path, value) {\r\n\t\treturn value ? this.reconfigure(value) : this;\r\n\t};\r\n\r\n\tPPC.reconfigure = function(value, callback, init) {\r\n\t\tvar self = this;\r\n\t\tif (langx.isPlainObject(value)) {\r\n\t\t\tObject.keys(value).forEach(function(k) {\r\n\t\t\t\tvar prev = self.config[k];\r\n\t\t\t\tif (!init && self.config[k] !== value[k])\r\n\t\t\t\t\tself.config[k] = value[k];\r\n\t\t\t\tif (callback) {\r\n\t\t\t\t\tcallback(k, value[k], init, init ? undefined : prev);\r\n\t\t\t\t} else if (self.configure) {\r\n\t\t\t\t\tself.configure(k, value[k], init, init ? undefined : prev);\r\n\t\t\t\t}\r\n\t\t\t\tself.data('config.' + k, value[k]);\r\n\t\t\t});\r\n\t\t} else if (value.substring(0, 1) === '=') {\r\n\t\t\tvalue = value.substring(1);\r\n\t\t\tif (self.watch) {\r\n\t\t\t\tself.$rcwatch && self.unwatch(self.$rcwatch, self.rcwatch);\r\n\t\t\t\tself.watch(value, self.rcwatch);\r\n\t\t\t\tself.$rcwatch = value;\r\n\t\t\t}\r\n\t\t\tself.reconfigure(get(value), callback, init);\r\n\t\t} else {\r\n\t\t\tvalue.$config(function(k, v) {\r\n\t\t\t\tvar prev = self.config[k];\r\n\t\t\t\tif (!init && self.config[k] !== v)\r\n\t\t\t\t\tself.config[k] = v;\r\n\t\t\t\tself.data('config.' + k, v);\r\n\t\t\t\tif (callback) {\r\n\t\t\t\t\tcallback(k, v, init, init ? undefined : prev);\r\n\t\t\t\t} else if (self.configure) {\r\n\t\t\t\t\tself.configure(k, v, init, init ? undefined : prev);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tvar cfg = self.config;\r\n\r\n\t\tself.data('config', cfg);\r\n\r\n\t\tif (cfg.$type) {\r\n\t\t\tself.type = cfg.$type;\r\n\t\t}\r\n\r\n\t\tif (cfg.$id) {\r\n\t\t\tself.id = cfg.$id;\r\n\t\t}\r\n\r\n\t\tif (cfg.$compile == false) {\r\n\t\t\tself.nocompile();\r\n\t\t}\r\n\r\n\t\tif (cfg.$init) {\r\n\t\t\tself.$init = cfg.$init;\r\n\t\t}\r\n\r\n\t\tif (cfg.$class) {\r\n\t\t\tself.tclass(cfg.$class);\r\n\t\t}\r\n\t\t\r\n\t\tif (cfg.$released) {\r\n\t\t\tself.release(cfg.$released == true);\r\n\t\t}\r\n\t\t\r\n\t\tif (cfg.$reconfigure) {\r\n\t\t\tEXEC.call(cfg.$reconfigure, cfg); // TODO\r\n\t\t}\r\n\t\treturn self;\r\n\t};\r\n\r\n//\tPPC.closest = SCP.closest = function(sel) {\r\n\tPPC.closest = function(sel) {\r\n\t\treturn this.element.closest(sel);\r\n\t};\r\n\r\n//\tPPC.parent = SCP.parent = function(sel) {\r\n\tPPC.parent = function(sel) {\r\n\t\treturn this.element.parent(sel);\r\n\t};\r\n\r\n\tvar TNB = { number: 1, boolean: 1 };\r\n\r\n\tPPC.html = function(value) {\r\n\t\tvar el = this.element;\r\n\t\tif (value === undefined) {\r\n\t\t\treturn el.html();\r\n\t\t}\r\n\t\tif (value instanceof Array) {\r\n\t\t\tvalue = value.join('');\r\n\t\t}\r\n\t\tvar type = typeof(value);\r\n\t\t//caches.current.element = el[0];\r\n\t\tvar v = (value || TNB[type]) ? el.empty().append(value) : el.empty();\r\n\t\t//caches.current.element = null;\r\n\t\treturn v;\r\n\t};\r\n\r\n\t/*\r\n\t * This method is alias for self.element.text(), it can set/get a content of the element.\r\n\t */\r\n\tPPC.text = function(value) {\r\n\t\tvar el = this.element;\r\n\t\tif (value === undefined) {\r\n\t\t\treturn el.text();\r\n\t\t}\r\n\t\tif (value instanceof Array) {\r\n\t\t\tvalue = value.join('');\r\n\t\t}\r\n\t\tvar type = typeof(value);\r\n\t\treturn (value || TNB[type]) ? el.empty().text(value) : el.empty();\r\n\t};\r\n\r\n\r\n\t/*\r\n\t * Removes the whole content of element and important removes all components which the parent component is this component.\r\n\t * It is alias for self.element.empty()\r\n\t */\r\n\tPPC.empty = function() {\r\n\r\n\t\tvar self = this;\r\n\r\n\t\tif (self.$children) {\r\n\t\t\tfor (var i = 0, length = all.length; i < length; i++) { // M.components.length\r\n\t\t\t\tvar m = all[i]; //M.components[i];\r\n\t\t\t\t!m.$removed && m.owner === self && m.remove();\r\n\t\t\t}\r\n\t\t\tself.$children = 0;\r\n\t\t}\r\n\r\n\t\tvar el = self.element;\r\n\t\tel.empty();\r\n\t\treturn el;\r\n\t};\r\n\r\n//\tPPC.append = SCP.append = function(value) {\r\n\tPPC.append = function(value) {\r\n\t\tvar el = this.element;\r\n\t\tif (value instanceof Array) {\r\n\t\t\tvalue = value.join('');\r\n\t\t}\r\n\t\t//caches.current.element = el[0];\r\n\t\tvar v = value ? el.append(value) : el;\r\n\t\t//caches.current.element = null;\r\n\t\treturn v;\r\n\t};\r\n\r\n\t/*\r\n\t * Registers a new event for the element. Is alias for self.element.on() method.\r\n\t */\r\n//\tPPC.event = SCP.event = function() {\r\n\tPPC.event = function() {\r\n\t\tvar self = this;\r\n\t\tif (self.element) {\r\n\t\t\tself.element.on.apply(self.element, arguments);\r\n\t\t} else {\r\n\t\t\tsetTimeout(function(arg) {\r\n\t\t\t\tself.event(self, arg);\r\n\t\t\t}, 500, arguments);\r\n\t\t}\r\n\t\treturn self;\r\n\t};\r\n\r\n\t/*\r\n\t * Finds elements according to the selector. Is alias for self.element.find() method.\r\n\t */\r\n//\tPPC.find = SCP.find = function(selector) {\r\n\tPPC.find =  function(selector) {\r\n\t\treturn this.element.find(selector);\r\n\t};\r\n\r\n\r\n\t/*\r\n\t * Checks a state whether the component is invalid or valid.\r\n\t */\r\n\tPPC.isInvalid = function() {\r\n\t\tvar self = this;\r\n\t\tvar is = !self.$valid;\r\n\t\tif (is && !self.$validate) {\r\n\t\t\tis = !self.$dirty;\r\n\t\t}\r\n\t\treturn is;\r\n\t};\r\n\r\n\t/*\r\n\t * Unregisters a monitoring of value according to the path argument.\r\n\t */\r\n\tPPC.unwatch = function(path, fn) {\r\n\t\tvar self = this;\r\n\t\tself.pathing.off('com' + self._id + '#watch', path, fn);  // OFF\r\n\t\treturn self;\r\n\t};\r\n\r\n\t/*\r\n\t * Registers a monitoring of value according to the path argument.\r\n\t */\r\n\tPPC.watch = function(path, fn, init) {\r\n\r\n\t\tvar self = this;\r\n\r\n\t\tif (langx.isFunction(path)) {\r\n\t\t\tinit = fn;\r\n\t\t\tfn = path;\r\n\t\t\tpath = self.path;\r\n\t\t} else {\r\n\t\t\tpath = pathmaker(path);\r\n\t\t}\r\n\r\n\t\tself.on('watch', path, fn, init);\r\n\t\treturn self;\r\n\t};\r\n\r\n\t/*\r\n\t * Sets the state of this component to invalid and it contacts all components listen on the path.\r\n\t */\r\n\tPPC.invalid = function() {\r\n\t\treturn this.storing.invalid(this.path, this);\r\n\t};\r\n\r\n\tPPC.valid = function(value, noEmit) {\r\n\r\n\t\tvar self = this;\r\n\r\n\t\tif (value === undefined) {\r\n\t\t\treturn self.$valid;\r\n\t\t}\r\n\r\n\t\tif (self.$valid_disabled) {\r\n\t\t\treturn self;\r\n\t\t}\r\n\r\n\t\tself.$valid = value;\r\n\t\tself.$validate = false;\r\n\t\tself.$interaction(102);\r\n\t\t\r\n\t\tself.storing.clear('valid');\r\n\t\t\r\n\t\tif (!noEmit && self.state) {\r\n\t\t\tself.stateX(1, 1);\r\n\t\t}\r\n\t\treturn self;\r\n\t};\r\n\r\n\tPPC.style = function(value) {\r\n\t\tdomx.style(value, this._id);\r\n\t\treturn this;\r\n\t};\r\n\r\n\r\n\t/*\r\n\t * Perform a change state. It changes dirty state and contacts all components which listen on path.\r\n\t */\r\n\tPPC.change = function(value) {\r\n\t\tvar self = this;\r\n\t\tself.$dirty_disabled = false;\r\n\t\tself.$dirty = true;\r\n\t\tself.storing.change(self.path, value === undefined ? true : value, self);\r\n\t\treturn self;\r\n\t};\r\n\r\n\t/*\r\n\t * Sets the last used time, time will be stored in self.usage.custom.\r\n\t */\r\n\tPPC.used = function() {\r\n\t\treturn this.$interaction(100);\r\n\t};\r\n\r\n\t/*\r\n\t * Sets the last used time, time will be stored in self.usage.custom.\r\n\t */\r\n\tPPC.dirty = function(value, noEmit) {\r\n\r\n\t\tvar self = this;\r\n\r\n\t\tif (value === undefined) {\r\n\t\t\treturn self.$dirty;\r\n\t\t}\r\n\r\n\t\tif (self.$dirty_disabled) {\r\n\t\t\treturn self;\r\n\t\t}\r\n\r\n\t\tself.$dirty = value;\r\n\t\tself.$interaction(101);\r\n\t\tself.storing.clear('dirty');\r\n\t\tif (!noEmit && self.state) {\r\n\t\t\tself.stateX(2, 2);\r\n\t\t}\r\n\t\treturn self;\r\n\t};\r\n\r\n\r\n\t/*\r\n\t * Resets dirty and valid state.\r\n\t */\r\n\tPPC.reset = function() {\r\n\t\tvar self = this;\r\n\t\tself.storing.reset(self.path, 0, self);\r\n\t\treturn self;\r\n\t};\r\n\r\n\tPPC.setDefault = function(value) {\r\n\t\tthis.$default = function() {\r\n\t\t\treturn value;\r\n\t\t};\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/*\r\n\t * Set a default value for the current component path.\r\n\t */\r\n\tPPC.default = function(reset) {\r\n\t\tvar self = this;\r\n\t\tself.storing.default(self.path, 0, self, reset);\r\n\t\treturn self;\r\n\t};\r\n\r\n\r\n\t/*\r\n\t * Removes this component from the DOM and executes destroy delegate.\r\n\t */\r\n\tPPC.remove = PPC.kill = function(noClear) {\r\n\t\tvar self = this;\r\n\t\tvar el = self.element;\r\n\t\tremovewaiter(self);\r\n\t\t\r\n\t\t//el.removeData(ATTRDATA);\r\n\t\t//el.attr(ATTRDEL, 'true').find(ATTRCOM).attr(ATTRDEL, 'true');\r\n\t\thelper.kill(el);\r\n\r\n\t\tself.$removed = 1;\r\n\t\tself.removed = true;\r\n\t\tself.pathing.off('com' + self._id + '#'); // OFF\r\n\t\t\r\n\t\tif(!noClear) {\r\n\t\t\tlangx.setTimeout2('$cleaner', cleaner2, 100);\r\n\t\t}\r\n\t\treturn true;\r\n\t};\r\n\r\n\tPPC.on = function(name, path, fn, init) {\r\n\t\tif (langx.isFunction(path)) {\r\n\t\t\tinit = fn;\r\n\t\t\tfn = path;\r\n\t\t\tpath = '';\r\n\t\t} else\r\n\t\t\tpath = path.replace('.*', '');\r\n\r\n\t\tvar self = this;\r\n\t\tvar push = '';\r\n\r\n\t\tif (name.substring(0, 1) === '^') {\r\n\t\t\tpush = '^';\r\n\t\t\tname = name.substring(1);\r\n\t\t}\r\n\r\n\t\tself.pathing.on(push + 'com' + self._id + '#' + name, path, fn, init, self); // ON\r\n\t\treturn self;\r\n\t};\r\n\r\n\t/*\r\n\t * Register a new formatter for this component or can format a value.\r\n\t */\r\n\tPPC.formatter = function(value, prepend) {\r\n\t\tvar self = this;\r\n\r\n\t\tif (langx.isFunction(value)) {\r\n\t\t\t!self.$formatter && (self.$formatter = []);\r\n\t\t\tif (prepend === true) {\r\n\t\t\t\tself.$formatter.unshift(value);\r\n\t\t\t} else {\r\n\t\t\t\tself.$formatter.push(value);\r\n\t\t\t}\r\n\t\t\treturn self;\r\n\t\t}\r\n\r\n\t\tvar a = self.$formatter;\r\n\t\tif (a && a.length) {\r\n\t\t\tfor (var i = 0, length = a.length; i < length; i++) {\r\n\t\t\t\tvalue = a[i].call(self, self.path, value, self.type);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/*\r\n\t\ta = M.$formatter;\r\n\t\tif (a && a.length) {\r\n\t\t\tfor (var i = 0, length = a.length; i < length; i++) {\r\n\t\t\t\tvalue = a[i].call(self, self.path, value, self.type);\r\n\t\t\t}\r\n\t\t}*/\r\n\r\n\t\tvalue = self.storing.format(self.path,value,self.type); // TODO\r\n\r\n\t\treturn value;\r\n\t};\r\n\r\n\tPPC.parser = function(value, prepend) {\r\n\r\n\t\tvar self = this;\r\n\t\tvar type = typeof(value);\r\n\r\n\t\tif (type === 'function') {\r\n\t\t\t!self.$parser && (self.$parser = []);\r\n\r\n\t\t\tif (prepend === true) {\r\n\t\t\t\tself.$parser.unshift(value);\r\n\t\t\t} else {\r\n\t\t\t\tself.$parser.push(value);\r\n\t\t\t}\r\n\r\n\t\t\treturn self;\r\n\t\t}\r\n\r\n\t\tif (self.trim && type === 'string') {\r\n\t\t\tvalue = value.trim();\r\n\t\t}\r\n\r\n\t\tvar a = self.$parser;\r\n\t\tif (a && a.length) {\r\n\t\t\tfor (var i = 0, length = a.length; i < length; i++) {\r\n\t\t\t\tvalue = a[i].call(self, self.path, value, self.type);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\t//a = jc.$parser;\r\n\t\t//if (a && a.length) {\r\n\t\t//\tfor (var i = 0, length = a.length; i < length; i++) {\r\n\t\t//\t\tvalue = a[i].call(self, self.path, value, self.type);\r\n\t\t//\t}\r\n\t\t//}\r\n\t\tvalue = self.storing.parser(self.path,value,self.type);\r\n\r\n\t\treturn value;\r\n\t};\r\n\r\n\t/*\r\n\t * Emits an event within jComponent. Is alias for EMIT() method.\r\n\t */\r\n\tPPC.emit = function() {\r\n\t\tself.pathing.emit.apply(self.pathing, arguments); // W>EMIT\r\n\t\treturn this;\r\n\t};\r\n\r\n\tPPC.evaluate = function(path, expression, nopath) {\r\n\t\tif (!expression) {\r\n\t\t\texpression = path;\r\n\t\t\tpath = this.path;\r\n\t\t}\r\n\t\treturn self.storing.evaluate(path, expression, nopath);\r\n\t};\r\n\r\n\t/*\r\n\t * Get a value according to the data-jc-path or path.\r\n\t */\r\n\tPPC.get = function(path) {\r\n\t\tvar self = this;\r\n\t\tif (!path) {\r\n\t\t\tpath = self.path;\r\n\t\t}\r\n\r\n\t\tif (self.$pp) {\r\n\t\t\treturn self.owner.data(self.path);\r\n\t\t}\r\n\r\n\t\tif (path) {\r\n\t\t\treturn self.storing.get(path);\r\n\t\t}\r\n\t};\r\n\r\n\tPPC.skip = function(path) {\r\n\t\tvar self = this;\r\n\t\tself.storing.skip(path || self.path); // SKIP\r\n\t\treturn self;\r\n\t};\r\n\r\n\t/*\r\n\t * Sets a value according to the component.path.\r\n\t */\r\n\tPPC.set = function(value, type) {\r\n\r\n\t\tvar self = this;\r\n\t\tvar arg = arguments;\r\n\r\n\t\tif (self.$pp) {\r\n\t\t\tself.owner.set(self.path, value);\r\n\t\t\treturn self;\r\n\t\t}\r\n\r\n\t\t// Backwards compatibility\r\n\t\tif (arg.length === 3) {\r\n\t\t\tself.storing.setx(arg[0], arg[1], arg[2]);\r\n\t\t} else {\r\n\t\t\tself.storing.setx(self.path, value, type);\r\n\t\t}\r\n\r\n\t\treturn self;\r\n\t};\r\n\r\n\t/*\r\n\t * Increments a Number according to the component.path.\r\n\t */\r\n\tPPC.inc = function(value, type) {\r\n\t\tvar self = this;\r\n\t\tself.storing.inc(self.path, value, type);\r\n\t\treturn self;\r\n\t};\r\n\r\n\t/* \r\n\t * Extends a current value by adding/rewrite new fields with new values.\r\n\t */\r\n\tPPC.extend = function(value, type) {\r\n\t\tvar self = this;\r\n\t\tself.storing.extend(self.path, value, type); // M.extend\r\n\t\treturn self;\r\n\t};\r\n\r\n\t/*\r\n\t * Rewrites a value according to the component.path and it won't notify all listeners.\r\n\t */\r\n\tPPC.rewrite = function(value) {\r\n\t\tvar self = this;\r\n\t\tself.storing.rewrite(self.path, value);\r\n\t\treturn self;\r\n\t};\r\n\r\n\t/*\r\n\t * Pushs a new item into the Array according to the component.path.\r\n\t */\r\n\tPPC.push = function(value, type) {\r\n\t\tvar self = this;\r\n\t\tself.storing.push(self.path, value, type);\r\n\t\treturn self;\r\n\t};\r\n\r\n\treturn Component;\r\n});"]}