{"version":3,"sources":["components/Component.js"],"names":["define","langx","findFormat","domx","Usage","temp","statics","$","counter","MD","Component","klass","[object Object]","name","view","self","this","_id","ID","usage","$dirty","$valid","$validate","$parser","$formatter","$skip","$ready","$path","trim","$released","$bindreleased","$data","version","lastIndexOf","storing","$name","substring","path","type","id","disabled","removed","make","done","prerender","destroy","state","validate","released","getter","value","realtime","nobind","parser","getter2","componenter","com_validate2","get","set","stateX","what","key","$bindchanges","$state","config","EXEC","call","setterX","setter","$bindexact","indexOf","cache","$bindcache","arguments","length","skipDec","$format","hash","hashCode","$valuehash","$setter","data","setter2","is","bt","clearTimeout","setTimeout","$bindtimeout","a","formatter","helper","findControl","element","t","$com","$default","autofill","push","el","val","tmp","toString","toLowerCase","checked","PPC","prototype","i","items","o","parentNode","exec","$ppc","c","components","all","com","owner","$pp","$except","except","p","b","$compare","fix","index","notmodified","fields","isString","NOTMODIFIED","$waiter","prop","callback","$W","setInterval","v","clearInterval","keys","Object","k","hidden","offsetParent","visible","width","offsetWidth","height","offsetHeight","import","url","insert","preparator","release","container","undefined","$removed","attrd","nested","forEach","Array","validate2","d","e","replace","remove","compiler","recompile","n","prev","scope","rattrd","off","dom","siblings","$interaction","now","Date","init","$binded","manually","input","default","custom","dirty","valid","notify","NOTIFY","update","refresh","tclass","cls","aclass","timeout","hclass","rclass","rclass2","search","classes","add","rem","arr","split","toggle","manual","isNumber","noscope","noScope","$noscope","nocompile","singleton","blind","$$path","bindchanges","bindChanges","enable","bindexact","bindExact","bindvisible","bindVisible","readonly","noDirty","noValid","novalidate","noValidate","$valid_disabled","nodirty","$dirty_disabled","datasource","ds","$datasource","unwatch","fn","watch","setPath","charCodeAt","env","s","j","join","C","ready","attr","css","main","$main","parent","closest","rcwatch","reconfigure","isPlainObject","configure","$rcwatch","$config","cfg","$type","$id","$compile","$init","$class","$reconfigure","sel","TNB","number","boolean","html","empty","append","text","$children","m","event","on","apply","arg","find","selector","isInvalid","eventer","isFunction","binding","pathmaker","invalid","noEmit","clear","style","change","used","reset","setDefault","kill","noClear","obj","removewaiter","setTimeout2","cleaner2","isRemoved","prepend","unshift","format","emit","evaluate","expression","nopath","skip","setx","inc","extend","rewrite","compile"],"mappings":"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","file":"../../components/Component.js","sourcesContent":["define([\r\n\t\"../langx\",\r\n\t\"../binding/findFormat\",\r\n\t\"../utils/domx\",\r\n\t\"./Usage\"\r\n],function(langx, findFormat, domx,Usage){\r\n\tvar temp = {},\r\n\t\tstatics = {},\r\n\t\t$ =domx.$;\r\n\r\n\tvar counter = 0;\r\n\r\n\tvar MD = {\r\n\t\tdelay : 555,\r\n\t\tdelaywatcher : 555,\r\n\t\tdelaybinder : 200\t\t\r\n\t};\r\n\r\n\t// ===============================================================\r\n\t// COMPONENT DECLARATION\r\n\t// ===============================================================\r\n\r\n\tvar Component = langx.klass({\r\n\t\t_construct(name,view) {\r\n\t\t\tvar self = this;\r\n\t\t\tself._id = self.ID = 'jc' + (counter++);\r\n\t\t\tself.usage = new Usage();\r\n\t\t\tself.$dirty = true;\r\n\t\t\tself.$valid = true;\r\n\t\t\tself.$validate = false;\r\n\t\t\tself.$parser = [];\r\n\t\t\tself.$formatter = [];\r\n\t\t\tself.$skip = false;\r\n\t\t\tself.$ready = false;\r\n\t\t\tself.$path;\r\n\t\t\tself.trim = true;\r\n\t\t\tself.$released = false;\r\n\t\t\tself.$bindreleased = true;\r\n\t\t\tself.$data = {};\r\n\r\n\t\t\tvar version = name.lastIndexOf('@');\r\n\r\n\t\t\tself.view = view;\r\n\t\t\tself.storing = view.storing;\r\n\r\n\t\t\tself.name = name;\r\n\t\t\tself.$name = version === -1 ? name : name.substring(0, version);\r\n\t\t\tself.version = version === -1 ? '' : name.substring(version + 1);\r\n\t\t\tself.path;\r\n\t\t\tself.type;\r\n\t\t\tself.id;\r\n\t\t\tself.disabled = false;\r\n\t\t\tself.removed = false;\r\n\r\n\t\t\tself.make;\r\n\t\t\tself.done;\r\n\t\t\tself.prerender;\r\n\t\t\tself.destroy;\r\n\t\t\tself.state;\r\n\t\t\tself.validate;\r\n\t\t\tself.released;\r\n\r\n\t\t\tself.getter = function(value, realtime, nobind) {\r\n\r\n\t\t\t\tvar self = this;\r\n\r\n\t\t\t\tvalue = self.parser(value);\r\n\t\t\t\tself.getter2 && self.getter2(value, realtime);\r\n\r\n\t\t\t\tif (realtime) {\r\n\t\t\t\t\tself.$skip = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Binds a value\r\n\t\t\t\tif (nobind) {\r\n\t\t\t\t\tself.view.componenter.com_validate2(self);\r\n\t\t\t\t} else if (value !== self.get()) {\r\n\t\t\t\t\tself.set(value, 2);\r\n\t\t\t\t} else if (realtime === 3) {\r\n\t\t\t\t\t// A validation for same values, \"realtime=3\" is in \"blur\" event\r\n\t\t\t\t\t// Because we need to validate the input if the user leaves from the control\r\n\t\t\t\t\tself.view.componenter.com_validate2(self);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tself.stateX = function(type, what) {\r\n\t\t\t\tvar key = type + 'x' + what;\r\n\t\t\t\tif (!self.$bindchanges || self.$state !== key) {\r\n\t\t\t\t\tself.$state = key;\r\n\t\t\t\t\tself.config.$state && EXEC.call(self, self.config.$state, type, what);\r\n\t\t\t\t\tself.state(type, what);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tself.setterX = function(value, path, type) {\r\n\r\n\t\t\t\tif (!self.setter || (self.$bindexact && self.path !== path && self.path.indexOf(path + '.') === -1 && type))\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tvar cache = self.$bindcache;\r\n\t\t\t\tif (arguments.length) {\r\n\r\n\t\t\t\t\t/*\r\n\t\t\t\t\tif (skips[self.path]) {\r\n\t\t\t\t\t\tvar s = --skips[self.path];\r\n\t\t\t\t\t\tif (s <= 0) {\r\n\t\t\t\t\t\t\tdelete skips[self.path];\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t*/\r\n\t\t\t\t\tif (self.view.storing.skipDec(self.path) == false) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (self.$format) {\r\n\t\t\t\t\t\tvalue = self.$format(value, path, type);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (self.$bindreleased) {\r\n\r\n\t\t\t\t\t\tif (self.$bindchanges) {\r\n\t\t\t\t\t\t\tvar hash = langx.hashCode(value); // HASH\r\n\t\t\t\t\t\t\tif (hash === self.$valuehash)\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\tself.$valuehash = hash;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// Binds value directly\r\n\t\t\t\t\t\tself.config.$setter && EXEC.call(self, self.config.$setter, value, path, type);\r\n\t\t\t\t\t\tself.data('', value);\r\n\t\t\t\t\t\tself.setter(value, path, type);\r\n\t\t\t\t\t\tself.setter2 && self.setter2(value, path, type);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (self.$released) {\r\n\t\t\t\t\t\t\tcache.is = true;\r\n\t\t\t\t\t\t\tcache.value = value;\r\n\t\t\t\t\t\t\tcache.path = path;\r\n\t\t\t\t\t\t\tcache.type = type;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tcache.value = value;\r\n\t\t\t\t\t\t\tcache.path = path;\r\n\t\t\t\t\t\t\tcache.type = type;\r\n\t\t\t\t\t\t\tif (!cache.bt) {\r\n\t\t\t\t\t\t\t\tcache.is = true;\r\n\t\t\t\t\t\t\t\tself.setterX();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else if (!self.$released && cache && cache.is) {\r\n\t\t\t\t\tcache.is = false;\r\n\t\t\t\t\tcache.bt && clearTimeout(cache.bt);\r\n\t\t\t\t\tcache.bt = setTimeout(function(self) {\r\n\t\t\t\t\t\tvar cache = self.$bindcache;\r\n\t\t\t\t\t\tcache.bt = 0; // reset timer id\r\n\r\n\t\t\t\t\t\tif (self.$bindchanges) {\r\n\t\t\t\t\t\t\tvar hash = langx.hashCode(value); // HASH\r\n\t\t\t\t\t\t\tif (hash === self.$valuehash)\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\tself.$valuehash = hash;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tself.config.$setter && EXEC.call(self, self.config.$setter, cache.value, cache.path, cache.type);\r\n\t\t\t\t\t\tself.data('', cache.value);\r\n\t\t\t\t\t\tself.setter(cache.value, cache.path, cache.type);\r\n\t\t\t\t\t\tself.setter2 && self.setter2(cache.value, cache.path, cache.type);\r\n\t\t\t\t\t}, self.$bindtimeout, self);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tself.setter = function(value, path, type) {\r\n\r\n\t\t\t\tvar self = this;\r\n\r\n\t\t\t\tif (type === 2) {\r\n\t\t\t\t\tif (self.$skip) {\r\n\t\t\t\t\t\tself.$skip = false;\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar a = 'select-one';\r\n\t\t\t\tvalue = self.formatter(value);\r\n\r\n\t\t\t\tself.view.helper.findControl(self.element[0], function(t) {\r\n\r\n\t\t\t\t\tif (t.$com !== self)\r\n\t\t\t\t\t\tt.$com = self;\r\n\r\n\t\t\t\t\tvar path = t.$com.path;\r\n\t\t\t\t\tif (path && path.length && path !== self.path)\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\tif (t.type === 'checkbox') {\r\n\t\t\t\t\t\tvar tmp = value != null ? value.toString().toLowerCase() : '';\r\n\t\t\t\t\t\ttmp = tmp === 'true' || tmp === '1' || tmp === 'on';\r\n\t\t\t\t\t\ttmp !== t.checked && (t.checked = tmp);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (value == null)\r\n\t\t\t\t\t\tvalue = '';\r\n\r\n\t\t\t\t\tif (!type && t.type !== a && t.type !== 'range' && !self.$default && !value) {\r\n\t\t\t\t\t\tself.view.componenter.autofill.push(t.$com);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (t.type === a || t.type === 'select') {\r\n\t\t\t\t\t\tvar el = $(t);\r\n\t\t\t\t\t\tel.val() !== value && el.val(value);\r\n\t\t\t\t\t} else if (t.value !== value)\r\n\t\t\t\t\t\tt.value = value;\r\n\t\t\t\t});\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t});\r\n\r\n\r\n\tvar PPC = Component.prototype;\r\n\r\n\t/*\r\n\t * Set or get data from internal component repository. \r\n\t * Data can be used for data-bind=\"\" attribute and nested j-Components. \r\n\t */\r\n\tPPC.data = function(key, value) {\r\n\r\n\t\tif (!key) {\r\n\t\t\tkey = '@';\r\n\t\t}\r\n\r\n\t\tvar self = this;\r\n\t\tvar data = self.$data[key];\r\n\r\n\t\tif (arguments.length === 1) {\r\n\t\t\treturn data ? data.value : null;\r\n\t\t}\r\n\r\n\t\tif (data) {\r\n\t\t\tdata.value = value;\r\n\t\t\tfor (var i = 0; i < data.items.length; i++) {\r\n\t\t\t\tvar o = data.items[i];\r\n\t\t\t\to.el[0].parentNode && o.exec(value, key);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tself.$data[key] = { \r\n\t\t\t\tvalue: value, \r\n\t\t\t\titems: [] \r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tif (self.$ppc) {\r\n\t\t\tvar c = self.view.components.all; //M.components;\r\n\t\t\tfor (var i = 0; i < c.length; i++) {\r\n\t\t\t\tvar com = c[i];\r\n\t\t\t\tif (com.owner === self && com.$pp && key === com.path)\r\n\t\t\t\t\tcom.setterX(value, value, 2);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn value;\r\n\t};\r\n\r\n\t/*\r\n\t * \r\n\t */\r\n\tPPC.$except = function(except) {\r\n\t\tvar p = self.$path;\r\n\t\tfor (var a = 0; a < except.length; a++) {\r\n\t\t\tfor (var b = 0; b < p.length; b++) {\r\n\t\t\t\tif (except[a] === p[b]) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t};\r\n\r\n\t/*\r\n\t * \r\n\t */\r\n\tPPC.$compare = function(path, fix) {\r\n\t\tvar self = this;\r\n\r\n\t\tif (fix)\r\n\t\t\treturn self.path === path;\r\n\r\n\t\tif (path.length > self.path.length) {\r\n\t\t\tvar index = path.lastIndexOf('.', self.path.length);\r\n\t\t\treturn index === -1 ? false : self.path === path.substring(0, index);\r\n\t\t}\r\n\r\n\t\tfor (var i = 0, length = self.$path.length; i < length; i++) {\r\n\t\t\tif (self.$path[i] === path) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t/*\r\n\t * Removes waiter.\r\n\t */\r\n\tfunction removewaiter(obj) {\r\n\t\tif (obj.$W) {\r\n\t\t\tvar keys = Object.keys(obj.$W);\r\n\t\t\tfor (var i = 0, length = keys.length; i < length; i++) {\r\n\t\t\t\tvar v = obj.$W[keys[i]];\r\n\t\t\t\tif (v.id) {\r\n\t\t\t\t\tclearInterval(v.id);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/*\r\n\t * \r\n\t */\r\n\tPPC.notmodified = function(fields) {\r\n\t\tvar t = this;\r\n\t\tif (langx.isString(fields)) {\r\n\t\t\tfields = [fields];\r\n\t\t}\r\n\t\treturn NOTMODIFIED(t._id, t.get(), fields);\r\n\t};\r\n\r\n\t/*\r\n\t * \r\n\t */\r\n\tPPC.$waiter = function(prop, callback) {\r\n\r\n\t\tvar t = this;\r\n\r\n\t\tif (prop === true) {\r\n\t\t\tif (t.$W) {\r\n\t\t\t\tvar keys = Object.keys(t.$W);\r\n\t\t\t\tfor (var i = 0; i < keys.length; i++) {\r\n\t\t\t\t\tvar k = keys[i];\r\n\t\t\t\t\tvar o = t.$W[k];\r\n\t\t\t\t\to.id = setInterval(function(t, prop) {\r\n\t\t\t\t\t\tvar o = t.$W[prop];\r\n\t\t\t\t\t\tvar v = t[prop]();\r\n\t\t\t\t\t\tif (v) {\r\n\t\t\t\t\t\t\tclearInterval(o.id);\r\n\t\t\t\t\t\t\tfor (var i = 0; i < o.callback.length; i++)\r\n\t\t\t\t\t\t\t\to.callback[i].call(t, v);\r\n\t\t\t\t\t\t\tdelete t.$W[prop];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, MD.delaywatcher, t, k);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t} else if (prop === false) {\r\n\t\t\tif (t.$W) {\r\n\t\t\t\tvar keys = Object.keys(t.$W);\r\n\t\t\t\tfor (var i = 0; i < keys.length; i++) {\r\n\t\t\t\t\tvar a = t.$W[keys[i]];\r\n\t\t\t\t\ta && clearInterval(a.id);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t!t.$W && (t.$W = {});\r\n\r\n\t\tif (t.$W[prop]) {\r\n\t\t\t// Checks if same callback exists\r\n\t\t\tfor (var i = 0; i < t.$W[prop].length; i++) {\r\n\t\t\t\tif (t.$W[prop][i] === callback)\r\n\t\t\t\t\treturn t;\r\n\t\t\t}\r\n\t\t\tt.$W[prop].callback.push(callback);\r\n\t\t\treturn t;\r\n\t\t} else\r\n\t\t\tt.$W[prop] = { callback: [callback] };\r\n\r\n\t\tif (!t.$released) {\r\n\t\t\tt.$W[prop].id = setInterval(function(t, prop) {\r\n\t\t\t\tvar o = t.$W[prop];\r\n\t\t\t\tvar v = t[prop]();\r\n\t\t\t\tif (v) {\r\n\t\t\t\t\tclearInterval(o.id);\r\n\t\t\t\t\tfor (var i = 0; i < o.callback.length; i++) {\r\n\t\t\t\t\t\to.callback[i].call(t, v);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdelete t.$W[prop];\r\n\t\t\t\t}\r\n\t\t\t}, MD.delaywatcher, t, prop);\r\n\t\t}\r\n\t\treturn t;\r\n\t};\r\n\r\n\t/*\r\n\t * .\r\n\t */\r\n\tPPC.hidden = function(callback) {\r\n\t\tvar t = this;\r\n\t\tvar v = t.element ? t.element[0].offsetParent : null;\r\n\t\tv = v === null;\r\n\t\tif (callback) {\r\n\t\t\tif (v) {\r\n\t\t\t\tcallback.call(t);\r\n\t\t\t} else {\r\n\t\t\t\tt.$waiter('hidden', callback);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn v;\r\n\t};\r\n\r\n\t/*\r\n\t * \r\n\t */\r\n\tPPC.visible = function(callback) {\r\n\t\tvar t = this;\r\n\t\tvar v = t.element ? t.element[0].offsetParent : null;\r\n\t\tv = v !== null;\r\n\t\tif (callback) {\r\n\t\t\tif (v) {\r\n\t\t\t\tcallback.call(t);\r\n\t\t\t} else {\r\n\t\t\t\tt.$waiter('visible', callback);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn v;\r\n\t};\r\n\r\n\t/*\r\n\t * \r\n\t */\r\n\tPPC.width = function(callback) {\r\n\t\tvar t = this;\r\n\t\tvar v = t.element ? t.element[0].offsetWidth : 0;\r\n\t\tif (callback) {\r\n\t\t\tif (v) {\r\n\t\t\t\tcallback.call(t, v);\r\n\t\t\t} else {\r\n\t\t\t\tt.$waiter('width', callback);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn v;\r\n\t};\r\n\r\n\t/*\r\n\t * \r\n\t */\r\n\tPPC.height = function(callback) {\r\n\t\tvar t = this;\r\n\t\tvar v = t.element ? t.element[0].offsetHeight : 0;\r\n\t\tif (callback) {\r\n\t\t\tif (v) {\r\n\t\t\t\tcallback.call(t, v);\r\n\t\t\t} else {\r\n\t\t\t\tt.$waiter('height', callback);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn v;\r\n\t};\r\n\r\n\t/*\r\n\t * Import some content from external source to this element.\r\n\t */\r\n\tPPC.import = function(url, callback, insert, preparator) {\r\n\t\tvar self = this;\r\n\t\tthis.view.import(url, self.element, callback, insert, preparator);\r\n\t\treturn self;\r\n\t};\r\n\r\n\t/*\r\n\t * Performs release state for all nested components.\r\n\t */\r\n\tPPC.release = function(value, container) {\r\n\r\n\t\tvar self = this;\r\n\t\tif (value === undefined || self.$removed) {\r\n\t\t\treturn self.$released;\r\n\t\t}\r\n\r\n\t\tself.attrd('jc-released', value);\r\n\r\n\t\t//(container || self.element).find(consts.ATTRCOM).each(function() {\r\n\t\tself.view.helper.nested(container || self.element).forEach(function(){ \r\n\t\t\tvar el = $(this);\r\n\t\t\tel.attrd('jc-released', value ? 'true' : 'false');\r\n\t\t\tvar com = el[0].$com;\r\n\t\t\tif (com instanceof Object) {\r\n\t\t\t\tif (com instanceof Array) {\r\n\t\t\t\t\tfor (var i = 0, length = com.length; i < length; i++) {\r\n\t\t\t\t\t\tvar o = com[i];\r\n\t\t\t\t\t\tif (!o.$removed && o.$released !== value) {\r\n\t\t\t\t\t\t\to.$released = value;\r\n\t\t\t\t\t\t\to.released && o.released(value, self);\r\n\t\t\t\t\t\t\to.$waiter(!value);\r\n\t\t\t\t\t\t\t!value && o.setterX();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (!com.$removed && com.$released !== value) {\r\n\t\t\t\t\tcom.$released = value;\r\n\t\t\t\t\tcom.released && com.released(value, self);\r\n\t\t\t\t\tcom.$waiter(!value);\r\n\t\t\t\t\t!value && com.setterX();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif (!container && self.$released !== value) {\r\n\t\t\tself.$released = value;\r\n\t\t\tself.released && self.released(value, self);\r\n\t\t\tself.$waiter(!value);\r\n\t\t\t!value && self.setterX();\r\n\t\t}\r\n\r\n\t\treturn value;\r\n\t};\r\n\r\n\t/*\r\n\t * Performs validation with refreshing state of component\r\n\t */\r\n\tPPC.validate2 = function() {\r\n\t\treturn com_validate2(this);\r\n\t};\r\n\r\n\t/*\r\n\t * Returns all nested components.\r\n\t */\r\n\tPPC.exec = function(name, a, b, c, d, e) {\r\n\t\tvar self = this;\r\n\t\t/*\r\n\t\tself.find(consts.ATTRCOM).each(function() {\r\n\t\t\tvar t = this;\r\n\t\t\tif (t.$com) {\r\n\t\t\t\tt.$com.caller = self;\r\n\t\t\t\tt.$com[name] && this.$com[name](a, b, c, d, e);\r\n\t\t\t}\r\n\t\t});\r\n\t\t*/\r\n\r\n\t\treturn self;\r\n\t};\r\n\r\n\t/*\r\n\t * Returns all nested components.\r\n\t */\r\n\tPPC.replace = function(el, remove) {\r\n\t\tvar self = this;\r\n\r\n\t\tif (this.view.compiler.is) {\r\n\t\t\tthis.view.compiler.recompile = true;\r\n\t\t}\r\n\r\n\t\tvar n = 'jc-scope';\r\n\t\tvar prev = self.element;\r\n\t\tvar scope = prev.attrd(n);\r\n\r\n\t\tself.element.rattrd('jc');\r\n\t\tself.element[0].$com = null;\r\n\t\tscope && self.element.rattrd(n);\r\n\r\n\t\tif (remove) {\r\n\t\t\tprev.off().remove();\r\n\t\t} else {\r\n\t\t\tself.attrd('jc-replaced', 'true');\r\n\t\t}\r\n\r\n\t\tself.element = $(el);\r\n\t\tself.dom = self.element[0];\r\n\t\tself.dom.$com = self;\r\n\t\tself.attrd('jc', self.name);\r\n\t\tif (scope) {\r\n\t\t\tself.attrd(n, scope);\r\n\t\t}\r\n\t\tself.siblings = false;\r\n\t\treturn self;\r\n\t};\r\n\r\n\t//PPC.compile \r\n\r\n\t/*\r\n\t * Returns all nested components.\r\n\t */\r\n\tPPC.nested = function() {\r\n\t\tvar self = this;\r\n\t\treturn self.view.helper.nested(this.element);\r\n\r\n\t\t/*\r\n\t\tvar arr = [];\r\n\t\tthis.find(ATTRCOM).each(function() {\r\n\t\t\tvar el = $(this);\r\n\t\t\tvar com = el[0].$com;\r\n\t\t\tif (com && !el.attr(ATTRDEL)) {\r\n\t\t\t\tif (com instanceof Array)\r\n\t\t\t\t\tarr.push.apply(arr, com);\r\n\t\t\t\telse\r\n\t\t\t\t\tarr.push(com);\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn arr;\r\n\t\t*/\r\n\t};\r\n\r\n\t/*\r\n\t * Sets the last interaction time,time will be stored in self.usage.\r\n\t */\r\n\tPPC.$interaction = function(type) {\r\n\r\n\t\t// type === 0 : init\r\n\t\t// type === 1 : manually\r\n\t\t// type === 2 : by input\r\n\t\t// type === 3 : by default\r\n\t\t// type === 100 : custom\r\n\t\t// type === 101 : dirty\r\n\t\t// type === 102 : valid\r\n\r\n\t\tvar now = Date.now();\r\n\t\tvar t = this;\r\n\r\n\t\tswitch (type) {\r\n\t\t\tcase 0:\r\n\t\t\t\tt.usage.init = now;\r\n\t\t\t\tt.$binded = true;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 1:\r\n\t\t\t\tt.usage.manually = now;\r\n\t\t\t\tt.$binded = true;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 2:\r\n\t\t\t\tt.usage.input = now;\r\n\t\t\t\tt.$binded = true;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 3:\r\n\t\t\t\tt.usage.default = now;\r\n\t\t\t\tt.$binded = true;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 100:\r\n\t\t\t\tt.usage.custom = now;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 101:\r\n\t\t\t\tt.usage.dirty = now;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 102:\r\n\t\t\t\tt.usage.valid = now;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\treturn t;\r\n\t};\r\n\r\n\t/*\r\n\t * Notifies a setter in all components according to the component.path.\r\n\t */\r\n\tPPC.notify = function() {\r\n\t\tNOTIFY(this.path);\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/*\r\n\t * Executes the component.setter with a refreshed value according to the component.path.\r\n\t */\r\n\tPPC.update = PPC.refresh = function(notify, type) {\r\n\t\tvar self = this;\r\n\t\tif (self.$binded) {\r\n\r\n\t\t\tif (langx.isString(notify)) {\r\n\t\t\t\ttype = notify;\r\n\t\t\t\tnotify = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (notify) {\r\n\t\t\t\tself.set(self.get(), type);\r\n\t\t\t} else {\r\n\t\t\t\tif (self.setter) {\r\n\t\t\t\t self.setterX(self.get(), self.path, 1);\r\n\t\t\t\t}\r\n\t\t\t\tself.$interaction(1);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn self;\r\n\t};\r\n\r\n\t/*\r\n\t * Toggles class, it's alias for self.element.toggleClass().\r\n\t */\r\n\tPPC.tclass = function(cls, v) {\r\n\t\tvar self = this;\r\n\t\tself.element.tclass(cls, v);\r\n\t\treturn self;\r\n\t};\r\n\r\n\t/*\r\n\t * Adds CSS class into the element classes., it's alias for self.element.addClass().\r\n\t */\r\n\tPPC.aclass = function(cls, timeout) {\r\n\t\tvar self = this;\r\n\t\tif (timeout) {\r\n\t\t\tsetTimeout(function() { self.element.aclass(cls); }, timeout);\r\n\t\t} else {\r\n\t\t\tself.element.aclass(cls);\r\n\t\t}\r\n\t\treturn self;\r\n\t};\r\n\r\n\t/*\r\n\t * Determines class, it's alias for self.element.hasClass().\r\n\t */\r\n\tPPC.hclass = function(cls) {\r\n\t\treturn this.element.hclass(cls);\r\n\t};\r\n\r\n\t/*\r\n\t * Removes class, it's alias for self.element.removeClass().\r\n\t */\r\n\tPPC.rclass = function(cls, timeout) {\r\n\t\tvar self = this;\r\n\t\tvar e = self.element;\r\n\t\tif (timeout)\r\n\t\t\tsetTimeout(function() { e.rclass(cls); }, timeout);\r\n\t\telse {\r\n\t\t\tif (cls) {\r\n\t\t\t\te.rclass(cls);\r\n\t\t\t} else {\r\n\t\t\t\te.rclass();\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn self;\r\n\t};\r\n\r\n\t/*\r\n\t *  Removes classes according to the text to search.\r\n\t */\r\n\tPPC.rclass2 = function(search) {\r\n\t\tthis.element.rclass2(search);\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/*\r\n\t * Add or remove CSS classes.\r\n\t */\r\n\tPPC.classes = function(cls) {\r\n\r\n\t\tvar key = 'cls.' + cls;\r\n\t\tvar tmp = temp[key]; // caches.temp[key];\r\n\t\tvar t = this;\r\n\t\tvar e = t.element;\r\n\r\n\t\tif (tmp) {\r\n\t\t\ttmp.add && e.aclass(tmp.add);\r\n\t\t\ttmp.rem && e.rclass(tmp.rem);\r\n\t\t\treturn t;\r\n\t\t}\r\n\r\n\t\tvar arr = cls instanceof Array ? cls : cls.split(' ');\r\n\t\tvar add = '';\r\n\t\tvar rem = '';\r\n\r\n\t\tfor (var i = 0, length = arr.length; i < length; i++) {\r\n\t\t\tvar c = arr[i].substring(0, 1);\r\n\t\t\tif (c === '-')\r\n\t\t\t\trem += (rem ? ' ' : '') + arr[i].substring(1);\r\n\t\t\telse\r\n\t\t\t\tadd += (add ? ' ' : '') + (c === '+' ? arr[i].substring(1) : arr[i]);\r\n\t\t}\r\n\r\n\t\tif (add) {\r\n\t\t\te.aclass(add);\r\n\t\t}\r\n\t\tif (rem) {\r\n\t\t\te.rclass(rem);\r\n\t\t}\r\n\r\n\t\tif (cls instanceof Array) {\r\n\t\t\treturn t;\r\n\t\t}\r\n\r\n\t\ttemp[key] = { add: add, rem: rem };  // caches.temp[key] = { add: add, rem: rem }; \r\n\t\treturn t;\r\n\t};\r\n\r\n\t/*\r\n\t * Returns a parent component instance if exists (otherwise: null).\r\n\t */\r\n\tPPC.toggle = function(cls, visible, timeout) {\r\n\r\n\t\tvar manual = false;\r\n\t\tvar self = this;\r\n\r\n\t\tif (!langx.isString(cls)) {\r\n\t\t\ttimeout = visible;\r\n\t\t\tvisible = cls;\r\n\t\t\tcls = 'hidden';\r\n\t\t\tmanual = true;\r\n\t\t}\r\n\r\n\t\tif (langx.isNumber(visible)) {\r\n\t\t\ttimeout = visible;\r\n\t\t\tvisible = undefined;\r\n\t\t} else if (manual && visible !== undefined) {\r\n\t\t\tvisible = !visible;\r\n\t\t}\r\n\r\n\t\tvar el = self.element;\r\n\t\tif (!timeout) {\r\n\t\t\tel.tclass(cls, visible);\r\n\t\t\treturn self;\r\n\t\t}\r\n\r\n\t\tsetTimeout(function() {\r\n\t\t\tel.tclass(cls, visible);\r\n\t\t}, timeout);\r\n\t\treturn self;\r\n\t};\r\n\r\n\t/*\r\n\t * Disables scopes according to the data-jc-scope attribute.\r\n\t */\r\n\tPPC.noscope = PPC.noScope = function(value) {\r\n\t\tvar self = this;\r\n\t\tself.$noscope = value === undefined ? true : value === true;\r\n\t\treturn self;\r\n\t};\r\n\r\n\t/*\r\n\t * Returns a parent component instance if exists (otherwise: null).\r\n\t */\r\n\tPPC.nocompile = function() {\r\n\t\tvar self = this;\r\n\t\tself.element.attrd('jc-compile', '0');\r\n\t\treturn self;\r\n\t};\r\n\r\n\t/*\r\n\t * Creates a single instance of the component. \r\n\t * So if the component will be declared multiple times then jComponent creates the only one instance and \r\n\t * another declarations will be skipped.\r\n\t */\r\n\tPPC.singleton = function() {\r\n\t\tvar self = this;\r\n\t\tstatics['$ST_' + self.name] = true;\r\n\t\treturn self;\r\n\t};\r\n\r\n\t/*\r\n\t * Sets the component as blind.\r\n\t * Component will be skipped when jComponent performs data-binding. \r\n\t * If your component won't work with data-binding then this option can increase a performance of your web app.\r\n\t */\r\n\tPPC.blind = function() {\r\n\t\tvar self = this;\r\n\t\tself.path = null;\r\n\t\tself.$path = null;\r\n\t\tself.$$path = null;\r\n\t\treturn self;\r\n\t};\r\n\r\n\t/*\r\n\t * Binds changes only. \r\n\t * If setter will get the same value as a previous value then skips binding.\r\n\t */\r\n\tPPC.bindchanges = PPC.bindChanges = function(enable) {\r\n\t\tthis.$bindchanges = enable == null || enable === true;\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/*\r\n\t * Sets binding of values when the the modification path is same as the component path or the path is part of parent path.\r\n\t */\r\n\tPPC.bindexact = PPC.bindExact = function(enable) {\r\n\t\tthis.$bindexact = enable == null || enable === true;\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/*\r\n\t * Sets binding of values only when the component is not released.\r\n\t * it depends on releasing of the parent component.\r\n\t */\r\n\tPPC.bindvisible = PPC.bindVisible = function(timeout) {\r\n\t\tvar self = this;\r\n\t\tself.$bindreleased = false;\r\n\t\tself.$bindtimeout = timeout || MD.delaybinder;\r\n\t\tself.$bindcache = {};\r\n\t\treturn self;\r\n\t};\r\n\r\n\t/*\r\n\t * Enables readonly mode for the component.\r\n\t * It disables dirty and valid states, getter, setter, parsers and formatters. \r\n\t * This option can improve performance.\r\n\t */\r\n\tPPC.readonly = function() {\r\n\t\tvar self = this;\r\n\t\tself.noDirty();\r\n\t\tself.noValid();\r\n\t\tself.getter = null;\r\n\t\tself.setter = null;\r\n\t\tself.$parser = null;\r\n\t\tself.$formatter = null;\r\n\t\treturn self;\r\n\t};\r\n\r\n\t/*\r\n\t * Returns a parent component instance if exists (otherwise: null).\r\n\t */\r\n\tPPC.novalidate = PPC.noValid = PPC.noValidate = function(val) {\r\n\t\tif (val === undefined) {\r\n\t\t\tval = true;\r\n\t\t}\r\n\t\tvar self = this;\r\n\t\tself.$valid_disabled = val;\r\n\t\tself.$valid = val;\r\n\t\treturn self;\r\n\t};\r\n\r\n\t/*\r\n\t * Returns a parent component instance if exists (otherwise: null).\r\n\t */\r\n\tPPC.nodirty = PPC.noDirty = function(val) {\r\n\t\tif (val === undefined) {\r\n\t\t\tval = true;\r\n\t\t}\r\n\t\tvar self = this;\r\n\t\tself.$dirty_disabled = val;\r\n\t\tself.$dirty = !val;\r\n\t\treturn self;\r\n\t};\r\n\r\n\t/*\r\n\t * Watch some additional data-source.\r\n\t * Each next declaration of self.datasource() cancels previous declaration.\r\n\t */\r\n\tPPC.datasource = function(path, callback, init) {\r\n\t\tvar self = this;\r\n\t\tvar ds = self.$datasource;\r\n\r\n\t\tds && self.unwatch(ds.path, ds.fn);\r\n\r\n\t\tif (path) {\r\n\t\t\tself.$datasource = { path: path, fn: callback };\r\n\t\t\tself.watch(path, callback, init !== false);\r\n\t\t} else\r\n\t\t\tself.$datasource = null;\r\n\r\n\t\treturn self;\r\n\t};\r\n\r\n\t/*\r\n\t * Rewrites component.path.\r\n\t */\r\n\tPPC.setPath = function(path, type) {\r\n\r\n\t\t// type 1: init\r\n\t\t// type 2: scope\r\n\r\n\t\tvar self = this;\r\n\t\tvar tmp = findFormat(path);\r\n\r\n\t\tif (tmp) {\r\n\t\t\tpath = tmp.path;\r\n\t\t\tself.$format = tmp.fn;\r\n\t\t} else if (!type) {\r\n\t\t\tself.$format = null;\r\n\t\t}\r\n\r\n\t\tvar arr = [];\r\n\r\n\t\tif (path.substring(0, 1) === '@') {\r\n\t\t\tpath = path.substring(1);\r\n\t\t\tself.$pp = true;\r\n\t\t\tself.owner.$ppc = true;\r\n\t\t} else {\r\n\t\t\tself.$pp = false;\r\n\t\t}\r\n\r\n\t\t// Temporary\r\n\t\tif (path.charCodeAt(0) === 37) { // %\r\n\t\t\tpath = 'jctmp.' + path.substring(1);\r\n\t\t}\r\n\r\n\t\tpath = path.env();\r\n\r\n\t\t// !path = fixed path\r\n\t\tif (path.charCodeAt(0) === 33) { // !\r\n\t\t\tpath = path.substring(1);\r\n\t\t\tarr.push(path);\r\n\t\t} else {\r\n\t\t\tvar p = path.split('.');\r\n\t\t\tvar s = [];\r\n\t\t\tfor (var j = 0; j < p.length; j++) {\r\n\t\t\t\tvar b = p[j].lastIndexOf('[');\r\n\t\t\t\tif (b !== -1) {\r\n\t\t\t\t\tvar c = s.join('.');\r\n\t\t\t\t\tarr.push(c + (c ? '.' : '') + p[j].substring(0, b));\r\n\t\t\t\t}\r\n\t\t\t\ts.push(p[j]);\r\n\t\t\t\tarr.push(s.join('.'));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tself.path = path;\r\n\t\tself.$path = arr;\r\n\t\t\r\n\t\tif (type !== 1 && C.ready) {\r\n\t\t\trefresh(); // TODO\r\n\t\t}\r\n\t\treturn self;\r\n\t};\r\n\r\n\t/*\r\n\t * Get/set a value into the element attribute, it's alias for self.element.attr(name, [value]).\r\n\t */\r\n//\tPPC.attr = SCP.attr = function(name, value) {\r\n\tPPC.attr = function(name, value) {\r\n\t\tvar el = this.element;\r\n\t\tif (value === undefined) {\r\n\t\t\treturn el.attr(name);\r\n\t\t}\r\n\t\tel.attr(name, value);\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/*\r\n\t * Get/set a value into the element attribute with data- prefix for name of attribute.\r\n\t * it's alias for self.element.attr(name, [value]).\r\n\t */\r\n//\tPPC.attrd = SCP.attrd = function(name, value) {\r\n\tPPC.attrd = function(name, value) {\r\n\t\tname = 'data-' + name;\r\n\t\tvar el = this.element;\r\n\t\tif (value === undefined) {\r\n\t\t\treturn el.attr(name);\r\n\t\t}\r\n\t\tel.attr(name, value);\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/*\r\n\t * Sets css or get, it's alias for self.element.css(name, [value]).\r\n\t */\r\n//\tPPC.css = SCP.css = function(name, value) {\r\n\tPPC.css = function(name, value) {\r\n\t\tvar el = this.element;\r\n\t\tif (value === undefined) {\r\n\t\t\treturn el.css(name);\r\n\t\t}\r\n\t\tel.css(name, value);\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/*\r\n\t * Returns a parent component instance if exists (otherwise: null).\r\n\t */\r\n//\tPPC.main = SCP.main = function() {\r\n\tPPC.main = function() {\r\n\t\tvar self = this;\r\n\t\tif (self.$main === undefined) {\r\n\t\t\tvar tmp = self.parent().closest('[data-jc]')[0];\r\n\t\t\tself.$main = tmp ? tmp.$com : null;\r\n\t\t}\r\n\t\treturn self.$main;\r\n\t};\r\n\r\n\tPPC.rcwatch = function(path, value) {\r\n\t\treturn value ? this.reconfigure(value) : this;\r\n\t};\r\n\r\n\tPPC.reconfigure = function(value, callback, init) {\r\n\t\tvar self = this;\r\n\t\tif (langx.isPlainObject(value)) {\r\n\t\t\tObject.keys(value).forEach(function(k) {\r\n\t\t\t\tvar prev = self.config[k];\r\n\t\t\t\tif (!init && self.config[k] !== value[k])\r\n\t\t\t\t\tself.config[k] = value[k];\r\n\t\t\t\tif (callback) {\r\n\t\t\t\t\tcallback(k, value[k], init, init ? undefined : prev);\r\n\t\t\t\t} else if (self.configure) {\r\n\t\t\t\t\tself.configure(k, value[k], init, init ? undefined : prev);\r\n\t\t\t\t}\r\n\t\t\t\tself.data('config.' + k, value[k]);\r\n\t\t\t});\r\n\t\t} else if (value.substring(0, 1) === '=') {\r\n\t\t\tvalue = value.substring(1);\r\n\t\t\tif (self.watch) {\r\n\t\t\t\tself.$rcwatch && self.unwatch(self.$rcwatch, self.rcwatch);\r\n\t\t\t\tself.watch(value, self.rcwatch);\r\n\t\t\t\tself.$rcwatch = value;\r\n\t\t\t}\r\n\t\t\tself.reconfigure(get(value), callback, init);\r\n\t\t} else {\r\n\t\t\tvalue.$config(function(k, v) {\r\n\t\t\t\tvar prev = self.config[k];\r\n\t\t\t\tif (!init && self.config[k] !== v)\r\n\t\t\t\t\tself.config[k] = v;\r\n\t\t\t\tself.data('config.' + k, v);\r\n\t\t\t\tif (callback) {\r\n\t\t\t\t\tcallback(k, v, init, init ? undefined : prev);\r\n\t\t\t\t} else if (self.configure) {\r\n\t\t\t\t\tself.configure(k, v, init, init ? undefined : prev);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tvar cfg = self.config;\r\n\r\n\t\tself.data('config', cfg);\r\n\r\n\t\tif (cfg.$type) {\r\n\t\t\tself.type = cfg.$type;\r\n\t\t}\r\n\r\n\t\tif (cfg.$id) {\r\n\t\t\tself.id = cfg.$id;\r\n\t\t}\r\n\r\n\t\tif (cfg.$compile == false) {\r\n\t\t\tself.nocompile();\r\n\t\t}\r\n\r\n\t\tif (cfg.$init) {\r\n\t\t\tself.$init = cfg.$init;\r\n\t\t}\r\n\r\n\t\tif (cfg.$class) {\r\n\t\t\tself.tclass(cfg.$class);\r\n\t\t}\r\n\t\t\r\n\t\tif (cfg.$released) {\r\n\t\t\tself.release(cfg.$released == true);\r\n\t\t}\r\n\t\t\r\n\t\tif (cfg.$reconfigure) {\r\n\t\t\tEXEC.call(cfg.$reconfigure, cfg); // TODO\r\n\t\t}\r\n\t\treturn self;\r\n\t};\r\n\r\n//\tPPC.closest = SCP.closest = function(sel) {\r\n\tPPC.closest = function(sel) {\r\n\t\treturn this.element.closest(sel);\r\n\t};\r\n\r\n//\tPPC.parent = SCP.parent = function(sel) {\r\n\tPPC.parent = function(sel) {\r\n\t\treturn this.element.parent(sel);\r\n\t};\r\n\r\n\tvar TNB = { number: 1, boolean: 1 };\r\n\r\n\tPPC.html = function(value) {\r\n\t\tvar el = this.element;\r\n\t\tif (value === undefined) {\r\n\t\t\treturn el.html();\r\n\t\t}\r\n\t\tif (value instanceof Array) {\r\n\t\t\tvalue = value.join('');\r\n\t\t}\r\n\t\tvar type = typeof(value);\r\n\t\t//caches.current.element = el[0];\r\n\t\tvar v = (value || TNB[type]) ? el.empty().append(value) : el.empty();\r\n\t\t//caches.current.element = null;\r\n\t\treturn v;\r\n\t};\r\n\r\n\t/*\r\n\t * This method is alias for self.element.text(), it can set/get a content of the element.\r\n\t */\r\n\tPPC.text = function(value) {\r\n\t\tvar el = this.element;\r\n\t\tif (value === undefined) {\r\n\t\t\treturn el.text();\r\n\t\t}\r\n\t\tif (value instanceof Array) {\r\n\t\t\tvalue = value.join('');\r\n\t\t}\r\n\t\tvar type = typeof(value);\r\n\t\treturn (value || TNB[type]) ? el.empty().text(value) : el.empty();\r\n\t};\r\n\r\n\r\n\t/*\r\n\t * Removes the whole content of element and important removes all components which the parent component is this component.\r\n\t * It is alias for self.element.empty()\r\n\t */\r\n\tPPC.empty = function() {\r\n\r\n\t\tvar self = this;\r\n\r\n\t\tif (self.$children) {\r\n\t\t\tfor (var i = 0, length = all.length; i < length; i++) { // M.components.length\r\n\t\t\t\tvar m = all[i]; //M.components[i];\r\n\t\t\t\t!m.$removed && m.owner === self && m.remove();\r\n\t\t\t}\r\n\t\t\tself.$children = 0;\r\n\t\t}\r\n\r\n\t\tvar el = self.element;\r\n\t\tel.empty();\r\n\t\treturn el;\r\n\t};\r\n\r\n//\tPPC.append = SCP.append = function(value) {\r\n\tPPC.append = function(value) {\r\n\t\tvar el = this.element;\r\n\t\tif (value instanceof Array) {\r\n\t\t\tvalue = value.join('');\r\n\t\t}\r\n\t\t//caches.current.element = el[0];\r\n\t\tvar v = value ? el.append(value) : el;\r\n\t\t//caches.current.element = null;\r\n\t\treturn v;\r\n\t};\r\n\r\n\t/*\r\n\t * Registers a new event for the element. Is alias for self.element.on() method.\r\n\t */\r\n//\tPPC.event = SCP.event = function() {\r\n\tPPC.event = function() {\r\n\t\tvar self = this;\r\n\t\tif (self.element) {\r\n\t\t\tself.element.on.apply(self.element, arguments);\r\n\t\t} else {\r\n\t\t\tsetTimeout(function(arg) {\r\n\t\t\t\tself.event(self, arg);\r\n\t\t\t}, 500, arguments);\r\n\t\t}\r\n\t\treturn self;\r\n\t};\r\n\r\n\t/*\r\n\t * Finds elements according to the selector. Is alias for self.element.find() method.\r\n\t */\r\n//\tPPC.find = SCP.find = function(selector) {\r\n\tPPC.find =  function(selector) {\r\n\t\treturn this.element.find(selector);\r\n\t};\r\n\r\n\r\n\t/*\r\n\t * Checks a state whether the component is invalid or valid.\r\n\t */\r\n\tPPC.isInvalid = function() {\r\n\t\tvar self = this;\r\n\t\tvar is = !self.$valid;\r\n\t\tif (is && !self.$validate) {\r\n\t\t\tis = !self.$dirty;\r\n\t\t}\r\n\t\treturn is;\r\n\t};\r\n\r\n\t/*\r\n\t * Unregisters a monitoring of value according to the path argument.\r\n\t */\r\n\tPPC.unwatch = function(path, fn) {\r\n\t\tvar self = this;\r\n\t\tself.view.eventer.off('com' + self._id + '#watch', path, fn);  // OFF\r\n\t\treturn self;\r\n\t};\r\n\r\n\t/*\r\n\t * Registers a monitoring of value according to the path argument.\r\n\t */\r\n\tPPC.watch = function(path, fn, init) {\r\n\r\n\t\tvar self = this;\r\n\r\n\t\tif (langx.isFunction(path)) {\r\n\t\t\tinit = fn;\r\n\t\t\tfn = path;\r\n\t\t\tpath = self.path;\r\n\t\t} else {\r\n\t\t\tpath = this.view.binding.pathmaker(path);\r\n\t\t}\r\n\r\n\t\tself.on('watch', path, fn, init);\r\n\t\treturn self;\r\n\t};\r\n\r\n\t/*\r\n\t * Sets the state of this component to invalid and it contacts all components listen on the path.\r\n\t */\r\n\tPPC.invalid = function() {\r\n\t\treturn this.storing.invalid(this.path, this);\r\n\t};\r\n\r\n\tPPC.valid = function(value, noEmit) {\r\n\r\n\t\tvar self = this;\r\n\r\n\t\tif (value === undefined) {\r\n\t\t\treturn self.$valid;\r\n\t\t}\r\n\r\n\t\tif (self.$valid_disabled) {\r\n\t\t\treturn self;\r\n\t\t}\r\n\r\n\t\tself.$valid = value;\r\n\t\tself.$validate = false;\r\n\t\tself.$interaction(102);\r\n\t\t\r\n\t\tself.view.componenter.cache.clear('valid');\r\n\t\t\r\n\t\tif (!noEmit && self.state) {\r\n\t\t\tself.stateX(1, 1);\r\n\t\t}\r\n\t\treturn self;\r\n\t};\r\n\r\n\tPPC.style = function(value) {\r\n\t\tdomx.style(value, this._id);\r\n\t\treturn this;\r\n\t};\r\n\r\n\r\n\t/*\r\n\t * Perform a change state. It changes dirty state and contacts all components which listen on path.\r\n\t */\r\n\tPPC.change = function(value) {\r\n\t\tvar self = this;\r\n\t\tself.$dirty_disabled = false;\r\n\t\tself.$dirty = true;\r\n\t\tself.storing.change(self.path, value === undefined ? true : value, self);\r\n\t\treturn self;\r\n\t};\r\n\r\n\t/*\r\n\t * Sets the last used time, time will be stored in self.usage.custom.\r\n\t */\r\n\tPPC.used = function() {\r\n\t\treturn this.$interaction(100);\r\n\t};\r\n\r\n\t/*\r\n\t * Sets the last used time, time will be stored in self.usage.custom.\r\n\t */\r\n\tPPC.dirty = function(value, noEmit) {\r\n\r\n\t\tvar self = this;\r\n\r\n\t\tif (value === undefined) {\r\n\t\t\treturn self.$dirty;\r\n\t\t}\r\n\r\n\t\tif (self.$dirty_disabled) {\r\n\t\t\treturn self;\r\n\t\t}\r\n\r\n\t\tself.$dirty = value;\r\n\t\tself.$interaction(101);\r\n\t\tself.view.componenter.cache.clear('dirty');\r\n\t\tif (!noEmit && self.state) {\r\n\t\t\tself.stateX(2, 2);\r\n\t\t}\r\n\t\treturn self;\r\n\t};\r\n\r\n\r\n\t/*\r\n\t * Resets dirty and valid state.\r\n\t */\r\n\tPPC.reset = function() {\r\n\t\tvar self = this;\r\n\t\tself.storing.reset(self.path, 0, self);\r\n\t\treturn self;\r\n\t};\r\n\r\n\tPPC.setDefault = function(value) {\r\n\t\tthis.$default = function() {\r\n\t\t\treturn value;\r\n\t\t};\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/*\r\n\t * Set a default value for the current component path.\r\n\t */\r\n\tPPC.default = function(reset) {\r\n\t\tvar self = this;\r\n\t\tself.storing.default(self.path, 0, self, reset);\r\n\t\treturn self;\r\n\t};\r\n\r\n\r\n\t/*\r\n\t * Removes this component from the DOM and executes destroy delegate.\r\n\t */\r\n\tPPC.remove = PPC.kill = function(noClear) {\r\n\t\tvar self = this;\r\n\t\tvar el = self.element;\r\n\t\tremovewaiter(self);\r\n\t\t\r\n\t\t//el.removeData(ATTRDATA);\r\n\t\t//el.attr(ATTRDEL, 'true').find(ATTRCOM).attr(ATTRDEL, 'true');\r\n\t\tself.view.helper.kill(el);\r\n\r\n\t\tself.$removed = 1;\r\n\t\tself.removed = true;\r\n\t\tself.view.eventer.off('com' + self._id + '#'); // OFF\r\n\t\t\r\n\t\tif(!noClear) {\r\n\t\t\tlangx.setTimeout2('$cleaner', cleaner2, 100);\r\n\t\t}\r\n\t\treturn true;\r\n\t};\r\n\r\n\tPPC.isRemoved = function() {\r\n\r\n\t};\r\n\r\n\tPPC.on = function(name, path, fn, init) {\r\n\t\tif (langx.isFunction(path)) {\r\n\t\t\tinit = fn;\r\n\t\t\tfn = path;\r\n\t\t\tpath = '';\r\n\t\t} else\r\n\t\t\tpath = path.replace('.*', '');\r\n\r\n\t\tvar self = this;\r\n\t\tvar push = '';\r\n\r\n\t\tif (name.substring(0, 1) === '^') {\r\n\t\t\tpush = '^';\r\n\t\t\tname = name.substring(1);\r\n\t\t}\r\n\r\n\t\tself.view.eventer.on(push + 'com' + self._id + '#' + name, path, fn, init, self); // ON\r\n\t\treturn self;\r\n\t};\r\n\r\n\t/*\r\n\t * Register a new formatter for this component or can format a value.\r\n\t */\r\n\tPPC.formatter = function(value, prepend) {\r\n\t\tvar self = this;\r\n\r\n\t\tif (langx.isFunction(value)) {\r\n\t\t\t!self.$formatter && (self.$formatter = []);\r\n\t\t\tif (prepend === true) {\r\n\t\t\t\tself.$formatter.unshift(value);\r\n\t\t\t} else {\r\n\t\t\t\tself.$formatter.push(value);\r\n\t\t\t}\r\n\t\t\treturn self;\r\n\t\t}\r\n\r\n\t\tvar a = self.$formatter;\r\n\t\tif (a && a.length) {\r\n\t\t\tfor (var i = 0, length = a.length; i < length; i++) {\r\n\t\t\t\tvalue = a[i].call(self, self.path, value, self.type);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/*\r\n\t\ta = M.$formatter;\r\n\t\tif (a && a.length) {\r\n\t\t\tfor (var i = 0, length = a.length; i < length; i++) {\r\n\t\t\t\tvalue = a[i].call(self, self.path, value, self.type);\r\n\t\t\t}\r\n\t\t}*/\r\n\r\n\t\tvalue = self.storing.format(value,self.path,self.type); // TODO\r\n\r\n\t\treturn value;\r\n\t};\r\n\r\n\tPPC.parser = function(value, prepend) {\r\n\r\n\t\tvar self = this;\r\n\t\tvar type = typeof(value);\r\n\r\n\t\tif (type === 'function') {\r\n\t\t\t!self.$parser && (self.$parser = []);\r\n\r\n\t\t\tif (prepend === true) {\r\n\t\t\t\tself.$parser.unshift(value);\r\n\t\t\t} else {\r\n\t\t\t\tself.$parser.push(value);\r\n\t\t\t}\r\n\r\n\t\t\treturn self;\r\n\t\t}\r\n\r\n\t\tif (self.trim && type === 'string') {\r\n\t\t\tvalue = value.trim();\r\n\t\t}\r\n\r\n\t\tvar a = self.$parser;\r\n\t\tif (a && a.length) {\r\n\t\t\tfor (var i = 0, length = a.length; i < length; i++) {\r\n\t\t\t\tvalue = a[i].call(self, self.path, value, self.type);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\t//a = jc.$parser;\r\n\t\t//if (a && a.length) {\r\n\t\t//\tfor (var i = 0, length = a.length; i < length; i++) {\r\n\t\t//\t\tvalue = a[i].call(self, self.path, value, self.type);\r\n\t\t//\t}\r\n\t\t//}\r\n\t\tvalue = self.storing.parser(value,self.path,self.type);\r\n\r\n\t\treturn value;\r\n\t};\r\n\r\n\t/*\r\n\t * Emits an event within jComponent. Is alias for EMIT() method.\r\n\t */\r\n\tPPC.emit = function() {\r\n\t\tvar self = this;\r\n\t\tself.view.eventer.emit.apply(self.view.eventer, arguments); // W>EMIT\r\n\t\treturn this;\r\n\t};\r\n\r\n\tPPC.evaluate = function(path, expression, nopath) {\r\n\t\tvar self = this;\r\n\t\tif (!expression) {\r\n\t\t\texpression = path;\r\n\t\t\tpath = this.path;\r\n\t\t}\r\n\t\treturn self.storing.evaluate(path, expression, nopath);\r\n\t};\r\n\r\n\t/*\r\n\t * Get a value according to the data-jc-path or path.\r\n\t */\r\n\tPPC.get = function(path) {\r\n\t\tvar self = this;\r\n\t\tif (!path) {\r\n\t\t\tpath = self.path;\r\n\t\t}\r\n\r\n\t\tif (self.$pp) {\r\n\t\t\treturn self.owner.data(self.path);\r\n\t\t}\r\n\r\n\t\tif (path) {\r\n\t\t\treturn self.storing.get(path);\r\n\t\t}\r\n\t};\r\n\r\n\tPPC.skip = function(path) {\r\n\t\tvar self = this;\r\n\t\tself.storing.skip(path || self.path); // SKIP\r\n\t\treturn self;\r\n\t};\r\n\r\n\t/*\r\n\t * Sets a value according to the component.path.\r\n\t */\r\n\tPPC.set = function(value, type) {\r\n\r\n\t\tvar self = this;\r\n\t\tvar arg = arguments;\r\n\r\n\t\tif (self.$pp) {\r\n\t\t\tself.owner.set(self.path, value);\r\n\t\t\treturn self;\r\n\t\t}\r\n\r\n\t\t// Backwards compatibility\r\n\t\tif (arg.length === 3) {\r\n\t\t\tself.storing.setx(arg[0], arg[1], arg[2]);\r\n\t\t} else {\r\n\t\t\tself.storing.setx(self.path, value, type);\r\n\t\t}\r\n\r\n\t\treturn self;\r\n\t};\r\n\r\n\t/*\r\n\t * Increments a Number according to the component.path.\r\n\t */\r\n\tPPC.inc = function(value, type) {\r\n\t\tvar self = this;\r\n\t\tself.storing.inc(self.path, value, type);\r\n\t\treturn self;\r\n\t};\r\n\r\n\t/* \r\n\t * Extends a current value by adding/rewrite new fields with new values.\r\n\t */\r\n\tPPC.extend = function(value, type) {\r\n\t\tvar self = this;\r\n\t\tself.storing.extend(self.path, value, type); // M.extend\r\n\t\treturn self;\r\n\t};\r\n\r\n\t/*\r\n\t * Rewrites a value according to the component.path and it won't notify all listeners.\r\n\t */\r\n\tPPC.rewrite = function(value) {\r\n\t\tvar self = this;\r\n\t\tself.storing.rewrite(self.path, value);\r\n\t\treturn self;\r\n\t};\r\n\r\n\t/*\r\n\t * Pushs a new item into the Array according to the component.path.\r\n\t */\r\n\tPPC.push = function(value, type) {\r\n\t\tvar self = this;\r\n\t\tself.storing.push(self.path, value, type);\r\n\t\treturn self;\r\n\t};\r\n\r\n\t// Component\r\n\tPPC.compile = function(container) {\r\n\t\tvar self = this;\r\n\t\t!container && self.attrd('jc-compile') && self.attrd('jc-compile', '1');\r\n\t\tthis.view.compile(container || self.element);\r\n\t\treturn self;\r\n\t};\r\n\r\n\treturn Component;\r\n});"]}