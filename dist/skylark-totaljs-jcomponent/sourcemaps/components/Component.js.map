{"version":3,"sources":["components/Component.js"],"names":["define","jc","langx","topic","paths","Usage","configs","extensions","counter","com_validate2","com","valid","disabled","$valid_disabled","arr","state","push","$validate","validate","$valid","get","path","$interaction","clear","Component","Evented","inherit","[object Object]","name","self","this","_id","ID","usage","$dirty","$parser","$formatter","$skip","$ready","$path","trim","$released","$bindreleased","$data","version","lastIndexOf","$name","substring","type","id","removed","make","done","prerender","destroy","released","getter","value","realtime","nobind","parser","getter2","set","stateX","what","key","$bindchanges","$state","config","EXEC","call","setterX","setter","$bindexact","indexOf","cache","$bindcache","arguments","length","skips","$format","hash","HASH","$valuehash","$setter","data","setter2","is","bt","clearTimeout","setTimeout","$bindtimeout","a","formatter","findcontrol","element","t","$com","$default","autofill","el","$","val","tmp","toString","toLowerCase","checked","PPC","prototype","i","items","o","parentNode","exec","$ppc","c","components","all","owner","$pp","$except","except","p","b","$compare","fix","index","notmodified","fields","isString","NOTMODIFIED","$waiter","prop","callback","$W","setInterval","v","clearInterval","MD","delaywatcher","keys","Object","k","hidden","offsetParent","visible","width","offsetWidth","height","offsetHeight","import","url","insert","preparator","M","release","container","undefined","$removed","attrd","helper","nested","forEach","Array","validate2","d","e","replace","remove","C","recompile","n","prev","scope","rattrd","off","dom","siblings","now","Date","init","$binded","manually","input","default","custom","dirty","notify","NOTIFY","update","refresh","tclass","cls","aclass","timeout","hclass","rclass","rclass2","search","classes","temp","add","rem","split","toggle","manual","isNumber","noscope","noScope","$noscope","nocompile","singleton","statics","blind","$$path","bindchanges","bindChanges","enable","bindexact","bindExact","bindvisible","bindVisible","delaybinder","readonly","noDirty","noValid","novalidate","noValidate","nodirty","$dirty_disabled","datasource","ds","$datasource","unwatch","fn","watch","setPath","findFormat","charCodeAt","env","s","j","join","ready","attr","css","main","$main","parent","closest","rcwatch","reconfigure","isPlainObject","configure","$rcwatch","$config","cfg","$type","$id","$compile","$init","$class","$reconfigure","sel","TNB","number","boolean","html","empty","append","text","$children","m","event","on","apply","arg","find","selector","isInvalid","OFF","isFunction","pathmaker","invalid","INVALID","noEmit","style","STYLE","change","CHANGE","used","reset","setDefault","kill","noClear","obj","removewaiter","setTimeout2","cleaner2","prepend","unshift","emit","evaluate","expression","nopath","EVALUATE","skip","immSetx","inc","immInc","extend","immExtend","rewrite","REWRITE","immPush","$components","registry","mixin","declaration","TYPE_FN","RECOMPILE","format","FN","register","dependencies","warn","shared","item"],"mappings":"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","file":"../../components/Component.js","sourcesContent":["define([\r\n\t\"../jc\",\r\n\t\"../langx\",\r\n\t\"../topic\",\r\n\t\"./paths\",\r\n\t\"./Usage\"\r\n],function(jc,langx, topic, paths, Usage){\r\n\tvar\tconfigs =  [],\r\n\t\textensions = {},\r\n\t\ttmp = {};\r\n\r\n\tvar counter = 0;\r\n\r\n\tfunction com_validate2(com) {\r\n\r\n\t\tvar valid = true;\r\n\r\n\t\tif (com.disabled) {\r\n\t\t\treturn valid;\r\n\t\t}\r\n\r\n\t\tif (com.$valid_disabled) {\r\n\t\t\treturn valid;\r\n\t\t}\r\n\r\n\t\tvar arr = [];\r\n\t\tcom.state && arr.push(com);\r\n\t\tcom.$validate = true;\r\n\r\n\t\tif (com.validate) {\r\n\t\t\tcom.$valid = com.validate(get(com.path));\r\n\t\t\tcom.$interaction(102);\r\n\t\t\tif (!com.$valid)\r\n\t\t\t\tvalid = false;\r\n\t\t}\r\n\r\n\t\tclear('valid');\r\n\t\tlangx.state(arr, 1, 1);\r\n\t\treturn valid;\r\n\t}\r\n\r\n\t// ===============================================================\r\n\t// COMPONENT DECLARATION\r\n\t// ===============================================================\r\n\r\n\tvar Component = langx.Evented.inherit({\r\n\t\t_construct(name) {\r\n\t\t\tvar self = this;\r\n\t\t\tself._id = self.ID = 'jc' + (counter++);\r\n\t\t\tself.usage = new Usage();\r\n\t\t\tself.$dirty = true;\r\n\t\t\tself.$valid = true;\r\n\t\t\tself.$validate = false;\r\n\t\t\tself.$parser = [];\r\n\t\t\tself.$formatter = [];\r\n\t\t\tself.$skip = false;\r\n\t\t\tself.$ready = false;\r\n\t\t\tself.$path;\r\n\t\t\tself.trim = true;\r\n\t\t\tself.$released = false;\r\n\t\t\tself.$bindreleased = true;\r\n\t\t\tself.$data = {};\r\n\r\n\t\t\tvar version = name.lastIndexOf('@');\r\n\r\n\t\t\tself.name = name;\r\n\t\t\tself.$name = version === -1 ? name : name.substring(0, version);\r\n\t\t\tself.version = version === -1 ? '' : name.substring(version + 1);\r\n\t\t\tself.path;\r\n\t\t\tself.type;\r\n\t\t\tself.id;\r\n\t\t\tself.disabled = false;\r\n\t\t\tself.removed = false;\r\n\r\n\t\t\tself.make;\r\n\t\t\tself.done;\r\n\t\t\tself.prerender;\r\n\t\t\tself.destroy;\r\n\t\t\tself.state;\r\n\t\t\tself.validate;\r\n\t\t\tself.released;\r\n\r\n\t\t\tself.getter = function(value, realtime, nobind) {\r\n\r\n\t\t\t\tvar self = this;\r\n\r\n\t\t\t\tvalue = self.parser(value);\r\n\t\t\t\tself.getter2 && self.getter2(value, realtime);\r\n\r\n\t\t\t\tif (realtime) {\r\n\t\t\t\t\tself.$skip = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Binds a value\r\n\t\t\t\tif (nobind) {\r\n\t\t\t\t\tcom_validate2(self);\r\n\t\t\t\t} else if (value !== self.get()) {\r\n\t\t\t\t\tself.set(value, 2);\r\n\t\t\t\t} else if (realtime === 3) {\r\n\t\t\t\t\t// A validation for same values, \"realtime=3\" is in \"blur\" event\r\n\t\t\t\t\t// Because we need to validate the input if the user leaves from the control\r\n\t\t\t\t\tcom_validate2(self);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tself.stateX = function(type, what) {\r\n\t\t\t\tvar key = type + 'x' + what;\r\n\t\t\t\tif (!self.$bindchanges || self.$state !== key) {\r\n\t\t\t\t\tself.$state = key;\r\n\t\t\t\t\tself.config.$state && EXEC.call(self, self.config.$state, type, what);\r\n\t\t\t\t\tself.state(type, what);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tself.setterX = function(value, path, type) {\r\n\r\n\t\t\t\tif (!self.setter || (self.$bindexact && self.path !== path && self.path.indexOf(path + '.') === -1 && type))\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tvar cache = self.$bindcache;\r\n\t\t\t\tif (arguments.length) {\r\n\r\n\t\t\t\t\tif (skips[self.path]) {\r\n\t\t\t\t\t\tvar s = --skips[self.path];\r\n\t\t\t\t\t\tif (s <= 0) {\r\n\t\t\t\t\t\t\tdelete skips[self.path];\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (self.$format) {\r\n\t\t\t\t\t\tvalue = self.$format(value, path, type);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (self.$bindreleased) {\r\n\r\n\t\t\t\t\t\tif (self.$bindchanges) {\r\n\t\t\t\t\t\t\tvar hash = HASH(value);\r\n\t\t\t\t\t\t\tif (hash === self.$valuehash)\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\tself.$valuehash = hash;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// Binds value directly\r\n\t\t\t\t\t\tself.config.$setter && EXEC.call(self, self.config.$setter, value, path, type);\r\n\t\t\t\t\t\tself.data('', value);\r\n\t\t\t\t\t\tself.setter(value, path, type);\r\n\t\t\t\t\t\tself.setter2 && self.setter2(value, path, type);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (self.$released) {\r\n\t\t\t\t\t\t\tcache.is = true;\r\n\t\t\t\t\t\t\tcache.value = value;\r\n\t\t\t\t\t\t\tcache.path = path;\r\n\t\t\t\t\t\t\tcache.type = type;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tcache.value = value;\r\n\t\t\t\t\t\t\tcache.path = path;\r\n\t\t\t\t\t\t\tcache.type = type;\r\n\t\t\t\t\t\t\tif (!cache.bt) {\r\n\t\t\t\t\t\t\t\tcache.is = true;\r\n\t\t\t\t\t\t\t\tself.setterX();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else if (!self.$released && cache && cache.is) {\r\n\t\t\t\t\tcache.is = false;\r\n\t\t\t\t\tcache.bt && clearTimeout(cache.bt);\r\n\t\t\t\t\tcache.bt = setTimeout(function(self) {\r\n\t\t\t\t\t\tvar cache = self.$bindcache;\r\n\t\t\t\t\t\tcache.bt = 0; // reset timer id\r\n\r\n\t\t\t\t\t\tif (self.$bindchanges) {\r\n\t\t\t\t\t\t\tvar hash = HASH(value);\r\n\t\t\t\t\t\t\tif (hash === self.$valuehash)\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\tself.$valuehash = hash;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tself.config.$setter && EXEC.call(self, self.config.$setter, cache.value, cache.path, cache.type);\r\n\t\t\t\t\t\tself.data('', cache.value);\r\n\t\t\t\t\t\tself.setter(cache.value, cache.path, cache.type);\r\n\t\t\t\t\t\tself.setter2 && self.setter2(cache.value, cache.path, cache.type);\r\n\t\t\t\t\t}, self.$bindtimeout, self);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tself.setter = function(value, path, type) {\r\n\r\n\t\t\t\tvar self = this;\r\n\r\n\t\t\t\tif (type === 2) {\r\n\t\t\t\t\tif (self.$skip) {\r\n\t\t\t\t\t\tself.$skip = false;\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar a = 'select-one';\r\n\t\t\t\tvalue = self.formatter(value);\r\n\r\n\t\t\t\tfindcontrol(self.element[0], function(t) {\r\n\r\n\t\t\t\t\tif (t.$com !== self)\r\n\t\t\t\t\t\tt.$com = self;\r\n\r\n\t\t\t\t\tvar path = t.$com.path;\r\n\t\t\t\t\tif (path && path.length && path !== self.path)\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\tif (t.type === 'checkbox') {\r\n\t\t\t\t\t\tvar tmp = value != null ? value.toString().toLowerCase() : '';\r\n\t\t\t\t\t\ttmp = tmp === 'true' || tmp === '1' || tmp === 'on';\r\n\t\t\t\t\t\ttmp !== t.checked && (t.checked = tmp);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (value == null)\r\n\t\t\t\t\t\tvalue = '';\r\n\r\n\t\t\t\t\tif (!type && t.type !== a && t.type !== 'range' && !self.$default && !value)\r\n\t\t\t\t\t\tautofill.push(t.$com);\r\n\r\n\t\t\t\t\tif (t.type === a || t.type === 'select') {\r\n\t\t\t\t\t\tvar el = $(t);\r\n\t\t\t\t\t\tel.val() !== value && el.val(value);\r\n\t\t\t\t\t} else if (t.value !== value)\r\n\t\t\t\t\t\tt.value = value;\r\n\t\t\t\t});\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t});\r\n\r\n\r\n\tvar PPC = Component.prototype;\r\n\r\n\t/*\r\n\t * Set or get data from internal component repository. \r\n\t * Data can be used for data-bind=\"\" attribute and nested j-Components. \r\n\t */\r\n\tPPC.data = function(key, value) {\r\n\r\n\t\tif (!key) {\r\n\t\t\tkey = '@';\r\n\t\t}\r\n\r\n\t\tvar self = this;\r\n\t\tvar data = self.$data[key];\r\n\r\n\t\tif (arguments.length === 1) {\r\n\t\t\treturn data ? data.value : null;\r\n\t\t}\r\n\r\n\t\tif (data) {\r\n\t\t\tdata.value = value;\r\n\t\t\tfor (var i = 0; i < data.items.length; i++) {\r\n\t\t\t\tvar o = data.items[i];\r\n\t\t\t\to.el[0].parentNode && o.exec(value, key);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tself.$data[key] = { \r\n\t\t\t\tvalue: value, \r\n\t\t\t\titems: [] \r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tif (self.$ppc) {\r\n\t\t\tvar c = Component.components.all; //M.components;\r\n\t\t\tfor (var i = 0; i < c.length; i++) {\r\n\t\t\t\tvar com = c[i];\r\n\t\t\t\tif (com.owner === self && com.$pp && key === com.path)\r\n\t\t\t\t\tcom.setterX(value, value, 2);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn value;\r\n\t};\r\n\r\n\t/*\r\n\t * \r\n\t */\r\n\tPPC.$except = function(except) {\r\n\t\tvar p = self.$path;\r\n\t\tfor (var a = 0; a < except.length; a++) {\r\n\t\t\tfor (var b = 0; b < p.length; b++) {\r\n\t\t\t\tif (except[a] === p[b]) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t};\r\n\r\n\t/*\r\n\t * \r\n\t */\r\n\tPPC.$compare = function(path, fix) {\r\n\t\tvar self = this;\r\n\r\n\t\tif (fix)\r\n\t\t\treturn self.path === path;\r\n\r\n\t\tif (path.length > self.path.length) {\r\n\t\t\tvar index = path.lastIndexOf('.', self.path.length);\r\n\t\t\treturn index === -1 ? false : self.path === path.substring(0, index);\r\n\t\t}\r\n\r\n\t\tfor (var i = 0, length = self.$path.length; i < length; i++) {\r\n\t\t\tif (self.$path[i] === path) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t/*\r\n\t * Removes waiter.\r\n\t */\r\n\tfunction removewaiter(obj) {\r\n\t\tif (obj.$W) {\r\n\t\t\tvar keys = Object.keys(obj.$W);\r\n\t\t\tfor (var i = 0, length = keys.length; i < length; i++) {\r\n\t\t\t\tvar v = obj.$W[keys[i]];\r\n\t\t\t\tif (v.id) {\r\n\t\t\t\t\tclearInterval(v.id);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/*\r\n\t * \r\n\t */\r\n\tPPC.notmodified = function(fields) {\r\n\t\tvar t = this;\r\n\t\tif (langx.isString(fields)) {\r\n\t\t\tfields = [fields];\r\n\t\t}\r\n\t\treturn NOTMODIFIED(t._id, t.get(), fields);\r\n\t};\r\n\r\n\t/*\r\n\t * \r\n\t */\r\n\tPPC.$waiter = function(prop, callback) {\r\n\r\n\t\tvar t = this;\r\n\r\n\t\tif (prop === true) {\r\n\t\t\tif (t.$W) {\r\n\t\t\t\tvar keys = Object.keys(t.$W);\r\n\t\t\t\tfor (var i = 0; i < keys.length; i++) {\r\n\t\t\t\t\tvar k = keys[i];\r\n\t\t\t\t\tvar o = t.$W[k];\r\n\t\t\t\t\to.id = setInterval(function(t, prop) {\r\n\t\t\t\t\t\tvar o = t.$W[prop];\r\n\t\t\t\t\t\tvar v = t[prop]();\r\n\t\t\t\t\t\tif (v) {\r\n\t\t\t\t\t\t\tclearInterval(o.id);\r\n\t\t\t\t\t\t\tfor (var i = 0; i < o.callback.length; i++)\r\n\t\t\t\t\t\t\t\to.callback[i].call(t, v);\r\n\t\t\t\t\t\t\tdelete t.$W[prop];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, MD.delaywatcher, t, k);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t} else if (prop === false) {\r\n\t\t\tif (t.$W) {\r\n\t\t\t\tvar keys = Object.keys(t.$W);\r\n\t\t\t\tfor (var i = 0; i < keys.length; i++) {\r\n\t\t\t\t\tvar a = t.$W[keys[i]];\r\n\t\t\t\t\ta && clearInterval(a.id);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t!t.$W && (t.$W = {});\r\n\r\n\t\tif (t.$W[prop]) {\r\n\t\t\t// Checks if same callback exists\r\n\t\t\tfor (var i = 0; i < t.$W[prop].length; i++) {\r\n\t\t\t\tif (t.$W[prop][i] === callback)\r\n\t\t\t\t\treturn t;\r\n\t\t\t}\r\n\t\t\tt.$W[prop].callback.push(callback);\r\n\t\t\treturn t;\r\n\t\t} else\r\n\t\t\tt.$W[prop] = { callback: [callback] };\r\n\r\n\t\tif (!t.$released) {\r\n\t\t\tt.$W[prop].id = setInterval(function(t, prop) {\r\n\t\t\t\tvar o = t.$W[prop];\r\n\t\t\t\tvar v = t[prop]();\r\n\t\t\t\tif (v) {\r\n\t\t\t\t\tclearInterval(o.id);\r\n\t\t\t\t\tfor (var i = 0; i < o.callback.length; i++) {\r\n\t\t\t\t\t\to.callback[i].call(t, v);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdelete t.$W[prop];\r\n\t\t\t\t}\r\n\t\t\t}, MD.delaywatcher, t, prop);\r\n\t\t}\r\n\t\treturn t;\r\n\t};\r\n\r\n\t/*\r\n\t * .\r\n\t */\r\n\tPPC.hidden = function(callback) {\r\n\t\tvar t = this;\r\n\t\tvar v = t.element ? t.element[0].offsetParent : null;\r\n\t\tv = v === null;\r\n\t\tif (callback) {\r\n\t\t\tif (v) {\r\n\t\t\t\tcallback.call(t);\r\n\t\t\t} else {\r\n\t\t\t\tt.$waiter('hidden', callback);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn v;\r\n\t};\r\n\r\n\t/*\r\n\t * \r\n\t */\r\n\tPPC.visible = function(callback) {\r\n\t\tvar t = this;\r\n\t\tvar v = t.element ? t.element[0].offsetParent : null;\r\n\t\tv = v !== null;\r\n\t\tif (callback) {\r\n\t\t\tif (v) {\r\n\t\t\t\tcallback.call(t);\r\n\t\t\t} else {\r\n\t\t\t\tt.$waiter('visible', callback);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn v;\r\n\t};\r\n\r\n\t/*\r\n\t * \r\n\t */\r\n\tPPC.width = function(callback) {\r\n\t\tvar t = this;\r\n\t\tvar v = t.element ? t.element[0].offsetWidth : 0;\r\n\t\tif (callback) {\r\n\t\t\tif (v) {\r\n\t\t\t\tcallback.call(t, v);\r\n\t\t\t} else {\r\n\t\t\t\tt.$waiter('width', callback);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn v;\r\n\t};\r\n\r\n\t/*\r\n\t * \r\n\t */\r\n\tPPC.height = function(callback) {\r\n\t\tvar t = this;\r\n\t\tvar v = t.element ? t.element[0].offsetHeight : 0;\r\n\t\tif (callback) {\r\n\t\t\tif (v) {\r\n\t\t\t\tcallback.call(t, v);\r\n\t\t\t} else {\r\n\t\t\t\tt.$waiter('height', callback);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn v;\r\n\t};\r\n\r\n\t/*\r\n\t * Import some content from external source to this element.\r\n\t */\r\n\tPPC.import = function(url, callback, insert, preparator) {\r\n\t\tvar self = this;\r\n\t\tM.import(url, self.element, callback, insert, preparator);\r\n\t\treturn self;\r\n\t};\r\n\r\n\t/*\r\n\t * Performs release state for all nested components.\r\n\t */\r\n\tPPC.release = function(value, container) {\r\n\r\n\t\tvar self = this;\r\n\t\tif (value === undefined || self.$removed) {\r\n\t\t\treturn self.$released;\r\n\t\t}\r\n\r\n\t\tself.attrd('jc-released', value);\r\n\r\n\t\t//(container || self.element).find(consts.ATTRCOM).each(function() {\r\n\t\thelper.nested(container || self.element).forEach(function(){ \r\n\t\t\tvar el = $(this);\r\n\t\t\tel.attrd('jc-released', value ? 'true' : 'false');\r\n\t\t\tvar com = el[0].$com;\r\n\t\t\tif (com instanceof Object) {\r\n\t\t\t\tif (com instanceof Array) {\r\n\t\t\t\t\tfor (var i = 0, length = com.length; i < length; i++) {\r\n\t\t\t\t\t\tvar o = com[i];\r\n\t\t\t\t\t\tif (!o.$removed && o.$released !== value) {\r\n\t\t\t\t\t\t\to.$released = value;\r\n\t\t\t\t\t\t\to.released && o.released(value, self);\r\n\t\t\t\t\t\t\to.$waiter(!value);\r\n\t\t\t\t\t\t\t!value && o.setterX();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (!com.$removed && com.$released !== value) {\r\n\t\t\t\t\tcom.$released = value;\r\n\t\t\t\t\tcom.released && com.released(value, self);\r\n\t\t\t\t\tcom.$waiter(!value);\r\n\t\t\t\t\t!value && com.setterX();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif (!container && self.$released !== value) {\r\n\t\t\tself.$released = value;\r\n\t\t\tself.released && self.released(value, self);\r\n\t\t\tself.$waiter(!value);\r\n\t\t\t!value && self.setterX();\r\n\t\t}\r\n\r\n\t\treturn value;\r\n\t};\r\n\r\n\t/*\r\n\t * Performs validation with refreshing state of component\r\n\t */\r\n\tPPC.validate2 = function() {\r\n\t\treturn com_validate2(this);\r\n\t};\r\n\r\n\t/*\r\n\t * Returns all nested components.\r\n\t */\r\n\tPPC.exec = function(name, a, b, c, d, e) {\r\n\t\tvar self = this;\r\n\t\t/*\r\n\t\tself.find(consts.ATTRCOM).each(function() {\r\n\t\t\tvar t = this;\r\n\t\t\tif (t.$com) {\r\n\t\t\t\tt.$com.caller = self;\r\n\t\t\t\tt.$com[name] && this.$com[name](a, b, c, d, e);\r\n\t\t\t}\r\n\t\t});\r\n\t\t*/\r\n\r\n\t\treturn self;\r\n\t};\r\n\r\n\t/*\r\n\t * Returns all nested components.\r\n\t */\r\n\tPPC.replace = function(el, remove) {\r\n\t\tvar self = this;\r\n\r\n\t\tif (C.is) {\r\n\t\t\tC.recompile = true;\r\n\t\t}\r\n\r\n\t\tvar n = 'jc-scope';\r\n\t\tvar prev = self.element;\r\n\t\tvar scope = prev.attrd(n);\r\n\r\n\t\tself.element.rattrd('jc');\r\n\t\tself.element[0].$com = null;\r\n\t\tscope && self.element.rattrd(n);\r\n\r\n\t\tif (remove) {\r\n\t\t\tprev.off().remove();\r\n\t\t} else {\r\n\t\t\tself.attrd('jc-replaced', 'true');\r\n\t\t}\r\n\r\n\t\tself.element = $(el);\r\n\t\tself.dom = self.element[0];\r\n\t\tself.dom.$com = self;\r\n\t\tself.attrd('jc', self.name);\r\n\t\tif (scope) {\r\n\t\t\tself.attrd(n, scope);\r\n\t\t}\r\n\t\tself.siblings = false;\r\n\t\treturn self;\r\n\t};\r\n\r\n\t//PPC.compile \r\n\r\n\t/*\r\n\t * Returns all nested components.\r\n\t */\r\n\tPPC.nested = function() {\r\n\t\treturn helper.nested(this.element);\r\n\r\n\t\t/*\r\n\t\tvar arr = [];\r\n\t\tthis.find(ATTRCOM).each(function() {\r\n\t\t\tvar el = $(this);\r\n\t\t\tvar com = el[0].$com;\r\n\t\t\tif (com && !el.attr(ATTRDEL)) {\r\n\t\t\t\tif (com instanceof Array)\r\n\t\t\t\t\tarr.push.apply(arr, com);\r\n\t\t\t\telse\r\n\t\t\t\t\tarr.push(com);\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn arr;\r\n\t\t*/\r\n\t};\r\n\r\n\t/*\r\n\t * Sets the last interaction time,time will be stored in self.usage.\r\n\t */\r\n\tPPC.$interaction = function(type) {\r\n\r\n\t\t// type === 0 : init\r\n\t\t// type === 1 : manually\r\n\t\t// type === 2 : by input\r\n\t\t// type === 3 : by default\r\n\t\t// type === 100 : custom\r\n\t\t// type === 101 : dirty\r\n\t\t// type === 102 : valid\r\n\r\n\t\tvar now = Date.now();\r\n\t\tvar t = this;\r\n\r\n\t\tswitch (type) {\r\n\t\t\tcase 0:\r\n\t\t\t\tt.usage.init = now;\r\n\t\t\t\tt.$binded = true;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 1:\r\n\t\t\t\tt.usage.manually = now;\r\n\t\t\t\tt.$binded = true;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 2:\r\n\t\t\t\tt.usage.input = now;\r\n\t\t\t\tt.$binded = true;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 3:\r\n\t\t\t\tt.usage.default = now;\r\n\t\t\t\tt.$binded = true;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 100:\r\n\t\t\t\tt.usage.custom = now;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 101:\r\n\t\t\t\tt.usage.dirty = now;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 102:\r\n\t\t\t\tt.usage.valid = now;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\treturn t;\r\n\t};\r\n\r\n\t/*\r\n\t * Notifies a setter in all components according to the component.path.\r\n\t */\r\n\tPPC.notify = function() {\r\n\t\tNOTIFY(this.path);\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/*\r\n\t * Executes the component.setter with a refreshed value according to the component.path.\r\n\t */\r\n\tPPC.update = PPC.refresh = function(notify, type) {\r\n\t\tvar self = this;\r\n\t\tif (self.$binded) {\r\n\r\n\t\t\tif (langx.isString(notify)) {\r\n\t\t\t\ttype = notify;\r\n\t\t\t\tnotify = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (notify) {\r\n\t\t\t\tself.set(self.get(), type);\r\n\t\t\t} else {\r\n\t\t\t\tif (self.setter) {\r\n\t\t\t\t self.setterX(self.get(), self.path, 1);\r\n\t\t\t\t}\r\n\t\t\t\tself.$interaction(1);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn self;\r\n\t};\r\n\r\n\t/*\r\n\t * Toggles class, it's alias for self.element.toggleClass().\r\n\t */\r\n\tPPC.tclass = function(cls, v) {\r\n\t\tvar self = this;\r\n\t\tself.element.tclass(cls, v);\r\n\t\treturn self;\r\n\t};\r\n\r\n\t/*\r\n\t * Adds CSS class into the element classes., it's alias for self.element.addClass().\r\n\t */\r\n\tPPC.aclass = function(cls, timeout) {\r\n\t\tvar self = this;\r\n\t\tif (timeout) {\r\n\t\t\tsetTimeout(function() { self.element.aclass(cls); }, timeout);\r\n\t\t} else {\r\n\t\t\tself.element.aclass(cls);\r\n\t\t}\r\n\t\treturn self;\r\n\t};\r\n\r\n\t/*\r\n\t * Determines class, it's alias for self.element.hasClass().\r\n\t */\r\n\tPPC.hclass = function(cls) {\r\n\t\treturn this.element.hclass(cls);\r\n\t};\r\n\r\n\t/*\r\n\t * Removes class, it's alias for self.element.removeClass().\r\n\t */\r\n\tPPC.rclass = function(cls, timeout) {\r\n\t\tvar self = this;\r\n\t\tvar e = self.element;\r\n\t\tif (timeout)\r\n\t\t\tsetTimeout(function() { e.rclass(cls); }, timeout);\r\n\t\telse {\r\n\t\t\tif (cls) {\r\n\t\t\t\te.rclass(cls);\r\n\t\t\t} else {\r\n\t\t\t\te.rclass();\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn self;\r\n\t};\r\n\r\n\t/*\r\n\t *  Removes classes according to the text to search.\r\n\t */\r\n\tPPC.rclass2 = function(search) {\r\n\t\tthis.element.rclass2(search);\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/*\r\n\t * Add or remove CSS classes.\r\n\t */\r\n\tPPC.classes = function(cls) {\r\n\r\n\t\tvar key = 'cls.' + cls;\r\n\t\tvar tmp = temp[key]; // caches.temp[key];\r\n\t\tvar t = this;\r\n\t\tvar e = t.element;\r\n\r\n\t\tif (tmp) {\r\n\t\t\ttmp.add && e.aclass(tmp.add);\r\n\t\t\ttmp.rem && e.rclass(tmp.rem);\r\n\t\t\treturn t;\r\n\t\t}\r\n\r\n\t\tvar arr = cls instanceof Array ? cls : cls.split(' ');\r\n\t\tvar add = '';\r\n\t\tvar rem = '';\r\n\r\n\t\tfor (var i = 0, length = arr.length; i < length; i++) {\r\n\t\t\tvar c = arr[i].substring(0, 1);\r\n\t\t\tif (c === '-')\r\n\t\t\t\trem += (rem ? ' ' : '') + arr[i].substring(1);\r\n\t\t\telse\r\n\t\t\t\tadd += (add ? ' ' : '') + (c === '+' ? arr[i].substring(1) : arr[i]);\r\n\t\t}\r\n\r\n\t\tif (add) {\r\n\t\t\te.aclass(add);\r\n\t\t}\r\n\t\tif (rem) {\r\n\t\t\te.rclass(rem);\r\n\t\t}\r\n\r\n\t\tif (cls instanceof Array) {\r\n\t\t\treturn t;\r\n\t\t}\r\n\r\n\t\ttemp[key] = { add: add, rem: rem };  // caches.temp[key] = { add: add, rem: rem }; \r\n\t\treturn t;\r\n\t};\r\n\r\n\t/*\r\n\t * Returns a parent component instance if exists (otherwise: null).\r\n\t */\r\n\tPPC.toggle = function(cls, visible, timeout) {\r\n\r\n\t\tvar manual = false;\r\n\t\tvar self = this;\r\n\r\n\t\tif (!langx.isString(cls)) {\r\n\t\t\ttimeout = visible;\r\n\t\t\tvisible = cls;\r\n\t\t\tcls = 'hidden';\r\n\t\t\tmanual = true;\r\n\t\t}\r\n\r\n\t\tif (langx.isNumber(visible)) {\r\n\t\t\ttimeout = visible;\r\n\t\t\tvisible = undefined;\r\n\t\t} else if (manual && visible !== undefined) {\r\n\t\t\tvisible = !visible;\r\n\t\t}\r\n\r\n\t\tvar el = self.element;\r\n\t\tif (!timeout) {\r\n\t\t\tel.tclass(cls, visible);\r\n\t\t\treturn self;\r\n\t\t}\r\n\r\n\t\tsetTimeout(function() {\r\n\t\t\tel.tclass(cls, visible);\r\n\t\t}, timeout);\r\n\t\treturn self;\r\n\t};\r\n\r\n\t/*\r\n\t * Disables scopes according to the data-jc-scope attribute.\r\n\t */\r\n\tPPC.noscope = PPC.noScope = function(value) {\r\n\t\tvar self = this;\r\n\t\tself.$noscope = value === undefined ? true : value === true;\r\n\t\treturn self;\r\n\t};\r\n\r\n\t/*\r\n\t * Returns a parent component instance if exists (otherwise: null).\r\n\t */\r\n\tPPC.nocompile = function() {\r\n\t\tvar self = this;\r\n\t\tself.element.attrd('jc-compile', '0');\r\n\t\treturn self;\r\n\t};\r\n\r\n\t/*\r\n\t * Creates a single instance of the component. \r\n\t * So if the component will be declared multiple times then jComponent creates the only one instance and \r\n\t * another declarations will be skipped.\r\n\t */\r\n\tPPC.singleton = function() {\r\n\t\tvar self = this;\r\n\t\tstatics['$ST_' + self.name] = true;\r\n\t\treturn self;\r\n\t};\r\n\r\n\t/*\r\n\t * Sets the component as blind.\r\n\t * Component will be skipped when jComponent performs data-binding. \r\n\t * If your component won't work with data-binding then this option can increase a performance of your web app.\r\n\t */\r\n\tPPC.blind = function() {\r\n\t\tvar self = this;\r\n\t\tself.path = null;\r\n\t\tself.$path = null;\r\n\t\tself.$$path = null;\r\n\t\treturn self;\r\n\t};\r\n\r\n\t/*\r\n\t * Binds changes only. \r\n\t * If setter will get the same value as a previous value then skips binding.\r\n\t */\r\n\tPPC.bindchanges = PPC.bindChanges = function(enable) {\r\n\t\tthis.$bindchanges = enable == null || enable === true;\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/*\r\n\t * Sets binding of values when the the modification path is same as the component path or the path is part of parent path.\r\n\t */\r\n\tPPC.bindexact = PPC.bindExact = function(enable) {\r\n\t\tthis.$bindexact = enable == null || enable === true;\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/*\r\n\t * Sets binding of values only when the component is not released.\r\n\t * it depends on releasing of the parent component.\r\n\t */\r\n\tPPC.bindvisible = PPC.bindVisible = function(timeout) {\r\n\t\tvar self = this;\r\n\t\tself.$bindreleased = false;\r\n\t\tself.$bindtimeout = timeout || MD.delaybinder;\r\n\t\tself.$bindcache = {};\r\n\t\treturn self;\r\n\t};\r\n\r\n\t/*\r\n\t * Enables readonly mode for the component.\r\n\t * It disables dirty and valid states, getter, setter, parsers and formatters. \r\n\t * This option can improve performance.\r\n\t */\r\n\tPPC.readonly = function() {\r\n\t\tvar self = this;\r\n\t\tself.noDirty();\r\n\t\tself.noValid();\r\n\t\tself.getter = null;\r\n\t\tself.setter = null;\r\n\t\tself.$parser = null;\r\n\t\tself.$formatter = null;\r\n\t\treturn self;\r\n\t};\r\n\r\n\t/*\r\n\t * Returns a parent component instance if exists (otherwise: null).\r\n\t */\r\n\tPPC.novalidate = PPC.noValid = PPC.noValidate = function(val) {\r\n\t\tif (val === undefined) {\r\n\t\t\tval = true;\r\n\t\t}\r\n\t\tvar self = this;\r\n\t\tself.$valid_disabled = val;\r\n\t\tself.$valid = val;\r\n\t\treturn self;\r\n\t};\r\n\r\n\t/*\r\n\t * Returns a parent component instance if exists (otherwise: null).\r\n\t */\r\n\tPPC.nodirty = PPC.noDirty = function(val) {\r\n\t\tif (val === undefined) {\r\n\t\t\tval = true;\r\n\t\t}\r\n\t\tvar self = this;\r\n\t\tself.$dirty_disabled = val;\r\n\t\tself.$dirty = !val;\r\n\t\treturn self;\r\n\t};\r\n\r\n\t/*\r\n\t * Watch some additional data-source.\r\n\t * Each next declaration of self.datasource() cancels previous declaration.\r\n\t */\r\n\tPPC.datasource = function(path, callback, init) {\r\n\t\tvar self = this;\r\n\t\tvar ds = self.$datasource;\r\n\r\n\t\tds && self.unwatch(ds.path, ds.fn);\r\n\r\n\t\tif (path) {\r\n\t\t\tself.$datasource = { path: path, fn: callback };\r\n\t\t\tself.watch(path, callback, init !== false);\r\n\t\t} else\r\n\t\t\tself.$datasource = null;\r\n\r\n\t\treturn self;\r\n\t};\r\n\r\n\t/*\r\n\t * Rewrites component.path.\r\n\t */\r\n\tPPC.setPath = function(path, type) {\r\n\r\n\t\t// type 1: init\r\n\t\t// type 2: scope\r\n\r\n\t\tvar self = this;\r\n\t\tvar tmp = findFormat(path);\r\n\r\n\t\tif (tmp) {\r\n\t\t\tpath = tmp.path;\r\n\t\t\tself.$format = tmp.fn;\r\n\t\t} else if (!type)\r\n\t\t\tself.$format = null;\r\n\r\n\t\tvar arr = [];\r\n\r\n\t\tif (path.substring(0, 1) === '@') {\r\n\t\t\tpath = path.substring(1);\r\n\t\t\tself.$pp = true;\r\n\t\t\tself.owner.$ppc = true;\r\n\t\t} else {\r\n\t\t\tself.$pp = false;\r\n\t\t}\r\n\r\n\t\t// Temporary\r\n\t\tif (path.charCodeAt(0) === 37) { // %\r\n\t\t\tpath = 'jctmp.' + path.substring(1);\r\n\t\t}\r\n\r\n\t\tpath = path.env();\r\n\r\n\t\t// !path = fixed path\r\n\t\tif (path.charCodeAt(0) === 33) { // !\r\n\t\t\tpath = path.substring(1);\r\n\t\t\tarr.push(path);\r\n\t\t} else {\r\n\t\t\tvar p = path.split('.');\r\n\t\t\tvar s = [];\r\n\t\t\tfor (var j = 0; j < p.length; j++) {\r\n\t\t\t\tvar b = p[j].lastIndexOf('[');\r\n\t\t\t\tif (b !== -1) {\r\n\t\t\t\t\tvar c = s.join('.');\r\n\t\t\t\t\tarr.push(c + (c ? '.' : '') + p[j].substring(0, b));\r\n\t\t\t\t}\r\n\t\t\t\ts.push(p[j]);\r\n\t\t\t\tarr.push(s.join('.'));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tself.path = path;\r\n\t\tself.$path = arr;\r\n\t\ttype !== 1 && C.ready && refresh();\r\n\t\treturn self;\r\n\t};\r\n\r\n\t/*\r\n\t * Get/set a value into the element attribute, it's alias for self.element.attr(name, [value]).\r\n\t */\r\n//\tPPC.attr = SCP.attr = function(name, value) {\r\n\tPPC.attr = function(name, value) {\r\n\t\tvar el = this.element;\r\n\t\tif (value === undefined) {\r\n\t\t\treturn el.attr(name);\r\n\t\t}\r\n\t\tel.attr(name, value);\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/*\r\n\t * Get/set a value into the element attribute with data- prefix for name of attribute.\r\n\t * it's alias for self.element.attr(name, [value]).\r\n\t */\r\n//\tPPC.attrd = SCP.attrd = function(name, value) {\r\n\tPPC.attrd = function(name, value) {\r\n\t\tname = 'data-' + name;\r\n\t\tvar el = this.element;\r\n\t\tif (value === undefined) {\r\n\t\t\treturn el.attr(name);\r\n\t\t}\r\n\t\tel.attr(name, value);\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/*\r\n\t * Sets css or get, it's alias for self.element.css(name, [value]).\r\n\t */\r\n//\tPPC.css = SCP.css = function(name, value) {\r\n\tPPC.css = function(name, value) {\r\n\t\tvar el = this.element;\r\n\t\tif (value === undefined) {\r\n\t\t\treturn el.css(name);\r\n\t\t}\r\n\t\tel.css(name, value);\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/*\r\n\t * Returns a parent component instance if exists (otherwise: null).\r\n\t */\r\n//\tPPC.main = SCP.main = function() {\r\n\tPPC.main = function() {\r\n\t\tvar self = this;\r\n\t\tif (self.$main === undefined) {\r\n\t\t\tvar tmp = self.parent().closest('[data-jc]')[0];\r\n\t\t\tself.$main = tmp ? tmp.$com : null;\r\n\t\t}\r\n\t\treturn self.$main;\r\n\t};\r\n\r\n\tPPC.rcwatch = function(path, value) {\r\n\t\treturn value ? this.reconfigure(value) : this;\r\n\t};\r\n\r\n\tPPC.reconfigure = function(value, callback, init) {\r\n\t\tvar self = this;\r\n\t\tif (langx.isPlainObject(value)) {\r\n\t\t\tObject.keys(value).forEach(function(k) {\r\n\t\t\t\tvar prev = self.config[k];\r\n\t\t\t\tif (!init && self.config[k] !== value[k])\r\n\t\t\t\t\tself.config[k] = value[k];\r\n\t\t\t\tif (callback) {\r\n\t\t\t\t\tcallback(k, value[k], init, init ? undefined : prev);\r\n\t\t\t\t} else if (self.configure) {\r\n\t\t\t\t\tself.configure(k, value[k], init, init ? undefined : prev);\r\n\t\t\t\t}\r\n\t\t\t\tself.data('config.' + k, value[k]);\r\n\t\t\t});\r\n\t\t} else if (value.substring(0, 1) === '=') {\r\n\t\t\tvalue = value.substring(1);\r\n\t\t\tif (self.watch) {\r\n\t\t\t\tself.$rcwatch && self.unwatch(self.$rcwatch, self.rcwatch);\r\n\t\t\t\tself.watch(value, self.rcwatch);\r\n\t\t\t\tself.$rcwatch = value;\r\n\t\t\t}\r\n\t\t\tself.reconfigure(get(value), callback, init);\r\n\t\t} else {\r\n\t\t\tvalue.$config(function(k, v) {\r\n\t\t\t\tvar prev = self.config[k];\r\n\t\t\t\tif (!init && self.config[k] !== v)\r\n\t\t\t\t\tself.config[k] = v;\r\n\t\t\t\tself.data('config.' + k, v);\r\n\t\t\t\tif (callback)\r\n\t\t\t\t\tcallback(k, v, init, init ? undefined : prev);\r\n\t\t\t\telse if (self.configure)\r\n\t\t\t\t\tself.configure(k, v, init, init ? undefined : prev);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tvar cfg = self.config;\r\n\r\n\t\tself.data('config', cfg);\r\n\r\n\t\tif (cfg.$type) {\r\n\t\t\tself.type = cfg.$type;\r\n\t\t}\r\n\r\n\t\tif (cfg.$id) {\r\n\t\t\tself.id = cfg.$id;\r\n\t\t}\r\n\r\n\t\tif (cfg.$compile == false) {\r\n\t\t\tself.nocompile();\r\n\t\t}\r\n\r\n\t\tif (cfg.$init) {\r\n\t\t\tself.$init = cfg.$init;\r\n\t\t}\r\n\r\n\t\tcfg.$class && self.tclass(cfg.$class);\r\n\t\tcfg.$released && self.release(cfg.$released == true);\r\n\t\tcfg.$reconfigure && EXEC.call(cfg.$reconfigure, cfg);\r\n\t\treturn self;\r\n\t};\r\n\r\n//\tPPC.closest = SCP.closest = function(sel) {\r\n\tPPC.closest = function(sel) {\r\n\t\treturn this.element.closest(sel);\r\n\t};\r\n\r\n//\tPPC.parent = SCP.parent = function(sel) {\r\n\tPPC.parent = function(sel) {\r\n\t\treturn this.element.parent(sel);\r\n\t};\r\n\r\n\tvar TNB = { number: 1, boolean: 1 };\r\n\r\n\tPPC.html = function(value) {\r\n\t\tvar el = this.element;\r\n\t\tif (value === undefined)\r\n\t\t\treturn el.html();\r\n\t\tif (value instanceof Array)\r\n\t\t\tvalue = value.join('');\r\n\t\tvar type = typeof(value);\r\n\t\t//caches.current.element = el[0];\r\n\t\tvar v = (value || TNB[type]) ? el.empty().append(value) : el.empty();\r\n\t\t//caches.current.element = null;\r\n\t\treturn v;\r\n\t};\r\n\r\n\t/*\r\n\t * This method is alias for self.element.text(), it can set/get a content of the element.\r\n\t */\r\n\tPPC.text = function(value) {\r\n\t\tvar el = this.element;\r\n\t\tif (value === undefined) {\r\n\t\t\treturn el.text();\r\n\t\t}\r\n\t\tif (value instanceof Array) {\r\n\t\t\tvalue = value.join('');\r\n\t\t}\r\n\t\tvar type = typeof(value);\r\n\t\treturn (value || TNB[type]) ? el.empty().text(value) : el.empty();\r\n\t};\r\n\r\n\r\n\t/*\r\n\t * Removes the whole content of element and important removes all components which the parent component is this component.\r\n\t * It is alias for self.element.empty()\r\n\t */\r\n\tPPC.empty = function() {\r\n\r\n\t\tvar self = this;\r\n\r\n\t\tif (self.$children) {\r\n\t\t\tfor (var i = 0, length = all.length; i < length; i++) { // M.components.length\r\n\t\t\t\tvar m = all[i]; //M.components[i];\r\n\t\t\t\t!m.$removed && m.owner === self && m.remove();\r\n\t\t\t}\r\n\t\t\tself.$children = 0;\r\n\t\t}\r\n\r\n\t\tvar el = self.element;\r\n\t\tel.empty();\r\n\t\treturn el;\r\n\t};\r\n\r\n//\tPPC.append = SCP.append = function(value) {\r\n\tPPC.append = function(value) {\r\n\t\tvar el = this.element;\r\n\t\tif (value instanceof Array)\r\n\t\t\tvalue = value.join('');\r\n\t\t//caches.current.element = el[0];\r\n\t\tvar v = value ? el.append(value) : el;\r\n\t\t//caches.current.element = null;\r\n\t\treturn v;\r\n\t};\r\n\r\n\t/*\r\n\t * Registers a new event for the element. Is alias for self.element.on() method.\r\n\t */\r\n//\tPPC.event = SCP.event = function() {\r\n\tPPC.event = function() {\r\n\t\tvar self = this;\r\n\t\tif (self.element)\r\n\t\t\tself.element.on.apply(self.element, arguments);\r\n\t\telse {\r\n\t\t\tsetTimeout(function(arg) {\r\n\t\t\t\tself.event(self, arg);\r\n\t\t\t}, 500, arguments);\r\n\t\t}\r\n\t\treturn self;\r\n\t};\r\n\r\n\t/*\r\n\t * Finds elements according to the selector. Is alias for self.element.find() method.\r\n\t */\r\n//\tPPC.find = SCP.find = function(selector) {\r\n\tPPC.find =  function(selector) {\r\n\t\treturn this.element.find(selector);\r\n\t};\r\n\r\n\r\n\t/*\r\n\t * Checks a state whether the component is invalid or valid.\r\n\t */\r\n\tPPC.isInvalid = function() {\r\n\t\tvar self = this;\r\n\t\tvar is = !self.$valid;\r\n\t\tif (is && !self.$validate)\r\n\t\t\tis = !self.$dirty;\r\n\t\treturn is;\r\n\t};\r\n\r\n\t/*\r\n\t * Unregisters a monitoring of value according to the path argument.\r\n\t */\r\n\tPPC.unwatch = function(path, fn) {\r\n\t\tvar self = this;\r\n\t\tOFF('com' + self._id + '#watch', path, fn);\r\n\t\treturn self;\r\n\t};\r\n\r\n\t/*\r\n\t * Registers a monitoring of value according to the path argument.\r\n\t */\r\n\tPPC.watch = function(path, fn, init) {\r\n\r\n\t\tvar self = this;\r\n\r\n\t\tif (langx.isFunction(path)) {\r\n\t\t\tinit = fn;\r\n\t\t\tfn = path;\r\n\t\t\tpath = self.path;\r\n\t\t} else {\r\n\t\t\tpath = pathmaker(path);\r\n\t\t}\r\n\r\n\t\tself.on('watch', path, fn, init);\r\n\t\treturn self;\r\n\t};\r\n\r\n\t/*\r\n\t * Sets the state of this component to invalid and it contacts all components listen on the path.\r\n\t */\r\n\tPPC.invalid = function() {\r\n\t\treturn INVALID(this.path, this);\r\n\t};\r\n\r\n\tPPC.valid = function(value, noEmit) {\r\n\r\n\t\tvar self = this;\r\n\r\n\t\tif (value === undefined) {\r\n\t\t\treturn self.$valid;\r\n\t\t}\r\n\r\n\t\tif (self.$valid_disabled) {\r\n\t\t\treturn self;\r\n\t\t}\r\n\r\n\t\tself.$valid = value;\r\n\t\tself.$validate = false;\r\n\t\tself.$interaction(102);\r\n\t\tclear('valid');\r\n\t\t!noEmit && self.state && self.stateX(1, 1);\r\n\t\treturn self;\r\n\t};\r\n\r\n\tPPC.style = function(value) {\r\n\t\tSTYLE(value, this._id);\r\n\t\treturn this;\r\n\t};\r\n\r\n\r\n\t/*\r\n\t * Perform a change state. It changes dirty state and contacts all components which listen on path.\r\n\t */\r\n\tPPC.change = function(value) {\r\n\t\tvar self = this;\r\n\t\tself.$dirty_disabled = false;\r\n\t\tself.$dirty = true;\r\n\t\tCHANGE(self.path, value === undefined ? true : value, self);\r\n\t\treturn self;\r\n\t};\r\n\r\n\t/*\r\n\t * Sets the last used time, time will be stored in self.usage.custom.\r\n\t */\r\n\tPPC.used = function() {\r\n\t\treturn this.$interaction(100);\r\n\t};\r\n\r\n\t/*\r\n\t * Sets the last used time, time will be stored in self.usage.custom.\r\n\t */\r\n\tPPC.dirty = function(value, noEmit) {\r\n\r\n\t\tvar self = this;\r\n\r\n\t\tif (value === undefined) {\r\n\t\t\treturn self.$dirty;\r\n\t\t}\r\n\r\n\t\tif (self.$dirty_disabled) {\r\n\t\t\treturn self;\r\n\t\t}\r\n\r\n\t\tself.$dirty = value;\r\n\t\tself.$interaction(101);\r\n\t\tclear('dirty');\r\n\t\t!noEmit && self.state && self.stateX(2, 2);\r\n\t\treturn self;\r\n\t};\r\n\r\n\r\n\t/*\r\n\t * Resets dirty and valid state.\r\n\t */\r\n\tPPC.reset = function() {\r\n\t\tvar self = this;\r\n\t\tM.reset(self.path, 0, self);\r\n\t\treturn self;\r\n\t};\r\n\r\n\tPPC.setDefault = function(value) {\r\n\t\tthis.$default = function() {\r\n\t\t\treturn value;\r\n\t\t};\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/*\r\n\t * Set a default value for the current component path.\r\n\t */\r\n\tPPC.default = function(reset) {\r\n\t\tvar self = this;\r\n\t\tM.default(self.path, 0, self, reset);\r\n\t\treturn self;\r\n\t};\r\n\r\n\r\n\t/*\r\n\t * Removes this component from the DOM and executes destroy delegate.\r\n\t */\r\n\tPPC.remove = PPC.kill = function(noClear) {\r\n\t\tvar self = this;\r\n\t\tvar el = self.element;\r\n\t\tremovewaiter(self);\r\n\t\t\r\n\t\t//el.removeData(ATTRDATA);\r\n\t\t//el.attr(ATTRDEL, 'true').find(ATTRCOM).attr(ATTRDEL, 'true');\r\n\t\thelper.kill(el);\r\n\r\n\t\tself.$removed = 1;\r\n\t\tself.removed = true;\r\n\t\tOFF('com' + self._id + '#');\r\n\t\t\r\n\t\tif(!noClear) {\r\n\t\t\tsetTimeout2('$cleaner', cleaner2, 100);\r\n\t\t}\r\n\t\treturn true;\r\n\t};\r\n\r\n\tPPC.on = function(name, path, fn, init) {\r\n\t\tif (langx.isFunction(path)) {\r\n\t\t\tinit = fn;\r\n\t\t\tfn = path;\r\n\t\t\tpath = '';\r\n\t\t} else\r\n\t\t\tpath = path.replace('.*', '');\r\n\r\n\t\tvar self = this;\r\n\t\tvar push = '';\r\n\r\n\t\tif (name.substring(0, 1) === '^') {\r\n\t\t\tpush = '^';\r\n\t\t\tname = name.substring(1);\r\n\t\t}\r\n\r\n\t\ttopic.on(push + 'com' + self._id + '#' + name, path, fn, init, self); // ON\r\n\t\treturn self;\r\n\t};\r\n\r\n\t/*\r\n\t * Register a new formatter for this component or can format a value.\r\n\t */\r\n\tPPC.formatter = function(value, prepend) {\r\n\t\tvar self = this;\r\n\r\n\t\tif (langx.isFunction(value)) {\r\n\t\t\t!self.$formatter && (self.$formatter = []);\r\n\t\t\tif (prepend === true) {\r\n\t\t\t\tself.$formatter.unshift(value);\r\n\t\t\t} else {\r\n\t\t\t\tself.$formatter.push(value);\r\n\t\t\t}\r\n\t\t\treturn self;\r\n\t\t}\r\n\r\n\t\tvar a = self.$formatter;\r\n\t\tif (a && a.length) {\r\n\t\t\tfor (var i = 0, length = a.length; i < length; i++) {\r\n\t\t\t\tvalue = a[i].call(self, self.path, value, self.type);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\ta = M.$formatter;\r\n\t\tif (a && a.length) {\r\n\t\t\tfor (var i = 0, length = a.length; i < length; i++) {\r\n\t\t\t\tvalue = a[i].call(self, self.path, value, self.type);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn value;\r\n\t};\r\n\r\n\tPPC.parser = function(value, prepend) {\r\n\r\n\t\tvar self = this;\r\n\t\tvar type = typeof(value);\r\n\r\n\t\tif (type === 'function') {\r\n\t\t\t!self.$parser && (self.$parser = []);\r\n\r\n\t\t\tif (prepend === true) {\r\n\t\t\t\tself.$parser.unshift(value);\r\n\t\t\t} else {\r\n\t\t\t\tself.$parser.push(value);\r\n\t\t\t}\r\n\r\n\t\t\treturn self;\r\n\t\t}\r\n\r\n\t\tif (self.trim && type === 'string') {\r\n\t\t\tvalue = value.trim();\r\n\t\t}\r\n\r\n\t\tvar a = self.$parser;\r\n\t\tif (a && a.length) {\r\n\t\t\tfor (var i = 0, length = a.length; i < length; i++) {\r\n\t\t\t\tvalue = a[i].call(self, self.path, value, self.type);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\t//a = jc.$parser;\r\n\t\t//if (a && a.length) {\r\n\t\t//\tfor (var i = 0, length = a.length; i < length; i++) {\r\n\t\t//\t\tvalue = a[i].call(self, self.path, value, self.type);\r\n\t\t//\t}\r\n\t\t//}\r\n\t\tvalue = paths.parser(self.path,value,self.type);\r\n\r\n\t\treturn value;\r\n\t};\r\n\r\n\t/*\r\n\t * Emits an event within jComponent. Is alias for EMIT() method.\r\n\t */\r\n\tPPC.emit = function() {\r\n\t\ttopic.emit.apply(M, arguments); // W>EMIT\r\n\t\treturn this;\r\n\t};\r\n\r\n\tPPC.evaluate = function(path, expression, nopath) {\r\n\t\tif (!expression) {\r\n\t\t\texpression = path;\r\n\t\t\tpath = this.path;\r\n\t\t}\r\n\t\treturn EVALUATE(path, expression, nopath);\r\n\t};\r\n\r\n\t/*\r\n\t * Get a value according to the data-jc-path or path.\r\n\t */\r\n\tPPC.get = function(path) {\r\n\t\tvar self = this;\r\n\t\tif (!path) {\r\n\t\t\tpath = self.path;\r\n\t\t}\r\n\r\n\t\tif (self.$pp) {\r\n\t\t\treturn self.owner.data(self.path);\r\n\t\t}\r\n\r\n\t\tif (path) {\r\n\t\t\treturn paths.get(path);\r\n\t\t}\r\n\t};\r\n\r\n\tPPC.skip = function(path) {\r\n\t\tvar self = this;\r\n\t\tskip(path || self.path); // SKIP\r\n\t\treturn self;\r\n\t};\r\n\r\n\t/*\r\n\t * Sets a value according to the component.path.\r\n\t */\r\n\tPPC.set = function(value, type) {\r\n\r\n\t\tvar self = this;\r\n\t\tvar arg = arguments;\r\n\r\n\t\tif (self.$pp) {\r\n\t\t\tself.owner.set(self.path, value);\r\n\t\t\treturn self;\r\n\t\t}\r\n\r\n\t\t// Backwards compatibility\r\n\t\tif (arg.length === 3) {\r\n\t\t\tpaths.immSetx(arg[0], arg[1], arg[2]);\r\n\t\t} else {\r\n\t\t\tpaths.immSetx(self.path, value, type);\r\n\t\t}\r\n\r\n\t\treturn self;\r\n\t};\r\n\r\n\t/*\r\n\t * Increments a Number according to the component.path.\r\n\t */\r\n\tPPC.inc = function(value, type) {\r\n\t\tvar self = this;\r\n\t\tpaths.immInc(self.path, value, type);\r\n\t\treturn self;\r\n\t};\r\n\r\n\t/* \r\n\t * Extends a current value by adding/rewrite new fields with new values.\r\n\t */\r\n\tPPC.extend = function(value, type) {\r\n\t\tvar self = this;\r\n\t\tpaths.immExtend(self.path, value, type); // M.extend\r\n\t\treturn self;\r\n\t};\r\n\r\n\t/*\r\n\t * Rewrites a value according to the component.path and it won't notify all listeners.\r\n\t */\r\n\tPPC.rewrite = function(value) {\r\n\t\tvar self = this;\r\n\t\tREWRITE(self.path, value);\r\n\t\treturn self;\r\n\t};\r\n\r\n\t/*\r\n\t * Pushs a new item into the Array according to the component.path.\r\n\t */\r\n\tPPC.push = function(value, type) {\r\n\t\tvar self = this;\r\n\t\tpaths.immPush(self.path, value, type);\r\n\t\treturn self;\r\n\t};\r\n\r\n\r\n\tvar $components = registry = {}; //\tM.$components = {};\r\n\r\n\tfunction register(name, config, declaration, dependencies) { // W.COMPONENT =\r\n\r\n\t\tif (langx.isFunction(config)) {\r\n\t\t\tdependencies = declaration;\r\n\t\t\tdeclaration = config;\r\n\t\t\tconfig = null;\r\n\t\t}\r\n\r\n\t\t// Multiple versions\r\n\t\tif (name.indexOf(',') !== -1) {\r\n\t\t\tname.split(',').forEach(function(item, index) {\r\n\t\t\t\titem = item.trim();\r\n\t\t\t\tif (item) {\r\n\t\t\t\t\tregister(item, config, declaration, index ? null : dependencies);\t\r\n\t\t\t\t} \r\n\t\t\t});\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif ($components[name]){ // M.$components\r\n\t\t\twarn('Components: Overwriting component:', name);\t\r\n\t\t} \r\n\t\tvar a = $components[name] = { //M.$components\r\n\t\t\tname: name, \r\n\t\t\tconfig: config, \r\n\t\t\tdeclaration: declaration, \r\n\t\t\tshared: {}, \r\n\t\t\tdependencies: dependencies instanceof Array ? dependencies : null \r\n\t\t};\r\n\t\ttopic.emit('component.compile', name, a);\r\n\t};\r\n\r\n   /**\r\n   * Extend a component by adding new features.\r\n   * @param  {String} name \r\n   * @param  {String/Object} config A default configuration\r\n   * @param  {Function} declaration \r\n   */\r\n\tfunction extend(name, config, declaration) { //W.COMPONENT_EXTEND = \r\n\r\n\t\tif (typeof(config) === TYPE_FN) {\r\n\t\t\tvar tmp = declaration;\r\n\t\t\tdeclaration = config;\r\n\t\t\tconfig = tmp;\r\n\t\t}\r\n\r\n\t\tif (extensions[name]) {\r\n\t\t\textensions[name].push({ config: config, fn: declaration });\r\n\t\t} else {\r\n\t\t\textensions[name] = [{ config: config, fn: declaration }];\r\n\t\t}\r\n\r\n\t\tfor (var i = 0, length = all.length; i < length; i++) { // M.components.length\r\n\t\t\tvar m = all[i]; // M.components[i];\r\n\t\t\tif (!m.$removed || name === m.name){\r\n\t\t\t\tconfig && m.reconfigure(config, undefined, true);\r\n\t\t\t\tdeclaration.call(m, m, m.config);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tRECOMPILE();\r\n\t};\r\n\r\n   /**\r\n   * Sets a default configuration for all components according to the selector\r\n   * @param  {String} selector \r\n   * @param  {String/Object} config A default configuration\r\n   */\r\n\tfunction configure(selector, config) { //W.COMPONENT_CONFIG = \r\n\r\n\t\tif (langx.isString(selector)) {\r\n\t\t\tvar fn = [];\r\n\t\t\tselector.split(' ').forEach(function(sel) {\r\n\t\t\t\tvar prop = '';\r\n\t\t\t\tswitch (sel.trim().substring(0, 1)) {\r\n\t\t\t\t\tcase '*':\r\n\t\t\t\t\t\tfn.push('com.path.indexOf(\\'{0}\\')!==-1'.format(sel.substring(1)));\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\tcase '.':\r\n\t\t\t\t\t\t// path\r\n\t\t\t\t\t\tprop = 'path';\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase '#':\r\n\t\t\t\t\t\t// id\r\n\t\t\t\t\t\tprop = 'id';\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t// name\r\n\t\t\t\t\t\tprop = '$name';\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tfn.push('com.{0}==\\'{1}\\''.format(prop, prop === '$name' ? sel : sel.substring(1)));\r\n\t\t\t});\r\n\t\t\tselector = FN('com=>' + fn.join('&&'));\r\n\t\t}\r\n\r\n\t\tconfigs.push({ fn: selector, config: config });\r\n\t};\r\n\r\n\tvar skips = {};\r\n\r\n   /**\r\n   * skips component.setter for future update. It's incremental.\r\n   * @param  {String} pathA Absolute path according to the component \"data-jc-path\"  \r\n   * @param  {String} pathB Absolute path according to the component \"data-jc-path\"  \r\n   * @param  {String} pathN Absolute path according to the component \"data-jc-path\"  \r\n   */\r\n\tfunction skip() { // W.SKIP = \r\n\t\tfor (var j = 0; j < arguments.length; j++) {\r\n\t\t\tvar arr = arguments[j].split(',');\r\n\t\t\tfor (var i = 0, length = arr.length; i < length; i++) {\r\n\t\t\t\tvar p = arr[i].trim();\r\n\t\t\t\tif (skips[p]) {\r\n\t\t\t\t\tskips[p]++;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tskips[p] = 1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tlangx.mixin(Component,{\r\n\t\textend : extend,\r\n\t\tconfigure : configure,\r\n\t\tregistry : registry,\r\n\t\tregister : register,\r\n\t\textensions : extensions,\r\n\t\tskip : skip\r\n\t});\r\n\r\n\treturn jc.Component = Component;\r\n});"]}