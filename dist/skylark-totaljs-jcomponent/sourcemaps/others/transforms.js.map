{"version":3,"sources":["others/transforms.js"],"names":["define","registry","register","name","callback","this","transform","value","m","arguments","length","val","cb","SET","keys","split","async","context","i","key","trim","push","call","undefined","wait","fn","next"],"mappings":";;;;;;;AAAAA,UACE,WACD,IAAIC,KA4DJ,OACCC,SAzDD,SAAkBC,EAAMC,GAEvB,OADAH,EAASE,GAAQC,EACVC,MAwDPC,UArDD,SAASA,EAAUH,EAAMI,EAAOH,GAE/B,IAAII,EAAIP,EAER,GAAyB,IAArBQ,UAAUC,OAEb,OAAO,SAASC,GACfL,EAAUH,EAAMQ,EAAKJ,IAIvB,IAAIK,EAAK,WACiB,iBAAf,EACTC,IAAIT,EAAUG,GAEdH,EAASG,IAIPO,EAAOX,EAAKY,MAAM,KAClBC,KACAC,KAEJA,EAAQV,MAAQA,EAEhB,IAAK,IAAIW,EAAI,EAAGR,EAASI,EAAKJ,OAAQQ,EAAIR,EAAQQ,IAAK,CACtD,IAAIC,EAAML,EAAKI,GAAGE,OAClBD,GAAOX,EAAEW,IAAQH,EAAMK,KAAKb,EAAEW,IAqB/B,OAlBqB,IAAjBH,EAAMN,QACH,GAAGY,KAAKL,EAASV,EAAO,SAASI,QAC1BY,IAARZ,IACHJ,EAAQI,GACTC,MAEOI,EAAMN,OACdM,EAAMQ,KAAK,SAASC,EAAIC,GACvBD,EAAGH,KAAKL,EAASV,EAAO,SAASI,QACpBY,IAARZ,IACHJ,EAAQI,GACTe,OAECd,GAEHA,IAGMP","file":"../../others/transforms.js","sourcesContent":["define([\r\n],function(){\r\n\tvar registry = { //M.transforms\r\n\r\n\t};\r\n\r\n\tfunction register(name, callback) { // W.NEWTRANSFORM\r\n\t\tregistry[name] = callback;  \r\n\t\treturn this;\r\n\t};\r\n\r\n\tfunction transform(name, value, callback) { //W.TRANSFORM\r\n\r\n\t\tvar m = registry;\r\n\r\n\t\tif (arguments.length === 2) {\r\n\t\t\t// name + value (is callback)\r\n\t\t\treturn function(val) {\r\n\t\t\t\ttransform(name, val, value);\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tvar cb = function() {\r\n\t\t\tif (typeof(callback) === 'string') {\r\n\t\t\t\tSET(callback, value);\r\n\t\t\t} else {\r\n\t\t\t\tcallback(value);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tvar keys = name.split(',');\r\n\t\tvar async = [];\r\n\t\tvar context = {};\r\n\r\n\t\tcontext.value = value;\r\n\r\n\t\tfor (var i = 0, length = keys.length; i < length; i++) {\r\n\t\t\tvar key = keys[i].trim();\r\n\t\t\tkey && m[key] && async.push(m[key]);\r\n\t\t}\r\n\r\n\t\tif (async.length === 1)\r\n\t\t\tasync[0].call(context, value, function(val) {\r\n\t\t\t\tif (val !== undefined)\r\n\t\t\t\t\tvalue = val;\r\n\t\t\t\tcb();\r\n\t\t\t});\r\n\t\telse if (async.length) {\r\n\t\t\tasync.wait(function(fn, next) {\r\n\t\t\t\tfn.call(context, value, function(val) {\r\n\t\t\t\t\tif (val !== undefined)\r\n\t\t\t\t\t\tvalue = val;\r\n\t\t\t\t\tnext();\r\n\t\t\t\t});\r\n\t\t\t}, cb);\r\n\t\t} else {\r\n\t\t\tcb();\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t};\r\n\r\n\treturn  {\r\n\t\tregister,\r\n\t\ttransform\r\n\t}\r\n});"]}