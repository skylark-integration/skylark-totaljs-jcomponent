{"version":3,"sources":["paths.js"],"names":["define","langx","jc","caches","Component","get","path","scope","charCodeAt","substring","key","paths","MD","indexOf","arr","parsepath","builder","i","length","item","push","v","fn","Function","join","REGWILDCARD","pathmaker","clean","index","tmp","p","plugins","find","REGPARAMS","proxy","MULTIPLE","REGISARR","binders","binderbind","absolutePath","ticks","exec","getx","watches","emitwatch","value","type","self","call","context","format","lastIndexOf","val","j","jl","$path","get2","reset","set","is","binder","test","C","immSetx","Array","M","isUpdate","skipproxy","immUpdate","result","state","undefined","all","components","com","disabled","$removed","$loaded","$compare","setter","setterX","$interaction","$ready","$dirty_disabled","$dirty","$valid_disabled","$valid","$validate","validate","findcontrol2","valid","clear","stateX","setx","timeout","t","setTimeout","this","split","a","splice","make","obj","update","ready","$set","prototype","findValue","cb","def","cache","isFunction","temp","findIndex","String","params","arg","replace","text","l","trim","immInc","current","TYPE_N","parseFloat","isNaN","inc","W","immExtend","$","extend","wasset","$get","$skip","$parser","isString","REGEMPTY","REGCOMMA","Date","parseDate","getTime","setInterval","Scope","unwatch","topic","off","watch","init","on","getr","set2","setx2","change","setr","toggle","toogle2","toogle","expire","rebind","WATCH","storages","put","inc2","extend2","immPush","n","apply","push2","update2","CHANGE","bind","create","callback","TYPE_S","arguments","$ticks","Math","random","toString","notify","delaybinder","blocked","handler","target","property","receiver","Proxy","err","Reflect","defineProperty","descriptor","deleteProperty","thisArg","argumentsList","BLACKLIST","name","o","defaultValue","REGMETA","SET","default","errors","evaluate","expression","nopath","exp","modified","rewrite","except","pathmakerw","flags","remove","visible","hidden","enabled","SELINPUT"],"mappings":"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","file":"../paths.js","sourcesContent":["define([\r\n\t\"skylark-langx/langx\",\r\n\t\"./jc\",\r\n\t\"./caches\",\r\n\t\"./Component\"\r\n],function(langx, jc, caches, Component){\r\n\r\n\t//get... \r\n\r\n\tfunction get(path, scope) {\r\n\r\n\t\tif (path == null) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar code = path.charCodeAt(0);\r\n\t\tif (code === 37)　// % \r\n\t\t\tpath = 'jctmp.' + path.substring(1);\r\n\r\n\t\tvar key = '=' + path;\r\n\t\tif (paths[key]) {\r\n\t\t\treturn paths[key](scope || MD.scope);\r\n\t\t}\r\n\r\n\t\tif (path.indexOf('?') !== -1) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar arr = parsepath(path);\r\n\t\tvar builder = [];\r\n\r\n\t\tfor (var i = 0, length = arr.length - 1; i < length; i++) {\r\n\t\t\tvar item = arr[i];\r\n\t\t\tif (item.substring(0, 1) !== '[')\r\n\t\t\t\titem = '.' + item;\r\n\t\t\tbuilder.push('if(!w' + item + ')return');\r\n\t\t}\r\n\r\n\t\tvar v = arr[arr.length - 1];\r\n\t\tif (v.substring(0, 1) !== '['){\r\n\t\t\tv = '.' + v;\r\n\t\t}\r\n\r\n\t\tvar fn = (new Function('w', builder.join(';') + ';return w' + v));\r\n\t\tpaths[key] = fn;\r\n\t\treturn fn(scope || MD.scope);\r\n\t}\r\n\r\n   /**\r\n   * Evaluate String expression as JavaScript code.\r\n   * @param  {String/Object} path Can be object if \"path_is_real_value\" is \"true\"\r\n   * @param  {String} expression A condition.\r\n   * @param  {Boolean} path_is_real_value Optional, default: false\r\n   * @returns {Boolean}   \r\n   */\r\n\tfunction evaluate(path, expression, nopath) { //W.EVALUATE = \r\n\r\n\t\tvar key = 'eval' + expression;\r\n\t\tvar exp = caches.temp[key];\r\n\t\tvar val = null;\r\n\r\n\t\tif (nopath) {\r\n\t\t\tval = path;\r\n\t\t} else {\r\n\t\t\tval = get(path);\r\n\t\t}\r\n\r\n\t\tif (exp) {\r\n\t\t\treturn exp.call(val, val, path);\r\n\t\t}\r\n\r\n\t\tif (expression.indexOf('return') === -1) {\r\n\t\t\texpression = 'return ' + expression;\r\n\t\t}\r\n\r\n\t\texp = new Function('value', 'path', expression);\r\n\t\tcaches.temp[key] = exp;\r\n\t\treturn exp.call(val, val, path);\r\n\t}\r\n\r\n\r\n\tvar REGWILDCARD = /\\.\\*/;\r\n\r\n\tfunction pathmaker(path, clean) {\r\n\r\n\t\tif (!path) {\r\n\t\t\treturn path;\r\n\t\t}\r\n\r\n\t\tvar tmp = '';\r\n\r\n\t\tif (clean) {\r\n\t\t\tvar index = path.indexOf(' ');\r\n\t\t\tif (index !== -1) {\r\n\t\t\t\ttmp = path.substring(index);\r\n\t\t\t\tpath = path.substring(0, index);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// temporary\r\n\t\tif (path.charCodeAt(0) === 37)  { // % \r\n\t\t\treturn 'jctmp.' + path.substring(1) + tmp;\r\n\t\t}\r\n\t\t\r\n\t\tif (path.charCodeAt(0) === 64) { // @\r\n\t\t\t// parent component.data()\r\n\t\t\treturn path;\r\n\t\t}\r\n\r\n\t\tvar index = path.indexOf('/');\r\n\r\n\t\tif (index === -1) {\r\n\t\t\treturn path + tmp;\r\n\t\t}\r\n\r\n\t\tvar p = path.substring(0, index);\r\n\t\tvar rem = plugins.find(p); //W.PLUGINS[p];\r\n\t\treturn ((rem ? ('PLUGINS.' + p) : (p + '_plugin_not_found')) + '.' + path.substring(index + 1)) + tmp;\r\n\t}\r\n\r\n\tfunction pathmakerw(path) {\r\n\t\treturn pathmaker(path.replace(REGWILDCARD, ''));\r\n\t}\r\n \r\n\tfunction bind(path) { // W.BIND = \r\n\t\tif (path instanceof Array) {\r\n\t\t\tfor (var i = 0; i < path.length; i++) {\r\n\t\t\t\tbind(path[i]);\r\n\t\t\t}\r\n\t\t\treturn this; // \r\n\t\t}\r\n\t\tpath = pathmaker(path);\r\n\t\tif (!path) {\r\n\t\t\treturn this;\r\n\t\t}\r\n\t\tvar is = path.charCodeAt(0) === 33; // !\r\n\t\tif (is) {\r\n\t\t\tpath = path.substring(1);\r\n\t\t}\r\n\t\tpath = path.replace(REGWILDCARD, '');\r\n\t\tpath && set(path, get(path), true);\r\n\t}\r\n\r\n\t\r\n\t// paths -> view model\r\n\r\n\tvar REGPARAMS = /\\{{1,2}[a-z0-9_.-\\s]+\\}{1,2}/gi;\r\n\r\n\tvar skipproxy = ''\r\n\tvar proxy = {};\r\n\r\n\t// ===============================================================\r\n\t// PRIVATE FUNCTIONS\r\n\t// ===============================================================\r\n\r\n\tvar MULTIPLE = ' + ';\r\n\tvar REGISARR = /\\[\\d+\\]$/;\r\n\r\n\tvar paths = {}; // saved paths from get() and set()\r\n\r\n\tvar binders = {};\r\n\tvar bindersnew = [];\r\n\r\n\tfunction binderbind(path, absolutePath, ticks) {\r\n\t\tvar arr = binders[path];\r\n\t\tfor (var i = 0; i < arr.length; i++) {\r\n\t\t\tvar item = arr[i];\r\n\t\t\tif (item.ticks !== ticks) {\r\n\t\t\t\titem.ticks = ticks;\r\n\t\t\t\titem.exec(getx(item.path), absolutePath);  //GET\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tvar $rebinder;\r\n\r\n\tfunction rebindbinder() {\r\n\t\t$rebinder && clearTimeout($rebinder);\r\n\t\t$rebinder = setTimeout(function() {\r\n\t\t\tvar arr = bindersnew.splice(0);\r\n\t\t\tfor (var i = 0; i < arr.length; i++) {\r\n\t\t\t\tvar item = arr[i];\r\n\t\t\t\tif (!item.init) {\r\n\t\t\t\t\tif (item.com) {\r\n\t\t\t\t\t\titem.exec(item.com.data(item.path), item.path);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\titem.exec(getx(item.path), item.path);  // GET\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}, 50);\r\n\t}\r\n\r\n\tvar watches = [];\r\n\r\n\tfunction unwatch(path, fn) { //W.UNWATCH \r\n\r\n\t\tif (path.indexOf(MULTIPLE) !== -1) {\r\n\t\t\tvar arr = path.split(MULTIPLE).trim();\r\n\t\t\tfor (var i = 0; i < arr.length; i++)\r\n\t\t\t\tunwatch(arr[i], fn);\r\n\t\t\treturn this; //W;\r\n\t\t}\r\n\r\n\t\treturn topic.off('watch', path, fn); //OFF\r\n\t};\r\n\r\n\tfunction watch(path, fn, init) { // W.WATCH\r\n\r\n\t\tif (path.indexOf(MULTIPLE) !== -1) {\r\n\t\t\tvar arr = path.split(MULTIPLE).trim();\r\n\t\t\tfor (var i = 0; i < arr.length; i++)\r\n\t\t\t\twatch(arr[i], fn, init);\r\n\t\t\treturn this; //W;\r\n\t\t}\r\n\r\n\t\tif (langx.isFunction(path)) { //if (typeof(path) === TYPE_FN) {\r\n\t\t\tinit = fn;\r\n\t\t\tfn = path;\r\n\t\t\tpath = '*';\r\n\t\t}\r\n\r\n\t\tvar push = '';\r\n\r\n\t\tif (path.substring(0, 1) === '^') {\r\n\t\t\tpath = path.substring(1);\r\n\t\t\tpush = '^';\r\n\t\t}\r\n\r\n\t\tpath = pathmaker(path, true);\r\n\t\ttopic.on(push + 'watch', path, fn, init);  // ON\r\n\t\treturn this; //W;\r\n\t}\r\n\r\n\tfunction remap(path, value) {\r\n\r\n\t\tvar index = path.replace('-->', '->').indexOf('->');\r\n\r\n\t\tif (index !== -1) {\r\n\t\t\tvalue = value[path.substring(0, index).trim()];\r\n\t\t\tpath = path.substring(index + 3).trim();\r\n\t\t}\r\n\r\n\t\timmSetx(path, value);\r\n\t}\r\n\r\n\tfunction emitwatch(path, value, type) {\r\n\t\tfor (var i = 0, length = watches.length; i < length; i++) {\r\n\t\t\tvar self = watches[i];\r\n\t\t\tif (self.path === '*') {\r\n\t\t\t\tself.fn.call(self.context, path, self.format ? self.format(value, path, type) : value, type);\r\n\t\t\t} else if (path.length > self.path.length) {\r\n\t\t\t\tvar index = path.lastIndexOf('.', self.path.length);\r\n\t\t\t\tif (index === -1 ? false : self.path === path.substring(0, index)) {\r\n\t\t\t\t\tvar val = getx(self.path); // GET\r\n\t\t\t\t\tself.fn.call(self.context, path, self.format ? self.format(val, path, type) : val, type);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tfor (var j = 0, jl = self.$path.length; j < jl; j++) {\r\n\t\t\t\t\tif (self.$path[j] === path) {\r\n\t\t\t\t\t\tvar val = get2(self.path);\r\n\t\t\t\t\t\tself.fn.call(self.context, path, self.format ? self.format(val, path, type) : val, type);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\r\n\r\n\tArray.prototype.findValue = function(cb, value, path, def, cache) {\r\n\r\n\t\tif (langx.isFunction(cb)) {\r\n\t\t\tdef = path;\r\n\t\t\tpath = value;\r\n\t\t\tvalue = undefined;\r\n\t\t\tcache = false;\r\n\t\t}\r\n\r\n\t\tvar key, val = def;\r\n\r\n\t\tif (cache) {\r\n\t\t\tkey = 'fv_' + cb + '=' + value;\r\n\t\t\tif (caches.temp[key]) {\r\n\t\t\t\treturn caches.temp[key];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar index = this.findIndex(cb, value);\r\n\t\tif (index !== -1) {\r\n\t\t\tvar item = this[index];\r\n\t\t\tif (path.indexOf('.') === -1) {\r\n\t\t\t\titem = item[path];\r\n\t\t\t} else {\r\n\t\t\t\titem = get(path, item);\r\n\t\t\t}\r\n\t\t\tcache && (caches.temp[key] = val);\r\n\t\t\tval = item == null ? def : item;\r\n\t\t}\r\n\r\n\t\treturn val;\r\n\t};\r\n\r\n\tString.prototype.params = String.prototype.arg = function(obj) {\r\n\t\treturn this.replace(REGPARAMS, function(text) {\r\n\t\t\t// Is double?\r\n\t\t\tvar l = text.charCodeAt(1) === 123 ? 2 : 1;\r\n\t\t\tvar val = get(text.substring(l, text.length - l).trim(), obj);\r\n\t\t\treturn val == null ? text : val;\r\n\t\t});\r\n\t};\r\n\r\n  /**\r\n   * Reads a value according to the path.\r\n   * @param  {String} path \r\n   */\r\n\tfunction getx(path, scope) { // W.GET = M.get\r\n\t\tpath = pathmaker(path);\r\n\t\tif (scope === true) {\r\n\t\t\tscope = null;\r\n\t\t\treset(path, true); // RESET\r\n\t\t}\r\n\t\treturn get(path, scope); \r\n\t}\r\n\r\n  /**\r\n   * Reads value and resets all components according to the path.\r\n   * @param  {String} path \r\n   */\r\n\tfunction getr(path) {  //W.GETR =\r\n\t\treturn getx(path, true); //GET\r\n\t}\r\n\r\n\r\n\t// set...\r\n\tfunction set(path, value, is) {\r\n\r\n\t\tif (path == null) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar key = '+' + path;\r\n\r\n\t\tif (paths[key]) {\r\n\t\t\treturn paths[key](MD.scope, value, path, binders, binderbind, is);\r\n\t\t}\r\n\r\n\t\tif (path.indexOf('?') !== -1) {\r\n\t\t\tpath = '';\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar arr = parsepath(path);\r\n\t\tvar builder = [];\r\n\t\tvar binder = [];\r\n\r\n\t\tfor (var i = 0; i < arr.length - 1; i++) {\r\n\t\t\tvar item = arr[i];\r\n\t\t\tvar type = arr[i + 1] ? (REGISARR.test(arr[i + 1]) ? '[]' : '{}') : '{}';\r\n\t\t\tvar p = 'w' + (item.substring(0, 1) === '[' ? '' : '.') + item;\r\n\t\t\tbuilder.push('if(typeof(' + p + ')!==\\'object\\'||' + p + '==null)' + p + '=' + type);\r\n\t\t}\r\n\r\n\t\tfor (var i = 0; i < arr.length - 1; i++) {\r\n\t\t\tvar item = arr[i];\r\n\t\t\tbinder.push('binders[\\'' + item + '\\']&&binderbind(\\'' + item + '\\',\\'' + path + '\\',$ticks)');\r\n\t\t}\r\n\r\n\t\tvar v = arr[arr.length - 1];\r\n\t\tbinder.push('binders[\\'' + v + '\\']&&binderbind(\\'' + v + '\\',\\'' + path + '\\',$ticks)');\r\n\t\tbinder.push('binders[\\'!' + v + '\\']&&binderbind(\\'!' + v + '\\',\\'' + path + '\\',$ticks)');\r\n\r\n\t\tif (v.substring(0, 1) !== '['){\r\n\t\t\tv = '.' + v;\r\n\t\t}\r\n\r\n\t\tvar fn = (new Function('w', 'a', 'b', 'binders', 'binderbind', 'nobind', 'var $ticks=Math.random().toString().substring(2,8);if(!nobind){' + builder.join(';') + ';var v=typeof(a)==\\'function\\'?a(MAIN.compiler.get(b)):a;w' + v + '=v}' + binder.join(';') + ';return a'));\r\n\t\tpaths[key] = fn;\r\n\t\tfn(MD.scope, value, path, binders, binderbind, is);\r\n\t\treturn C;\r\n\t}\r\n\r\n\tfunction set2(scope, path, value) {\r\n\r\n\t\tif (path == null) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar key = '++' + path;\r\n\r\n\t\tif (paths[key]) {\r\n\t\t\treturn paths[key](scope, value, path);\r\n\t\t}\r\n\r\n\t\tvar arr = parsepath(path);\r\n\t\tvar builder = [];\r\n\r\n\t\tfor (var i = 0; i < arr.length - 1; i++) {\r\n\t\t\tvar item = arr[i];\r\n\t\t\tvar type = arr[i + 1] ? (REGISARR.test(arr[i + 1]) ? '[]' : '{}') : '{}';\r\n\t\t\tvar p = 'w' + (item.substring(0, 1) === '[' ? '' : '.') + item;\r\n\t\t\tbuilder.push('if(typeof(' + p + ')!==\\'object\\'||' + p + '==null)' + p + '=' + type);\r\n\t\t}\r\n\r\n\t\tvar v = arr[arr.length - 1];\r\n\r\n\t\tif (v.substring(0, 1) !== '[')\r\n\t\t\tv = '.' + v;\r\n\r\n\t\tvar fn = (new Function('w', 'a', 'b', builder.join(';') + ';w' + v + '=a;return a'));\r\n\t\tpaths[key] = fn;\r\n\t\tfn(scope, value, path);\r\n\t\treturn scope;\r\n\t}\r\n\r\n\t// 1 === manually\r\n\t// 2 === by input\r\n\t// 3 === default\r\n\tfunction immSetx(path, value, type) {  // M.set\r\n\r\n\t\tif (path instanceof Array) {\r\n\t\t\tfor (var i = 0; i < path.length; i++) \r\n\t\t\t\timmSetx(path[i], value, type);\r\n\t\t\treturn M;\r\n\t\t}\r\n\r\n\t\tpath = pathmaker(path);\r\n\r\n\t\tif (!path) {\r\n\t\t\treturn M;\r\n\t\t}\r\n\r\n\t\tvar is = path.charCodeAt(0) === 33; // !\r\n\t\tif (is) {\r\n\t\t\tpath = path.substring(1);\r\n\t\t}\r\n\r\n\t\tif (path.charCodeAt(0) === 43) { // +\r\n\t\t\tpath = path.substring(1);\r\n\t\t\treturn M.push(path, value, type);\r\n\t\t}\r\n\r\n\t\tif (!path) {\r\n\t\t\treturn M;\r\n\t\t}\r\n\r\n\t\tvar isUpdate = (typeof(value) === 'object' && !(value instanceof Array) && value != null);\r\n\t\tvar reset = type === true;\r\n\t\tif (reset) {\r\n\t\t\ttype = 1;\r\n\t\t}\r\n\r\n\t\tM.skipproxy = path;\r\n\t\tset(path, value);\r\n\r\n\t\tif (isUpdate) {\r\n\t\t\treturn immUpdate(path, reset, type, true);\r\n\t\t}\r\n\r\n\t\tvar result = get(path);\r\n\t\tvar state = [];\r\n\r\n\t\tif (type === undefined) {\r\n\t\t\ttype = 1;\r\n\t\t}\r\n\r\n\t\tvar all = M.components.all;//M.components;\r\n\r\n\t\tfor (var i = 0, length = all.length; i < length; i++) {\r\n\t\t\tvar com = all[i];\r\n\r\n\t\t\tif (!com || com.disabled || com.$removed || !com.$loaded || !com.path || !com.$compare(path))\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tif (com.setter) {\r\n\t\t\t\tif (com.path === path) {\r\n\t\t\t\t\tif (com.setter) {\r\n\t\t\t\t\t\tcom.setterX(result, path, type);\r\n\t\t\t\t\t\tcom.$interaction(type);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (com.setter) {\r\n\t\t\t\t\t\tcom.setterX(get(com.path), path, type);\r\n\t\t\t\t\t\tcom.$interaction(type);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (!com.$ready) {\r\n\t\t\t\tcom.$ready = true;\r\n\t\t\t}\r\n\r\n\t\t\ttype !== 3 && com.state && state.push(com);\r\n\r\n\t\t\tif (reset) {\r\n\t\t\t\tif (!com.$dirty_disabled)\r\n\t\t\t\t\tcom.$dirty = true;\r\n\t\t\t\tif (!com.$valid_disabled) {\r\n\t\t\t\t\tcom.$valid = true;\r\n\t\t\t\t\tcom.$validate = false;\r\n\t\t\t\t\tif (com.validate) {\r\n\t\t\t\t\t\tcom.$valid = com.validate(result);\r\n\t\t\t\t\t\tcom.$interaction(102);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfindcontrol2(com);\r\n\r\n\t\t\t} else if (com.validate && !com.$valid_disabled) {\r\n\t\t\t\tcom.valid(com.validate(result), true);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (reset) {\r\n\t\t\tcaches.clear('dirty', 'valid');\r\n\t\t}\r\n\r\n\t\tfor (var i = 0, length = state.length; i < length; i++) {\r\n\t\t\tstate[i].stateX(type, 5);\r\n\t\t}\r\n\r\n\t\temitwatch(path, result, type);\r\n\t\treturn M;\r\n\t}\r\n\r\n   /**\r\n   * Sets a new value according to the path..\r\n   * @param  {String} path \r\n   * @param  {Object} value.\r\n   * @param  {String/Number} timeout  Optional, value > 10 will be used as delay\r\n   * @param {Boolean} reset Optional  default: false\r\n   */\r\n\tfunction setx(path, value, timeout, reset) {   // W.SET\r\n\t\tvar t = typeof(timeout);\r\n\t\tif (t === 'boolean')\r\n\t\t\treturn immSetx(path, value, timeout);\r\n\t\tif (!timeout || timeout < 10 || t !== 'number') // TYPE\r\n\t\t\treturn immSetx(path, value, timeout);\r\n\t\tsetTimeout(function() {\r\n\t\t\timmSetx(path, value, reset);\r\n\t\t}, timeout);\r\n\t\treturn this; // W\r\n\t};\r\n\r\n   /**\r\n   * Sets a new value according to the path and performs CHANGE() for all components \r\n   * which are listening on the path.\r\n   * @param  {String} path \r\n   * @param  {Object} value.\r\n   * @param  {String/Number} type  Optional, value > 10 will be used as delay\r\n   */\r\n\tfunction setx2(path, value, type) { //W.SET2 = \r\n\t\tsetx(path, value, type); // SET\r\n\t\tchange(path);\r\n\t\treturn this;\r\n\t};\r\n\r\n   /**\r\n   * Sets a new value according to the path and resets the state. \r\n   * @param  {String} path \r\n   * @param  {Object} value.\r\n   * @param  {String/Number} type  Optional, value > 10 will be used as delay\r\n   */\r\n\tfunction setr(path, value, type) { //  W.SETR\r\n\t\timmSetx(path, value, type);\r\n\t\treset(path); // RESET\r\n\t\treturn this;\r\n\t};\r\n\r\n\t//cache\r\n\tfunction cache(path, expire, rebind) { // W.CACHEPATH = \r\n\t\tvar key = '$jcpath';\r\n\t\tWATCH(path, function(p, value) {\r\n\t\t\tvar obj = storages.get(key); // cachestorage(key);\r\n\t\t\tif (obj) {\r\n\t\t\t\tobj[path] = value;\r\n\t\t\t}else {\r\n\t\t\t\tobj = {};\r\n\t\t\t\tobj[path] = value;\r\n\t\t\t}\r\n\t\t\tstorages.put(key, obj, expire); // cachestorage(key, obj, expire);\r\n\t\t});\r\n\r\n\t\tif (rebind === undefined || rebind) {\r\n\t\t\tvar cache = storages.get(key); // cachestorage(key);\r\n\t\t\tif (cache && cache[path] !== undefined && cache[path] !== get(path)){\r\n\t\t\t\timmSetx(path, cache[path], true);\t\r\n\t\t\t} \r\n\t\t}\r\n\t\treturn this; //W \r\n\t};\r\n\r\n\r\n\tfunction parsepath(path) {\r\n\r\n\t\tvar arr = path.split('.');\r\n\t\tvar builder = [];\r\n\t\tvar all = [];\r\n\r\n\t\tfor (var i = 0; i < arr.length; i++) {\r\n\t\t\tvar p = arr[i];\r\n\t\t\tvar index = p.indexOf('[');\r\n\t\t\tif (index === -1) {\r\n\t\t\t\tif (p.indexOf('-') === -1) {\r\n\t\t\t\t\tall.push(p);\r\n\t\t\t\t\tbuilder.push(all.join('.'));\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar a = all.splice(all.length - 1);\r\n\t\t\t\t\tall.push(a + '[\\'' + p + '\\']');\r\n\t\t\t\t\tbuilder.push(all.join('.'));\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (p.indexOf('-') === -1) {\r\n\t\t\t\t\tall.push(p.substring(0, index));\r\n\t\t\t\t\tbuilder.push(all.join('.'));\r\n\t\t\t\t\tall.splice(all.length - 1);\r\n\t\t\t\t\tall.push(p);\r\n\t\t\t\t\tbuilder.push(all.join('.'));\r\n\t\t\t\t} else {\r\n\t\t\t\t\tall.push('[\\'' + p.substring(0, index) + '\\']');\r\n\t\t\t\t\tbuilder.push(all.join(''));\r\n\t\t\t\t\tall.push(p.substring(index));\r\n\t\t\t\t\tbuilder.push(all.join(''));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn builder;\r\n\t}\r\n\t\r\n   /**\r\n   * Creates a watcher for all changes.\r\n   * @param  {String} path \r\n   */\r\n\tfunction create(path) { //W.CREATE\r\n\r\n\t\tvar is = false;\r\n\t\tvar callback;\r\n\r\n\t\tif (typeof(path) === TYPE_S) {\r\n\t\t\tif (proxy[path])\r\n\t\t\t\treturn proxy[path];\r\n\t\t\tis = true;\r\n\t\t\tcallback = function(key) {\r\n\r\n\t\t\t\tvar p = path + (key ? '.' + key : '');\r\n\t\t\t\tif (M.skipproxy === p) {\r\n\t\t\t\t\tM.skipproxy = '';\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\tif (M.skipproxy === p)\r\n\t\t\t\t\t\tM.skipproxy = '';\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tnotify(p);  // NOTIFY\r\n\t\t\t\t\t\treset(p);   // REEST\r\n\t\t\t\t\t}\r\n\t\t\t\t}, MD.delaybinder);\r\n\t\t\t};\r\n\r\n\t\t} else\r\n\t\t\tcallback = path;\r\n\r\n\t\tvar blocked = false;\r\n\t\tvar obj = path ? (get2(path) || {}) : {};\r\n\t\tvar handler = {\r\n\t\t\tget: function(target, property, receiver) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\treturn new Proxy(target[property], handler);\r\n\t\t\t\t} catch (err) {\r\n\t\t\t\t\treturn Reflect.get(target, property, receiver);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tdefineProperty: function(target, property, descriptor) {\r\n\t\t\t\t!blocked && callback(property, descriptor);\r\n\t\t\t\treturn Reflect.defineProperty(target, property, descriptor);\r\n\t\t\t},\r\n\t\t\tdeleteProperty: function(target, property) {\r\n\t\t\t\t!blocked && callback(property);\r\n\t\t\t\treturn Reflect.deleteProperty(target, property);\r\n\t\t\t},\r\n\t\t\tapply: function(target, thisArg, argumentsList) {\r\n\t\t\t\tif (BLACKLIST[target.name]) {\r\n\t\t\t\t\tblocked = true;\r\n\t\t\t\t\tvar result = Reflect.apply(target, thisArg, argumentsList);\r\n\t\t\t\t\tcallback('', argumentsList[0]);\r\n\t\t\t\t\tblocked = false;\r\n\t\t\t\t\treturn result;\r\n\t\t\t\t}\r\n\t\t\t\treturn Reflect.apply(target, thisArg, argumentsList);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tvar o = new Proxy(obj, handler);\r\n\r\n\t\tif (is) {\r\n\t\t\tM.skipproxy = path;\r\n\t\t\tgetx(path) == null && setx(path, obj, true);  // GET SET\r\n\t\t\treturn proxy[path] = o;\r\n\t\t} else\r\n\t\t\treturn o;\r\n\t};\r\n\r\n   /**\r\n   * Creates an object on the path and notifies all components\r\n   * @param  {String} path \r\n   * @param  {Function} fn \r\n   * @param  {Boolean} update Optional Optional, default \"true\"\r\n   */\r\n\tfunction make(obj, fn, update) { // W.MAKE\r\n\r\n\t\tswitch (typeof(obj)) {\r\n\t\t\tcase 'function':\r\n\t\t\t\tfn = obj;\r\n\t\t\t\tobj = {};\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'string':\r\n\t\t\t\tvar p = obj;\r\n\t\t\t\tvar is = true;\r\n\t\t\t\tobj = get(p);\r\n\t\t\t\tif (obj == null) {\r\n\t\t\t\t\tis = false;\r\n\t\t\t\t\tobj = {};\r\n\t\t\t\t}\r\n\t\t\t\tfn.call(obj, obj, p, function(path, value) {\r\n\t\t\t\t\tsetx(obj, path, value);\r\n\t\t\t\t});\r\n\t\t\t\tif (is && (update === undefined || update === true))\r\n\t\t\t\t\timmUpdate(p, true);\r\n\t\t\t\telse {\r\n\t\t\t\t\tif (C.ready)\r\n\t\t\t\t\t\t$set(p, obj);\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\timmSetx(p, obj, true);\r\n\t\t\t\t}\r\n\t\t\t\treturn obj;\r\n\t\t}\r\n\r\n\t\tfn.call(obj, obj, '');\r\n\t\treturn obj;\r\n\t};\r\n\r\n  /**\r\n   * Notifies a setter in all components on the path.\r\n   * @param  {String} path \r\n   */\r\n\tfunction notify() { // W.NOTIFY\r\n\r\n\t\tvar arg = arguments;\r\n\t\tvar all = M.components.all;//M.components;\r\n\r\n\t\tvar $ticks = Math.random().toString().substring(2, 8);\r\n\t\tfor (var j = 0; j < arg.length; j++) {\r\n\t\t\tvar p = arg[j];\r\n\t\t\tbinders[p] && binderbind(p, p, $ticks);\r\n\t\t}\r\n\r\n\t\tfor (var i = 0, length = all.length; i < length; i++) {\r\n\t\t\tvar com = all[i];\r\n\t\t\tif (!com || com.$removed || com.disabled || !com.$loaded || !com.path)\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tvar is = 0;\r\n\t\t\tfor (var j = 0; j < arg.length; j++) {\r\n\t\t\t\tif (com.path === arg[j]) {\r\n\t\t\t\t\tis = 1;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (is) {\r\n\t\t\t\tvar val = com.get();\r\n\t\t\t\tcom.setter && com.setterX(val, com.path, 1);\r\n\t\t\t\tcom.state && com.stateX(1, 6);\r\n\t\t\t\tcom.$interaction(1);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor (var j = 0; j < arg.length; j++) {\r\n\t\t\temitwatch(arg[j], getx(arg[j]), 1);  // GET\r\n\t\t}\r\n\r\n\t\treturn this;  // W\r\n\t};\r\n\r\n\tfunction validate(path, except) { //W.VALIDATE =\r\n\r\n\t\tvar arr = [];\r\n\t\tvar valid = true;\r\n\r\n\t\tpath = pathmakerw(path); //pathmaker(path.replace(REGWILDCARD, ''));\r\n\r\n\t\tvar flags = null;\r\n\t\tif (except) {\r\n\t\t\tvar is = false;\r\n\t\t\tflags = {};\r\n\t\t\texcept = except.remove(function(item) {\r\n\t\t\t\tif (item.substring(0, 1) === '@') {\r\n\t\t\t\t\tflags[item.substring(1)] = true;\r\n\t\t\t\t\tis = true;\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t});\r\n\t\t\t!is && (flags = null);\r\n\t\t\t!except.length && (except = null);\r\n\t\t}\r\n\r\n\t\tvar all = M.components.all;//M.components;\r\n\t\tfor (var i = 0, length = all.length; i < length; i++) {\r\n\t\t\tvar com = all[i];\r\n\t\t\tif (!com || com.$removed || com.disabled || !com.$loaded || !com.path || !com.$compare(path))\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tif (flags && ((flags.visible && !com.visible()) || (flags.hidden && !com.hidden()) || (flags.enabled && com.find(SELINPUT).is(':disabled')) || (flags.disabled && com.find(SELINPUT).is(':enabled'))))\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tcom.state && arr.push(com);\r\n\r\n\t\t\tif (com.$valid_disabled)\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tcom.$validate = true;\r\n\t\t\tif (com.validate) {\r\n\t\t\t\tcom.$valid = com.validate(get(com.path));\r\n\t\t\t\tcom.$interaction(102);\r\n\t\t\t\tif (!com.$valid)\r\n\t\t\t\t\tvalid = false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tclear('valid');\r\n\t\tstate(arr, 1, 1);\r\n\t\treturn valid;\r\n\t}\r\n\r\n   /**\r\n   * Sets default values for all declared components listen on the path.\r\n   * All components need to have declared data-jc-value=\"VALUE\" attribute. \r\n   * @param  {String} path \r\n   * @param  {Number} delay Optional, default: 0 \r\n   * @param  {Boolean} reset Optional, default: true\r\n   */\r\n\tfunction defaultValue(path, timeout, reset) { //W.DEFAULT = \r\n\t\tvar arr = path.split(REGMETA);\r\n\t\tif (arr.length > 1) {\r\n\t\t\tvar def = arr[1];\r\n\t\t\tpath = arr[0];\r\n\t\t\tvar index = path.indexOf('.*');\r\n\t\t\tif (index !== -1)　{\r\n\t\t\t\tpath = path.substring(0, index);\r\n\t\t\t}\r\n\t\t\tSET(path, new Function('return ' + def)(), timeout > 10 ? timeout : 3, timeout > 10 ? 3 : null);\r\n\t\t}\r\n\t\treturn M.default(arr[0], timeout, null, reset);\r\n\t}\r\n\r\n\r\n\tvar nmCache = {};  // notmodified cache \r\n\r\n   /**\r\n   * Checks whether the value has not been modified on the path.\r\n   * @param  {String} path \r\n   * @param {Object} value  Optional\r\n   * @param {Array<String>} fields  Optional, field names\r\n   * @returns {Booean}   \r\n   */\r\n\tfunction notmodified(path, value, fields) { // W.NOTMODIFIED = \r\n\r\n\t\tif (value === undefined) {\r\n\t\t\tvalue = get(path);\r\n\t\t}\r\n\r\n\t\tif (value === undefined) {\r\n\t\t\tvalue = null;\r\n\t\t}\r\n\r\n\t\tif (fields) {\r\n\t\t\tpath = path.concat('#', fields);\r\n\t\t}\r\n\r\n\t\tvar s = langx.stringify(value, false, fields); // STRINGIFY\r\n\t\tvar hash = langx.hashCode(s); // HASH\r\n\t\tvar key =  path; // 'notmodified.' + path\r\n\r\n\t\tif (nmCache[key] === hash) { // cache\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tnmCache[key] = hash; //cache \r\n\t\treturn false;\r\n\t};\r\n\r\n\r\n\r\n\tfunction rewrite(path, value, type) { // W.REWRITE = \r\n\t\tpath = pathmaker(path);\r\n\t\tif (path) {\r\n\t\t\tM.skipproxy = path;\r\n\t\t\tset(path, value);\r\n\t\t\temitwatch(path, value, type);\r\n\t\t}\r\n\t\treturn this; // W\r\n\t}\r\n\r\n\r\n   /**\r\n   * Performs SET() and CHANGE() together.\r\n   * @param  {String} path \r\n   * @param  {Object|Array} value.\r\n   * @param  {String/Number} timeout  Optional, \"value > 10\" will be used as delay\r\n   * @param {Boolean} reset Optional\r\n   */\r\n\tfunction modify(path, value, timeout) { // W.MODIFY =\r\n\t\tif (path && typeof(path) === TYPE_O) {\r\n\t\t\tObject.keys(path).forEach(function(k) {\r\n\t\t\t\tmodify(k, path[k], value);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tif (langx.isFunction(value)) {\r\n\t\t\t\tvalue = value(get2(path));\r\n\t\t\t}\r\n\t\t\tsetx(path, value, timeout); // SET\r\n\t\t\tif (timeout) {\r\n\t\t\t\tlangx.setTimeout(change, timeout + 5, path);\r\n\t\t\t} else {\r\n\t\t\t\tchange(path);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn this;\r\n\t};\r\n\r\n\r\n   /**\r\n   * Performs toggle for the path. A value must be Boolean.\r\n   * @param  {String} path \r\n   * @param  {String/Number} timeout  Optional, value > 10 will be used as delay\r\n   * @param {Boolean} reset Optional  default: false\r\n   */\r\n\tfunction toggle(path, timeout, reset) { // W.TOGGLE = \r\n\t\tvar v = getx(path);  // GET\r\n\t\tsetx(path, !v, timeout, reset); // SET\r\n\t\treturn this;\r\n\t};\r\n\r\n   /**\r\n   * Performs toggle for the path and performs CHANGE() for all components which are listening on the path.\r\n   * A value must be Boolean.\r\n   * @param  {String} path \r\n   * @param {String|Number} type  Optional, \"value > 10\" will be used as timeout\r\n   */\r\n\tfunction toogle2(path, type) { //W.TOGGLE2 = \r\n\t\ttoogle(path, type);\r\n\t\tchange(path);\r\n\t\treturn this;\r\n\t};\r\n\r\n\t// inc.. \r\n\tfunction immInc(path, value, type) {  // M.inc\r\n\r\n\t\tif (path instanceof Array) {\r\n\t\t\tfor (var i = 0; i < path.length; i++)\r\n\t\t\t\timmInc(path[i], value, type);\r\n\t\t\treturn this; // M\r\n\t\t}\r\n\r\n\t\tpath = pathmaker(path);\r\n\r\n\t\tif (!path)\r\n\t\t\treturn this; // M\r\n\r\n\t\tvar current = get(path);\r\n\t\tif (!current) {\r\n\t\t\tcurrent = 0;\r\n\t\t} else if (typeof(current) !== TYPE_N) {\r\n\t\t\tcurrent = parseFloat(current);\r\n\t\t\tif (isNaN(current))\r\n\t\t\t\tcurrent = 0;\r\n\t\t}\r\n\r\n\t\tcurrent += value;\r\n\t\timmSetx(path, current, type);\r\n\t\treturn this; // M\r\n\t}\r\n\r\n   /**\r\n   * Pushs a new item into the Array according to the path.\r\n   * @param  {String} path \r\n   * @param  {Object|Array} value.\r\n   * @param  {String/Number} timeout  Optional, \"value > 10\" will be used as delay\r\n   * @param {Boolean} reset Optional\r\n   */\r\n\tfunction inc(path, value, timeout, reset) { // W.INC = \r\n\r\n\t\tif (value == null)\r\n\t\t\tvalue = 1;\r\n\r\n\t\tvar t = typeof(timeout);\r\n\t\tif (t === 'boolean')\r\n\t\t\treturn immInc(path, value, timeout);\r\n\t\tif (!timeout || timeout < 10 || t !== TYPE_N) // TYPE\r\n\t\t\treturn immInc(path, value, timeout);\r\n\t\tsetTimeout(function() {\r\n\t\t\timmInc(path, value, reset);\r\n\t\t}, timeout);\r\n\t\treturn W;\r\n\t};\r\n\r\n  /**\r\n   * Extends a path by adding/rewrite new fields with new values and performs CHANGE().\r\n   * @param  {String} path \r\n   * @param  {Object} value \r\n   * @param {String|Number} type  Optional, \"value > 10\" will be used as timeout\r\n   */\r\n\t function inc2(path, value, type) {  // W.INC2 = \r\n\t\tinc(path, value, type);\r\n\t\tchange(path);\r\n\t\treturn this;\r\n\t};\r\n\r\n\t// extend...\r\n\tfunction immExtend(path, value, type) { // M.extend\r\n\t\tpath = pathmaker(path);\r\n\t\tif (path) {\r\n\t\t\tvar val = get(path);\r\n\t\t\tif (val == null)\r\n\t\t\t\tval = {};\r\n\t\t\timmSetx(path, $.extend(val, value), type);\r\n\t\t}\r\n\t\treturn this; // M\r\n\t}\r\n\r\n   /**\r\n   * Pushs a new item into the Array according to the path.\r\n   * @param  {String} path \r\n   * @param  {Object|Array} value.\r\n   * @param  {String/Number} timeout  Optional, \"value > 10\" will be used as delay\r\n   * @param {Boolean} reset Optional\r\n   */\r\n\tfunction extend(path, value, timeout, reset) { // W.EXTEND = \r\n\t\tvar t = typeof(timeout);\r\n\t\tif (t === 'boolean')\r\n\t\t\treturn immExtend(path, value, timeout);\r\n\t\tif (!timeout || timeout < 10 || t !== 'number') // TYPE\r\n\t\t\treturn immExtend(path, value, timeout);\r\n\t\tsetTimeout(function() {\r\n\t\t\timmExtend(path, value, reset);\r\n\t\t}, timeout);\r\n\t\treturn this; // W\r\n\t};\r\n\r\n   /**\r\n   * Extends a path by adding/rewrite new fields with new values and performs CHANGE().\r\n   * @param  {String} path \r\n   * @param  {Object} value \r\n   * @param {String|Number} type  Optional, \"value > 10\" will be used as timeout\r\n   */\r\n\tfunction extend2(path, value, type) { // W.EXTEND2 = \r\n\t\textend(path, value, type); // W.EXTEND\r\n\t\tchange(path);\r\n\t\treturn this;\r\n\t};\r\n\r\n\tfunction immPush(path, value, type) { // M.push\r\n\r\n\t\tif (path instanceof Array) {\r\n\t\t\tfor (var i = 0; i < path.length; i++) {\r\n\t\t\t\timmPush(path[i], value, type);\r\n\t\t\t}\r\n\t\t\treturn this; // M\r\n\t\t}\r\n\r\n\t\tvar arr = get(path);\r\n\t\tvar n = false;\r\n\r\n\t\tif (!(arr instanceof Array)) {\r\n\t\t\tarr = [];\r\n\t\t\tn = true;\r\n\t\t}\r\n\r\n\t\tvar is = true;\r\n\t\tM.skipproxy = path;\r\n\r\n\t\tif (value instanceof Array) {\r\n\t\t\tif (value.length)\r\n\t\t\t\tarr.push.apply(arr, value);\r\n\t\t\telse {\r\n\t\t\t\tis = false;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tarr.push(value);\r\n\t\t}\r\n\r\n\t\tif (n) {\r\n\t\t\timmSetx(path, arr, type);\r\n\t\t} else if (is) {\r\n\t\t\timmUpdate(path, undefined, type);\r\n\t\t}\r\n\r\n\t\treturn this; // M\r\n\t}\r\n\r\n   /**\r\n   * Pushs a new item into the Array according to the path.\r\n   * @param  {String} path \r\n   * @param  {Object|Array} value.\r\n   * @param  {String/Number} timeout  Optional, \"value > 10\" will be used as delay\r\n   * @param {Boolean} reset Optional\r\n   */\r\n\tfunction push(path, value, timeout, reset) {  // W.PUSH = \r\n\t\tvar t = typeof(timeout);\r\n\t\tif (t === 'boolean')\r\n\t\t\treturn M.push(path, value, timeout);\r\n\t\tif (!timeout || timeout < 10 || t !== 'number') // TYPE\r\n\t\t\treturn M.push(path, value, timeout);\r\n\t\tsetTimeout(function() {\r\n\t\t\tM.push(path, value, reset);\r\n\t\t}, timeout);\r\n\t\treturn this; // W\r\n\t};\r\n\r\n   /**\r\n   * Extends a path by adding/rewrite new fields with new values and performs CHANGE().\r\n   * @param  {String} path \r\n   * @param  {Object} value \r\n   * @param {String|Number} type  Optional, \"value > 10\" will be used as timeout\r\n   */\r\n\tfunction push2(path, value, type) { // W.PUSH2 = \r\n\t\tpush(path, value, type);\r\n\t\tchange(path);\r\n\t\treturn this; // W\r\n\t};\r\n\r\n\t// 1 === manually\r\n\t// 2 === by input\r\n\tfunction immUpdate(path, reset, type, wasset) { // M.update = \r\n\r\n\t\tif (path instanceof Array) {\r\n\t\t\tfor (var i = 0; i < path.length; i++)\r\n\t\t\t\timmUpdate(path[i], reset, type);\r\n\t\t\treturn M;\r\n\t\t}\r\n\r\n\t\tpath = pathmaker(path);\r\n\t\tif (!path)\r\n\t\t\treturn M;\r\n\r\n\t\tvar is = path.charCodeAt(0) === 33;\r\n\t\tif (is)\r\n\t\t\tpath = path.substring(1);\r\n\r\n\t\tpath = path.replace(REGWILDCARD, '');\r\n\t\tif (!path)\r\n\t\t\treturn M;\r\n\r\n\t\t!wasset && $set(path, $get(path), true);\r\n\r\n\t\tvar state = [];\r\n\r\n\t\tif (type === undefined) {\r\n\t\t\ttype = 1; // manually\r\n\t\t}\r\n\r\n\t\tM.skipproxy = path;\r\n\r\n\t\tvar all = M.components.all;//M.components;\r\n\t\tfor (var i = 0, length = all.length; i < length; i++) {\r\n\t\t\tvar com = all[i];\r\n\r\n\t\t\tif (!com || com.disabled || com.$removed || !com.$loaded || !com.path || !com.$compare(path))\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tvar result = com.get();\r\n\t\t\tif (com.setter) {\r\n\t\t\t\tcom.$skip = false;\r\n\t\t\t\tcom.setterX(result, path, type);\r\n\t\t\t\tcom.$interaction(type);\r\n\t\t\t}\r\n\r\n\t\t\tif (!com.$ready)\r\n\t\t\t\tcom.$ready = true;\r\n\r\n\t\t\tif (reset === true) {\r\n\r\n\t\t\t\tif (!com.$dirty_disabled) {\r\n\t\t\t\t\tcom.$dirty = true;\r\n\t\t\t\t\tcom.$interaction(101);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!com.$valid_disabled) {\r\n\t\t\t\t\tcom.$valid = true;\r\n\t\t\t\t\tcom.$validate = false;\r\n\t\t\t\t\tif (com.validate) {\r\n\t\t\t\t\t\tcom.$valid = com.validate(result);\r\n\t\t\t\t\t\tcom.$interaction(102);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfindcontrol2(com);\r\n\r\n\t\t\t} else if (com.validate && !com.$valid_disabled)\r\n\t\t\t\tcom.valid(com.validate(result), true);\r\n\r\n\t\t\tcom.state && state.push(com);\r\n\t\t}\r\n\r\n\t\treset && clear('dirty', 'valid');\r\n\r\n\t\tfor (var i = 0, length = state.length; i < length; i++)\r\n\t\t\tstate[i].stateX(1, 4);\r\n\r\n\t\temitwatch(path, get(path), type);\r\n\t\treturn M;\r\n\t}\r\n\r\n\r\n\tfunction update(path, timeout, reset) { // W.UPDATE\r\n\t\tvar t = typeof(timeout); \r\n\t\tif (t === 'boolean')\r\n\t\t\treturn immUpdate(path, timeout);\r\n\t\tif (!timeout || timeout < 10 || t !== TYPE_N) // TYPE\r\n\t\t\treturn immUpdate(path, reset, timeout);\r\n\t\tsetTimeout(function() {\r\n\t\t\timmUpdate(path, reset);\r\n\t\t}, timeout);\r\n\t};\r\n\r\n\tfunction update2(path, type) { //W.UPDATE2 = \r\n\t\tupdate(path, type); // W.UPDATE\r\n\t\tW.CHANGE(path); \r\n\t\treturn this; // W\r\n\t};\t\r\n\r\n\t// ===============================================================\r\n\t// MAIN FUNCTIONS\r\n\t// ===============================================================\r\n\r\n   /**\r\n   * Evaluates a global parser.\r\n   * @param  {String} path \r\n   * @param  {Object} value\r\n   * @param  {String} type \r\n   * @returns {Boolean}   \r\n   * OR\r\n   * Registers a global parser.\r\n   * @param  {Function} value \r\n   */\r\n\tfunction parser(value, path, type) { //W.PARSER = M.parser =  \r\n\r\n\t\tif (langx.isFunction(value)) {\r\n\t\t\t!jc.$parser && (jc.$parser = []);\r\n\r\n\t\t\t// Prepend\r\n\t\t\tif (path === true) {\r\n\t\t\t\tjc.$parser.unshift(value);\r\n\t\t\t} else {\r\n\t\t\t\tjc.$parser.push(value);\r\n\t\t\t}\r\n\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\tvar a = jc.$parser;\r\n\t\tif (a && a.length) {\r\n\t\t\tfor (var i = 0, length = a.length; i < length; i++) {\r\n\t\t\t\tvalue = a[i].call(M, path, value, type);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn value;\r\n\t};\r\n\r\n\r\n\tjc.$parser.push(function(path, value, type) {\r\n\r\n\t\tswitch (type) {\r\n\t\t\tcase 'number':\r\n\t\t\tcase 'currency':\r\n\t\t\tcase 'float':\r\n\t\t\t\tvar v = +(langx.isString(value) ? value.replace(REGEMPTY, '').replace(REGCOMMA, '.') : value);\r\n\t\t\t\treturn isNaN(v) ? null : v;\r\n\r\n\t\t\tcase 'date':\r\n\t\t\tcase 'datetime':\r\n\r\n\t\t\t\tif (!value) {\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (value instanceof Date) {\r\n\t\t\t\t\treturn value;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvalue = value.parseDate();\r\n\t\t\t\treturn value && value.getTime() ? value : null;\r\n\t\t}\r\n\r\n\t\treturn value;\r\n\t});\r\n\r\n\r\n\tsetInterval(function() {\r\n//\t\ttemp = {};\r\n\t\tpaths = {};\r\n//\t\tcleaner();\r\n\t}, (1000 * 60) * 5);\t\r\n\r\n\treturn jc.paths = {\r\n\t\tScope,\r\n\t\tunwatch : unwatch,\r\n\t\twatch : watch,\r\n\r\n\t\tget,\r\n\t\tgetx,\r\n\t\tgetr,\r\n\r\n\t\tset,\r\n\t\tset2,\r\n\t\timmSetx,\r\n\t\tsetx,\r\n\t\tsetx2,\r\n\t\tsetr,\r\n\r\n\t\ttoggle,\r\n\t\ttoogle2,\r\n\r\n\t\tcache,\r\n\r\n\t\timmInc,\r\n\t\tinc,\r\n\t\tinc2,\r\n\r\n\t\timmExtend,\r\n\t\textend,\r\n\t\textend2,\r\n\r\n\t\timmPush,\r\n\t\tpush,\r\n\t\tpush2,\r\n\r\n\t\timmUpdate,\r\n\t\tupdate,\r\n\t\tupdate2,\r\n\r\n\t\tbind,\r\n\t\tcreate,\r\n\t\tdefaultValue,\r\n\t\terrors,\r\n\t\tmake,\r\n\t\tevaluate,\r\n\t\tmake,\r\n\t\tmodified,\r\n//\t\tnotmodified,\r\n\t\tpathmaker,\r\n\t\trewrite,\r\n\t\tvalidate\r\n\t};\r\n});"]}