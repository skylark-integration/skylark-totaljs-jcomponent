/**
 * skylark-totaljs-jcomponent - A version of totaljs jcomponent that ported to running on skylarkjs
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylarkui/skylark-totaljs-jcomponent/
 * @license MIT
 */
define(["../langx","skylark-utils-dom/query","../jc"],function(t,e,i){var n,r={xs:{max:768},sm:{min:768,max:992},md:{min:992,max:1200},lg:{min:1200}},s=/<style\b[^<]*(?:(?!<\/style>)<[^<]*)*<\/style>/gi,a=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>|<style\b[^<]*(?:(?!<\/style>)<[^<]*)*<\/style>/gi,o=0,d=[],m={INPUT:!0,TEXTAREA:!0,SELECT:!0};function l(){var t=window;if(d&&d.length)for(var i=t.orientation?90===Math.abs(t.orientation)?"landscape":"portrait":"",n=e(t),s=n.width(),a=n.height(),o=r,m=0,l=d.length;m<l;m++){var c=d[m],h=s,f=a;if(c.element&&(h=c.element.width(),f=c.element.height()),c.orientation){if(!i&&"portrait"!==c.orientation)continue;if(i!==c.orientation)continue}if(!(c.minW&&c.minW>=h)&&(!(c.maxW&&c.maxW<=h)&&!(c.minH&&c.minH>=f)&&!(c.maxH&&c.maxH<=f)&&(c.oldW!==h||c.oldH===f||c.maxH||c.minH)&&(c.oldH!==f||c.oldW===h||c.maxW||c.minW)&&(c.oldW!==h||c.oldH!==f))){var u=null;h>=o.md.min&&h<=o.md.max?u="md":h>=o.sm.min&&h<=o.sm.max?u="sm":h>o.lg.min?u="lg":h<=o.xs.max&&(u="xs"),c.oldW=h,c.oldH=f,c.fn(h,f,u,c.id)}}}function c(){l()}return e.fn.aclass=function(t){return this.addClass(t)},e.fn.rclass=function(t){return null==t?this.removeClass():this.removeClass(t)},e.fn.rattr=function(t){return this.removeAttr(t)},e.fn.rattrd=function(t){return this.removeAttr("data-"+t)},e.fn.rclass2=function(t){for(var e=(this.attr("class")||"").split(" "),i=typeof t===TYPE_O,n=0,r=e.length;n<r;n++){var s=e[n];s&&(i?t.test(s)&&this.rclass(s):-1!==s.indexOf(t)&&this.rclass(s))}return this},e.fn.hclass=function(t){return this.hasClass(t)},e.fn.tclass=function(t,e){return this.toggleClass(t,e)},e.fn.attrd=function(t,e){return t="data-"+t,null==e?this.attr(t):this.attr(t,e)},e.fn.asvg=function(t){if(-1===t.indexOf("<")){var i=document.createElementNS("http://www.w3.org/2000/svg",t);return this.append(i),e(i)}var n=document.createElementNS("http://www.w3.org/1999/xhtml","div");n.innerHTML='<svg xmlns="http://www.w3.org/2000/svg">'+t+"</svg>";for(var r=document.createDocumentFragment();n.firstChild.firstChild;)r.appendChild(n.firstChild.firstChild);return r=e(r),this.append(r),r},e.fn.psvg=function(t){if(-1===t.indexOf("<")){var i=document.createElementNS("http://www.w3.org/2000/svg",t);return this.prepend(i),e(i)}var n=document.createElementNS("http://www.w3.org/1999/xhtml","div");n.innerHTML='<svg xmlns="http://www.w3.org/2000/svg">'+t+"</svg>";for(var r=document.createDocumentFragment();n.firstChild.firstChild;)r.appendChild(n.firstChild.firstChild);return r=e(r),this.prepend(r),r},e.fn.rescroll=function(t,e){return this.each(function(){var i=this;if(i.scrollIntoView(!0),t)for(var n=0;i&&0==i.scrollTop&&n++<25;)if((i=i.parentNode)&&i.scrollTop){var r=i.scrollTop+t;return 0!=e&&i.scrollTop+i.getBoundingClientRect().height>=i.scrollHeight?void(i.scrollTop=i.scrollHeight):void(i.scrollTop=r)}}),this},c(),e(window).on("resize",c),e(window).on("orientationchange",l),i.domx={devices:r,findInstance:function(t,e){if(!t.length)return null;for(var i=0;i<t.length;i++)if(t[i][e])return t[i][e];for(var n=t[0].parentElement;null!==n;){if(n[e])return n[e];n=n.parentElement}return null},inDOM:function(t){if(t){if("BODY"===t.nodeName)return!0;for(var e=t.parentNode;e;){if("BODY"===e.nodeName)return!0;e=e.parentNode}}},importscripts:function(i){for(var n,r=-1,s=i,a=[];-1!==(r=i.indexOf("<script",r));){var o=i.indexOf("<\/script>",r+8),d=i.substring(r,o+9);if(r=o+9,o=d.indexOf(">"),(-1===(n=d.substring(0,o)).indexOf("type=")||-1!==n.lastIndexOf("javascript"))&&!d.substring(o+1,d.length-9).trim()){s=s.replace(d,"").trim();var m="external"+t.hashCode(d);statics[m]||(a.push(d),statics[m]=!0)}}return a.length&&e("head").append(a.join("\n")),s},importstyles:function(t,i){var n=[];t=t.replace(s,function(t){return t=t.replace("<style>",'<style type="text/css">'),n.push(t.substring(23,t.length-8).trim()),""});var r="css"+(i||"");return i&&(statics[r]?e("#"+r).remove():statics[r]=!0),n.length&&e("<style"+(i?' id="'+r+'"':"")+">{0}</style>".format(n.join("\n"))).appendTo("head"),t},inputable:function(t){var e=t.tagName||t;return m[e]},keyPress:function(e,i,n){i||(i=300);var r=e.toString(),s=r.length-20;s<0&&(s=0);var a=n||t.hashCode(r.substring(0,20)+"X"+r.substring(s))+"_keypress";t.setTimeout2(a,e,i)},mediaquery:l,mediaWidth:function(t){t||(t=e(Window));var i=t.width(),n=r;return i>=n.md.min&&i<=n.md.max?"md":i>=n.sm.min&&i<=n.sm.max?"sm":i>n.lg.min?"lg":i<=n.xs.max?"xs":""},removescripts:function(t){return t.replace(a,function(t){var e=t.indexOf(">"),i=t.substring(0,e+1);return"<style"===i.substring(0,6)||"<script"===i.substring(0,7)&&-1===i.indexOf('type="')||-1!==i.indexOf('/javascript"')?"":t})},scrollbarWidth:function(){var t="jcscrollbarwidth";if(void 0!==n)return n;var i=document.body;e(i).append('<div id="{0}" style="width{1}height{1}overflow:scroll;position:absolute;top{2}left{2}"></div>'.format(t,":100px;",":9999px;"));var r=document.getElementById(t);return n=r.offsetWidth-r.clientWidth,i.removeChild(r),n},style:function(t,i){i&&e("#css"+i).remove(),e('<style type="text/css"'+(i?' id="css'+i+'"':"")+">"+(t instanceof Array?t.join(""):t)+"</style>").appendTo("head")},watchMedia:function e(i,n,s){if(t.isNumber(i))return d.remove("id",i),!0;if(t.isFunction(n)&&(s=n,n=null),-1!==(i=i.toLowerCase()).indexOf(",")){var a=[];return i.split(",").forEach(function(t){(t=t.trim())&&a.push(e(t,n,s))}),a}var m=r;"md"===i?i="min-width:{0}px and max-width:{1}px".format(m.md.min,m.md.max):"lg"===i?i="min-width:{0}px".format(m.lg.min):"xs"===i?i="max-width:{0}px".format(m.xs.max):"sm"===i&&(i="min-width:{0}px and max-width:{1}px".format(m.sm.min,m.sm.max));var l=i.match(/(max-width|min-width|max-device-width|min-device-width|max-height|min-height|max-device-height|height|width):(\s)\d+(px|em|in)?/gi),c={},h=function(t){var e=parseInt(t.match(/\d+/),10);return t.match(/\d+(em)/)?16*e:t.match(/\d+(in)/)?.010416667*e>>0:e};if(l)for(var f=0,u=l.length;f<u;f++){var p=(v=l[f]).indexOf(":");switch(v.substring(0,p).toLowerCase().trim()){case"min-width":case"min-device-width":case"width":c.minW=h(v);break;case"max-width":case"max-device-width":c.maxW=h(v);break;case"min-height":case"min-device-height":case"height":c.minH=h(v);break;case"max-height":case"max-device-height":c.maxH=h(v)}}if(l=i.match(/orientation:(\s)(landscape|portrait)/gi))for(f=0,u=l.length;f<u;f++){var v;-1!==(v=l[f]).toLowerCase().indexOf("portrait")?c.orientation="portrait":c.orientation="landscape"}return c.id=o++,c.fn=s,n&&(c.element=n),d.push(c),c.id}}});
//# sourceMappingURL=../sourcemaps/utils/domx.js.map
