/**
 * skylark-totaljs-jcomponent - A version of totaljs jcomponent that ported to running on skylarkjs
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-totaljs-jcomponent/
 * @license MIT
 */
define(["../langx","./query","skylark-domx-plugins"],function(t,n,e){var i,r=t.statics,a={xs:{max:768},sm:{min:768,max:992},md:{min:992,max:1200},lg:{min:1200}},s=/<style\b[^<]*(?:(?!<\/style>)<[^<]*)*<\/style>/gi,o=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>|<style\b[^<]*(?:(?!<\/style>)<[^<]*)*<\/style>/gi,l=0,d=[],m={INPUT:!0,TEXTAREA:!0,SELECT:!0};function c(){var t=window;if(d&&d.length)for(var e=t.orientation?90===Math.abs(t.orientation)?"landscape":"portrait":"",i=n(t),r=i.width(),s=i.height(),o=a,l=0,m=d.length;l<m;l++){var c=d[l],h=r,f=s;if(c.element&&(h=c.element.width(),f=c.element.height()),c.orientation){if(!e&&"portrait"!==c.orientation)continue;if(e!==c.orientation)continue}if(!(c.minW&&c.minW>=h)&&(!(c.maxW&&c.maxW<=h)&&!(c.minH&&c.minH>=f)&&!(c.maxH&&c.maxH<=f)&&(c.oldW!==h||c.oldH===f||c.maxH||c.minH)&&(c.oldH!==f||c.oldW===h||c.maxW||c.minW)&&(c.oldW!==h||c.oldH!==f))){var u=null;h>=o.md.min&&h<=o.md.max?u="md":h>=o.sm.min&&h<=o.sm.max?u="sm":h>o.lg.min?u="lg":h<=o.xs.max&&(u="xs"),c.oldW=h,c.oldH=f,c.fn(h,f,u,c.id)}}}function h(){var t="jcscrollbarwidth";if(void 0!==i)return i;var e=document.body;n(e).append('<div id="{0}" style="width{1}height{1}overflow:scroll;position:absolute;top{2}left{2}"></div>'.format(t,":100px;",":9999px;"));var r=document.getElementById(t);return i=r.offsetWidth-r.clientWidth,e.removeChild(r),i}var f={};function u(){c()}return n.fn.noscrollbar=function(){var t=this,e=h();f["overflow-y"]=e?"scroll":"auto";for(var i=0;i<t.length;i++){var r=t[i];if(r&&r.offsetParent){var a=n(r),s=n(a[0].parentNode).width();r.$noscrollbarwidth!==s&&(r.$noscrollbarwidth=s,f.width=Math.ceil(s+e)+"px",a.css(f),-1===(a.attr("class")||"").indexOf("noscrollbar")&&a.aclass("noscrollbar"))}}return t},n.fn.aclass=function(t){return this.addClass(t)},n.fn.rclass=function(t){return null==t?this.removeClass():this.removeClass(t)},n.fn.rattr=function(t){return this.removeAttr(t)},n.fn.rattrd=function(t){return this.removeAttr("data-"+t)},n.fn.rclass2=function(t){for(var n=(this.attr("class")||"").split(" "),e="object"==typeof t,i=0,r=n.length;i<r;i++){var a=n[i];a&&(e?t.test(a)&&this.rclass(a):-1!==a.indexOf(t)&&this.rclass(a))}return this},n.fn.hclass=function(t){return this.hasClass(t)},n.fn.tclass=function(t,n){return this.toggleClass(t,n)},n.fn.attrd=function(t,n){return t="data-"+t,null==n?this.attr(t):this.attr(t,n)},n.fn.asvg=function(t){if(-1===t.indexOf("<")){var e=document.createElementNS("http://www.w3.org/2000/svg",t);return this.append(e),n(e)}var i=document.createElementNS("http://www.w3.org/1999/xhtml","div");i.innerHTML='<svg xmlns="http://www.w3.org/2000/svg">'+t+"</svg>";for(var r=document.createDocumentFragment();i.firstChild.firstChild;)r.appendChild(i.firstChild.firstChild);return r=n(r),this.append(r),r},n.fn.psvg=function(t){if(-1===t.indexOf("<")){var e=document.createElementNS("http://www.w3.org/2000/svg",t);return this.prepend(e),n(e)}var i=document.createElementNS("http://www.w3.org/1999/xhtml","div");i.innerHTML='<svg xmlns="http://www.w3.org/2000/svg">'+t+"</svg>";for(var r=document.createDocumentFragment();i.firstChild.firstChild;)r.appendChild(i.firstChild.firstChild);return r=n(r),this.prepend(r),r},n.fn.rescroll=function(t,n){return this.each(function(){var e=this;if(e.scrollIntoView(!0),t)for(var i=0;e&&0==e.scrollTop&&i++<25;)if((e=e.parentNode)&&e.scrollTop){var r=e.scrollTop+t;return 0!=n&&e.scrollTop+e.getBoundingClientRect().height>=e.scrollHeight?void(e.scrollTop=e.scrollHeight):void(e.scrollTop=r)}}),this},u(),n(window).on("resize",u),n(window).on("orientationchange",c),n(function(){!0}),{devices:a,findInstance:function(t,n){if(!t.length)return null;for(var e=0;e<t.length;e++)if(t[e][n])return t[e][n];for(var i=t[0].parentElement;null!==i;){if(i[n])return i[n];i=i.parentElement}return null},inDOM:function(t){if(t){if("BODY"===t.nodeName)return!0;for(var n=t.parentNode;n;){if("BODY"===n.nodeName)return!0;n=n.parentNode}}},importscripts:function(e){for(var i,a=-1,s=e,o=[];-1!==(a=e.indexOf("<script",a));){var l=e.indexOf("<\/script>",a+8),d=e.substring(a,l+9);if(a=l+9,l=d.indexOf(">"),(-1===(i=d.substring(0,l)).indexOf("type=")||-1!==i.lastIndexOf("javascript"))&&!d.substring(l+1,d.length-9).trim()){s=s.replace(d,"").trim();var m="external"+t.hashCode(d);r[m]||(o.push(d),r[m]=!0)}}return o.length&&n("head").append(o.join("\n")),s},importstyles:function(t,e){var i=[];t=t.replace(s,function(t){return t=t.replace("<style>",'<style type="text/css">'),i.push(t.substring(23,t.length-8).trim()),""});var a="css"+(e||"");return e&&(r[a]?n("#"+a).remove():r[a]=!0),i.length&&n("<style"+(e?' id="'+a+'"':"")+">{0}</style>".format(i.join("\n"))).appendTo("head"),t},inputable:function(t){var n=t.tagName||t;return m[n]},keyPress:function(n,e,i){e||(e=300);var r=n.toString(),a=r.length-20;a<0&&(a=0);var s=i||t.hashCode(r.substring(0,20)+"X"+r.substring(a))+"_keypress";t.setTimeout2(s,n,e)},mediaquery:c,mediaWidth:function(t){t||(t=n(window));var e=t.width(),i=a;return e>=i.md.min&&e<=i.md.max?"md":e>=i.sm.min&&e<=i.sm.max?"sm":e>i.lg.min?"lg":e<=i.xs.max?"xs":""},Plugin:e.Plugin,removescripts:function(t){return t.replace(o,function(t){var n=t.indexOf(">"),e=t.substring(0,n+1);return"<style"===e.substring(0,6)||"<script"===e.substring(0,7)&&-1===e.indexOf('type="')||-1!==e.indexOf('/javascript"')?"":t})},scrollbarWidth:h,style:function(t,e){e&&n("#css"+e).remove(),n('<style type="text/css"'+(e?' id="css'+e+'"':"")+">"+(t instanceof Array?t.join(""):t)+"</style>").appendTo("head")},watchMedia:function n(e,i,r){if(t.isNumber(e))return d.remove("id",e),!0;if(t.isFunction(i)&&(r=i,i=null),-1!==(e=e.toLowerCase()).indexOf(",")){var s=[];return e.split(",").forEach(function(t){(t=t.trim())&&s.push(n(t,i,r))}),s}var o=a;"md"===e?e="min-width:{0}px and max-width:{1}px".format(o.md.min,o.md.max):"lg"===e?e="min-width:{0}px".format(o.lg.min):"xs"===e?e="max-width:{0}px".format(o.xs.max):"sm"===e&&(e="min-width:{0}px and max-width:{1}px".format(o.sm.min,o.sm.max));var m=e.match(/(max-width|min-width|max-device-width|min-device-width|max-height|min-height|max-device-height|height|width):(\s)\d+(px|em|in)?/gi),c={},h=function(t){var n=parseInt(t.match(/\d+/),10);return t.match(/\d+(em)/)?16*n:t.match(/\d+(in)/)?.010416667*n>>0:n};if(m)for(var f=0,u=m.length;f<u;f++){var p=(v=m[f]).indexOf(":");switch(v.substring(0,p).toLowerCase().trim()){case"min-width":case"min-device-width":case"width":c.minW=h(v);break;case"max-width":case"max-device-width":c.maxW=h(v);break;case"min-height":case"min-device-height":case"height":c.minH=h(v);break;case"max-height":case"max-device-height":c.maxH=h(v)}}if(m=e.match(/orientation:(\s)(landscape|portrait)/gi))for(f=0,u=m.length;f<u;f++){var v;-1!==(v=m[f]).toLowerCase().indexOf("portrait")?c.orientation="portrait":c.orientation="landscape"}return c.id=l++,c.fn=r,i&&(c.element=i),d.push(c),c.id},$:n}});
//# sourceMappingURL=../sourcemaps/utils/domx.js.map
