/**
 * skylark-totaljs-jcomponent - A version of totaljs jcomponent that ported to running on skylarkjs
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylarkui/skylark-totaljs-jcomponent/
 * @license MIT
 */
define(["../langx","skylark-utils-dom/query","../jc"],function(t,e,n){var i,r={xs:{max:768},sm:{min:768,max:992},md:{min:992,max:1200},lg:{min:1200}},s=/<style\b[^<]*(?:(?!<\/style>)<[^<]*)*<\/style>/gi,a=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>|<style\b[^<]*(?:(?!<\/style>)<[^<]*)*<\/style>/gi,o=0,d=0,m=[],l={INPUT:!0,TEXTAREA:!0,SELECT:!0};function c(){var t=window;if(m&&m.length)for(var n=t.orientation?90===Math.abs(t.orientation)?"landscape":"portrait":"",i=e(t),s=i.width(),a=i.height(),o=r,d=0,l=m.length;d<l;d++){var c=m[d],h=s,f=a;if(c.element&&(h=c.element.width(),f=c.element.height()),c.orientation){if(!n&&"portrait"!==c.orientation)continue;if(n!==c.orientation)continue}if(!(c.minW&&c.minW>=h)&&(!(c.maxW&&c.maxW<=h)&&!(c.minH&&c.minH>=f)&&!(c.maxH&&c.maxH<=f)&&(c.oldW!==h||c.oldH===f||c.maxH||c.minH)&&(c.oldH!==f||c.oldW===h||c.maxW||c.minW)&&(c.oldW!==h||c.oldH!==f))){var u=null;h>=o.md.min&&h<=o.md.max?u="md":h>=o.sm.min&&h<=o.sm.max?u="sm":h>o.lg.min?u="lg":h<=o.xs.max&&(u="xs"),c.oldW=h,c.oldH=f,c.fn(h,f,u,c.id)}}}function h(){var t=e(window);W.WW=t.width(),W.WH=t.height(),c()}return e.fn.aclass=function(t){return this.addClass(t)},e.fn.rclass=function(t){return null==t?this.removeClass():this.removeClass(t)},e.fn.rattr=function(t){return this.removeAttr(t)},e.fn.rattrd=function(t){return this.removeAttr("data-"+t)},e.fn.rclass2=function(t){for(var e=(this.attr("class")||"").split(" "),n=typeof t===TYPE_O,i=0,r=e.length;i<r;i++){var s=e[i];s&&(n?t.test(s)&&this.rclass(s):-1!==s.indexOf(t)&&this.rclass(s))}return this},e.fn.hclass=function(t){return this.hasClass(t)},e.fn.tclass=function(t,e){return this.toggleClass(t,e)},e.fn.attrd=function(t,e){return t="data-"+t,null==e?this.attr(t):this.attr(t,e)},e.fn.asvg=function(t){if(-1===t.indexOf("<")){var n=document.createElementNS("http://www.w3.org/2000/svg",t);return this.append(n),e(n)}var i=document.createElementNS("http://www.w3.org/1999/xhtml","div");i.innerHTML='<svg xmlns="http://www.w3.org/2000/svg">'+t+"</svg>";for(var r=document.createDocumentFragment();i.firstChild.firstChild;)r.appendChild(i.firstChild.firstChild);return r=e(r),this.append(r),r},e.fn.psvg=function(t){if(-1===t.indexOf("<")){var n=document.createElementNS("http://www.w3.org/2000/svg",t);return this.prepend(n),e(n)}var i=document.createElementNS("http://www.w3.org/1999/xhtml","div");i.innerHTML='<svg xmlns="http://www.w3.org/2000/svg">'+t+"</svg>";for(var r=document.createDocumentFragment();i.firstChild.firstChild;)r.appendChild(i.firstChild.firstChild);return r=e(r),this.prepend(r),r},e.fn.rescroll=function(t,e){return this.each(function(){var n=this;if(n.scrollIntoView(!0),t)for(var i=0;n&&0==n.scrollTop&&i++<25;)if((n=n.parentNode)&&n.scrollTop){var r=n.scrollTop+t;return 0!=e&&n.scrollTop+n.getBoundingClientRect().height>=n.scrollHeight?void(n.scrollTop=n.scrollHeight):void(n.scrollTop=r)}}),this},e.components=M,setInterval(function(){t.now(!0);for(var e=M.components,n=0,i=e.length;n<i;n++)e[n].knockknock&&e[n].knockknock(d);EMIT("knockknock",d++)},6e4),h(),e(window).on("resize",h),n.domx={devices:r,findInstance:function(t,e){if(!t.length)return null;for(var n=0;n<t.length;n++)if(t[n][e])return t[n][e];for(var i=t[0].parentElement;null!==i;){if(i[e])return i[e];i=i.parentElement}return null},inDOM:function(t){if(t){if("BODY"===t.nodeName)return!0;for(var e=t.parentNode;e;){if("BODY"===e.nodeName)return!0;e=e.parentNode}}},importscripts:function(n){for(var i,r=-1,s=n,a=[];-1!==(r=n.indexOf("<script",r));){var o=n.indexOf("<\/script>",r+8),d=n.substring(r,o+9);if(r=o+9,o=d.indexOf(">"),(-1===(i=d.substring(0,o)).indexOf("type=")||-1!==i.lastIndexOf("javascript"))&&!d.substring(o+1,d.length-9).trim()){s=s.replace(d,"").trim();var m="external"+t.hashCode(d);statics[m]||(a.push(d),statics[m]=!0)}}return a.length&&e("head").append(a.join("\n")),s},importstyles:function(t,n){var i=[];t=t.replace(s,function(t){return t=t.replace("<style>",'<style type="text/css">'),i.push(t.substring(23,t.length-8).trim()),""});var r="css"+(n||"");return n&&(statics[r]?e("#"+r).remove():statics[r]=!0),i.length&&e("<style"+(n?' id="'+r+'"':"")+">{0}</style>".format(i.join("\n"))).appendTo("head"),t},inputable:function(t){var e=t.tagName||t;return l[e]},keyPress:function(e,n,i){n||(n=300);var r=e.toString(),s=r.length-20;s<0&&(s=0);var a=i||t.hashCode(r.substring(0,20)+"X"+r.substring(s))+"_keypress";t.setTimeout2(a,e,n)},mediaquery:c,mediaWidth:function(t){t||(t=e(Window));var n=t.width(),i=r;return n>=i.md.min&&n<=i.md.max?"md":n>=i.sm.min&&n<=i.sm.max?"sm":n>i.lg.min?"lg":n<=i.xs.max?"xs":""},removescripts:function(t){return t.replace(a,function(t){var e=t.indexOf(">"),n=t.substring(0,e+1);return"<style"===n.substring(0,6)||"<script"===n.substring(0,7)&&-1===n.indexOf('type="')||-1!==n.indexOf('/javascript"')?"":t})},scrollbarWidth:function(){var t="jcscrollbarwidth";if(void 0!==i)return i;var n=document.body;e(n).append('<div id="{0}" style="width{1}height{1}overflow:scroll;position:absolute;top{2}left{2}"></div>'.format(t,":100px;",":9999px;"));var r=document.getElementById(t);return i=r.offsetWidth-r.clientWidth,n.removeChild(r),i},style:function(t,n){n&&e("#css"+n).remove(),e('<style type="text/css"'+(n?' id="css'+n+'"':"")+">"+(t instanceof Array?t.join(""):t)+"</style>").appendTo("head")},watchMedia:function e(n,i,s){if(t.isNumber(n))return m.remove("id",n),!0;if(t.isFunction(i)&&(s=i,i=null),-1!==(n=n.toLowerCase()).indexOf(",")){var a=[];return n.split(",").forEach(function(t){(t=t.trim())&&a.push(e(t,i,s))}),a}var d=r;"md"===n?n="min-width:{0}px and max-width:{1}px".format(d.md.min,d.md.max):"lg"===n?n="min-width:{0}px".format(d.lg.min):"xs"===n?n="max-width:{0}px".format(d.xs.max):"sm"===n&&(n="min-width:{0}px and max-width:{1}px".format(d.sm.min,d.sm.max));var l=n.match(/(max-width|min-width|max-device-width|min-device-width|max-height|min-height|max-device-height|height|width):(\s)\d+(px|em|in)?/gi),c={},h=function(t){var e=parseInt(t.match(/\d+/),10);return t.match(/\d+(em)/)?16*e:t.match(/\d+(in)/)?.010416667*e>>0:e};if(l)for(var f=0,u=l.length;f<u;f++){var p=(v=l[f]).indexOf(":");switch(v.substring(0,p).toLowerCase().trim()){case"min-width":case"min-device-width":case"width":c.minW=h(v);break;case"max-width":case"max-device-width":c.maxW=h(v);break;case"min-height":case"min-device-height":case"height":c.minH=h(v);break;case"max-height":case"max-device-height":c.maxH=h(v)}}if(l=n.match(/orientation:(\s)(landscape|portrait)/gi))for(f=0,u=l.length;f<u;f++){var v;-1!==(v=l[f]).toLowerCase().indexOf("portrait")?c.orientation="portrait":c.orientation="landscape"}return c.id=o++,c.fn=s,i&&(c.element=i),m.push(c),c.id}}});
//# sourceMappingURL=../sourcemaps/utils/domx.js.map
