/**
 * skylark-totaljs-jcomponent - A version of totaljs jcomponent that ported to running on skylarkjs
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylarkui/skylark-totaljs-jcomponent/
 * @license MIT
 */
define(["./jc","./defaults","./langx","./utils","./plugins","./components","./binding","./stores","./views","./others/schedulers","./others/transforms"],function(n,t,e,r,i,o,u,a,c,E,s){var f=r.query,l=r.blocks,T=r.cache,A=r.cookies,d=r.domx;return envs=r.envs,http=r.http,localStorage=r.localStorage,logs=r.logs,W=window,inited=!1,n.globals=function(){if(inited)return W;f.fn.scope=function(){if(!this.length)return null;var n=this[0].$scopedata;if(n)return n;var t=this.closest("["+ATTRSCOPE+"]");return t.length&&(n=t[0].$scopedata)?n:null},f.fn.vbindarray=function(){return d.findinstance(this,"$vbindarray")},f.fn.vbind=function(){return d.findinstance(this,"$vbind")};var n,t=new c.View(document.body,{store:new a.Store({data:W})}),r=t.storing,s=(t.helper,t.composer),p=t.compiler,C=t.eventer;return t.start(),f.components=t.components,e.mixin(W,{isPRIVATEMODE:!1,isMOBILE:/Mobi/.test(navigator.userAgent),isROBOT:!navigator.userAgent||/search|agent|bot|crawler|spider/i.test(navigator.userAgent),isSTANDALONE:navigator.standalone||window.matchMedia("(display-mode: standalone)").matches,isTOUCH:!!("ontouchstart"in window||navigator.maxTouchPoints)}),e.mixin(W,{AJAXCONFIG:http.configure,AJAX:http.ajax,AJAXCACHE:http.ajaxCache,AJAXCACHEREVIEW:http.ajaxCacheReview,clearTimeout2:e.clearTimeout2,CACHE:T.put,CLEARCACHE:T.clear,CLEARSCHEDULE:E.clear,CLONE:e.clone,ENV:envs.variant,COOKIES:A,COPY:e.copy,CSS:d.style,DEF:{},EMPTYARRAY:e.empties.array,EMPTYOBJECT:e.empties.object,GUID:e.guid,HASH:e.hashCode,LCOMPARER:e.localCompare,IMPORTCACHE:http.importCache,IMPORT:http.import,MAKEPARAMS:http.makeParams,MEDIAQUERY:d.watchMedia,NOOP:e.empties.fn,PING:http.ping,READPARAMS:http.parseQuery,REMOVECACHE:T.remove,PARSE:e.parse,setTimeout2:e.setTimeout2,SCHEDULE:E.schedule,SCROLLBARWIDTH:d.scrollbarWidth,SINGLETON:e.singleton,STRINGIFY:e.stringify,STYLE:d.style,UPLOAD:http.upload,UPTODATE:http.uptodate,WAIT:e.wait,WARN:logs.warn,WIDTH:d.mediaWidth,FN:e.arrowFn}),e.mixin(W,{PLUGIN:i.register,PLUGINS:i.registry}),W.ADD=t.add,W.BIND=function(n){return r.bind(n)},W.BLOCKED=l.blocked,W.CACHEPATH=function(n,t,e){return r.cache(n,t,e)},W.CHANGE=function(n,t){return r.change(n.value)},W.CHANGED=function(n){return r.change(n)},W.COMPILE=function(t){return clearTimeout(n),p.compile(t)},W.COMPONENT=o.register,W.COMPONENT_CONFIG=o.configer,W.COMPONENT_EXTEND=o.extend,W.CREATE=function(n){return r.create(n)},W.DEFAULT=function(n,t,e){var i=n.split(/_{2,}/);if(i.length>1){var o=i[1],u=(n=i[0]).indexOf(".*");-1!==u&&(n=n.substring(0,u)),SET(n,new Function("return "+o)(),t>10?t:3,t>10?3:null)}return r.default(i[0],t,null,e)},W.EMIT=function(n){return C.emit.apply(r,arguments)},W.ERRORS=function(n,t,e){return r.errors(n,t,e)},W.EXTEND=function(n,t,e,i){var o=typeof e;return"boolean"===o?r.extend(n,t,e):!e||e<10||"number"!==o?r.extend(n,t,e):(setTimeout(function(){r.extend(n,t,i)},e),W)},W.EXTEND2=function(n,t,e){return W.EXTEND(n,t,e),CHANGE(n),W},W.EVALUATE=function(n,t,e){return r.evaluate(n,t,e)},W.FIND=function(n,t,e,r){return s.find(n,t,e,r)},W.FREE=function(n){return e.setTimeout2("$clean",cleaner,n||10),W},W.GET=function(n,t){return n=pathmaker(n),!0===t&&(t=null,RESET(n,!0)),r.get(n,t)},W.GETR=function(n){return GET(n,!0)},W.INC=function(n,t,e,i){null==t&&(t=1);var o=typeof e;return"boolean"===o?r.inc(n,t,e):!e||e<10||"number"!==o?r.inc(n,t,e):(setTimeout(function(){r.inc(n,t,i)},e),W)},W.INC2=function(n,t,e){return INC(n,t,e),CHANGE(n),W},W.LASTMODIFICATION=W.USAGE=function(n,t,e,r){return s.usage(n,t,e,r)},W.MAKE=function(n,t,e){return r.make(n,t,e)},W.MODIFIED=function(n){return r.modified(n)},W.NOTMODIFIED=function(n,t,e){},W.MODIFY=function(n,t,e){return r.modify(n,t,e),W},W.NOTIFY=function(){return s.notify.apply(s,arguments),W},W.OFF=function(n,t,e){return C.off(n,t,e)},W.ON=function(n,t,e,r,i){return C.on(n,t,e,r,i)},W.OPT=function(n,t){return e.isFunction(n)&&(t=n,n={}),t.call(n,function(t,e){return r.set2(n,t,e)}),n},W.PUSH=function(n,t,e,i){var o=typeof e;return"boolean"===o?r.push(n,t,e):!e||e<10||"number"!==o?r.push(n,t,e):(setTimeout(function(){r.push(n,t,i)},e),W)},W.PUSH2=function(n,t,e){return PUSH(n,t,e),CHANGE(n),W},W.RECOMPILE=function(){n&&clearTimeout(n),n=setTimeout(function(){COMPILE(),n=null},700)},W.REMOVECACHE=T.remove,W.RESET=function(n,t,e){return r.reset(n,t,e)},W.REWRITE=function(n,t,e){return r.rewrite(n,t,e)},W.SET=function(n,t,e,i){var o=typeof e;return"boolean"===o?r.setx(n,t,e):!e||e<10||"number"!==o?r.setx(n,t,e):(setTimeout(function(){r.setx(n,t,i)},e),W)},W.SET2=function(n,t,e){return SET(n,t,e),CHANGE(n),W},W.SETR=function(n,t,e){return r.setx(n,t,e),RESET(n),W},W.SKIP=function(){return r.skip.apply(t,arguments)},W.TOGGLE=function(n,t,e){var r=GET(n);return SET(n,!r,t,e),W},W.TOGGLE2=function(n,t){return TOGGLE(n,t),CHANGE(n),W},W.UNWATCH=function(n,t){return r.unwatch(n,t)},W.UPDATE=function(n,t,e){var i=typeof t;return"boolean"===i?r.update(n,t):!t||t<10||"number"!==i?r.update(n,e,t):void setTimeout(function(){r.update(n,e)},t)},W.UPDATE2=function(n,t){return UPDATE(n,t),CHANGE(n),W},W.UPTODATE=function(n,t,r,i){e.isFunction(t)&&(i=r,r=t,t="");var o=(new Date).add(n);topic.on("knockknock",function(){if(!(o>e.now())&&i&&i()){var n=setTimeout(function(){var n=window.location;t?n.href=t.$env():n.reload(!0)},5e3);r&&r(n)}})},W.VBIND=u.vbind,W.VBINDARRAY=u.vbindArray,W.VALIDATE=function(n,t){return s.validate(n,t)},W.VERSION=o.versions.set,W.WATCH=function(n,t,e){return C.watch(n,t,e)},inited=!0,W}});
//# sourceMappingURL=sourcemaps/globals.js.map
